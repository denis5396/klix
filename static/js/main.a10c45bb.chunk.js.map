{"version":3,"sources":["components/AdminPanel/EditArticle/EditArticle.module.css","components/Article/Article.module.css","components/AdminPanel/AddArticle.module.css","components/EditProfile/EditProfile.module.css","components/HomeSub/HomeSub.module.css","components/comment/Comment.module.css","components/comment/CommentItem.module.css","components/comment/LinkToComment.module.css","components/comment/reportComment/ReportComment.module.css","components/Nav/Nav.module.css","components/HomeMain/HomeMain.module.css","components/HomeMain/HomeMainSub.module.css","components/Article/Popular.module.css","components/UserComment/UserComment.module.css","components/UserInfo/UserInfo.module.css","components/Login/LoginForm.module.css","components/AdminPanel/Articles.module.css","components/ProgressBar/ProgressBar.module.css","components/Article/LinkedPromo.module.css","components/Login/ResetPassword.module.css","components/Article/LinkedArticles.module.css","components/ArticleLink/ArticleLink.module.css","components/comment/CommentType.module.css","components/comment/CommentReply.module.css","components/comment/CommentShow.module.css","components/Footer/Footer.module.css","components/Modal/Modal.module.css","components/Login/Login.module.css","components/comment/CommentRules.module.css","components/Overlay/Overlay.module.css","components/AdminPanel/AdminPanelContainer.module.css","assets/img/gooicon.png","assets/img/powerplant.jpg","firebase/index.js","context/index.js","components/Nav/Nav.js","components/Overlay/Overlay.js","components/Modal/Modal.js","components/ProgressBar/ProgressBar.js","components/AdminPanel/AddArticle.js","components/ArticleLink/ArticleLink.js","components/AdminPanel/EditArticle/EditArticle.js","components/comment/CommentType.js","components/comment/CommentItem.js","components/comment/CommentReply.js","components/comment/CommentShow.js","components/comment/reportComment/ReportComment.js","components/Article/LinkedArticles.js","components/Article/LinkedPromo.js","components/Article/Popular.js","components/Article/Article.js","components/comment/Comment.js","components/HomeMain/HomeMainSub.js","components/HomeMain/HomeMain.js","components/HomeSub/HomeSub.js","pages/Home.js","components/UserComment/UserComment.js","components/UserInfo/UserInfo.js","components/Login/LoginForm.js","components/Login/Login.js","pages/Login.js","components/Footer/Footer.js","components/EditProfile/EditProfile.js","pages/Profile.js","components/AdminPanel/AdminPanelContainer.js","pages/AdminPanel.js","pages/Article.js","pages/EditArticles.js","pages/Comments.js","components/comment/CommentRules.js","pages/CommentRulesPage.js","components/comment/LinkToComment.js","pages/CommentLink.js","pages/ResetPass.js","components/Login/ResetPassword.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","storage","db","database","auth","LoginContext","createContext","token","isLoggedIn","user","uId","displayName","gender","avatarColor","banned","registered","overlay","signUp","time","setUserObj","login","logout","handleOverlay","calculateRemainingTime","expirationTime","currentTime","Date","getTime","retrieveStoredToken","storedToken","localStorage","getItem","storedExpirationDate","remainingTime","removeItem","duration","LoginContextProvider","props","initialToken","tokenData","userObjInitial","useState","JSON","parse","userObj","setToken","curUser","currentUser","userIsLoggedIn","setOverlay","logoutTimer","useRef","useEffect","current","timer","setTimeout","logoutHandler","console","log","setItem","stringify","useCallback","clearTimeout","signOut","LoginContextValue","uid","date","userObjCopy","ref","get","then","snapshot","exists","val","data","onAuthStateChanged","getIdToken","idToken","fetch","method","body","headers","response","json","catch","err","Provider","value","children","Nav","ctx","useContext","id","s","navHeader","logo","to","headerUl","pathname","className","box","bundle","class","style","backgroundColor","color","padding","borderRadius","fontSize","Overlay","onClick","e","target","includes","textContent","handleConfirm","onMouseDown","handleCloseOverlay","navZ","zIndex","React","forwardRef","Modal","modal","handleClick","modalBtns","ProgressBar","progressParent","articleAdded","progress","map","item","progressItem","imageName","progressBar","currentProgress","done","uuid","finished","subcategories","poƒçetna","vijesti","biznis","sport","magazin","lifestyle","scitech","auto","AddArticle","paste","setPaste","location","useLocation","history","useHistory","enter","num","imageArray","setImageArray","imagePreview","setImagePreview","savedNames","setSavedNames","setDeleteMode","tags","setTags","setCurProgress","setArticleAdded","sending","setSending","subcategoriesMap","setSubcategoriesMap","saveSubcat","setSaveSubcat","showSecondList","setShowSecondList","currentList","setCurrentList","lists","setLists","subCatInit","setSubCatInit","setDragIndex","setReplacedIdx","didMountRef","postaviSlikeText","postaviSlikeBorder","textareaRef","imgCnt","tagContainer","titles","captionText","categorySelect","progressRef","sendArticleOverlay","commentsRadio","subcategorySelect","state","articleData","subCategory","alert","strDate","timeDifference","title","sponsored","subTitle","disabled","articleText","listOrder","commentsAllowed","checked","category","toLowerCase","event","Event","bubbles","dispatchEvent","imageText","txtString","forEach","imgTxt","i","length","concat","locationImgArray","blobToFileArray","img","push","url","name","cntr","a","blob","file","File","type","imgPre","handleInsert","mode","selectionStart","selectionEnd","start","found","j","handleSelect","selectFound","handleDeleteImg","contains","old","oldCopy","oldArr","ind","check","oldObj","nameI","handleRemoveTag","splice","checkIfContainsPromo","string","str","trim","seeWhichList","selStart","occurence","previousSibling","allowDrop","preventDefault","imageCaptionTextAttach","strValue","split","finalValue","saveName","window","replaceState","replace","addArticle","addArticleBody","addArticleContent","addTitle","placeholder","onChange","addText","addTextHeader","addTextBody","addTextBodyHeader","focus","document","activeElement","check1","check2","check3","check4","firstPart","slice","secondPart","textareaText","selectedText","substring","bold","curClickedList","tagName","posOfInsertion","onMouseEnter","onMouseLeave","listOl","addTextBodyBody","onKeyDown","slStart","slEnd","enterPosFind","insideList","keyCode","readOnly","startStart","startEnd","listCount","ret","copyTxt1","copyTxt2","copyTxt3","slice2","slice3","newStr","join","k","onPaste","strArr","copyArr","addImages","addImagesHeader","addImagesBundleLeft","addImagesBundleRight","addImagesBody","uploadImageContainer","uploadImageText","uploadImage","accept","multiple","files","fileList","Array","from","previewArray","imgObj","copy","URL","createObjectURL","htmlFor","borderColor","imageContainer","imageWrapper","draggable","onDragStart","dataTransfer","setData","src","dragStart","onDrop","dropInd","drgIdx","replacedIdx","getData","drop","onDragOver","previewImage","deletable","imageCaptionContainer","imageCaptionText","imageCaption","addArticleInfo","author","authorCnt","authorInfo","textTransform","toUpperCase","promoSubTitle","captionTxt","catSel","subcatSel","checkIfPromo","commentChoice","deletedTags","reduce","acc","cur","some","el","articleFinished","images","shares","visited","captTxt","promoId","categoriesNoChange","imgUrls","d","year","getFullYear","month","getMonth","day","getDate","path","progressArray","percent","put","on","bytesTransferred","Math","floor","totalBytes","arr","width","display","error","child","getDownloadURL","indx","getHours","getMinutes","getSeconds","dbRef","promises","changedCat","changedSubCat","newlyAdded","oldTags","find","checker","articlePath","thumbnail","res","Promise","all","reformattedTags","promisesPatch","pos","incr","update","once","set","finalizePromo","patchPromises","subcategory","tag","tagItem","commentBundle","commentItem","defaultChecked","clrs","ArticleLink","articleLink","encodeURI","splitTitle","undefined","articleLinkImage","imageUrl","articleLinkText","articleColors","daysInMonth","difference","transformedDate","curTime","dateDiff","hour","minute","second","monthLower","dateLower","hourLower","minuteLower","secondLower","abs","returnVal","diff","xform","EditArticles","select","setSelect","curSelect","setCurSelect","selectTwo","setSelectTwo","curSelectTwo","setCurSelectTwo","glavni","setGlavni","adding","setAdding","addingModus","setAddingModus","switchingModus","setSwitchingModus","showSubCat","setShowSubCat","setLoading","switching","editing","setEditing","articles","setArticles","clickedPos","setClickedPos","fetchPos","setFetchPos","switchMode","setSwitchMode","switchSelect","selectMainVal","articleFetchCnt","mainContentCnt","subConentCntLeft","subConentCntRight","modalRef","addArticleBox","switchArticleBox","editArticleBox","switchSelect2","articleFetch","setArticleFetch","showModal","setShowModal","fetchArticles","handleSelectChange","handleSelectMain","realData","key","art","isArray","cpy","timeDiff","inc","cp","Object","keys","mainVal","reverse","handleAddFetchedArticle","showAdding","hideAdding","handleConfirmation","newArr","handleModeSwitch","input","dragNum","xferObj","dragPos","place","droppedPos","dragData","extra","allArticlesHeader","defaultValue","label","fetchBtn","allArticlesItems","articleItem","articleFetchItem","flexDirection","addingBundler","articleFetchItemImgCnt","articleItemFetchTitles","articleItemFetchFooter","articleItemFetchBundle","comments","constructor","artItem","button","buttons","handleEditFetchedArticle","editBundler","editArticles","allArticles","allArticlesMain","allArticlesMainBody","allArticlesMainBodyHeader","chooseModeCnt","saveChanges","val1","val2","nextSibling","notBiggerThanFour","articleIds","objKey","articleSubCnt","gridTemplateColumns","subLeft","article","subLeftItem","subLeftItemImg","subLeftItemText","subLeftItemBundle","subLeftBundleRight","addArticleLeft","emptySub","subRight","subRightItem","subRightText","subRightBundle","subRightBundleRight","borderTop","allArticlesMainBodyContent","articleItemSm","articleImgCnt","articleTitles","articleFooter","borderBottom","articleItemBg","articleImageCntBg","articleItemBgHeader","articleItemBgFooter","articleItemBgFooterBundle","addArticleBg","empty","emptyBg","CommentType","postComment","postCommentBundle","postCommentTextarea","userName","arraycom","comment","userId","getComments","commentInfo","commentId","sendData","CommentItem","commentLike","commentDislike","commentIndex","replies","commentLikes","setCommentLikes","commentDislikes","setCommentDislikes","updateLikeDislike","setUpdateLikeDislike","fetching","setFetching","topComment","negativeComment","checkOppositeFn","userIp","handleLikeDislike","opinion","commentIndexDB","cpyObj","userIpNoDot","cpyArr","commentData","setCommentData","deletePath","ip","opacity","commentContainerReply","commentContainer","commentHeader","commentHeaderFirst","commentHeaderSecond","search","parentCommentId","commentBody","commentFooter","like","dislike","reportLikeParent","report","handleReport","comLink","divide","reply","handleReply","CommentReply","commentReplyReplies","commentReply","commentReplyFooter","replyObj","linkPath","setReplyIndex","CommentShow","showCommentReplies","showAll","showReply","showCommentMore","loading","ReportComment","choiceRef","reportContainer","reportHeader","reportBody","reportRadioBtns","bundleRadios","readonly","confirm","closeModal","reportData","inputs","reason","footerNote","LinkedArticles","indL","linkedArticle","linkedArticleSolo","position","LinkedPromo","promoItem","promoImageCnt","promoBody","promoTitles","promoFooter","getLen","comObj","comRepLen","Popular","popularArts","setPopularArts","snap","currArts","firstData","getDateData","sort","b","len","data2","currArts2","initData","resolve","values","popularCnt","popularHeader","xmlns","fill","viewBox","stroke","popularBody","popArt","popularItem","popularItemHeader","popularItemBody","popularItemFooter","itemTime","spanComShare","spanComment","spanShare","catSubCat","Vijesti","Biznis","Sport","Magazin","Lifestyle","Scitech","Auto","scrollFnSticky","getElementsByTagName","navHeight","getComputedStyle","getPropertyValue","sideBarParentMagin","parentElement","getBoundingClientRect","top","ArticleComp","setArticleData","text","setText","linkData","setLinkData","internalLinks","setInternalLinks","clickedSlider","setClickedSlider","zoomedIn","setZoomedIn","moving","setMoving","posOfSlider","setPosOfSlider","grabXPrev","setGrabXPrev","grabYPrev","setGrabYPrev","zoomPos","setZoomPos","counter","setCounter","relatedArticles","setRelatedArticles","promoArticles","setPromoArticles","imageSliderRef","sliderFooterBar","stickLeftSideBar","stickRightSideBar","fullComLength","handlerFn","scrollTo","twttr","widgets","load","instgrm","Embeds","process","addEventListener","removeEventListener","findRelatedTags","orderByKey","limitToLast","indeces","fn","random","promoArr","replyLength","txt","paragraphs","temp","finalParagraphs","inbetweenArray","checkBool","testArr","paragraph","listChecker","configListArr","list","linkEmbedArr","linksArr","tempArr","tempLink","linkThere","linkPos","linkPosEnd","embedLink","embedThere","embedPos","embedPosEnd","listSkipLink","items","externalLink","link","embed","finishedLinks","linkInd","splitArr","external","image","linkText","path2","titleSplit3","titleSplit","titleSplit2","deconstructPathName","keyRep","itemsarr","itemsarrtxt","intLinkThere","imageThere","intLinkIncr","extLinkIncr","arrTemp","listIncr","removeBrAfterInt","textInd","l","it","Fragment","href","rel","height","textBelowImage","ytConfig","maxWidth","margin","listArr","foundLinkVar","foundBoldVar","tempListArr","tempListLinkArr","tempListText","listLink","listLinkFirstIndex","separate","separateurl","separatetxt","zoomOut","transform","zoomIn","zoomInPerBtn","left","cursor","handleSliderControls","openSliderFromThumbnail","index","cat","artId","findLatestThree","dates","filter","artPath","x","y","handleShareFirebase","articleParent","onWheel","sliderMainImgContainer","sliderHeaderBar","slideNumbers","slideZoomExpand","requestFullscreen","fullscreenElement","exitFullscreen","onMouseUp","oneThird","offsetHeight","positionOnElement","clientY","onMouseMove","widthX","heightY","tst1","tst2","clientX","assign","offsetLeft","offsetTop","pos1","pos2","offsetArr","sliderRight","sliderLeft","articleHeader","articleBody","articleSidebarLeft","bundleDiv","postedData","postedDataOne","postedDataTwo","commentsShare","shareArticle","shareUrl","open","encodeURIComponent","user_id","hash_tags","shareurl","articleBodyContent","imageSliderContainer","mainSliderImage","sliderImages","clickForMore","tgs","valObj","handleTagUnderscore","addComment","showComments","linkedArticles","linkedArticlesHeader","linkedArticlesBody","justifyContent","relArt","linkedPromo","linkedPromoHeader","linkedPromoBody","prom","articleSidebarRight","getComLength","fullCommentsLength","getComLengthIfObject","handleReplyHide","replyHideArray","Comment","setComments","replyIndex","setGetComments","safeToProceed","setSafeToProceed","repliesToHide","setRepliesToHide","showMore","setShowMore","reportComment","setReportComment","initRef","pushFinal","pushFinal2","fullCommentsLengthRef","stickLeftSidebar","reverseArr","modifyData","checkForTopComments","showMoreFn","spliceRepliesHide","testingFn","findIndex","dataLength","numberOfShows","toFixed","storeTopCommentsIndx","spliceInd","secondLoopArray","cpyCom","firstTopCom","secondTopCom","commentPageContainer","commentPageContainerHeader","headerBundle","headerShares","commentPageContainerBody","commentSidebarLeft","commentBodyContent","commentBodyHeader","commentBodyHeaderInfo","povratakNaClanak","commentBodyHeaderTypeSignIn","prijavaKorisnika","commentBodyHeaderAlert","comRep","commentSidebarRight","getVisitShare","dbRef2","promises2","dataVisitPath","getPrevDateData","route","promises3","listOfUnder15","dataVisit","dataShares","dataPaths2","promises1","unshift","final","getSidebarData","xd1","dataPaths","dataEdit","promisedData","curr","buildingFinalData","dataJson","visitedDataSort","sharedDataSort","pop","retData","HomeMainSub","first","third","sideBarData","setSidebarData","handleFilterSidebar","sideBar","sideBarControls","sideBarControlItem","itemActive","sideBarContent","sideBarItem","sideBarItemBundle","sideBarItemBundleRight","HomeMain","articlesMain","setArticlesMain","articlePaths","placeHolderArray","subTitleClr","comArr","homeMain","main","mainBox","mainBoxImg","alt","mainBoxHeader","mainBoxFooter","mainBoxFooterBundle","mainBoxBig","HomeSub","promos","setPromos","build","newObj","fin2","sub","sub2","subBodyHeader","subBody","subBodyLeft","subBodyItem","itemImg","itemImgFour","itemText","itemBundle","itemBundleR","subBodyItemsBundle","subBodyBundleItem","itemBundleRight","promoCnt","promoHeader","promo","Home","reload","UserComment","commentFooterF","UserConfig","uData","setUData","spliceArray","contentArray","currentLength","oldCpy","range","comLength","lessThanZero","startAt","endAt","n","userInfoContainer","userInfo","userInfoF","userData","userDataItem","gooProvider","GoogleAuthProvider","fbProvider","FacebookAuthProvider","addScope","LoginForm","errMsg","setErrMsg","emailRef","passwordRef","rememberMe","submitForm","userNameLoginEmail","email","password","returnSecureToken","ok","setPersistence","Auth","Persistence","LOCAL","SESSION","expiresIn","toJSON","toISOString","signInWithEmailAndPassword","userCredential","providerData","refreshToken","code","provider","signInWithPopup","result","credential","providerName","signInMethod","loginForm","onSubmit","fbgoo","fb","goo","require","default","nastavite","username","required","remember","checkmark","LoginP","borderTwo","border","Login","Footer","footer","followUs","cpr","EditProfile","success","setError","repeatPassword","clrUser","match","rgbToHex","click","r","g","toString","padStart","saveInfo","usernameVal","passwordNum","test","clr","genderVal","passwordVal","checkIfUserNameExists","userNameExists","oldObjCopy","updatePassword","editProfileContainer","possibleErrors","editProfileItem","spellCheck","colors","radioField","passwordConfirm","xd","gender2","saveBtn","Profile","AdminPanelContainer","AdminPanel","Article","EditArticlesPage","EditArticle","Comments","CommentRules","commentRulesCnt","commentRulesBody","CommentRulesPage","LinkToComment","commentsLength","repId","urlParam","idFromPath","obj","removeShowMore","commentLinkContainer","commentBodyContentHeader","com","textDecoration","CommentLink","ResetPass","ResetPassword","reset","sendPasswordResetEmail","header","parag","form","inputBundle","App","exact","UserInfo","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","getElementById"],"mappings":"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","file":"static/js/main.a10c45bb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"editArticles\":\"EditArticle_editArticles__1N9zU\",\"allArticlesMainBodyContent\":\"EditArticle_allArticlesMainBodyContent__1M2Oe\",\"articleTitles\":\"EditArticle_articleTitles__hMYMj\",\"articleItemSm\":\"EditArticle_articleItemSm__2sym_\",\"articleItemBg\":\"EditArticle_articleItemBg__23RhP\",\"articleImgCnt\":\"EditArticle_articleImgCnt__DHec4\",\"articleImageCntBg\":\"EditArticle_articleImageCntBg__ww2Mv\",\"articleItemFetchTitles\":\"EditArticle_articleItemFetchTitles__MLGso\",\"editBundler\":\"EditArticle_editBundler__s9JFl\",\"addingBundler\":\"EditArticle_addingBundler__37Y6U\",\"articleFooter\":\"EditArticle_articleFooter__2eIcI\",\"articleItemBgHeader\":\"EditArticle_articleItemBgHeader__2mpz_\",\"articleItemBgFooter\":\"EditArticle_articleItemBgFooter__2LR-F\",\"articleItemBgFooterBundle\":\"EditArticle_articleItemBgFooterBundle__1yrOO\",\"articleSubCnt\":\"EditArticle_articleSubCnt__mLHo7\",\"subLeft\":\"EditArticle_subLeft__3si0I\",\"subLeftItem\":\"EditArticle_subLeftItem__2tKQD\",\"subLeftItemImg\":\"EditArticle_subLeftItemImg__1Q9JG\",\"subLeftItemText\":\"EditArticle_subLeftItemText__3AyKF\",\"subLeftItemBundle\":\"EditArticle_subLeftItemBundle__21Gni\",\"subLeftBundleRight\":\"EditArticle_subLeftBundleRight__2HeS4\",\"subRightBundleRight\":\"EditArticle_subRightBundleRight__1Rvvu\",\"subRight\":\"EditArticle_subRight__YDdyo\",\"subRightItem\":\"EditArticle_subRightItem__1MF3l\",\"subRightText\":\"EditArticle_subRightText__20e11\",\"subRightBundle\":\"EditArticle_subRightBundle__1kibv\",\"allArticlesBody\":\"EditArticle_allArticlesBody__RLm0F\",\"allArticleItem\":\"EditArticle_allArticleItem__-Z4Hi\",\"addArticle\":\"EditArticle_addArticle__3ORhu\",\"addArticleLeft\":\"EditArticle_addArticleLeft__3hum5\",\"addArticleBg\":\"EditArticle_addArticleBg__1wLwd\",\"allArticlesHeader\":\"EditArticle_allArticlesHeader__6vEJs\",\"allArticlesItems\":\"EditArticle_allArticlesItems__2nsnm\",\"articleFetchItem\":\"EditArticle_articleFetchItem__2oQcT\",\"articleFetchItemImgCnt\":\"EditArticle_articleFetchItemImgCnt__20qK7\",\"articleItemFetchFooter\":\"EditArticle_articleItemFetchFooter__2JYbM\",\"articleItemFetchBundle\":\"EditArticle_articleItemFetchBundle__YIeDF\",\"fetchBtn\":\"EditArticle_fetchBtn__18naX\",\"saveChanges\":\"EditArticle_saveChanges__301Ra\",\"chooseModeCnt\":\"EditArticle_chooseModeCnt__2nnff\",\"empty\":\"EditArticle_empty__3w86Y\",\"emptyBg\":\"EditArticle_emptyBg__1WZcG\",\"emptySub\":\"EditArticle_emptySub__3aH44\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"articleParent\":\"Article_articleParent__1_-Oq\",\"articleHeader\":\"Article_articleHeader__1tol4\",\"articleBody\":\"Article_articleBody__1eBLk\",\"articleSidebarLeft\":\"Article_articleSidebarLeft__i5-X4\",\"bundleDiv\":\"Article_bundleDiv___XfdY\",\"articleBodyContent\":\"Article_articleBodyContent__2Nbwn\",\"articleSidebarRight\":\"Article_articleSidebarRight__2HQau\",\"postedData\":\"Article_postedData__r36L3\",\"postedDataTwo\":\"Article_postedDataTwo__3HEvG\",\"commentsShare\":\"Article_commentsShare__2z0YI\",\"comments\":\"Article_comments__3xH9D\",\"shareArticle\":\"Article_shareArticle__3ryig\",\"imageContainer\":\"Article_imageContainer__fUn54\",\"captionTxt\":\"Article_captionTxt__xXuMg\",\"articleText\":\"Article_articleText__2g8tl\",\"tags\":\"Article_tags__ERLsn\",\"addComment\":\"Article_addComment__rZDU9\",\"showComments\":\"Article_showComments__PnNNE\",\"linkedArticlesBody\":\"Article_linkedArticlesBody__29JER\",\"linkedArticlesHeader\":\"Article_linkedArticlesHeader__2ZqxO\",\"linkedPromoHeader\":\"Article_linkedPromoHeader__3eCnl\",\"linkedPromo\":\"Article_linkedPromo__XaJ-e\",\"artTxt\":\"Article_artTxt__1_UE6\",\"artTxtBold\":\"Article_artTxtBold__3oLsM\",\"textBelowImage\":\"Article_textBelowImage__3kDyE\",\"imageSliderContainer\":\"Article_imageSliderContainer__1LJV_\",\"mainSliderImage\":\"Article_mainSliderImage__2OYto\",\"sliderImages\":\"Article_sliderImages__2_4n4\",\"clickForMore\":\"Article_clickForMore__2KeRK\",\"clickedSlider\":\"Article_clickedSlider__2owTV\",\"sliderMainImgContainer\":\"Article_sliderMainImgContainer__2KwoX\",\"sliderHeaderBar\":\"Article_sliderHeaderBar__2C_4B\",\"slideZoomExpand\":\"Article_slideZoomExpand__2WAGB\",\"sliderFooterBar\":\"Article_sliderFooterBar__1Nhf1\",\"slideNumbers\":\"Article_slideNumbers__2nEq2\",\"sliderRight\":\"Article_sliderRight__6PNfh\",\"sliderLeft\":\"Article_sliderLeft__1alWh\",\"ytConfig\":\"Article_ytConfig__XpqCg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addArticle\":\"AddArticle_addArticle__1Pint\",\"addTitle\":\"AddArticle_addTitle__1Dr-P\",\"addArticleBody\":\"AddArticle_addArticleBody__18vce\",\"addText\":\"AddArticle_addText__28Sm9\",\"addImages\":\"AddArticle_addImages___T9Rc\",\"addTextHeader\":\"AddArticle_addTextHeader__1zP61\",\"addImagesHeader\":\"AddArticle_addImagesHeader__2KsVQ\",\"addImagesBundleLeft\":\"AddArticle_addImagesBundleLeft__3sN90\",\"addImagesBundleRight\":\"AddArticle_addImagesBundleRight__2Yosg\",\"addTextBody\":\"AddArticle_addTextBody__1WThD\",\"addTextBodyHeader\":\"AddArticle_addTextBodyHeader__2nJuv\",\"listOl\":\"AddArticle_listOl__7k0uz\",\"imageContainer\":\"AddArticle_imageContainer__2r7am\",\"deletable\":\"AddArticle_deletable__1g7Vr\",\"imageWrapper\":\"AddArticle_imageWrapper__GxsmQ\",\"previewImage\":\"AddArticle_previewImage__1lZ7O\",\"addImagesBody\":\"AddArticle_addImagesBody__2B1JU\",\"uploadImageContainer\":\"AddArticle_uploadImageContainer__1CfsS\",\"imageCaptionContainer\":\"AddArticle_imageCaptionContainer__3r7AA\",\"uploadImageText\":\"AddArticle_uploadImageText__1vIBB\",\"imageCaptionText\":\"AddArticle_imageCaptionText__1qKwT\",\"uploadImage\":\"AddArticle_uploadImage__OoIbw\",\"imageCaption\":\"AddArticle_imageCaption__3AJGo\",\"author\":\"AddArticle_author__K6tXR\",\"authorInfo\":\"AddArticle_authorInfo__3s98h\",\"authorCnt\":\"AddArticle_authorCnt__1VDqz\",\"category\":\"AddArticle_category__2_K-v\",\"tag\":\"AddArticle_tag__2g2XB\",\"tagItem\":\"AddArticle_tagItem__3ysme\",\"tagContainer\":\"AddArticle_tagContainer__oX3bd\",\"commentsAllowed\":\"AddArticle_commentsAllowed__3joov\",\"commentBundle\":\"AddArticle_commentBundle__3eupi\",\"commentItem\":\"AddArticle_commentItem__2XRYX\",\"subcategory\":\"AddArticle_subcategory__2S4x5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"EditProfile_border__m7kmD\",\"editProfileContainer\":\"EditProfile_editProfileContainer__34i5D\",\"editProfileItem\":\"EditProfile_editProfileItem__1BiBT\",\"bundle\":\"EditProfile_bundle__2G3_7\",\"username\":\"EditProfile_username__3ZYc_\",\"colors\":\"EditProfile_colors__131Ma\",\"radioField\":\"EditProfile_radioField__RZI5t\",\"password\":\"EditProfile_password__2DeyI\",\"passwordConfirm\":\"EditProfile_passwordConfirm__3SN9f\",\"gender\":\"EditProfile_gender__1pDAi\",\"gender2\":\"EditProfile_gender2__3DXHi\",\"saveBtn\":\"EditProfile_saveBtn__1MB0Q\",\"possibleErrors\":\"EditProfile_possibleErrors__2hIgt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sub\":\"HomeSub_sub__2TEoo\",\"itemImg\":\"HomeSub_itemImg__3o1UV\",\"subBodyHeader\":\"HomeSub_subBodyHeader__2zZ6U\",\"subBody\":\"HomeSub_subBody__1fiy_\",\"subBodyLeft\":\"HomeSub_subBodyLeft__pVzJJ\",\"subBodyItemsBundle\":\"HomeSub_subBodyItemsBundle__1sh7Q\",\"subBodyItem\":\"HomeSub_subBodyItem__wh5rw\",\"itemText\":\"HomeSub_itemText__2VBOk\",\"itemImgFour\":\"HomeSub_itemImgFour__yAr0E\",\"itemBundle\":\"HomeSub_itemBundle__2a_XD\",\"itemBundleR\":\"HomeSub_itemBundleR__i0AJA\",\"subBodyBundleItem\":\"HomeSub_subBodyBundleItem__2EWGE\",\"itemBundleRight\":\"HomeSub_itemBundleRight__1YlM2\",\"promoCnt\":\"HomeSub_promoCnt__PES26\",\"promoHeader\":\"HomeSub_promoHeader__3ldhJ\",\"promoBody\":\"HomeSub_promoBody__NsLD5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentPageContainer\":\"Comment_commentPageContainer__3XQE-\",\"commentPageContainerHeader\":\"Comment_commentPageContainerHeader__69dyh\",\"headerBundle\":\"Comment_headerBundle__1U8HJ\",\"headerShares\":\"Comment_headerShares__2Ob5H\",\"commentPageContainerBody\":\"Comment_commentPageContainerBody__2-fiK\",\"commentSidebarLeft\":\"Comment_commentSidebarLeft__1vM-s\",\"bundleDiv\":\"Comment_bundleDiv__4fbiL\",\"postedData\":\"Comment_postedData__TQyov\",\"postedDataTwo\":\"Comment_postedDataTwo__3nhNp\",\"commentsShare\":\"Comment_commentsShare__1_y-s\",\"postCommentTextarea\":\"Comment_postCommentTextarea__1_zbU\",\"shareArticle\":\"Comment_shareArticle__3R4YC\",\"commentBodyContent\":\"Comment_commentBodyContent__1G4QM\",\"commentBodyHeaderInfo\":\"Comment_commentBodyHeaderInfo__3ou1U\",\"povratakNaClanak\":\"Comment_povratakNaClanak__26Js3\",\"prijavaKorisnika\":\"Comment_prijavaKorisnika__2as8H\",\"commentBodyHeaderTypeSignIn\":\"Comment_commentBodyHeaderTypeSignIn__2rUd6\",\"commentBodyHeaderAlert\":\"Comment_commentBodyHeaderAlert__oTgfr\",\"postCommentBundle\":\"Comment_postCommentBundle__30VG4\",\"commentBody\":\"Comment_commentBody__3qQ5w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentContainer\":\"CommentItem_commentContainer__3ep8C\",\"commentContainerReply\":\"CommentItem_commentContainerReply__mETek\",\"commentHeader\":\"CommentItem_commentHeader__lP07n\",\"commentHeaderFirst\":\"CommentItem_commentHeaderFirst__1DbO6\",\"commentHeaderSecond\":\"CommentItem_commentHeaderSecond__169IQ\",\"commentBody\":\"CommentItem_commentBody__13nqz\",\"commentFooter\":\"CommentItem_commentFooter__LDr2y\",\"like\":\"CommentItem_like__14jTY\",\"dislike\":\"CommentItem_dislike__Fh6nx\",\"reportLikeParent\":\"CommentItem_reportLikeParent__3SThR\",\"divide\":\"CommentItem_divide__1a9fX\",\"report\":\"CommentItem_report__16Io5\",\"reply\":\"CommentItem_reply__1-FUT\",\"topComment\":\"CommentItem_topComment__3TTwg\",\"negativeComment\":\"CommentItem_negativeComment__1igMr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentLinkContainer\":\"LinkToComment_commentLinkContainer__1A3Co\",\"commentPageContainerHeader\":\"LinkToComment_commentPageContainerHeader__22ZWJ\",\"headerBundle\":\"LinkToComment_headerBundle__2Ia_z\",\"headerShares\":\"LinkToComment_headerShares__1lcTK\",\"commentPageContainerBody\":\"LinkToComment_commentPageContainerBody__3xA0o\",\"commentSidebarLeft\":\"LinkToComment_commentSidebarLeft__29iNi\",\"bundleDiv\":\"LinkToComment_bundleDiv__3_2W6\",\"postedData\":\"LinkToComment_postedData__1VBC_\",\"postedDataTwo\":\"LinkToComment_postedDataTwo__sMY6_\",\"commentsShare\":\"LinkToComment_commentsShare__1Yl6X\",\"shareArticle\":\"LinkToComment_shareArticle__3Ki8n\",\"commentBodyContent\":\"LinkToComment_commentBodyContent__1oHmo\",\"commentBodyContentHeader\":\"LinkToComment_commentBodyContentHeader__yJb8S\",\"povratakNaClanak\":\"LinkToComment_povratakNaClanak__1KANv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reportContainer\":\"ReportComment_reportContainer__3tPhE\",\"reportRadioBtns\":\"ReportComment_reportRadioBtns__30UBP\",\"bundleRadios\":\"ReportComment_bundleRadios__33oUJ\",\"confirm\":\"ReportComment_confirm__2NMuL\",\"footerNote\":\"ReportComment_footerNote__1u9sP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Nav_logo__eGT1n\",\"navHeader\":\"Nav_navHeader__kz4uz\",\"bundle\":\"Nav_bundle__2Hi_W\",\"box\":\"Nav_box__tijUH\",\"headerUl\":\"Nav_headerUl__FKu_b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homeMain\":\"HomeMain_homeMain__1c5Dz\",\"main\":\"HomeMain_main__3xFDk\",\"mainBoxBig\":\"HomeMain_mainBoxBig__3IM8w\",\"mainBox\":\"HomeMain_mainBox__3_qEQ\",\"mainBoxHeader\":\"HomeMain_mainBoxHeader__1b5oQ\",\"mainBoxFooter\":\"HomeMain_mainBoxFooter__1rZ3k\",\"mainBoxFooterBundle\":\"HomeMain_mainBoxFooterBundle__1PBgS\",\"mainBoxImg\":\"HomeMain_mainBoxImg__1DNdc\",\"sideBar\":\"HomeMain_sideBar__SxZrO\",\"sideBarControls\":\"HomeMain_sideBarControls__3bR7b\",\"sideBarControlItem\":\"HomeMain_sideBarControlItem__vB4gs\",\"sideBarContent\":\"HomeMain_sideBarContent__32bU2\",\"sideBarItem\":\"HomeMain_sideBarItem__DhiuP\",\"sideBarItemBundle\":\"HomeMain_sideBarItemBundle__MGyCv\",\"sideBarItemBundleRight\":\"HomeMain_sideBarItemBundleRight__A-zNX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sideBar\":\"HomeMainSub_sideBar__3M4dE\",\"sideBarControls\":\"HomeMainSub_sideBarControls__1ual7\",\"sideBarControlItem\":\"HomeMainSub_sideBarControlItem__ICqAn\",\"itemActive\":\"HomeMainSub_itemActive__30TMJ\",\"sideBarContent\":\"HomeMainSub_sideBarContent__1Yrkz\",\"sideBarItem\":\"HomeMainSub_sideBarItem__3HxYF\",\"sideBarItemBundle\":\"HomeMainSub_sideBarItemBundle__KGUjS\",\"sideBarItemBundleRight\":\"HomeMainSub_sideBarItemBundleRight__IlXpM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popularCnt\":\"Popular_popularCnt__21fyL\",\"popularHeader\":\"Popular_popularHeader__6tLvR\",\"popularItem\":\"Popular_popularItem__3gtjF\",\"popularItemHeader\":\"Popular_popularItemHeader__3gZim\",\"popularItemBody\":\"Popular_popularItemBody__2b0Jp\",\"popularItemFooter\":\"Popular_popularItemFooter__3-Om5\",\"itemTime\":\"Popular_itemTime__XpWi6\",\"spanComShare\":\"Popular_spanComShare__z3Tri\",\"spanShare\":\"Popular_spanShare__1SnNR\",\"spanComment\":\"Popular_spanComment__THqgY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentContainer\":\"UserComment_commentContainer__mOCVT\",\"commentHeader\":\"UserComment_commentHeader__26NZj\",\"commentHeaderFirst\":\"UserComment_commentHeaderFirst__1pa_0\",\"commentHeaderSecond\":\"UserComment_commentHeaderSecond__29A7i\",\"commentBody\":\"UserComment_commentBody__380YP\",\"commentFooter\":\"UserComment_commentFooter__31gc-\",\"like\":\"UserComment_like__51qDR\",\"dislike\":\"UserComment_dislike__1s03A\",\"report\":\"UserComment_report__cKvyb\",\"reply\":\"UserComment_reply__2wSTA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userInfoContainer\":\"UserInfo_userInfoContainer__21zAf\",\"userInfo\":\"UserInfo_userInfo__2V8z1\",\"userInfoF\":\"UserInfo_userInfoF__U2QYJ\",\"userData\":\"UserInfo_userData__3-s6a\",\"userDataItem\":\"UserInfo_userDataItem__1S8zh\",\"commentContainer\":\"UserInfo_commentContainer__1HMp9\",\"comments\":\"UserInfo_comments__1MNmM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginForm\":\"LoginForm_loginForm__226Wf\",\"fbgoo\":\"LoginForm_fbgoo__1LKhf\",\"fb\":\"LoginForm_fb__W6OC_\",\"goo\":\"LoginForm_goo__32aZq\",\"nastavite\":\"LoginForm_nastavite__2SsaO\",\"username\":\"LoginForm_username__gffse\",\"password\":\"LoginForm_password__1wt-s\",\"remember\":\"LoginForm_remember__1LbVK\",\"error\":\"LoginForm_error__1wkod\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"article\":\"Articles_article__2D2dX\",\"textBundle\":\"Articles_textBundle__-OhVj\",\"articleOptionsBundle\":\"Articles_articleOptionsBundle__MKj7r\",\"articleOptions\":\"Articles_articleOptions__3HO9L\",\"editArticle\":\"Articles_editArticle__nm3bT\",\"editArticleItem\":\"Articles_editArticleItem__1NfvT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progressParent\":\"ProgressBar_progressParent__pnVaP\",\"progressItem\":\"ProgressBar_progressItem__eaz92\",\"progressBar\":\"ProgressBar_progressBar__t3Lzb\",\"currentProgress\":\"ProgressBar_currentProgress__21z0_\",\"done\":\"ProgressBar_done__vJLqe\",\"finished\":\"ProgressBar_finished__3qtOS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"promoItem\":\"LinkedPromo_promoItem__2Lu50\",\"promoImageCnt\":\"LinkedPromo_promoImageCnt__3v4jF\",\"promoBody\":\"LinkedPromo_promoBody__2xaj5\",\"promoFooter\":\"LinkedPromo_promoFooter__2JKSx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"ResetPassword_header__3Jilb\",\"parag\":\"ResetPassword_parag__2h7Ml\",\"form\":\"ResetPassword_form__JIYaX\",\"inputBundle\":\"ResetPassword_inputBundle__26Esc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageContainer\":\"LinkedArticles_imageContainer__1m5OA\",\"linkedArticle\":\"LinkedArticles_linkedArticle__5kdV8\",\"linkedArticleSolo\":\"LinkedArticles_linkedArticleSolo__25yac\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"articleLinkImage\":\"ArticleLink_articleLinkImage__tKtk6\",\"articleLink\":\"ArticleLink_articleLink__Jd70I\",\"articleLinkText\":\"ArticleLink_articleLinkText__3N-iv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postCommentTextarea\":\"CommentType_postCommentTextarea__2lemm\",\"postCommentBundle\":\"CommentType_postCommentBundle__O6-fL\",\"postComment\":\"CommentType_postComment__yasYQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentReply\":\"CommentReply_commentReply__3ty_t\",\"commentReplyFooter\":\"CommentReply_commentReplyFooter__3jxjT\",\"commentReplyReplies\":\"CommentReply_commentReplyReplies__1jFXz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"showCommentReplies\":\"CommentShow_showCommentReplies__20HUz\",\"showCommentMore\":\"CommentShow_showCommentMore__1DBIw\",\"showAll\":\"CommentShow_showAll__nfhXw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__25BDU\",\"followUs\":\"Footer_followUs__1DOPk\",\"cpr\":\"Footer_cpr__3kN3H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__24H1s\",\"modalBtns\":\"Modal_modalBtns__36Xur\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"Login_border__Avq0k\",\"borderTwo\":\"Login_borderTwo__2YKuN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentRulesCnt\":\"CommentRules_commentRulesCnt__3Z-tf\",\"commentRulesBody\":\"CommentRules_commentRulesBody__3oqTL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Overlay_overlay__1urC2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"AdminPanelContainer_border__2RyGz\",\"itemContainer\":\"AdminPanelContainer_itemContainer__1Z5qq\",\"addArticle\":\"AdminPanelContainer_addArticle__1v5mA\",\"articles\":\"AdminPanelContainer_articles__c3vDP\"};","export default __webpack_public_path__ + \"static/media/gooicon.35bcce80.png\";","export default __webpack_public_path__ + \"static/media/powerplant.e7b7fee7.jpg\";","import firebase from \"firebase/app\";\r\nimport \"firebase/storage\";\r\nimport \"firebase/database\";\r\nimport \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDDpLMfCuKs4jQJwf_5xsNQ5VuSBPZtIDk\",\r\n  authDomain: \"klix-74c29.firebaseapp.com\",\r\n  databaseURL:\r\n    \"https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"klix-74c29\",\r\n  storageBucket: \"klix-74c29.appspot.com\",\r\n  messagingSenderId: \"121815054131\",\r\n  appId: \"1:121815054131:web:d4fc6a7fc766feb7897046\",\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nconst storage = firebase.storage();\r\nconst db = firebase.database();\r\nconst auth = firebase.auth();\r\n\r\nexport { auth, storage, db, firebase as default };\r\n","import { createContext, useCallback, useState, useEffect, useRef } from \"react\";\r\nimport { auth, db } from \"../firebase\";\r\n\r\nconst LoginContext = createContext({\r\n  token: \"\",\r\n  isLoggedIn: false,\r\n  user: {\r\n    uId: \"\",\r\n    displayName: \"\",\r\n    gender: \"\",\r\n    avatarColor: \"\",\r\n    banned: false,\r\n    registered: \"\",\r\n  },\r\n  overlay: false,\r\n  signUp: (uId, displayName, time) => {},\r\n  setUserObj: () => {},\r\n  login: (token) => {},\r\n  logout: () => {},\r\n  handleOverlay: () => {},\r\n});\r\n\r\nconst calculateRemainingTime = (expirationTime) => {\r\n  const currentTime = new Date().getTime();\r\n  const adjExpirationTime = new Date(expirationTime).getTime();\r\n  const remainingDuration = adjExpirationTime - currentTime;\r\n  // return 5000;\r\n  return remainingDuration;\r\n};\r\n\r\nconst retrieveStoredToken = () => {\r\n  const storedToken = localStorage.getItem(\"token\");\r\n  const storedExpirationDate = localStorage.getItem(\"expirationTime\");\r\n\r\n  const remainingTime = calculateRemainingTime(storedExpirationDate);\r\n\r\n  if (remainingTime <= 60000) {\r\n    //60kms = 1minute\r\n    // 3595000 -> more than 5s\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"expirationTime\");\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    token: storedToken,\r\n    duration: remainingTime,\r\n  };\r\n};\r\n\r\nexport const LoginContextProvider = (props) => {\r\n  const tokenData = retrieveStoredToken();\r\n  // alert(tokenData.token);\r\n  let initialToken;\r\n  if (tokenData) {\r\n    initialToken = tokenData.token;\r\n  }\r\n\r\n  const userObjInitial = {\r\n    uId: \"\",\r\n    displayName: \"\",\r\n    gender: \"Jo≈° niste odabrali\",\r\n    avatarColor: \"c1c1c1\",\r\n    banned: \"Ne\",\r\n    registered: \"\",\r\n  };\r\n  const [userObj, setUserObj] = useState(\r\n    JSON.parse(localStorage.getItem(\"userObj\")) || userObjInitial\r\n  );\r\n  const [token, setToken] = useState(initialToken);\r\n  const curUser = auth.currentUser;\r\n  const userIsLoggedIn =\r\n    (!!token && userObj.displayName) ||\r\n    (localStorage.getItem(\"rememberMe\") && userObj.displayName);\r\n\r\n  const [overlay, setOverlay] = useState(false);\r\n  const logoutTimer = useRef(null);\r\n\r\n  const handleOverlay = () => {\r\n    if (overlay) {\r\n      setOverlay(false);\r\n    } else {\r\n      setOverlay(true);\r\n    }\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   console.log('rerender');\r\n  //   console.log(userObj);\r\n  //   console.log(userIsLoggedIn);\r\n  // });\r\n\r\n  useEffect(() => {\r\n    if (!logoutTimer.current && tokenData) {\r\n      const timer = retrieveStoredToken();\r\n      logoutTimer.current = setTimeout(logoutHandler, timer.duration);\r\n    }\r\n    // auth.onAuthStateChanged((user) => {\r\n    //   if (user) {\r\n    //     const dbRef = db.ref();\r\n    //     dbRef\r\n    //       .child(\"users\")\r\n    //       .get()\r\n    //       .then((snapshot) => {\r\n    //         if (snapshot.exists) {\r\n    //           console.log(snapshot.val());\r\n    //           const data = snapshot.val();\r\n    //           for (let key in data) {\r\n    //             if (data[key].uId === user.uid) {\r\n    //               setUserObj({ ...data[key] });\r\n    //             }\r\n    //           }\r\n    //         }\r\n    //       });\r\n    //   }\r\n    // });\r\n\r\n    // window.addEventListener(\"beforeunload\", () => {\r\n    //   setToken(null);\r\n    //   localStorage.removeItem(\"token\");\r\n    //   localStorage.removeItem(\"expirationTime\");\r\n    //   localStorage.removeItem(\"userObj\");\r\n    //   setUserObj(userObjInitial);\r\n    //   if (logoutTimer) {\r\n    //     clearTimeout(logoutTimer);\r\n    //   }\r\n    // });\r\n    return () => {\r\n      // logoutHandler();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (curUser) {\r\n      // localStorage.setItem('userObj', JSON.stringify(userObj));\r\n      console.log(\"userhere\");\r\n    }\r\n  }, [curUser]);\r\n\r\n  useEffect(() => {\r\n    if (userObj && curUser) {\r\n      console.log(userObj);\r\n      localStorage.setItem(\"userObj\", JSON.stringify(userObj));\r\n    }\r\n  }, [userObj]);\r\n\r\n  const signUp = (uid, displayName, date) => {\r\n    console.log(\"signupstart\");\r\n    const userObjCopy = { ...userObj, displayName, uId: uid };\r\n    const dbRef = db.ref(`/users/${uid}/userData`);\r\n    dbRef\r\n      .get()\r\n      .then((snapshot) => {\r\n        if (snapshot.exists) {\r\n          console.log(\"signupsuccess\");\r\n          console.log(snapshot.val());\r\n          const data = snapshot.val();\r\n          if (data) {\r\n            setUserObj({ ...data }); //for email password always, cuz u can only sign up with fb or google first and then u always go into else. and then when u add a password then user will exist and u just take the data from the db and set it to userobj\r\n          } else {\r\n            setUserObj({ ...userObjCopy, registered: date });\r\n            auth.onAuthStateChanged((user) => {\r\n              if (user) {\r\n                user.getIdToken(true).then((idToken) => {\r\n                  fetch(\r\n                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${uid}/userData.json?auth=${idToken}`,\r\n                    {\r\n                      method: \"PUT\",\r\n                      body: JSON.stringify({\r\n                        ...userObjCopy,\r\n                        registered: date,\r\n                      }),\r\n                      headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                      },\r\n                    }\r\n                  )\r\n                    .then((response) => response.json())\r\n                    .then((data) => console.log(data));\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const logoutHandler = useCallback(() => {\r\n    setToken(null);\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"expirationTime\");\r\n    localStorage.removeItem(\"userObj\");\r\n    localStorage.removeItem(\"rememberMe\");\r\n    setUserObj(userObjInitial);\r\n    if (logoutTimer.current) {\r\n      clearTimeout(logoutTimer.current);\r\n    }\r\n    auth.signOut();\r\n  }, []);\r\n\r\n  const loginHandler = (token, expirationTime) => {\r\n    console.log(\"signin\");\r\n    setToken(token);\r\n    console.log(token);\r\n    localStorage.setItem(\"token\", token);\r\n    localStorage.setItem(\"expirationTime\", expirationTime);\r\n    // sessionStorage.setItem(\"randomkey\", \"randomtxt\");\r\n    // document.cookie = \"cookiename=cookieval\";\r\n\r\n    const remainingTime = calculateRemainingTime(expirationTime);\r\n\r\n    logoutTimer.current = setTimeout(logoutHandler, remainingTime);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (tokenData) {\r\n      console.log(tokenData.duration);\r\n      logoutTimer.current = setTimeout(logoutHandler, tokenData.duration);\r\n    }\r\n  }, [tokenData, logoutHandler]);\r\n\r\n  const LoginContextValue = {\r\n    token,\r\n    isLoggedIn: userIsLoggedIn,\r\n    user: userObj,\r\n    overlay: overlay,\r\n    signUp: signUp,\r\n    setUserObj,\r\n    login: loginHandler,\r\n    logout: logoutHandler,\r\n    handleOverlay,\r\n  };\r\n\r\n  return (\r\n    <LoginContext.Provider value={LoginContextValue}>\r\n      {props.children}\r\n    </LoginContext.Provider>\r\n  );\r\n};\r\n\r\nexport default LoginContext;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoginContext from \"../../context\";\r\nimport s from \"./Nav.module.css\";\r\n\r\nconst Nav = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const isLogged = ctx.isLoggedIn;\r\n\r\n  return (\r\n    <header id={s.navHeader}>\r\n      <div id={s.logo}>\r\n        <Link to=\"/\">\r\n          <h1>plus</h1>\r\n        </Link>\r\n      </div>\r\n      <ul id={s.headerUl}>\r\n        <li>\r\n          <Link to={{ pathname: \"/Vijesti\" }}>\r\n            <span className={s.box}></span>Vijesti\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to={{ pathname: \"/Biznis\" }}>\r\n            <span className={s.box}></span>Biznis\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to={{ pathname: \"/Sport\" }}>\r\n            <span className={s.box}></span>Sport\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to={{ pathname: \"/Magazin\" }}>\r\n            <span className={s.box}></span>Magazin\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to={{ pathname: \"/Lifestyle\" }}>\r\n            <span className={s.box}></span>Lifestyle\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to={{ pathname: \"/Scitech\" }}>\r\n            <span className={s.box}></span>Scitech\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link to={{ pathname: \"/Auto\" }}>\r\n            <span className={s.box}></span>Auto\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <span className={s.box}></span>Forum\r\n        </li>\r\n      </ul>\r\n      <div id={s.bundle}>\r\n        <i class=\"fas fa-search\"></i>\r\n        <Link\r\n          to={\r\n            ctx.user.displayName ? `/profil/${ctx.user.displayName}` : \"/login\"\r\n          }\r\n        >\r\n          {!ctx.isLoggedIn && <i class=\"far fa-user\"></i>}\r\n\r\n          {ctx.isLoggedIn && (\r\n            <i\r\n              class=\"fas fa-user\"\r\n              style={{\r\n                backgroundColor: `#${ctx.user.avatarColor}`,\r\n                color: \"#fff\",\r\n                padding: \".7rem\",\r\n                borderRadius: \".3rem\",\r\n                fontSize: \"1.3rem\",\r\n              }}\r\n            ></i>\r\n          )}\r\n        </Link>\r\n        <i class=\"fas fa-bars\"></i>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Nav;\r\n","import React, {\r\n  forwardRef,\r\n  useContext,\r\n  useEffect,\r\n  useImperativeHandle,\r\n  useState,\r\n} from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport LoginContext from \"../../context\";\r\nimport s from \"./Overlay.module.css\";\r\n\r\nconst Overlay = (props, ref) => {\r\n  const ctx = useContext(LoginContext);\r\n  const handleClick = (e) => {\r\n    const id = e.target.id;\r\n    if (\r\n      (ctx.overlay && id.includes(\"overlay\")) ||\r\n      (ctx.overlay && e.target.textContent === \"Ne\")\r\n    ) {\r\n      ctx.handleOverlay();\r\n    } else if (ctx.overlay && e.target.textContent === \"Da\") {\r\n      props.handleConfirm();\r\n      ctx.handleOverlay();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // return () => {\r\n    //   alert('d');\r\n    //   setHide(false);\r\n    // };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      id={s.overlay}\r\n      onClick={handleClick}\r\n      ref={ref}\r\n      onMouseDown={props.handleCloseOverlay}\r\n      style={\r\n        props.navZ && {\r\n          zIndex: 1,\r\n        }\r\n      }\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.forwardRef(Overlay);\r\n","import React from 'react';\r\n\r\nimport s from './Modal.module.css';\r\n\r\nconst Modal = (props, ref) => {\r\n  return (\r\n    <div id={s.modal} ref={ref} onClick={props.handleClick}>\r\n      <div>Da li ste sigurni?</div>\r\n      <div id={s.modalBtns}>\r\n        <button>Da</button>\r\n        <button>Ne</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.forwardRef(Modal);\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport s from \"./ProgressBar.module.css\";\r\n\r\nconst ProgressBar = (props, ref) => {\r\n  return (\r\n    <div id={s.progressParent} ref={ref}>\r\n      {!props.articleAdded &&\r\n        props.progress.map((item) => {\r\n          return (\r\n            <div className={s.progressItem} key={uuid()}>\r\n              <div>\r\n                <h3>{item.imageName}</h3>\r\n              </div>\r\n              <div className={s.progressBar}>\r\n                <div\r\n                  className={s.currentProgress}\r\n                  // style={{ width: `${item.percent}%` }}\r\n                ></div>\r\n              </div>\r\n              <div className={s.done}>\r\n                <i class=\"fas fa-check\"></i>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      {props.articleAdded && (\r\n        <div id={s.finished}>\r\n          <h3>ƒålanak je uspje≈°no postavljen u bazu podataka.</h3>\r\n          <button>Ok</button>\r\n        </div>\r\n      )}\r\n\r\n      {/* <div className={s.progressItem}>\r\n        <div>\r\n          <h3>TITLE</h3>\r\n        </div>\r\n        <div className={s.progressBar}>\r\n          <div className={s.currentProgress}></div>\r\n        </div>\r\n      </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.forwardRef(ProgressBar);\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport parse from \"html-react-parser\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport s from \"./AddArticle.module.css\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport LoginContext from \"../../context\";\r\nimport { auth, db, storage } from \"../../firebase\";\r\nimport ProgressBar from \"../ProgressBar/ProgressBar\";\r\nimport {\r\n  useHistory,\r\n  useLocation,\r\n} from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { timeDifference } from \"./EditArticle/EditArticle\";\r\n\r\nexport const subcategories = {\r\n  poƒçetna: [\r\n    \"Vijesti\",\r\n    \"Biznis\",\r\n    \"Sport\",\r\n    \"Magazin\",\r\n    \"Lifestyle\",\r\n    \"Auto\",\r\n    \"Scitech\",\r\n  ],\r\n  vijesti: [\r\n    \"BiH\",\r\n    \"Regija\",\r\n    \"Svijet\",\r\n    \"Dijaspora\",\r\n    \"Crna hronika\",\r\n    \"Humanitarne akcije\",\r\n  ],\r\n  biznis: [\r\n    \"Privreda\",\r\n    \"Finansije\",\r\n    \"Investicije\",\r\n    \"Smart Cash\",\r\n    \"Berza\",\r\n    \"Startupi\",\r\n    \"Posao\",\r\n  ],\r\n  sport: [\r\n    \"Nogomet\",\r\n    \"Ko≈°arka\",\r\n    \"Tenis\",\r\n    \"Rukomet\",\r\n    \"Formula 1\",\r\n    \"Skijanje\",\r\n    \"Atletika\",\r\n    \"Borilaƒçki sportovi\",\r\n    \"Plivanje\",\r\n  ],\r\n  magazin: [\"Kultura\", \"Muzika\", \"Film/TV\", \"Showbiz\", \"Zanimljivosti\"],\r\n  lifestyle: [\r\n    \"Moda i ljepota\",\r\n    \"Zdravlje\",\r\n    \"Veze i seks\",\r\n    \"Gastro\",\r\n    \"Kuƒáa i ured\",\r\n    \"Putovanja\",\r\n    \"Bebe\",\r\n    \"Fitness\",\r\n    \"Ljubimci\",\r\n  ],\r\n  scitech: [\"Nauka\", \"Tehnologija\"],\r\n  auto: [\"Testovi\", \"Noviteti\", \"Koncepti\", \"Tuning\"],\r\n};\r\n\r\nconst AddArticle = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const [paste, setPaste] = useState(false);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [embed, setEmbed] = useState(false);\r\n  const [selStart, setSelStart] = useState({\r\n    enter: false,\r\n    num: 0,\r\n  });\r\n  const [imageArray, setImageArray] = useState([]);\r\n  const [imagePreview, setImagePreview] = useState({});\r\n  const [savedNames, setSavedNames] = useState([]);\r\n  const [deleteMode, setDeleteMode] = useState(false);\r\n  const [tags, setTags] = useState([]);\r\n  const [progress, setCurProgress] = useState([]);\r\n  const [articleAdded, setArticleAdded] = useState(false);\r\n  const [sending, setSending] = useState(false);\r\n  const [subcategoriesMap, setSubcategoriesMap] = useState([]);\r\n  const [saveSubcat, setSaveSubcat] = useState(\"BiH\");\r\n  const [showSecondList, setShowSecondList] = useState(false);\r\n  const [currentList, setCurrentList] = useState(\"ul\");\r\n  const [lists, setLists] = useState([]);\r\n  const [subCatInit, setSubCatInit] = useState(false);\r\n\r\n  //dragging\r\n  const [dragIndex, setDragIndex] = useState(0);\r\n  const [replacedIdx, setReplacedIdx] = useState(0);\r\n  const [clone, setClone] = useState(null);\r\n  const [storeRef, setStoreRef] = useState(null);\r\n  const [drag, setDrag] = useState(false);\r\n\r\n  const didMountRef = useRef(false);\r\n  const postaviSlikeText = useRef();\r\n  const postaviSlikeBorder = useRef();\r\n  const textareaRef = useRef();\r\n  const imgCnt = useRef();\r\n  const overlayRef = useRef();\r\n  const tagContainer = useRef();\r\n  const titles = useRef();\r\n  const captionText = useRef();\r\n  const categorySelect = useRef();\r\n  const progressRef = useRef();\r\n  const sendArticleOverlay = useRef();\r\n  const commentsRadio = useRef();\r\n  const subcategorySelect = useRef();\r\n  const isPromo = useRef();\r\n\r\n  useEffect(() => {\r\n    console.log(progress);\r\n  }, [progress]);\r\n\r\n  useEffect(() => {}, []);\r\n  useEffect(() => {\r\n    if (subCatInit) {\r\n      setSaveSubcat(location.state.articleData.subCategory);\r\n      setSubCatInit(false);\r\n    }\r\n    console.log(subcategoriesMap);\r\n    console.log(didMountRef.current);\r\n  }, [subcategoriesMap, subCatInit]);\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n      alert(\"locationhere\");\r\n      console.log(location);\r\n      const { articleData } = location.state;\r\n      const strDate = timeDifference(articleData.date);\r\n      console.log(strDate);\r\n      titles.current.children[0].value = articleData.title;\r\n      titles.current.children[1].value =\r\n        articleData.sponsored && articleData.subTitle !== \"PROMO\"\r\n          ? `PROMO ${articleData.subTitle}`\r\n          : articleData.sponsored && articleData.subTitle === \"PROMO\"\r\n          ? \"PROMO\"\r\n          : articleData.subTitle;\r\n      if (articleData.sponsored) {\r\n        commentsRadio.current.children[0].children[1].disabled = true;\r\n        commentsRadio.current.children[1].children[1].disabled = true;\r\n      }\r\n      textareaRef.current.value = articleData.articleText;\r\n      if (articleData.tags) {\r\n        setTags([...articleData.tags]);\r\n      }\r\n      if (articleData.listOrder) {\r\n        setLists([...articleData.listOrder]);\r\n      }\r\n      if (articleData.commentsAllowed === \"Da\") {\r\n        commentsRadio.current.children[0].children[1].checked = true;\r\n      } else {\r\n        commentsRadio.current.children[1].children[1].checked = true;\r\n      }\r\n      console.log(subcategories[articleData.category.toLowerCase()]);\r\n      console.log(articleData.subCategory);\r\n      categorySelect.current.value = articleData.category;\r\n      const event = new Event(\"change\", { bubbles: true });\r\n      categorySelect.current.dispatchEvent(event);\r\n      setSubCatInit(true); //init subcategory in select when first loading an art which we want to edit\r\n      if (typeof articleData.imageText === \"string\") {\r\n        captionText.current.value = articleData.imageText;\r\n      } else {\r\n        let txtString = \"\";\r\n        articleData.imageText.forEach((imgTxt, i) => {\r\n          if (i !== articleData.imageText.length - 1) {\r\n            txtString = txtString.concat(`${imgTxt[1]} || `);\r\n          } else {\r\n            txtString = txtString.concat(`${imgTxt[1]}`);\r\n          }\r\n        });\r\n        captionText.current.value = txtString;\r\n      }\r\n      const locationImgArray = [];\r\n      let blobToFileArray = [];\r\n      articleData.imageText.forEach((img, i) => {\r\n        locationImgArray.push({\r\n          url: img[0],\r\n          checked: \"false\",\r\n          name: img[2] ? img[2] : `random${i}`,\r\n        });\r\n      });\r\n      for (let i = 0; i < locationImgArray.length; i++) {\r\n        // fetch(locationImgArray[i].url)\r\n        //   .then((response) => response.blob())\r\n        //   .then((blob) => {\r\n        //     const file = new File([blob], locationImgArray[i].name, {\r\n        //       type: blob.type,\r\n        //     });\r\n        //     blobToFileArray[i] = file;\r\n        //     // blobToFileArray.push(file);\r\n        //     if (i === locationImgArray.length - 1) {\r\n        //       setImageArray([...blobToFileArray]);\r\n        //       console.log(blobToFileArray);\r\n        //     }\r\n        //   });\r\n        (async function (cntr) {\r\n          const response = await fetch(locationImgArray[cntr].url);\r\n          const blob = await response.blob();\r\n          const file = new File([blob], locationImgArray[cntr].name, {\r\n            type: blob.type,\r\n          });\r\n          blobToFileArray[cntr] = file;\r\n          if (cntr === locationImgArray.length - 1) {\r\n            setImageArray(blobToFileArray);\r\n          }\r\n        })(i);\r\n      }\r\n      locationImgArray.forEach((imgPre, i) => {\r\n        // (async function () {\r\n        //   const response = await fetch(imgPre.url);\r\n        //   const blob = await response.blob();\r\n        //   const file = new File([blob], imgPre.name, { type: blob.type });\r\n        //   blobToFileArray.push(file);\r\n        //   if (i === locationImgArray.length - 1) {\r\n        //     setImageArray(blobToFileArray);\r\n        //   }\r\n        // })();\r\n      });\r\n      setImagePreview([...locationImgArray]);\r\n    }\r\n  }, [location]);\r\n\r\n  const handleHoverEnter = () => {\r\n    postaviSlikeBorder.current.style.borderColor = \"#3f87e5\";\r\n  };\r\n\r\n  const handleHoverLeave = () => {\r\n    postaviSlikeBorder.current.style.borderColor = \"#d8dee4\";\r\n  };\r\n\r\n  //inserting a diff tag into a tag\r\n\r\n  const handleInsert = (mode) => {\r\n    const selectionStart = textareaRef.current.selectionStart;\r\n    const selectionEnd = textareaRef.current.selectionEnd;\r\n    const { value } = textareaRef.current;\r\n    let start = 0;\r\n    switch (mode) {\r\n      case \"bold\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 3\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"list\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            selectionStart >= start + 6 &&\r\n            selectionStart <= i\r\n          ) {\r\n            let found = 0;\r\n            for (let j = start + 6; j < i; j++) {\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"b\" &&\r\n                value[j + 2] === \">\"\r\n              ) {\r\n                found = j + 1;\r\n              } else if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"/\" &&\r\n                value[j + 2] === \"b\" &&\r\n                value[j + 3] === \">\" &&\r\n                selectionStart >= found &&\r\n                selectionStart <= j + 3\r\n              ) {\r\n                return \"dontAllow\";\r\n              }\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"l\" &&\r\n                value[j + 2] === \"i\" &&\r\n                value[j + 3] === \"n\" &&\r\n                value[j + 4] === \"k\" &&\r\n                value[j + 5] === \">\"\r\n              ) {\r\n                found = j + 1;\r\n              } else if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"/\" &&\r\n                value[j + 2] === \"l\" &&\r\n                value[j + 3] === \"i\" &&\r\n                value[j + 4] === \"n\" &&\r\n                value[j + 5] === \"k\" &&\r\n                value[j + 6] === \">\" &&\r\n                selectionStart >= found &&\r\n                selectionStart <= j + 6\r\n              ) {\r\n                return \"dontAllow\";\r\n              }\r\n            }\r\n            return \"betweenTags\";\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 6\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"embed\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 7\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"link\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 6\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleSelect = (mode) => {\r\n    const selectionStart = textareaRef.current.selectionStart;\r\n    const selectionEnd = textareaRef.current.selectionEnd;\r\n    const { value } = textareaRef.current;\r\n    let start = 0;\r\n    //either selStart starts between the tags OR selEnd no other case\r\n    switch (mode) {\r\n      case \"bold\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"b\" &&\r\n              value[i + 3] === \">\" &&\r\n              selectionStart >= start &&\r\n              selectionStart <= i + 3) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"b\" &&\r\n              value[i + 3] === \">\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 4) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"b\" &&\r\n              value[i + 3] === \">\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 4)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"list\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            selectionStart >= start + 6 &&\r\n            selectionEnd <= i\r\n          ) {\r\n            let selectFound = 0;\r\n            for (let j = start + 7; j < i; j++) {\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"b\" &&\r\n                value[j + 2] === \">\"\r\n              ) {\r\n                selectFound = j;\r\n              } else if (\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"b\" &&\r\n                  value[j + 3] === \">\" &&\r\n                  selectionStart >= selectFound &&\r\n                  selectionStart <= j + 3) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"b\" &&\r\n                  value[j + 3] === \">\" &&\r\n                  selectionEnd >= selectFound + 1 &&\r\n                  selectionEnd <= j + 4) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"b\" &&\r\n                  value[j + 3] === \">\" &&\r\n                  selectionStart < selectFound &&\r\n                  selectionEnd > j + 4)\r\n              ) {\r\n                return \"notAllowed\";\r\n              }\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"l\" &&\r\n                value[j + 2] === \"i\" &&\r\n                value[j + 3] === \"n\" &&\r\n                value[j + 4] === \"k\" &&\r\n                value[j + 5] === \">\"\r\n              ) {\r\n                selectFound = j;\r\n              } else if (\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"l\" &&\r\n                  value[j + 3] === \"i\" &&\r\n                  value[j + 4] === \"n\" &&\r\n                  value[j + 5] === \"k\" &&\r\n                  value[j + 6] === \">\" &&\r\n                  selectionStart >= selectFound &&\r\n                  selectionStart <= j + 6) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"l\" &&\r\n                  value[j + 3] === \"i\" &&\r\n                  value[j + 4] === \"n\" &&\r\n                  value[j + 5] === \"k\" &&\r\n                  value[j + 6] === \">\" &&\r\n                  selectionEnd >= selectFound + 1 &&\r\n                  selectionEnd <= j + 7) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"l\" &&\r\n                  value[j + 3] === \"i\" &&\r\n                  value[j + 4] === \"n\" &&\r\n                  value[j + 5] === \"k\" &&\r\n                  value[j + 6] === \">\" &&\r\n                  selectionStart < selectFound &&\r\n                  selectionEnd > j + 7)\r\n              ) {\r\n                return \"notAllowed\";\r\n              }\r\n            }\r\n            return \"betweenTagsSelect\";\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"s\" &&\r\n              value[i + 5] === \"t\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart >= start &&\r\n              selectionStart <= i + 6) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"s\" &&\r\n              value[i + 5] === \"t\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 7) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"s\" &&\r\n              value[i + 5] === \"t\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 7)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"embed\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"e\" &&\r\n              value[i + 3] === \"m\" &&\r\n              value[i + 4] === \"b\" &&\r\n              selectionStart >= start + 1 &&\r\n              selectionStart <= i + 7) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"e\" &&\r\n              value[i + 3] === \"m\" &&\r\n              value[i + 4] === \"b\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 8) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"e\" &&\r\n              value[i + 3] === \"m\" &&\r\n              value[i + 4] === \"b\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 8)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"link\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"n\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart >= start + 1 &&\r\n              selectionStart <= i + 6) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"n\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 7) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"n\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 7)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleBold = (e) => {\r\n    // e = e || window.event;\r\n    // e.preventDefault();\r\n    // const str = textareaRef.current.getSelection().toString();\r\n    // alert(typeof str);\r\n    // const result = str.bold();\r\n    // textareaRef.current.value = result;\r\n    e.preventDefault(); //fixes glitchy movement behaviour in the textarea when u click on any insert tag btn\r\n    console.log(textareaRef.current.selectionStart);\r\n    console.log(textareaRef.current.selectionEnd);\r\n    console.log(textareaRef.current.focus);\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleInsert(\"bold\");\r\n      const check2 = handleInsert(\"embed\");\r\n      const check3 = handleInsert(\"link\");\r\n      const check4 = handleInsert(\"list\");\r\n      console.log(check1);\r\n      console.log(check2);\r\n      console.log(check3);\r\n      console.log(check4);\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTags\"\r\n      ) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<b></b>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 3;\r\n      }\r\n    } else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTagsSelect\"\r\n      ) {\r\n        const selectionStart = textareaRef.current.selectionStart;\r\n        const selectionEnd = textareaRef.current.selectionEnd;\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = selectedText.bold();\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 3;\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (lists && lists.length > 0) {\r\n      console.log(lists);\r\n    }\r\n  }, [lists]);\r\n\r\n  const handleList = (e) => {\r\n    e.preventDefault();\r\n    let curClickedList = \"\";\r\n    if (e.target.tagName === \"I\") {\r\n      if (e.target.className.includes(\"ul\")) {\r\n        curClickedList = \"ul\";\r\n      } else {\r\n        curClickedList = \"ol\";\r\n      }\r\n    } else if (e.target.id.includes(\"listOl\")) {\r\n      if (e.target.children[0].className.includes(\"ul\")) {\r\n        curClickedList = \"ul\";\r\n      } else {\r\n        curClickedList = \"ol\";\r\n      }\r\n    } else if (e.target.tagName === \"LI\") {\r\n      if (e.target.children[0].className.includes(\"ul\")) {\r\n        curClickedList = \"ul\";\r\n      } else {\r\n        curClickedList = \"ol\";\r\n      }\r\n    }\r\n    const posOfInsertion = seeWhichList(\r\n      textareaRef.current.value,\r\n      \"adding\",\r\n      textareaRef.current.selectionStart\r\n    );\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      // alert(posOfInsertion);\r\n      const check1 = handleInsert(\"bold\");\r\n      const check2 = handleInsert(\"embed\");\r\n      const check3 = handleInsert(\"link\");\r\n      const check4 = handleInsert(\"list\");\r\n      if (!check1 && !check2 && !check3 && !check4) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<list></list>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 6;\r\n        setLists((old) => {\r\n          console.log(e.target);\r\n          // if (e.target.tagName === \"I\") {\r\n          //   alert(e.target.className);\r\n          // } else if (e.target.id.includes(\"listOl\")) {\r\n          //   alert(e.target.children[0].className);\r\n          // }\r\n          let oldArr = [...old];\r\n          // alert(currentList);\r\n          // alert(typeof currentList);\r\n          // oldArr.push(curClickedList);\r\n          console.log(oldArr);\r\n          oldArr.splice(posOfInsertion, 0, curClickedList);\r\n          console.log(oldArr);\r\n          return oldArr;\r\n        });\r\n      }\r\n    } else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (!check1 && !check2 && !check3 && !check4) {\r\n        const selectionStart = textareaRef.current.selectionStart;\r\n        const selectionEnd = textareaRef.current.selectionEnd;\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = `<list>${selectedText}</list>`;\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 6;\r\n        setLists((old) => {\r\n          console.log(e.target);\r\n          let oldArr = [...old];\r\n          oldArr.splice(posOfInsertion, 0, curClickedList);\r\n          return oldArr;\r\n        });\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEmbed = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      const check = handleInsert(\"bold\");\r\n      const check1 = handleInsert(\"embed\");\r\n      const check2 = handleInsert(\"link\");\r\n      const check3 = handleInsert(\"list\");\r\n      if (!check && !check1 && !check2 && !check3) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<embed></embed>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 7;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check || check1 || check2 || check3) {\r\n        alert(\"hey\");\r\n        // alert(`check1${check1}`);\r\n        // alert(`check2${check2}`);\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n        }, 1);\r\n      }\r\n    } //NOW SELECTING\r\n    else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const selectionStart = textareaRef.current.selectionStart;\r\n      const selectionEnd = textareaRef.current.selectionEnd;\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (!check1 && !check2 && !check3 && !check4) {\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = `<embed>${selectedText}</embed>`;\r\n        console.log(selectedText);\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 7;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = selectionStart;\r\n        }, 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLink = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleInsert(\"bold\");\r\n      const check2 = handleInsert(\"embed\");\r\n      const check3 = handleInsert(\"link\");\r\n      const check4 = handleInsert(\"list\");\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTags\"\r\n      ) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<link></link>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 6;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n        }, 1);\r\n      }\r\n    } else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTagsSelect\"\r\n      ) {\r\n        const selectionStart = textareaRef.current.selectionStart;\r\n        const selectionEnd = textareaRef.current.selectionEnd;\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = `<link>${selectedText}</link>`;\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 6;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n        }, 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEnter = (e) => {\r\n    // console.log(e.target.value);\r\n    // console.log(e.target.value.split(''));\r\n    const { value } = textareaRef.current;\r\n    const slStart = textareaRef.current.selectionStart;\r\n    const slEnd = textareaRef.current.selectionEnd;\r\n    let enterPosFind = null;\r\n    let insideList = false;\r\n    let enterPos = 0;\r\n    if (e.keyCode === 13) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          !insideList\r\n        ) {\r\n          enterPosFind = i;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\"\r\n        ) {\r\n          if (slStart <= i + 3 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n        }\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\"\r\n        ) {\r\n          enterPosFind = i;\r\n          insideList = true;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\"\r\n        ) {\r\n          if (slStart <= i + 6 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n          insideList = false;\r\n        }\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\"\r\n        ) {\r\n          enterPosFind = i;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\"\r\n        ) {\r\n          if (slStart <= i + 7 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n        }\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          !insideList\r\n          //handle link/b tags inside list\r\n        ) {\r\n          enterPosFind = i;\r\n          insideList = true;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\"\r\n        ) {\r\n          if (slStart <= i + 6 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n          insideList = false;\r\n        }\r\n      }\r\n    }\r\n    if (\r\n      e.keyCode !== 46 &&\r\n      e.keyCode !== 37 &&\r\n      e.keyCode !== 38 &&\r\n      e.keyCode !== 39 &&\r\n      e.keyCode !== 40 &&\r\n      e.keyCode !== 35 &&\r\n      e.keyCode !== 36\r\n    ) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\" &&\r\n            slStart < [i + 3] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            value[i + 3] === \">\" &&\r\n            slStart < [i + 4] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart < [i + 6] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart < [i + 7] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\" &&\r\n            value[i + 4] === \"e\" &&\r\n            value[i + 5] === \"d\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart < [i + 7] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            value[i + 3] === \"m\" &&\r\n            value[i + 4] === \"b\" &&\r\n            value[i + 5] === \"e\" &&\r\n            value[i + 6] === \"d\" &&\r\n            value[i + 7] === \">\" &&\r\n            slStart < [i + 8] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart < [i + 6] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart < [i + 7] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        }\r\n      }\r\n    } else if (e.keyCode === 46) {\r\n      let startStart = 0;\r\n      let startEnd = 0;\r\n      let listCount = 0;\r\n      let num = undefined;\r\n      let endStart = 0;\r\n      let endEnd = 0;\r\n      const ret = seeWhichList(value, \"deleting\", slStart);\r\n      console.log(ret);\r\n      alert(ret);\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            value[i + 3] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\" &&\r\n            value[i + 4] === \"e\" &&\r\n            value[i + 5] === \"d\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            value[i + 3] === \"m\" &&\r\n            value[i + 4] === \"b\" &&\r\n            value[i + 5] === \"e\" &&\r\n            value[i + 6] === \"d\" &&\r\n            value[i + 7] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slStart < [i + 3] &&\r\n          slStart >= [i]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"b\" &&\r\n              value[j + 3] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 4);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slStart < [i + 4] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"b\" &&\r\n              value[j + 2] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 3, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 4);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart < [i + 7] &&\r\n          slStart >= [i]\r\n          // (value[i] === '<' &&\r\n          //   value[i + 1] === '/' &&\r\n          //   value[i + 2] === 'e' &&\r\n          //   value[i + 3] === 'm' &&\r\n          //   value[i + 4] === 'b' &&\r\n          //   value[i + 5] === 'e' &&\r\n          //   value[i + 6] === 'd' &&\r\n          //   value[i + 7] === '>' &&\r\n          //   slStart < [i + 8] &&\r\n          //   slStart >= [i + 1])\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 7;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"e\" &&\r\n              value[j + 3] === \"m\" &&\r\n              value[j + 4] === \"b\" &&\r\n              value[j + 5] === \"e\" &&\r\n              value[j + 6] === \"d\" &&\r\n              value[j + 7] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 8);\r\n              // console.log(slice);\r\n              // console.log(slice2);\r\n              // console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slStart < [i + 8] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"e\" &&\r\n              value[j + 2] === \"m\" &&\r\n              value[j + 3] === \"b\" &&\r\n              value[j + 4] === \"e\" &&\r\n              value[j + 5] === \"d\" &&\r\n              value[j + 6] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 7, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 8);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart < [i + 6] &&\r\n          slStart >= [i]\r\n          // (value[i] === '<' &&\r\n          //   value[i + 1] === '/' &&\r\n          //   value[i + 2] === 'l' &&\r\n          //   value[i + 3] === 'i' &&\r\n          //   value[i + 4] === 'n' &&\r\n          //   value[i + 5] === 'k' &&\r\n          //   value[i + 6] === '>' &&\r\n          //   slStart < [i + 7] &&\r\n          //   slStart >= [i + 1])\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 6;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"l\" &&\r\n              value[j + 3] === \"i\" &&\r\n              value[j + 4] === \"n\" &&\r\n              value[j + 5] === \"k\" &&\r\n              value[j + 6] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 7);\r\n              // console.log(slice);\r\n              // console.log(slice2);\r\n              // console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart < [i + 7] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"l\" &&\r\n              value[j + 2] === \"i\" &&\r\n              value[j + 3] === \"n\" &&\r\n              value[j + 4] === \"k\" &&\r\n              value[j + 5] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 6, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 7);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart < [i + 6] &&\r\n          slStart >= [i]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 6;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let k = 0; k < i; k++) {\r\n            if (\r\n              value[k] === \"<\" &&\r\n              value[k + 1] === \"l\" &&\r\n              value[k + 2] === \"i\" &&\r\n              value[k + 3] === \"s\" &&\r\n              value[k + 4] === \"t\" &&\r\n              value[k + 5] === \">\"\r\n            ) {\r\n              listCount++;\r\n            }\r\n          }\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"l\" &&\r\n              value[j + 3] === \"i\" &&\r\n              value[j + 4] === \"s\" &&\r\n              value[j + 5] === \"t\" &&\r\n              value[j + 6] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 7);\r\n              // console.log(slice);\r\n              // console.log(slice2);\r\n              // console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // alert(listCount);\r\n              setTimeout(() => {\r\n                setLists((old) => {\r\n                  let oldArr = [...old];\r\n                  oldArr.splice(listCount, 1);\r\n                  return oldArr;\r\n                });\r\n                listCount = 0;\r\n              }, 10);\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart < [i + 7] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let k = 0; k < i; k++) {\r\n            if (\r\n              value[k] === \"<\" &&\r\n              value[k + 1] === \"/\" &&\r\n              value[k + 2] === \"l\" &&\r\n              value[k + 3] === \"i\" &&\r\n              value[k + 4] === \"s\" &&\r\n              value[k + 5] === \"t\" &&\r\n              value[k + 6] === \">\"\r\n            ) {\r\n              listCount++;\r\n            }\r\n          }\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"l\" &&\r\n              value[j + 2] === \"i\" &&\r\n              value[j + 3] === \"s\" &&\r\n              value[j + 4] === \"t\" &&\r\n              value[j + 5] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 6, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 7);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              alert(listCount);\r\n              setTimeout(() => {\r\n                setLists((old) => {\r\n                  let oldArr = [...old];\r\n                  oldArr.splice(listCount, 1);\r\n                  return oldArr;\r\n                });\r\n                listCount = 0;\r\n              }, 10);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        }\r\n      }\r\n    }\r\n    if (e.keyCode === 8) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\" &&\r\n            slStart === i + 3 &&\r\n            slEnd === i + 3) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            value[i + 3] === \">\" &&\r\n            slStart === i + 4 &&\r\n            slEnd === i + 4)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\" &&\r\n            value[i + 4] === \"e\" &&\r\n            value[i + 5] === \"d\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i + 7 &&\r\n            slEnd === i + 7) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            value[i + 3] === \"m\" &&\r\n            value[i + 4] === \"b\" &&\r\n            value[i + 5] === \"e\" &&\r\n            value[i + 6] === \"d\" &&\r\n            value[i + 7] === \">\" &&\r\n            slStart === i + 8 &&\r\n            slEnd === i + 8)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i + 6 &&\r\n            slEnd === i + 6) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i + 7 &&\r\n            slEnd === i + 7)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i + 6 &&\r\n            slEnd === i + 6) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i + 7 &&\r\n            slEnd === i + 7)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 2\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 3\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 3\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 3\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 4\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 4\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 8\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 8\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 5\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 5\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        }\r\n      }\r\n    }\r\n    console.log(textareaRef.current.value[textareaRef.current.selectionStart]);\r\n    // if (\r\n    //   textareaRef.current.value[textareaRef.current.selectionStart + 1] !==\r\n    //   '\\n'\r\n    // ) {\r\n    //   alert('d');\r\n    // }\r\n    // setSelStart({ num: textareaRef.current.selectionStart, enter: true });\r\n  };\r\n\r\n  const handlePaste = (e) => {\r\n    setPaste(true);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const strArr = e.target.value.split(\"\");\r\n    const selStartx = textareaRef.current.selectionStart;\r\n    const copyArr = [...strArr];\r\n    console.log(textareaRef.current.value[textareaRef.current.selectionStart]);\r\n    if (paste) {\r\n      // if (e.target.value.includes('instagram')) {\r\n      //   const str = parse(e.target.value);\r\n      //   console.log(str);\r\n      // }\r\n      for (let i = 0; i < strArr.length; i++) {\r\n        if (\r\n          strArr[i] === \"\\n\" &&\r\n          strArr[i + 1] !== \"\\n\" &&\r\n          strArr[i - 1] !== \"\\n\"\r\n        ) {\r\n          copyArr.splice(i, 0, \"\\n\");\r\n        }\r\n      }\r\n    }\r\n    console.log(copyArr);\r\n    textareaRef.current.value = copyArr.join(\"\");\r\n    console.log(textareaRef.current.value[textareaRef.current.selectionStart]);\r\n    // if (selStart.num < textareaRef.current.value.length && selStart.enter) {\r\n    //   textareaRef.current.selectionEnd = selStart.num;\r\n    // }\r\n    if (paste) {\r\n      setPaste(false);\r\n    }\r\n    // setSelStart({ num: 0, enter: false });\r\n    // } else if (!paste) {\r\n    //   const strArr = e.target.value.split('');\r\n    //   const copyArr = [...strArr];\r\n    //   for (let i = 0; i < strArr.length; i++) {\r\n    //     if (\r\n    //       strArr[i] === '\\n' &&\r\n    //       strArr[i + 1] !== '\\n' &&\r\n    //       strArr[i - 1] !== '\\n'\r\n    //     ) {\r\n    //       copyArr.splice(i, 0, '\\n');\r\n    //     }\r\n    //   }\r\n    //   console.log(copyArr);\r\n    //   textareaRef.current.value = copyArr.join('');\r\n    // }\r\n  };\r\n\r\n  const handleImages = (e) => {\r\n    let { files } = e.target;\r\n    console.log(files);\r\n    console.log(imageArray);\r\n    if (files.length > 0) {\r\n      let count = 0;\r\n      const fileList = Array.from(files);\r\n      let previewArray = [];\r\n      console.log(fileList);\r\n      fileList.forEach((file, i) => {\r\n        if (!file.type.includes(\"image\")) {\r\n          fileList.splice(i, 1);\r\n        }\r\n      });\r\n      let copyArr = [];\r\n      let passFilter = [];\r\n      if (imageArray.length > 0) {\r\n        copyArr = [...imageArray];\r\n        let check = false;\r\n        fileList.forEach((file) => {\r\n          imageArray.forEach((imgObj, i) => {\r\n            if (file.name === imgObj.name) {\r\n              check = true;\r\n            }\r\n            if (!check && i === imageArray.length - 1) {\r\n              copyArr.push(file);\r\n              check = false;\r\n            }\r\n            if (check && i === imageArray.length - 1) {\r\n              check = false;\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        copyArr = [...fileList];\r\n      }\r\n      copyArr.forEach((copy) => {\r\n        previewArray.push({\r\n          url: URL.createObjectURL(copy),\r\n          checked: \"false\",\r\n          name: copy.name,\r\n        });\r\n      });\r\n      console.log(previewArray);\r\n      console.log(copyArr);\r\n      setImagePreview([...previewArray]);\r\n      setImageArray(copyArr);\r\n      e.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(imagePreview);\r\n  }, [imagePreview]);\r\n  useEffect(() => {\r\n    console.log(imageArray);\r\n  }, [imageArray]);\r\n\r\n  const handleDeleteMode = () => {\r\n    let check = false;\r\n    for (let i = 0; i < imgCnt.current.children.length; i++) {\r\n      if (imgCnt.current.children[i].children[1].className) {\r\n        check = true;\r\n      }\r\n    }\r\n    if (!ctx.overlay && check) {\r\n      setDeleteMode(true);\r\n      ctx.handleOverlay();\r\n    }\r\n  };\r\n\r\n  const handleDeleteImg = (e) => {\r\n    for (let i = 0; i < imgCnt.current.children.length; i++) {\r\n      if (\r\n        imgCnt.current.children[i].children[0].contains(e.target) &&\r\n        !imgCnt.current.children[i].children[1].className\r\n      ) {\r\n        setImagePreview((old) => {\r\n          let oldCopy = [...old];\r\n          old.forEach((oldArr, ind) => {\r\n            if (ind === i) {\r\n              oldCopy[i].checked = \"true\";\r\n            }\r\n          });\r\n          return oldCopy;\r\n        });\r\n      } else if (\r\n        imgCnt.current.children[i].children[1].contains(e.target) &&\r\n        imgCnt.current.children[i].children[1].className\r\n      ) {\r\n        setImagePreview((old) => {\r\n          let oldCopy = [...old];\r\n          old.forEach((oldArr, ind) => {\r\n            if (ind === i) {\r\n              oldCopy[i].checked = \"false\";\r\n            }\r\n          });\r\n          return oldCopy;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleConfirmDeletion = () => {\r\n    const saveName = [];\r\n    setImagePreview((old) => {\r\n      let oldCopy = [];\r\n      old.forEach((oldObj, i) => {\r\n        if (oldObj.checked !== \"true\") {\r\n          oldCopy.push(oldObj);\r\n        } else if (oldObj.checked === \"true\") {\r\n          saveName.push(oldObj.name);\r\n        }\r\n      });\r\n      // console.log(oldCopy);\r\n      // console.log(imageArray);\r\n      // console.log(saveName);\r\n      if (saveName.length > 0) {\r\n        setSavedNames(saveName);\r\n      }\r\n      return oldCopy;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (savedNames.length > 0) {\r\n      setImageArray((old) => {\r\n        let oldCopy = [];\r\n        let check = false;\r\n        old.forEach((oldObj) => {\r\n          savedNames.forEach((nameI, i) => {\r\n            if (nameI === oldObj.name) {\r\n              check = true;\r\n            }\r\n            if (i === savedNames.length - 1 && !check) {\r\n              oldCopy.push(oldObj);\r\n              check = false;\r\n            }\r\n            if (i === savedNames.length - 1 && check) {\r\n              check = false;\r\n            }\r\n          });\r\n        });\r\n        console.log(savedNames);\r\n        console.log(oldCopy);\r\n        return oldCopy;\r\n      });\r\n    }\r\n  }, [savedNames]);\r\n\r\n  const handleAddTags = (e) => {\r\n    if (e.keyCode === 13) {\r\n      let { value } = e.target;\r\n      if (value) {\r\n        // value = value.split(\"\");\r\n        // value[0] = value[0].toUpperCase();\r\n        // value = value.join(\"\");\r\n        e.target.value = \"\";\r\n        if (value.includes(\".\")) {\r\n          value = value.split(\".\");\r\n          value = value.join(\"_\");\r\n        }\r\n        setTags((old) => {\r\n          const oldCopy = [...old];\r\n          oldCopy.push(value);\r\n          console.log(oldCopy);\r\n          return oldCopy;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRemoveTag = (e) => {\r\n    for (let i = 0; i < tagContainer.current.children.length; i++) {\r\n      if (tagContainer.current.children[i].contains(e.target)) {\r\n        setTags((old) => {\r\n          const oldCopy = [...old];\r\n          oldCopy.splice(i, 1);\r\n\r\n          return oldCopy;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const checkTextBeforeSubmit = (e) => {\r\n    if (e.keyCode === 13) {\r\n      alert(\"d\");\r\n    }\r\n    // textareaRef.current.readOnly = true\r\n  };\r\n\r\n  const checkIfContainsPromo = (string) => {\r\n    const str = string.toLowerCase();\r\n    if (str.trim() === \"promo\" || str.trim().includes(\"promo \")) {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  const seeWhichList = (str, mode, selStart) => {\r\n    let occurence = 0;\r\n    let start;\r\n    console.log(str.length);\r\n    console.log(selStart);\r\n    if (mode === \"deleting\") {\r\n      for (let i = 0; i < str.length; i++) {\r\n        if (\r\n          str[i] === \"<\" &&\r\n          str[i + 1] === \"l\" &&\r\n          str[i + 2] === \"i\" &&\r\n          str[i + 3] === \"s\" &&\r\n          str[i + 4] === \"t\" &&\r\n          str[i + 5] === \">\"\r\n        ) {\r\n          start = i;\r\n          occurence++;\r\n        } else if (\r\n          str[i] === \"<\" &&\r\n          str[i + 1] === \"/\" &&\r\n          str[i + 2] === \"l\" &&\r\n          str[i + 3] === \"i\" &&\r\n          str[i + 4] === \"s\" &&\r\n          str[i + 5] === \"t\" &&\r\n          str[i + 6] === \">\"\r\n        ) {\r\n          if (selStart > start && selStart <= i + 6) {\r\n            return occurence;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < str.length; i++) {\r\n        if (\r\n          str[i] === \"<\" &&\r\n          str[i + 1] === \"l\" &&\r\n          str[i + 2] === \"i\" &&\r\n          str[i + 3] === \"s\" &&\r\n          str[i + 4] === \"t\" &&\r\n          str[i + 5] === \">\"\r\n        ) {\r\n          occurence++;\r\n        }\r\n        if (i === selStart) {\r\n          return occurence;\r\n        } else if (i === str.length - 1 && selStart === str.length) {\r\n          return occurence;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUpload = () => {\r\n    const title = titles.current.children[0].value;\r\n    const subTitle = titles.current.children[1].value.toUpperCase();\r\n    console.log(title);\r\n    console.log(subTitle);\r\n    const articleText = textareaRef.current.value.trim();\r\n    const captionTxt = captionText.current.value.trim();\r\n    let catSel = categorySelect.current.value;\r\n    let subcatSel = subcategorySelect.current.value;\r\n    const checkIfPromo = checkIfContainsPromo(subTitle);\r\n    let promoSubTitle;\r\n    if (checkIfPromo && subTitle.trim().length > 5) {\r\n      promoSubTitle = subTitle.trim().split(\"PROMO \");\r\n      promoSubTitle.splice(0, 1);\r\n      promoSubTitle = promoSubTitle.join(\"\").trim();\r\n      console.log(promoSubTitle);\r\n    }\r\n    const commentChoice =\r\n      commentsRadio.current.children[0].children[1].checked &&\r\n      !commentsRadio.current.children[0].children[1].disabled\r\n        ? \"Da\"\r\n        : \"Ne\";\r\n    console.log(imageArray);\r\n    console.log(location.state);\r\n    console.log(tags);\r\n    let deletedTags = [];\r\n    if (location.state && location.state.articleData.tags) {\r\n      deletedTags = location.state.articleData.tags.reduce((acc, cur) => {\r\n        if (\r\n          !tags.some((el) =>\r\n            el.value ? el.value === cur.value : el === cur.value\r\n          )\r\n        ) {\r\n          return [...acc, cur];\r\n        }\r\n        return acc;\r\n      }, []);\r\n      console.log(deletedTags);\r\n    }\r\n    // alert(commentChoice);\r\n    // console.log(lists);\r\n    // console.log(location.state.articleData.listOrder);\r\n    if (title && subTitle && articleText) {\r\n      if (imageArray.length > 0 && captionTxt) {\r\n        const articleFinished = {\r\n          author: ctx.user.displayName,\r\n          title: title,\r\n          subTitle: promoSubTitle ? promoSubTitle : subTitle,\r\n          articleText: articleText,\r\n          category: catSel,\r\n          subCategory: subcatSel,\r\n          images: imageArray,\r\n          imageText: imageCaptionTextAttach(),\r\n          tags: tags,\r\n          commentsAllowed: commentChoice,\r\n          shares: [\"\"],\r\n          visited: (location.state && location.state.articleData.visited) || 0,\r\n        };\r\n        let captTxt = [];\r\n        if (lists.length > 0) {\r\n          articleFinished.listOrder = [...lists];\r\n        }\r\n        if (checkIfPromo) {\r\n          articleFinished.sponsored = true;\r\n        }\r\n        if (\r\n          location.state &&\r\n          checkIfPromo &&\r\n          location.state.articleData.promoId\r\n        ) {\r\n          //means that we wanna edit an already existing promo article and we did not change the promo status of it so we can keep the previous promoid\r\n          articleFinished.promoId = location.state.articleData.promoId;\r\n        }\r\n        console.log(articleFinished.tags);\r\n        console.log(articleFinished);\r\n        setSending(true);\r\n        let length = !checkIfPromo ? 1 : 2;\r\n        console.log(length);\r\n        // alert(length);\r\n        auth.onAuthStateChanged((user) => {\r\n          if (user) {\r\n            user.getIdToken(true).then((idToken) => {\r\n              const categoriesNoChange =\r\n                location.state &&\r\n                catSel === location.state.articleData.category &&\r\n                subcatSel === location.state.articleData.subCategory;\r\n              fetch(\r\n                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${catSel}/${subcatSel}${\r\n                  categoriesNoChange ? \"/-\" + location.state.articleData.id : \"\"\r\n                }.json?auth=${idToken}`,\r\n                {\r\n                  method: `${\r\n                    !location.state\r\n                      ? \"POST\"\r\n                      : !categoriesNoChange\r\n                      ? \"POST\"\r\n                      : \"PATCH\"\r\n                  }`,\r\n                  body: JSON.stringify(articleFinished),\r\n                  headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                  },\r\n                }\r\n              )\r\n                .then((response) => response.json())\r\n                .then((data) => {\r\n                  console.log(data);\r\n                  let id;\r\n                  const imgUrls = [];\r\n                  if (!location.state) {\r\n                    id = data.name.slice(1);\r\n                    //add art to dates in the db, for newest art, most visited, most popular\r\n                    const d = new Date();\r\n                    const year = d.getFullYear();\r\n                    const month = d.getMonth() + 1;\r\n                    const day = d.getDate();\r\n                    fetch(\r\n                      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/dates/${year}/${month}/${day}.json?auth=${idToken}`,\r\n                      {\r\n                        method: \"POST\",\r\n                        headers: {\r\n                          \"Content-Type\": \"application/json\",\r\n                        },\r\n                        body: JSON.stringify({\r\n                          id: data.name,\r\n                          path: `${articleFinished.category}/${articleFinished.subCategory}`,\r\n                        }),\r\n                      }\r\n                    );\r\n                  } else {\r\n                    if (categoriesNoChange) {\r\n                      //patch\r\n                      id = location.state.articleData.id;\r\n                    } else {\r\n                      //cats changed so we have a new id\r\n                      id = data.name.slice(1);\r\n                    }\r\n                  }\r\n                  // id.split('');\r\n                  // console.log(id);\r\n                  // id.join('');\r\n                  console.log(id);\r\n                  if (!articleFinished.id) {\r\n                    //always happens, we do not init the id where we declare the var, but we do it here\r\n                    articleFinished.id = id;\r\n                  }\r\n                  console.log(articleFinished);\r\n                  let progressArray = [];\r\n                  // console.log(image);\r\n                  imageArray.forEach((img, i) => {\r\n                    progressArray.push({\r\n                      imageName: img.name,\r\n                      percent: \"\",\r\n                    });\r\n                    console.log(\r\n                      `images/${catSel}/${subcatSel}/-${id}/${img.name}`\r\n                    );\r\n                    const uploadTask = storage\r\n                      .ref(`images/${catSel}/${subcatSel}/-${id}/${img.name}`)\r\n                      .put(img);\r\n                    uploadTask.on(\r\n                      \"state_changed\",\r\n                      (snapshot) => {\r\n                        console.log(snapshot);\r\n                        console.log(\r\n                          `bytesTransfered: ${\r\n                            snapshot.bytesTransferred\r\n                          }, percent: ${Math.floor(\r\n                            (snapshot.bytesTransferred / snapshot.totalBytes) *\r\n                              100\r\n                          )}% fileName: ${img.name}`\r\n                        );\r\n\r\n                        progressArray.forEach((arr, i) => {\r\n                          if (arr.imageName === img.name) {\r\n                            if (progressRef.current.children[0]) {\r\n                              console.log(\r\n                                progressRef.current.children[i].children[1]\r\n                                  .children[0]\r\n                              );\r\n                              progressRef.current.children[\r\n                                i\r\n                              ].children[1].children[0].style.width = `${Math.floor(\r\n                                (snapshot.bytesTransferred /\r\n                                  snapshot.totalBytes) *\r\n                                  100\r\n                              )}%`;\r\n                              if (\r\n                                Math.floor(\r\n                                  (snapshot.bytesTransferred /\r\n                                    snapshot.totalBytes) *\r\n                                    100\r\n                                ) !== 0\r\n                              ) {\r\n                                progressRef.current.children[\r\n                                  i\r\n                                ].children[1].children[0].textContent = `${Math.floor(\r\n                                  (snapshot.bytesTransferred /\r\n                                    snapshot.totalBytes) *\r\n                                    100\r\n                                )}%`;\r\n                              }\r\n\r\n                              if (\r\n                                Math.floor(\r\n                                  (snapshot.bytesTransferred /\r\n                                    snapshot.totalBytes) *\r\n                                    100\r\n                                ) === 100\r\n                              ) {\r\n                                setTimeout(() => {\r\n                                  progressRef.current.children[\r\n                                    i\r\n                                  ].children[2].children[0].style.display =\r\n                                    \"inline-block\";\r\n                                }, 200);\r\n                              }\r\n                              // progressRef.current.children[i].children[1]\r\n                              // .children[0]\r\n                            }\r\n                          }\r\n                        });\r\n                        setCurProgress(progressArray);\r\n                        console.log(snapshot.totalBytes);\r\n                        console.log(`images/${catSel}/${subcatSel}/-${id}`);\r\n                      },\r\n                      (error) => {\r\n                        console.log(error);\r\n                      },\r\n                      () => {\r\n                        storage\r\n                          .ref(`images/${catSel}/${subcatSel}/-${id}`)\r\n                          .child(img.name)\r\n                          .getDownloadURL()\r\n                          .then((url) => {\r\n                            console.log(url);\r\n                            imgUrls.push(url);\r\n                            // let imgNames = [];\r\n                            // imgNames.push([img.name, url]);\r\n                            articleFinished.imageText.forEach(\r\n                              (imgTxt, indx) => {\r\n                                if (imgTxt.name === img.name) {\r\n                                  captTxt[indx] = [\r\n                                    url,\r\n                                    imgTxt.captionText,\r\n                                    img.name,\r\n                                  ];\r\n                                }\r\n                              }\r\n                            );\r\n                            if (imgUrls.length === imageArray.length) {\r\n                              articleFinished.images = [...imgUrls];\r\n                              articleFinished.imageText = [...captTxt];\r\n                              if (!location.state) {\r\n                                const date = new Date();\r\n                                const time = `${date.getFullYear()}-${\r\n                                  date.getMonth() + 1\r\n                                }-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\r\n                                articleFinished.date = time;\r\n                                console.log(articleFinished);\r\n                              } else {\r\n                                articleFinished.date =\r\n                                  location.state.articleData.date;\r\n                              }\r\n                              captTxt = [];\r\n                              const dbRef = db.ref(\r\n                                `articles/${catSel}/${subcatSel}/-${id}`\r\n                              );\r\n                              const promises = [];\r\n                              if (!location.state) {\r\n                                //POST\r\n                                if (articleFinished.tags.length) {\r\n                                  for (\r\n                                    let i = 0;\r\n                                    i < articleFinished.tags.length;\r\n                                    i++\r\n                                  ) {\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${articleFinished.tags[i]}.json`,\r\n                                        {\r\n                                          method: \"POST\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                          body: JSON.stringify({\r\n                                            articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                            thumbnail:\r\n                                              articleFinished.imageText[0][0],\r\n                                            title: articleFinished.title,\r\n                                            subTitle: articleFinished.subTitle,\r\n                                            date: articleFinished.date,\r\n                                          }),\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                  const promisedData = Promise.all(promises);\r\n                                  promisedData.then((data) => {\r\n                                    console.log(data);\r\n                                    const patchPromises = [];\r\n                                    const reformattedTags = []; //tag obj with val and db id\r\n                                    for (\r\n                                      let i = 0;\r\n                                      i < articleFinished.tags.length;\r\n                                      i++\r\n                                    ) {\r\n                                      patchPromises.push(\r\n                                        fetch(\r\n                                          `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${articleFinished.tags[i]}/${data[i].name}.json`,\r\n                                          {\r\n                                            method: \"PATCH\",\r\n                                            headers: {\r\n                                              \"Content-Type\":\r\n                                                \"application/json\",\r\n                                            },\r\n                                            body: JSON.stringify({\r\n                                              articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                              thumbnail:\r\n                                                articleFinished.imageText[0][0],\r\n                                              title: articleFinished.title,\r\n                                              subTitle:\r\n                                                articleFinished.subTitle,\r\n                                              date: articleFinished.date,\r\n                                              id: data[i].name,\r\n                                            }),\r\n                                          }\r\n                                        ).then((res) => res.json())\r\n                                      );\r\n                                      reformattedTags.push({\r\n                                        id: data[i].name,\r\n                                        value: articleFinished.tags[i],\r\n                                      });\r\n                                    }\r\n                                    articleFinished.tags = [...reformattedTags];\r\n                                    const promisedPatch =\r\n                                      Promise.all(patchPromises);\r\n                                    promisedPatch.then((data) => {\r\n                                      if (length === 1) {\r\n                                        dbRef\r\n                                          .update(articleFinished)\r\n                                          .then((res) => {\r\n                                            dbRef\r\n                                              .once(\"value\")\r\n                                              .then((snapshot) => {\r\n                                                setArticleAdded(true);\r\n                                              });\r\n                                          });\r\n                                      } else {\r\n                                        fetch(\r\n                                          `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                          {\r\n                                            method: \"POST\",\r\n                                            body: JSON.stringify(\r\n                                              articleFinished\r\n                                            ),\r\n                                            headers: {\r\n                                              \"Content-Type\":\r\n                                                \"application/json\",\r\n                                            },\r\n                                          }\r\n                                        )\r\n                                          .then((res) => res.json())\r\n                                          .then((data) => {\r\n                                            articleFinished.promoId = data.name;\r\n                                            dbRef\r\n                                              .update(articleFinished)\r\n                                              .then((res) => {\r\n                                                dbRef\r\n                                                  .once(\"value\")\r\n                                                  .then((snapshot) => {\r\n                                                    setArticleAdded(true);\r\n                                                  });\r\n                                              });\r\n                                          });\r\n                                      }\r\n                                    });\r\n                                  });\r\n                                } else {\r\n                                  // no tags post art\r\n                                  if (length === 1) {\r\n                                    dbRef\r\n                                      .update(articleFinished)\r\n                                      .then((res) => {\r\n                                        dbRef.once(\"value\").then((snapshot) => {\r\n                                          setArticleAdded(true);\r\n                                        });\r\n                                      });\r\n                                  } else {\r\n                                    fetch(\r\n                                      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                      {\r\n                                        method: \"POST\",\r\n                                        body: JSON.stringify(articleFinished),\r\n                                        headers: {\r\n                                          \"Content-Type\": \"application/json\",\r\n                                        },\r\n                                      }\r\n                                    )\r\n                                      .then((res) => res.json())\r\n                                      .then((data) => {\r\n                                        articleFinished.promoId = data.name;\r\n                                        dbRef\r\n                                          .update(articleFinished)\r\n                                          .then((res) => {\r\n                                            dbRef\r\n                                              .once(\"value\")\r\n                                              .then((snapshot) => {\r\n                                                setArticleAdded(true);\r\n                                              });\r\n                                          });\r\n                                      });\r\n                                  }\r\n                                }\r\n                              } else {\r\n                                //PATCH\r\n                                //newly added tag\r\n                                const newlyAdded = [];\r\n                                const oldTags = [];\r\n                                if (\r\n                                  location.state.articleData.tags &&\r\n                                  articleFinished.tags.length\r\n                                ) {\r\n                                  for (\r\n                                    let i = 0;\r\n                                    i < articleFinished.tags.length;\r\n                                    i++\r\n                                  ) {\r\n                                    if (\r\n                                      //arr.includes, arr.some stops after 1 el is found and returns bool, filter returns arr and empty arr can still be truthy so use.length on the arr\r\n                                      // !location.state.articleData.tags.includes(\r\n                                      //   articleFinished.tags[i]\r\n                                      // )\r\n                                      !location.state.articleData.tags.some(\r\n                                        (el) =>\r\n                                          el.value ===\r\n                                          (articleFinished.tags[i].value\r\n                                            ? articleFinished.tags[i].value\r\n                                            : articleFinished.tags[i])\r\n                                      )\r\n                                    ) {\r\n                                      newlyAdded.push(articleFinished.tags[i]);\r\n                                    } else {\r\n                                      oldTags.push(\r\n                                        location.state.articleData.tags.find(\r\n                                          (el) =>\r\n                                            el.value ===\r\n                                            articleFinished.tags[i].value\r\n                                        ) //find returns the first val that matches so it's faster than filter\r\n                                      );\r\n                                    }\r\n                                  }\r\n                                } else if (articleFinished.tags.length) {\r\n                                  //zero tags before so we spread the new existing ones\r\n                                  newlyAdded.push(\r\n                                    ...articleFinished.tags //no need to do [...tags] that would create an array as the first value of newlyadded\r\n                                  );\r\n                                }\r\n\r\n                                let changedCat;\r\n                                if (\r\n                                  articleFinished.category !==\r\n                                  location.state.articleData.category\r\n                                ) {\r\n                                  changedCat = true;\r\n                                }\r\n                                let changedSubCat;\r\n                                if (\r\n                                  articleFinished.subCategory !==\r\n                                  location.state.articleData.subCategory\r\n                                ) {\r\n                                  changedSubCat = true;\r\n                                }\r\n\r\n                                //find out if title,subtitle,first img(thumbnail) changed if yes add the previous tags as well and patch them\r\n                                let checker = false;\r\n                                if (\r\n                                  articleFinished.title !==\r\n                                  location.state.articleData.title\r\n                                ) {\r\n                                  checker = true;\r\n                                } else if (\r\n                                  articleFinished.subTitle !==\r\n                                  location.state.articleData.subTitle\r\n                                ) {\r\n                                  checker = true;\r\n                                } else if (\r\n                                  articleFinished.imageText[0][0] ===\r\n                                  location.state.articleData.imageText[0][0]\r\n                                ) {\r\n                                  checker = true;\r\n                                } else if (changedCat) {\r\n                                  checker = true;\r\n                                } else if (changedSubCat) {\r\n                                  checker = true;\r\n                                }\r\n                                if (newlyAdded.length) {\r\n                                  console.log(\"butwhyman\");\r\n                                  console.log(newlyAdded);\r\n                                  console.log(oldTags);\r\n                                  for (let i = 0; i < newlyAdded.length; i++) {\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${newlyAdded[i]}.json`,\r\n                                        {\r\n                                          method: \"POST\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                          body: JSON.stringify({\r\n                                            articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                            thumbnail:\r\n                                              articleFinished.imageText[0][0],\r\n                                            title: articleFinished.title,\r\n                                            subTitle: articleFinished.subTitle,\r\n                                            date: articleFinished.date,\r\n                                          }),\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                }\r\n                                if (checker && oldTags.length) {\r\n                                  console.log(\"does this run\");\r\n                                  console.log(oldTags);\r\n                                  for (let i = 0; i < oldTags.length; i++) {\r\n                                    if (changedCat) {\r\n                                      deletedTags.push({\r\n                                        id: oldTags[i].id,\r\n                                        value: oldTags[i].value,\r\n                                      });\r\n                                    }\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${\r\n                                          articleFinished.category\r\n                                        }/${oldTags[i].value}${\r\n                                          !changedCat ? \"/\" + oldTags[i].id : \"\"\r\n                                        }.json`,\r\n                                        {\r\n                                          method: `${\r\n                                            changedCat ? \"POST\" : \"PATCH\"\r\n                                          }`,\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                          body: JSON.stringify({\r\n                                            articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                            thumbnail:\r\n                                              articleFinished.imageText[0][0],\r\n                                            title: articleFinished.title,\r\n                                            subTitle: articleFinished.subTitle,\r\n                                            date: articleFinished.date,\r\n                                            id: oldTags[i].id,\r\n                                          }),\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                }\r\n                                if (deletedTags.length) {\r\n                                  for (let i = 0; i < deletedTags.length; i++) {\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${\r\n                                          !changedCat\r\n                                            ? articleFinished.category\r\n                                            : location.state.articleData\r\n                                                .category\r\n                                        }/${deletedTags[i].value}/${\r\n                                          deletedTags[i].id\r\n                                        }.json`,\r\n                                        {\r\n                                          method: \"DELETE\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                }\r\n                                const promisedData = Promise.all(promises);\r\n                                promisedData.then((data) => {\r\n                                  let reformattedTags = []; //tag obj with val and db id\r\n                                  const promisesPatch = [];\r\n                                  if (newlyAdded.length) {\r\n                                    for (\r\n                                      let i = 0;\r\n                                      i < newlyAdded.length;\r\n                                      i++\r\n                                    ) {\r\n                                      reformattedTags.push({\r\n                                        id: data[i].name,\r\n                                        value: newlyAdded[i],\r\n                                      });\r\n                                      promisesPatch.push(\r\n                                        fetch(\r\n                                          `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${newlyAdded[i]}/${data[i].name}.json`,\r\n                                          {\r\n                                            method: \"PATCH\",\r\n                                            headers: {\r\n                                              \"Content-Type\":\r\n                                                \"application/json\",\r\n                                            },\r\n                                            body: JSON.stringify({\r\n                                              articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                              thumbnail:\r\n                                                articleFinished.imageText[0][0],\r\n                                              title: articleFinished.title,\r\n                                              subTitle:\r\n                                                articleFinished.subTitle,\r\n                                              date: articleFinished.date,\r\n                                              id: data[i].name,\r\n                                            }),\r\n                                          }\r\n                                        ).then((res) => res.json())\r\n                                      );\r\n                                    }\r\n                                  }\r\n                                  if (oldTags.length) {\r\n                                    if (!changedCat) {\r\n                                      reformattedTags = [\r\n                                        ...reformattedTags,\r\n                                        ...oldTags,\r\n                                      ];\r\n                                    } else {\r\n                                      let pos = newlyAdded.length;\r\n                                      let incr = 0;\r\n                                      for (\r\n                                        let i = pos;\r\n                                        i < pos + oldTags.length;\r\n                                        i++\r\n                                      ) {\r\n                                        reformattedTags.push({\r\n                                          id: data[i].name,\r\n                                          value: oldTags[incr].value,\r\n                                        });\r\n                                        promisesPatch.push(\r\n                                          fetch(\r\n                                            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${oldTags[incr].value}/${data[i].name}.json`,\r\n                                            {\r\n                                              method: \"PATCH\",\r\n                                              headers: {\r\n                                                \"Content-Type\":\r\n                                                  \"application/json\",\r\n                                              },\r\n                                              body: JSON.stringify({\r\n                                                articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                                thumbnail:\r\n                                                  articleFinished\r\n                                                    .imageText[0][0],\r\n                                                title: articleFinished.title,\r\n                                                subTitle:\r\n                                                  articleFinished.subTitle,\r\n                                                date: articleFinished.date,\r\n                                                id: data[i].name,\r\n                                              }),\r\n                                            }\r\n                                          ).then((res) => res.json())\r\n                                        );\r\n                                        incr++;\r\n                                      }\r\n                                    }\r\n                                  }\r\n                                  //delete old article if we have changed either cat or subcat\r\n                                  if (changedCat || changedSubCat) {\r\n                                    console.log(\"zasto\");\r\n                                    promisesPatch.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}.json`,\r\n                                        {\r\n                                          method: \"DELETE\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                  if (\r\n                                    deletedTags.length &&\r\n                                    !newlyAdded.length &&\r\n                                    !oldTags.length\r\n                                  ) {\r\n                                    delete articleFinished.tags;\r\n                                  } else {\r\n                                    articleFinished.tags = [...reformattedTags];\r\n                                  }\r\n                                  if (promisesPatch.length) {\r\n                                    const promised = Promise.all(promisesPatch);\r\n                                    promised.then((data) => {\r\n                                      dbRef\r\n                                        .update(articleFinished)\r\n                                        .then((res) => {\r\n                                          dbRef\r\n                                            .once(\"value\")\r\n                                            .then((snapshot) => {\r\n                                              if (length === 1) {\r\n                                                if (\r\n                                                  location.state.articleData\r\n                                                    .sponsored &&\r\n                                                  !articleFinished.sponsored\r\n                                                ) {\r\n                                                  //WAS PROMO, no longer is\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"DELETE\",\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  )\r\n                                                    .then((res) => res.json())\r\n                                                    .then((data) => {\r\n                                                      delete articleFinished.promoId;\r\n                                                      delete articleFinished.sponsored;\r\n                                                      dbRef\r\n                                                        .set(articleFinished)\r\n                                                        .then((res) => {\r\n                                                          dbRef\r\n                                                            .once(\"value\")\r\n                                                            .then(\r\n                                                              (snapshot) => {\r\n                                                                setArticleAdded(\r\n                                                                  true\r\n                                                                );\r\n                                                              }\r\n                                                            );\r\n                                                        });\r\n                                                    });\r\n                                                } else {\r\n                                                  setArticleAdded(true);\r\n                                                }\r\n                                              } else {\r\n                                                if (\r\n                                                  !location.state.articleData\r\n                                                    .sponsored &&\r\n                                                  articleFinished.sponsored\r\n                                                ) {\r\n                                                  //WAS NOT PROMO, NOW IS\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"POST\",\r\n                                                      body: JSON.stringify(\r\n                                                        articleFinished\r\n                                                      ),\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  )\r\n                                                    .then((res) => res.json())\r\n                                                    .then((data) => {\r\n                                                      articleFinished.promoId =\r\n                                                        data.name;\r\n                                                      dbRef\r\n                                                        .update(articleFinished)\r\n                                                        .then((res) => {\r\n                                                          dbRef\r\n                                                            .once(\"value\")\r\n                                                            .then(\r\n                                                              (snapshot) => {\r\n                                                                setArticleAdded(\r\n                                                                  true\r\n                                                                );\r\n                                                              }\r\n                                                            );\r\n                                                        });\r\n                                                    });\r\n                                                } else {\r\n                                                  //WAS PROMO, IS PROMO NOW AS WELL\r\n                                                  //if cat changed delete old one post new one otherwise update(put) old one\r\n                                                  if (!changedCat) {\r\n                                                    fetch(\r\n                                                      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                      {\r\n                                                        method: \"PUT\",\r\n                                                        body: JSON.stringify(\r\n                                                          articleFinished\r\n                                                        ),\r\n                                                        headers: {\r\n                                                          \"Content-Type\":\r\n                                                            \"application/json\",\r\n                                                        },\r\n                                                      }\r\n                                                    )\r\n                                                      .then((res) => res.json())\r\n                                                      .then((data) =>\r\n                                                        setArticleAdded(true)\r\n                                                      );\r\n                                                  } else {\r\n                                                    //if only subcat changed put/update is enough as demonstrated above, if cat changed then post\r\n                                                    const finalizePromo = [];\r\n                                                    finalizePromo.push(\r\n                                                      fetch(\r\n                                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                        {\r\n                                                          method: \"POST\",\r\n                                                          body: JSON.stringify(\r\n                                                            articleFinished\r\n                                                          ),\r\n                                                          headers: {\r\n                                                            \"Content-Type\":\r\n                                                              \"application/json\",\r\n                                                          },\r\n                                                        }\r\n                                                      ).then((res) =>\r\n                                                        res.json()\r\n                                                      ),\r\n                                                      fetch(\r\n                                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                        {\r\n                                                          method: \"DELETE\",\r\n                                                          headers: {\r\n                                                            \"Content-Type\":\r\n                                                              \"application/json\",\r\n                                                          },\r\n                                                        }\r\n                                                      ).then((res) =>\r\n                                                        res.json()\r\n                                                      )\r\n                                                    );\r\n                                                    const promisedFinalize =\r\n                                                      Promise.all(\r\n                                                        finalizePromo\r\n                                                      );\r\n                                                    promisedFinalize.then(\r\n                                                      (data) => {\r\n                                                        articleFinished.promoId =\r\n                                                          data[0].name;\r\n                                                        dbRef\r\n                                                          .update(\r\n                                                            articleFinished\r\n                                                          )\r\n                                                          .then((res) => {\r\n                                                            dbRef\r\n                                                              .once(\"value\")\r\n                                                              .then(\r\n                                                                (snapshot) => {\r\n                                                                  setArticleAdded(\r\n                                                                    true\r\n                                                                  );\r\n                                                                }\r\n                                                              );\r\n                                                          });\r\n                                                      }\r\n                                                    );\r\n                                                  }\r\n                                                }\r\n                                              }\r\n                                            });\r\n                                        });\r\n                                    });\r\n                                  } else {\r\n                                    dbRef\r\n                                      .update(articleFinished)\r\n                                      .then((res) => {\r\n                                        dbRef.once(\"value\").then((snapshot) => {\r\n                                          if (length === 1) {\r\n                                            if (\r\n                                              location.state.articleData\r\n                                                .sponsored &&\r\n                                              !articleFinished.sponsored\r\n                                            ) {\r\n                                              //WAS PROMO, no longer is\r\n                                              fetch(\r\n                                                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                {\r\n                                                  method: \"DELETE\",\r\n                                                  headers: {\r\n                                                    \"Content-Type\":\r\n                                                      \"application/json\",\r\n                                                  },\r\n                                                }\r\n                                              )\r\n                                                .then((res) => res.json())\r\n                                                .then((data) => {\r\n                                                  delete articleFinished.promoId;\r\n                                                  delete articleFinished.sponsored;\r\n                                                  dbRef\r\n                                                    .set(articleFinished)\r\n                                                    .then((res) => {\r\n                                                      dbRef\r\n                                                        .once(\"value\")\r\n                                                        .then((snapshot) => {\r\n                                                          setArticleAdded(true);\r\n                                                        });\r\n                                                    });\r\n                                                });\r\n                                            } else {\r\n                                              setArticleAdded(true);\r\n                                            }\r\n                                          } else {\r\n                                            console.log(articleFinished);\r\n                                            if (\r\n                                              !location.state.articleData\r\n                                                .sponsored &&\r\n                                              articleFinished.sponsored\r\n                                            ) {\r\n                                              //WAS NOT PROMO, NOW IS\r\n                                              fetch(\r\n                                                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                {\r\n                                                  method: \"POST\",\r\n                                                  body: JSON.stringify(\r\n                                                    articleFinished\r\n                                                  ),\r\n                                                  headers: {\r\n                                                    \"Content-Type\":\r\n                                                      \"application/json\",\r\n                                                  },\r\n                                                }\r\n                                              )\r\n                                                .then((res) => res.json())\r\n                                                .then((data) => {\r\n                                                  articleFinished.promoId =\r\n                                                    data.name;\r\n                                                  dbRef\r\n                                                    .update(articleFinished)\r\n                                                    .then((res) => {\r\n                                                      dbRef\r\n                                                        .once(\"value\")\r\n                                                        .then((snapshot) => {\r\n                                                          setArticleAdded(true);\r\n                                                        });\r\n                                                    });\r\n                                                });\r\n                                            } else {\r\n                                              //WAS PROMO, IS PROMO NOW AS WELL\r\n                                              //if cat changed delete old one post new one otherwise update(put) old one\r\n                                              if (!changedCat) {\r\n                                                fetch(\r\n                                                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                  {\r\n                                                    method: \"PUT\",\r\n                                                    body: JSON.stringify(\r\n                                                      articleFinished\r\n                                                    ),\r\n                                                    headers: {\r\n                                                      \"Content-Type\":\r\n                                                        \"application/json\",\r\n                                                    },\r\n                                                  }\r\n                                                )\r\n                                                  .then((res) => res.json())\r\n                                                  .then((data) =>\r\n                                                    setArticleAdded(true)\r\n                                                  );\r\n                                              } else {\r\n                                                //if only subcat changed put/update is enough if cat changed then post\r\n                                                const finalizePromo = [];\r\n                                                finalizePromo.push(\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"POST\",\r\n                                                      body: JSON.stringify(\r\n                                                        articleFinished\r\n                                                      ),\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  ).then((res) => res.json()),\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"DELETE\",\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  ).then((res) => res.json())\r\n                                                );\r\n                                                const promisedFinalize =\r\n                                                  Promise.all(finalizePromo);\r\n                                                promisedFinalize.then(\r\n                                                  (data) => {\r\n                                                    articleFinished.promoId =\r\n                                                      data[0].name;\r\n                                                    dbRef\r\n                                                      .update(articleFinished)\r\n                                                      .then((res) => {\r\n                                                        dbRef\r\n                                                          .once(\"value\")\r\n                                                          .then((snapshot) => {\r\n                                                            setArticleAdded(\r\n                                                              true\r\n                                                            );\r\n                                                          });\r\n                                                      });\r\n                                                  }\r\n                                                );\r\n                                              }\r\n                                            }\r\n                                          }\r\n                                        });\r\n                                      });\r\n                                  }\r\n                                });\r\n                                // else if (\r\n                                //   location.state.articleData.tags &&\r\n                                //   !articleFinished.tags.length\r\n                                // ) {\r\n\r\n                                // }\r\n                              }\r\n                            }\r\n                          })\r\n                          .catch((error) => console.log(error));\r\n                      }\r\n                    );\r\n                  });\r\n                });\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const emptyFields = () => {\r\n    console.log(\"starting\");\r\n    titles.current.children[0].value = \"\";\r\n    titles.current.children[1].value = \"\";\r\n    textareaRef.current.value = \"\";\r\n    captionText.current.value = \"\";\r\n    categorySelect.current.value = \"Vijesti\";\r\n    tagContainer.current.previousSibling.value = \"\";\r\n    commentsRadio.current.children[0].children[1].disabled = false;\r\n    commentsRadio.current.children[1].children[1].disabled = false;\r\n    commentsRadio.current.children[0].children[1].checked = true;\r\n    setSubcategoriesMap(subcategories.vijesti);\r\n    setImageArray([]);\r\n    setImagePreview([]);\r\n    setTags([]);\r\n    setArticleAdded(false);\r\n    setCurProgress([]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (didMountRef.current) {\r\n      if (!sending) {\r\n        emptyFields();\r\n      }\r\n    } else {\r\n      didMountRef.current = true;\r\n      if (!location.state) {\r\n        setSubcategoriesMap([...subcategories.vijesti]);\r\n      }\r\n    }\r\n  }, [sending]);\r\n\r\n  const handleCloseOverlay = (e) => {\r\n    if (\r\n      (sendArticleOverlay.current.contains(e.target) &&\r\n        !progressRef.current.contains(e.target) &&\r\n        articleAdded) ||\r\n      (progressRef.current.children[0] &&\r\n        progressRef.current.children[0].children[1].contains(e.target) &&\r\n        articleAdded)\r\n    ) {\r\n      setSending(false);\r\n      if (location.state) {\r\n        window.history.replaceState(null, \"\");\r\n        history.replace(\"/editarticles\");\r\n      }\r\n      // emptyFields();\r\n    }\r\n  };\r\n\r\n  const handleIfPromo = (e) => {\r\n    const { value } = e.target;\r\n    if (value.length === 0) {\r\n      commentsRadio.current.children[0].children[1].disabled = false;\r\n      commentsRadio.current.children[1].children[1].disabled = false;\r\n      commentsRadio.current.children[0].children[1].checked = true;\r\n    }\r\n    if (value) {\r\n      const contains = checkIfContainsPromo(value);\r\n      if (contains) {\r\n        commentsRadio.current.children[0].children[1].disabled = true;\r\n        commentsRadio.current.children[1].children[1].disabled = true;\r\n      } else {\r\n        commentsRadio.current.children[0].children[1].disabled = false;\r\n        commentsRadio.current.children[1].children[1].disabled = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    const { value } = e.target;\r\n    switch (value) {\r\n      case \"Vijesti\":\r\n        setSubcategoriesMap([...subcategories.vijesti]);\r\n        break;\r\n      case \"Biznis\":\r\n        setSubcategoriesMap([...subcategories.biznis]);\r\n        break;\r\n      case \"Sport\":\r\n        setSubcategoriesMap([...subcategories.sport]);\r\n        break;\r\n      case \"Magazin\":\r\n        setSubcategoriesMap([...subcategories.magazin]);\r\n        break;\r\n      case \"Lifestyle\":\r\n        setSubcategoriesMap([...subcategories.lifestyle]);\r\n        break;\r\n      case \"Scitech\":\r\n        setSubcategoriesMap([...subcategories.scitech]);\r\n        break;\r\n      case \"Auto\":\r\n        setSubcategoriesMap([...subcategories.auto]);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const saveSubcategory = (e) => {\r\n    setSaveSubcat(e.target.value);\r\n  };\r\n\r\n  const dragStart = (e, ind) => {\r\n    e.dataTransfer.setData(\"text\", ind);\r\n    console.log(e.target.src);\r\n  };\r\n\r\n  const drop = (e, dropInd) => {\r\n    e.preventDefault();\r\n    let data = e.dataTransfer.getData(\"text\");\r\n    let drgIdx = 0;\r\n    let replacedIdx = 0;\r\n    if (+data === dropInd) {\r\n      return;\r\n    }\r\n    setDragIndex(+data);\r\n    drgIdx = +data;\r\n    replacedIdx = dropInd;\r\n    setReplacedIdx(dropInd);\r\n    console.log(imagePreview);\r\n    setImagePreview((old) => {\r\n      let oldArr = [...old];\r\n      oldArr[drgIdx] = { ...old[replacedIdx] };\r\n      oldArr[replacedIdx] = { ...old[drgIdx] };\r\n      console.log(oldArr);\r\n      return oldArr;\r\n    });\r\n  };\r\n\r\n  const allowDrop = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const imageCaptionTextAttach = () => {\r\n    let strValue = captionText.current.value;\r\n    if (strValue.trim() === \"blank\") {\r\n      //skip typing blank for every time if we have all blank imgs\r\n      strValue = [];\r\n      imagePreview.forEach((img, i) => {\r\n        strValue.push(\"blank\");\r\n      });\r\n    } else {\r\n      strValue = strValue.split(\" || \");\r\n    }\r\n    const finalValue = [];\r\n    if (imagePreview.length !== strValue.length) {\r\n      return;\r\n    }\r\n    imagePreview.forEach((img, i) => {\r\n      if (captionText.current.value.trim() !== \"\") {\r\n        finalValue.push({ name: img.name, captionText: strValue[i] });\r\n      } else {\r\n        finalValue.push({ name: img.name, captionText: \"\" });\r\n      }\r\n    });\r\n    console.log(finalValue);\r\n    return finalValue;\r\n  };\r\n\r\n  const showSecondListFn = () => {\r\n    setShowSecondList(true);\r\n  };\r\n\r\n  const hideSecondList = () => {\r\n    setShowSecondList(false);\r\n  };\r\n\r\n  const handleUlSwitch = () => {\r\n    setCurrentList((old) => {\r\n      if (old === \"ul\") {\r\n        return \"ol\";\r\n      } else {\r\n        return \"ul\";\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* {parse(\r\n        '<blockquote class=\"instagram-media\" data-instgrm-captioned data-instgrm-permalink=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" data-instgrm-version=\"13\" style=\" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);\"><div style=\"padding:16px;\"> <a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;\" target=\"_blank\"> <div style=\" display: flex; flex-direction: row; align-items: center;\"> <div style=\"background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;\"></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;\"></div></div></div><div style=\"padding: 19% 0;\"></div> <div style=\"display:block; height:50px; margin:0 auto 12px; width:50px;\"><svg width=\"50px\" height=\"50px\" viewBox=\"0 0 60 60\" version=\"1.1\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\"><g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(-511.000000, -20.000000)\" fill=\"#000000\"><g><path d=\"M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631\"></path></g></g></g></svg></div><div style=\"padding-top: 8px;\"> <div style=\" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;\"> View this post on Instagram</div></div><div style=\"padding: 12.5% 0;\"></div> <div style=\"display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;\"><div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);\"></div> <div style=\"background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;\"></div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);\"></div></div><div style=\"margin-left: 8px;\"> <div style=\" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;\"></div> <div style=\" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)\"></div></div><div style=\"margin-left: auto;\"> <div style=\" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);\"></div> <div style=\" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);\"></div> <div style=\" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);\"></div></div></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;\"></div></div></a><p style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;\"><a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;\" target=\"_blank\">A post shared by Chloe Ventura (@chloe.ventura)</a></p></div></blockquote>  <script async src=\"//www.instagram.com/embed.js\"></script>'\r\n      )}\r\n      {parse(\r\n        '<iframe src=\"https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2FKlix.ba%2Fposts%2F10158031303966821&show_text=true&width=500\" width=\"500\" height=\"487\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowfullscreen=\"true\" allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"></iframe>'\r\n      )} */}\r\n      {ctx.overlay && (\r\n        <Overlay handleConfirm={handleConfirmDeletion}>\r\n          <Modal />\r\n        </Overlay>\r\n      )}\r\n\r\n      {sending && (\r\n        <Overlay\r\n          ref={sendArticleOverlay}\r\n          handleCloseOverlay={handleCloseOverlay}\r\n        >\r\n          <ProgressBar\r\n            progress={progress}\r\n            ref={progressRef}\r\n            articleAdded={articleAdded}\r\n            location={location.state ? location.state : null}\r\n          />\r\n        </Overlay>\r\n      )}\r\n\r\n      <div id={s.addArticle}>\r\n        <div id={s.addArticleBody}>\r\n          <div id={s.addArticleContent}>\r\n            <div id={s.addTitle} ref={titles}>\r\n              <input type=\"text\" placeholder=\"Naslov ƒçlanka\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Podnaslov ƒçlanka\"\r\n                onChange={handleIfPromo}\r\n              />\r\n            </div>\r\n            <div id={s.addText}>\r\n              <div id={s.addTextHeader}>\r\n                <i class=\"fas fa-chevron-down\"></i>\r\n                Tekst\r\n              </div>\r\n              <div id={s.addTextBody}>\r\n                <div id={s.addTextBodyHeader}>\r\n                  <ul>\r\n                    <li title=\"bold\" onMouseDown={handleBold}>\r\n                      B\r\n                    </li>\r\n                    <li\r\n                      title=\"list\"\r\n                      onMouseDown={handleList}\r\n                      onMouseEnter={showSecondListFn}\r\n                      onMouseLeave={hideSecondList}\r\n                    >\r\n                      {currentList === \"ul\" ? (\r\n                        <i class=\"fas fa-list-ul\"></i>\r\n                      ) : (\r\n                        <i class=\"fas fa-list-ol\"></i>\r\n                      )}\r\n                      {showSecondList && (\r\n                        <div id={s.listOl} onMouseDown={handleUlSwitch}>\r\n                          {currentList === \"ul\" ? (\r\n                            <i class=\"fas fa-list-ol\"></i>\r\n                          ) : (\r\n                            <i class=\"fas fa-list-ul\"></i>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </li>\r\n                    <li title=\"embed\" onMouseDown={handleEmbed}>\r\n                      &lt;&gt;\r\n                    </li>\r\n                    <li title=\"link\" onMouseDown={handleLink}>\r\n                      <i class=\"fas fa-link\"></i>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n                <div id={s.addTextBodyBody}>\r\n                  <textarea\r\n                    ref={textareaRef}\r\n                    onKeyDown={handleEnter}\r\n                    onPaste={handlePaste}\r\n                    onChange={handleChange}\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div id={s.addImages}>\r\n              <div id={s.addImagesHeader}>\r\n                <div id={s.addImagesBundleLeft}>\r\n                  <i class=\"fas fa-chevron-down\"></i>\r\n                  Slike\r\n                </div>\r\n                <div id={s.addImagesBundleRight}>\r\n                  <i onClick={handleDeleteMode} class=\"far fa-trash-alt\"></i>\r\n                </div>\r\n              </div>\r\n              <div id={s.addImagesBody}>\r\n                <div className={s.uploadImageContainer}>\r\n                  <div id={s.uploadImageText}>Postavi slike</div>\r\n                  <div id={s.uploadImage} ref={postaviSlikeBorder}>\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"file\"\r\n                      accept=\"image/*\"\r\n                      multiple={true}\r\n                      onChange={handleImages}\r\n                    />\r\n                    <label\r\n                      htmlFor=\"file\"\r\n                      onMouseEnter={handleHoverEnter}\r\n                      onMouseLeave={handleHoverLeave}\r\n                    >\r\n                      <i class=\"fas fa-images\"></i>\r\n                      <span ref={postaviSlikeText}>Postavi slike</span>\r\n                    </label>\r\n                    <div id={s.imageContainer} ref={imgCnt}>\r\n                      {imagePreview &&\r\n                        imagePreview.length > 0 &&\r\n                        imagePreview.map((img, i) => (\r\n                          <div\r\n                            key={uuid()}\r\n                            className={s.imageWrapper}\r\n                            onClick={handleDeleteImg}\r\n                            draggable={true}\r\n                            onDragStart={(e) => dragStart(e, i)}\r\n                            onDrop={(e) => drop(e, i)}\r\n                            onDragOver={allowDrop}\r\n                          >\r\n                            <img className={s.previewImage} src={img.url} />\r\n                            <div\r\n                              className={\r\n                                img.checked === \"true\" ? s.deletable : null\r\n                              }\r\n                            />\r\n                          </div>\r\n                        ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className={s.imageCaptionContainer}>\r\n                  <div id={s.imageCaptionText}>Natpis</div>\r\n                  <div id={s.imageCaption}>\r\n                    <textarea ref={captionText} type=\"text\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id={s.addArticleInfo}>\r\n            <div id={s.author}>\r\n              <h3>Autor</h3>\r\n              <div id={s.authorCnt}>\r\n                <div id={s.authorInfo}>\r\n                  <i class=\"fas fa-user\"></i>{\" \"}\r\n                  <span style={{ textTransform: \"capitalize\" }}>\r\n                    {ctx.user.displayName}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={handleUpload}\r\n                  disabled={sending ? true : false}\r\n                >\r\n                  Spasi\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div id={s.category}>\r\n              <label htmlFor=\"category\">Kategorija</label>\r\n              <select\r\n                id=\"category\"\r\n                ref={categorySelect}\r\n                onChange={handleCategoryChange}\r\n              >\r\n                <option>Vijesti</option>\r\n                <option>Biznis</option>\r\n                <option>Sport</option>\r\n                <option>Magazin</option>\r\n                <option>Lifestyle</option>\r\n                <option>Scitech</option>\r\n                <option>Auto</option>\r\n              </select>\r\n              <label id={s.subcategory}>Podkategorija</label>\r\n              <select\r\n                ref={subcategorySelect}\r\n                value={saveSubcat}\r\n                onChange={saveSubcategory}\r\n              >\r\n                {subcategoriesMap.map((item) => {\r\n                  return <option key={uuid()}>{item}</option>;\r\n                })}\r\n              </select>\r\n            </div>\r\n            <div id={s.tag}>\r\n              <h4>Tagovi</h4>\r\n              <input type=\"text\" onKeyDown={handleAddTags} />\r\n              <div id={s.tagContainer} ref={tagContainer}>\r\n                {tags.map((tag) => (\r\n                  <div className={s.tagItem} key={uuid()}>\r\n                    <span>{tag.value ? tag.value : tag}</span>\r\n                    <i onClick={handleRemoveTag} class=\"fas fa-times\"></i>\r\n                  </div>\r\n                ))}\r\n                {/* <div className={s.tagItem}>\r\n                  <span>Hello</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Hello</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n            <div id={s.commentsAllowed}>\r\n              <div>\r\n                <h3>Dozvoli komentare:</h3>\r\n              </div>\r\n              <div id={s.commentBundle} ref={commentsRadio}>\r\n                <div className={s.commentItem}>\r\n                  <label htmlFor=\"komentda\">Da</label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    id=\"komentda\"\r\n                    name=\"koment\"\r\n                    defaultChecked\r\n                  />\r\n                </div>\r\n                <div className={s.commentItem}>\r\n                  <label htmlFor=\"komentne\">Ne</label>\r\n                  <input type=\"radio\" id=\"komentne\" name=\"koment\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddArticle;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nimport s from \"./ArticleLink.module.css\";\r\n\r\nexport const clrs = {\r\n  vijesti: \"#d33d3d\",\r\n  biznis: \"#ef6f3e\",\r\n  sport: \"#55ac53\",\r\n  magazin: \"#a45091\",\r\n  lifestyle: \"#e2a600\",\r\n  scitech: \"#40afee\",\r\n  auto: \"#487baf\",\r\n};\r\n\r\nconst ArticleLink = (props) => {\r\n  useEffect(() => {\r\n    console.log(props);\r\n  }, []);\r\n  return (\r\n    <div id={s.articleLink}>\r\n      <Link\r\n        to={{\r\n          pathname: encodeURI(\r\n            `/${props.category}/${props.subCategory}/${splitTitle(\r\n              props.title\r\n            )}/${props.id}`\r\n          ),\r\n          state: undefined,\r\n        }}\r\n      >\r\n        <div id={s.articleLinkImage}>\r\n          <img src={props.imageUrl} />\r\n        </div>\r\n        <div id={s.articleLinkText}>\r\n          <h3 style={{ color: clrs[props.category.toLowerCase()] }}>\r\n            {props.subTitle}\r\n          </h3>\r\n          <h3>{props.title}</h3>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ArticleLink;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport s from \"./EditArticle.module.css\";\r\nimport { subcategories } from \"../AddArticle\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport Overlay from \"../../Overlay/Overlay\";\r\n\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { db } from \"../../../firebase\";\r\nimport Modal from \"../../Modal/Modal\";\r\nimport { clrs } from \"../../ArticleLink/ArticleLink\";\r\n\r\nexport const articleColors = {\r\n  vijesti: \"#d33d3d\",\r\n  biznis: \"#ef6f3e\",\r\n  sport: \"#55ac53\",\r\n  magazin: \"#a45091\",\r\n  lifestyle: \"#e2a600\",\r\n  scitech: \"#40afee\",\r\n  auto: \"#487baf\",\r\n};\r\n\r\nfunction daysInMonth(month, year) {\r\n  return new Date(year, month, 0).getDate();\r\n}\r\n\r\nexport const timeDifference = (time) => {\r\n  const date = new Date();\r\n  const curTime = [\r\n    date.getFullYear(),\r\n    date.getMonth() + 1,\r\n    date.getDate(),\r\n    date.getHours(),\r\n    date.getMinutes(),\r\n    date.getSeconds(),\r\n  ];\r\n  let difference;\r\n  let transformedDate;\r\n  if (time) {\r\n    transformedDate = time.split(/-|:| /);\r\n  } else {\r\n    return;\r\n  }\r\n  for (let i = 0; i < transformedDate.length; i++) {\r\n    transformedDate[i] = +transformedDate[i];\r\n  }\r\n  let year;\r\n  let month;\r\n  let dateDiff;\r\n  let hour;\r\n  let minute;\r\n  let second;\r\n  year = curTime[0] - transformedDate[0];\r\n  month = curTime[1] - transformedDate[1];\r\n  // console.log(month);\r\n  dateDiff = curTime[2] - transformedDate[2];\r\n  // console.log(dateDiff);\r\n  hour = curTime[3] - transformedDate[3];\r\n  // console.log(hour);\r\n  minute = curTime[4] - transformedDate[4];\r\n  second = curTime[5] - transformedDate[5];\r\n  // console.log(transformedDate);\r\n  let monthLower = false;\r\n  let dateLower = false;\r\n  let hourLower = false;\r\n  let minuteLower = false;\r\n  let secondLower = false;\r\n  // console.log(second);\r\n  if (month < 0) {\r\n    monthLower = true;\r\n  }\r\n  if (dateDiff < 0) {\r\n    dateLower = true;\r\n  }\r\n  if (hour < 0) {\r\n    hourLower = true;\r\n  }\r\n  if (minute < 0) {\r\n    minuteLower = true;\r\n  }\r\n  if (second < 0) {\r\n    secondLower = true;\r\n  }\r\n\r\n  // console.log(curTime[4]);\r\n  // console.log(transformedDate[4]);\r\n  difference = `${\r\n    monthLower && year > 0\r\n      ? year - 1\r\n      : month === 0 && dateLower && year > 0\r\n      ? year - 1\r\n      : month >= 0 && year > 0 //we checked above if date is a problem when month is zero, we care about this when are switching from false to true('prelamanja') later we dont as we se here\r\n      ? year\r\n      : year - 1\r\n  } ${\r\n    dateLower && month > 0\r\n      ? month - 1\r\n      : dateLower && month < 0\r\n      ? 12 - Math.abs(month - 1) //-1 cuz date is lower\r\n      : dateDiff === 0 && hourLower && month < 0\r\n      ? 12 - Math.abs(month - 1) //then it's again -1 cuz month is not there yet, it's few hours away\r\n      : dateDiff === 0 && hourLower && month > 0\r\n      ? 12 - Math.abs(month - 1 === 0 ? -12 : month - 1)\r\n      : !dateLower && month < 0\r\n      ? 12 - Math.abs(month)\r\n      : month\r\n  } ${\r\n    // hourLower && dateDiff > 0\r\n    //   ? dateDiff - 1\r\n    //   : hourLower && dateDiff < 0\r\n    //   ? daysInMonth(date.getMonth + 1, curTime[0]) - Math.abs(dateDiff - 1)\r\n    //   : !hourLower && dateDiff < 0\r\n    //   ? daysInMonth(date.getMonth() + 1, curTime[0]) - Math.abs(dateDiff)\r\n    //   : dateDiff\r\n    hourLower && dateDiff > 0\r\n      ? dateDiff - 1\r\n      : hour >= 0 && hour <= 1 && minuteLower && dateDiff < 0\r\n      ? daysInMonth(date.getMonth() + 1, date.getFullYear()) -\r\n        Math.abs(\r\n          dateDiff -\r\n            (daysInMonth(transformedDate[2], transformedDate[0]) >\r\n              daysInMonth(date.getMonth() + 1, date.getFullYear()) &&\r\n            date.getMonth() + 1 === 2 &&\r\n            daysInMonth(2, date.getFullYear()) === 28 //when feb got 28days and below then it's 29\r\n              ? -1\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) >\r\n                  daysInMonth(date.getMonth() + 1, date.getFullYear()) &&\r\n                date.getMonth() + 1 === 2 &&\r\n                daysInMonth(2, date.getFullYear()) === 29\r\n              ? 0\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) >\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? 0\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) <\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? 2 // -2 cuz this month the num of days is greater than the prev month\r\n              : 1) //-1 day cuz of minute lower, not quite there yet, so when it's 30v30 so the first nor the sec option are true so this is true\r\n        )\r\n      : hourLower && dateDiff < 0 //above we have the case where we care about the exact time, so we look at the minutes to update the hours here, if that is not the case we take this one\r\n      ? daysInMonth(date.getMonth() + 1, curTime[0]) -\r\n        Math.abs(\r\n          dateDiff -\r\n            (daysInMonth(transformedDate[2], transformedDate[0]) >\r\n            daysInMonth(date.getMonth() + 1, curTime[0])\r\n              ? 0\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) <\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? 2\r\n              : 1) //same logic as below just that its hourlower so u do -1 day\r\n        )\r\n      : !hourLower && dateDiff < 0\r\n      ? daysInMonth(date.getMonth() + 1, curTime[0]) -\r\n        Math.abs(\r\n          dateDiff +\r\n            (daysInMonth(transformedDate[2], transformedDate[0]) >\r\n            daysInMonth(date.getMonth() + 1, curTime[0])\r\n              ? 1\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) <\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? -1\r\n              : 0) //if past month has more days than this month then add +1 to the datediff so if  it was posted 31 last month this month its the 30th then its 30-31 = -1 -> 30(days in this month) - 1(math.abs -1 = 1) -> prije 29 dana nego prije 30\r\n        )\r\n      : hourLower && dateDiff === 0 && month - 1 === 0\r\n      ? curTime[2] - 1\r\n      : dateDiff\r\n  } ${\r\n    minuteLower && hour > 0\r\n      ? hour - 1\r\n      : minuteLower && hour < 0\r\n      ? 24 - Math.abs(hour - 1)\r\n      : minute >= 0 && minute <= 1 && secondLower && hour < 0\r\n      ? 24 - Math.abs(hour - 1)\r\n      : dateDiff === 0 && month - 1 === 0 && minuteLower && hour < 0\r\n      ? hour - 1\r\n      : dateDiff === 0 && month - 1 === 0 && !minuteLower && hour < 0\r\n      ? hour\r\n      : !minuteLower && hour < 0\r\n      ? 24 - Math.abs(hour)\r\n      : minute >= 0 && minute <= 1 && secondLower && hour > 0\r\n      ? hour - 1\r\n      : hour\r\n  } ${\r\n    secondLower && minute > 0\r\n      ? minute - 1\r\n      : secondLower && minute < 0\r\n      ? 60 - Math.abs(minute - 1)\r\n      : !secondLower && minute < 0\r\n      ? 60 - Math.abs(minute)\r\n      : minute\r\n  } ${secondLower ? 60 - Math.abs(second) : second}`;\r\n  // console.log(difference);\r\n  difference = difference.split(\" \");\r\n\r\n  let check = false;\r\n  let returnVal = \"\";\r\n  difference.forEach((diff, i) => {\r\n    if (+diff !== 0 && diff > 0 && !check) {\r\n      check = true;\r\n      switch (i) {\r\n        case 0:\r\n          returnVal = `${diff} god`;\r\n          break;\r\n        case 1:\r\n          returnVal = `${diff} mje`;\r\n          break;\r\n        case 2:\r\n          if (diff[diff.length - 1] == 1 && diff != 11) {\r\n            returnVal = `${diff} dan`;\r\n            break;\r\n          } else {\r\n            returnVal = `${diff} dana`;\r\n            break;\r\n          }\r\n        case 3:\r\n          let xform = diff;\r\n          xform = xform.split(\"\");\r\n          xform.forEach((item, i) => {\r\n            if (i === xform.length - 1) {\r\n              if (item == 1 && diff != 11) {\r\n                returnVal = `${diff} sat`;\r\n              } else if (\r\n                (item == 2 || item == 3 || item == 4) &&\r\n                (diff <= 4 || diff >= 22)\r\n              ) {\r\n                returnVal = `${diff} sata`;\r\n              } else if (\r\n                item == 0 ||\r\n                item == 5 ||\r\n                item == 6 ||\r\n                item == 7 ||\r\n                item == 8 ||\r\n                item == 9 ||\r\n                diff == 11 ||\r\n                diff == 12 ||\r\n                diff == 13 ||\r\n                diff == 14\r\n              ) {\r\n                returnVal = `${diff} sati`;\r\n              }\r\n            }\r\n          });\r\n          // console.log(xform);\r\n          break;\r\n        case 4:\r\n          returnVal = `${diff} min`;\r\n          break;\r\n        case 5:\r\n          returnVal = `${diff} sek`;\r\n          break;\r\n      }\r\n    }\r\n    // else if (!check && i === difference.length - 1) {\r\n    //   alert(`${diff} sekundi`);\r\n    // }\r\n  });\r\n  // console.log(transformedDate);\r\n  // console.log(curTime);\r\n  return returnVal;\r\n};\r\n\r\nconst EditArticles = () => {\r\n  const [select, setSelect] = useState([...subcategories.vijesti]);\r\n  const [curSelect, setCurSelect] = useState(\"BiH\");\r\n  const [selectTwo, setSelectTwo] = useState([...subcategories.poƒçetna]);\r\n  const [curSelectTwo, setCurSelectTwo] = useState(\"Vijesti\");\r\n  const [glavni, setGlavni] = useState(true);\r\n  const [adding, setAdding] = useState(false);\r\n  const [addingModus, setAddingModus] = useState(false);\r\n  const [switchingModus, setSwitchingModus] = useState(false);\r\n  const [showSubCat, setShowSubCat] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [switching, setSwitching] = useState(false);\r\n  const [editing, setEditing] = useState(false);\r\n  const [articles, setArticles] = useState([{}, {}, {}, {}, {}, {}, {}]);\r\n  const [clickedPos, setClickedPos] = useState(null);\r\n  const [fetchPos, setFetchPos] = useState(null);\r\n  const [showAddingItem, setShowAddingItem] = useState(false);\r\n  const [switchMode, setSwitchMode] = useState(false);\r\n\r\n  const switchSelect = useRef();\r\n  const selectMainVal = useRef();\r\n  const articleFetchCnt = useRef();\r\n  const mainContentCnt = useRef();\r\n  const subConentCntLeft = useRef();\r\n  const subConentCntRight = useRef();\r\n  const modalRef = useRef();\r\n  const addArticleBox = useRef();\r\n  const switchArticleBox = useRef();\r\n  const editArticleBox = useRef();\r\n  const switchSelect2 = useRef();\r\n  const history = useHistory();\r\n\r\n  const [articleFetch, setArticleFetch] = useState([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(subcategories);\r\n    if (articles) {\r\n      console.log(articles[0]);\r\n    }\r\n    console.log(articles);\r\n  });\r\n\r\n  useEffect(() => {\r\n    console.log(switchSelect.current.value);\r\n    // window.addEventListener('popstate', () => {\r\n    //   alert('popped');\r\n    // });\r\n    fetchArticles(\"init\");\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (articleFetch) {\r\n      console.log(articleFetch);\r\n    }\r\n  }, [articleFetch]);\r\n\r\n  const handleSelectChange = (e, mode) => {\r\n    if (mode === \"dva\") {\r\n      setCurSelectTwo(e.target.value);\r\n    } else if (mode === \"jedan\") {\r\n      setCurSelect(e.target.value);\r\n    }\r\n  };\r\n\r\n  const handleSelectMain = (e, mode) => {\r\n    //mode = jedan (editing and adding in overlay), two = main select box\r\n    setArticleFetch([]);\r\n    const { value } = (e && e.target) || switchSelect2.current;\r\n    if (mode === \"two\" && switchSelect2.current.value === \"Poƒçetna\") {\r\n      setShowSubCat(false);\r\n    } else {\r\n      setShowSubCat(true);\r\n    }\r\n    if (mode === \"two\" && switchSelect2.current.value !== \"Poƒçetna\") {\r\n      //when adding, if we do not change the subcat(so it's automatically the first subcat) and we press fetch cnt it wont work because curselect didnt change, this way we fix it\r\n      setCurSelect(subcategories[value.toLowerCase()][0]);\r\n    }\r\n    setSelect([...subcategories[value.toLowerCase()]]);\r\n    switch (value) {\r\n      case \"Poƒçetna\":\r\n        if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.poƒçetna]);\r\n          setCurSelectTwo(subcategories.poƒçetna[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Vijesti\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.vijesti]);\r\n          setCurSelect(subcategories.vijesti[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.vijesti]);\r\n          setCurSelectTwo(subcategories.vijesti[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Biznis\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.biznis]);\r\n          setCurSelect(subcategories.biznis[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.biznis]);\r\n          setCurSelectTwo(subcategories.biznis[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Sport\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.sport]);\r\n          setCurSelect(subcategories.sport[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.sport]);\r\n          setCurSelectTwo(subcategories.sport[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Magazin\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.magazin]);\r\n          setCurSelect(subcategories.magazin[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.magazin]);\r\n          setCurSelectTwo(subcategories.magazin[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Lifestyle\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.lifestyle]);\r\n          setCurSelect(subcategories.lifestyle[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.lifestyle]);\r\n          setCurSelectTwo(subcategories.lifestyle[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Scitech\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.scitech]);\r\n          setCurSelect(subcategories.scitech[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.scitech]);\r\n          setCurSelectTwo(subcategories.scitech[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Auto\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.auto]);\r\n          setCurSelect(subcategories.auto[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.auto]);\r\n          setCurSelectTwo(subcategories.auto[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n    }\r\n  };\r\n\r\n  const handleGlavni = (e) => {\r\n    if (e.target.value === \"Glavni sadr≈æaj\") {\r\n      setGlavni(true);\r\n      switchSelect2.current.value = \"Poƒçetna\";\r\n      setSwitchMode(true);\r\n    } else {\r\n      setGlavni(false);\r\n      switchSelect2.current.value = \"Poƒçetna\";\r\n      setSelectTwo([...subcategories[\"poƒçetna\"]]);\r\n      setCurSelectTwo(\"Vijesti\");\r\n      setSwitchMode(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!glavni && curSelectTwo && switchMode) {\r\n      handleSelectMain(null, \"two\");\r\n      setSwitchMode(false);\r\n    } else if (!glavni && curSelectTwo) {\r\n      fetchArticles(\"init\");\r\n    } else if (glavni && switchMode) {\r\n      handleSelectMain(null, \"two\");\r\n      setSwitchMode(false);\r\n    }\r\n  }, [glavni, curSelectTwo, switchMode]);\r\n\r\n  const handleCloseOverlay = (e) => {\r\n    const { id } = e.target;\r\n    if (id.includes(\"overlay\") && !showModal) {\r\n      setAdding(false);\r\n      if (switchSelect2.current.value === \"Poƒçetna\") {\r\n        setShowSubCat(false);\r\n      }\r\n      setArticleFetch([]);\r\n      setClickedPos(null);\r\n      if (editing) {\r\n        setEditing(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const fetchArticles = (mode) => {\r\n    setLoading(true);\r\n    let dbRef = undefined;\r\n    console.log(mode);\r\n    if (mode === \"init\") {\r\n      if (switchSelect.current.value === \"Glavni sadr≈æaj\") {\r\n        dbRef = db.ref(\r\n          `viewContent/${switchSelect.current.value}/${switchSelect2.current.value}`\r\n        );\r\n      } else if (switchSelect.current.value === \"Sporedni sadr≈æaj\") {\r\n        dbRef = db.ref(\r\n          `viewContent/${switchSelect.current.value}/${switchSelect2.current.value}/${curSelectTwo}`\r\n        );\r\n        console.log(\r\n          `viewContent/${switchSelect.current.value}/${switchSelect2.current.value}/${curSelectTwo}`\r\n        );\r\n      }\r\n      dbRef.get().then((snapshot) => {\r\n        if (snapshot.exists) {\r\n          const data = snapshot.val();\r\n          console.log(data);\r\n          if (!data) {\r\n            if (\r\n              switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n              (curSelectTwo !== \"Auto\" || curSelectTwo !== \"Scitech\")\r\n            ) {\r\n              setArticles([{}, {}, {}, {}, {}, {}]);\r\n            } else if (\r\n              (switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n                switchSelect2.current.value ===\r\n                  \"Poƒçetna\"(\r\n                    curSelectTwo === \"Auto\" || curSelectTwo === \"Scitech\"\r\n                  )) ||\r\n              (switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n                switchSelect2.current.value !== \"Poƒçetna\")\r\n            ) {\r\n              setArticles([{}, {}, {}, {}]);\r\n            } else {\r\n              setArticles([{}, {}, {}, {}, {}, {}, {}]);\r\n            }\r\n            return;\r\n          }\r\n          let realData = [];\r\n          const dataReady = [];\r\n          let incr = 0;\r\n          for (let key in data) {\r\n            realData.push(data[key]);\r\n            console.log(data[key]);\r\n            // if (realData[incr]) {\r\n            //   realData[incr].timeDiff = timeDifference(realData[incr].date);\r\n            //   incr++;\r\n            // }\r\n          }\r\n          console.log(realData[0]);\r\n          const promises = [];\r\n          realData[0].forEach((art, i) => {\r\n            console.log(art[1]);\r\n            console.log(art[0]);\r\n            // if (i < 6) {\r\n            if (Array.isArray(art)) {\r\n              promises.push(\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${art[1]}/-${art[0]}.json`\r\n                ).then((response) => response.json())\r\n              );\r\n            }\r\n            // }\r\n          });\r\n\r\n          const promisedData = Promise.all(promises);\r\n          promisedData.then((data) => {\r\n            console.log(data);\r\n            let cpy = [];\r\n            // dataReady.push(data);\r\n            // if (dataReady[incr]) {\r\n            //   dataReady[incr].timeDiff = timeDifference(dataReady[incr].date);\r\n            //   incr++;\r\n            // }\r\n            for (let i = 0; i < data.length; i++) {\r\n              data[i].timeDiff = timeDifference(data[i].date);\r\n            }\r\n            if (data.length < 7) {\r\n              //if what we have fetched has empty str fields, so some places have an art some do not\r\n              let inc = 0;\r\n              realData[0].forEach((art) => {\r\n                if (!art) {\r\n                  cpy.push({});\r\n                } else {\r\n                  cpy.push(data[inc]);\r\n                  inc++;\r\n                }\r\n              });\r\n              console.log(cpy);\r\n              cpy.forEach((cp) => {\r\n                console.log(Object.keys(cp).length);\r\n              });\r\n              setArticles(cpy);\r\n            } else {\r\n              setArticles(data);\r\n            }\r\n            // if (i === realData[0].length - 1) {\r\n            //   if (dataReady.length < 7) {\r\n            //     const diff = 7 - dataReady.length;\r\n            //     for (let i = 0; i < diff; i++) {\r\n            //       dataReady.push({});\r\n            //     }\r\n            //   }\r\n            //   setArticles(dataReady);\r\n            // }\r\n          });\r\n          // setArticles(realData);\r\n        }\r\n      });\r\n    } else {\r\n      //fetchdata in adding/editing overlay box\r\n      const mainVal = selectMainVal.current.value;\r\n      dbRef = db.ref(`articles/${mainVal}/${curSelect}`);\r\n      console.log(curSelect);\r\n      dbRef.get().then((snapshot) => {\r\n        if (snapshot.exists) {\r\n          const data = snapshot.val();\r\n          let realData = [];\r\n          let incr = 0;\r\n          for (let key in data) {\r\n            realData.push(data[key]);\r\n            realData[incr].timeDiff = timeDifference(realData[incr].date);\r\n            incr++;\r\n          }\r\n          realData.reverse();\r\n          setArticleFetch(realData);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddFetchedArticle = (e) => {\r\n    if (articleFetchCnt.current) {\r\n      for (let i = 0; i < articleFetchCnt.current.children.length; i++) {\r\n        if (articleFetchCnt.current.children[i].contains(e.target)) {\r\n          console.log(articleFetch[i]);\r\n          setFetchPos(i);\r\n          setShowModal(true);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditFetchedArticle = (e, artItem) => {\r\n    console.log(artItem);\r\n    if (e.button == 1 || e.buttons == 4) {\r\n      // e.preventDefault();\r\n      alert(\"ne moze se koristiti srednji klik\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {}, []);\r\n\r\n  const handleSetPos = (e) => {};\r\n\r\n  const showAdding = (ind) => {\r\n    if (!switching) {\r\n      setClickedPos(ind);\r\n      console.log(ind);\r\n    }\r\n  };\r\n  const hideAdding = () => {\r\n    setClickedPos(null);\r\n  };\r\n\r\n  const handleConfirmation = (e) => {\r\n    if (e.target.textContent === \"Da\") {\r\n      // alert(clickedPos);\r\n      // alert(fetchPos);\r\n      setArticles((old) => {\r\n        let newArr = [...old];\r\n        newArr[clickedPos] = articleFetch[fetchPos];\r\n        return newArr;\r\n      });\r\n      setShowModal(false);\r\n      setAdding(false);\r\n      setShowSubCat(false);\r\n      setArticleFetch([]);\r\n      setClickedPos(null);\r\n      setFetchPos(null);\r\n    } else if (e.target.textContent === \"Ne\") {\r\n      setShowModal(false);\r\n      setFetchPos(null);\r\n    }\r\n  };\r\n\r\n  const handleModeSwitch = (e, input) => {\r\n    const { value } = e.target;\r\n    if (input === \"dodaj\") {\r\n      if (!addingModus) {\r\n        setAddingModus(true);\r\n      } else {\r\n        setAddingModus(false);\r\n      }\r\n      if (editing) {\r\n        setEditing(false);\r\n      } else if (switchingModus) {\r\n        setSwitchingModus(false);\r\n      }\r\n    } else if (input === \"zamjeni\") {\r\n      if (!switchingModus) {\r\n        setSwitchingModus(true);\r\n      } else {\r\n        setSwitchingModus(false);\r\n      }\r\n      if (addingModus) {\r\n        setAddingModus(false);\r\n      } else if (editing) {\r\n        setEditing(false);\r\n      }\r\n    } else if (input === \"edituj\") {\r\n      setEditing(true);\r\n      if (addingModus) {\r\n        setAddingModus(false);\r\n      } else if (switchingModus) {\r\n        setSwitchingModus(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const dragStart = (e) => {\r\n    let dragNum;\r\n    if (switchingModus) {\r\n      if (!glavni) {\r\n        if (subConentCntRight.current.contains(e.target)) {\r\n          for (let i = 0; i < subConentCntRight.current.children.length; i++) {\r\n            if (subConentCntRight.current.children[i].contains(e.target)) {\r\n              if (i === 0) {\r\n                dragNum = 4;\r\n              } else {\r\n                dragNum = 5;\r\n              }\r\n            }\r\n          }\r\n          const xferObj = { dragPos: +dragNum, place: \"right\" };\r\n          e.dataTransfer.setData(\"text\", JSON.stringify(xferObj));\r\n        } else if (subConentCntLeft.current.contains(e.target)) {\r\n          for (let i = 0; i < subConentCntLeft.current.children.length; i++) {\r\n            if (subConentCntLeft.current.children[i].contains(e.target)) {\r\n              dragNum = i;\r\n              const xferObj = { dragPos: +dragNum, place: \"left\" };\r\n              e.dataTransfer.setData(\"text\", JSON.stringify(xferObj));\r\n            }\r\n          }\r\n        }\r\n      } else if (glavni) {\r\n        if (mainContentCnt.current.contains(e.target)) {\r\n          for (let i = 0; i < mainContentCnt.current.children.length; i++) {\r\n            if (mainContentCnt.current.children[i].contains(e.target)) {\r\n              dragNum = i;\r\n              const xferObj = { dragPos: +dragNum };\r\n              e.dataTransfer.setData(\"text\", JSON.stringify(xferObj));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const allowDrop = (e) => {\r\n    if (switchingModus) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const drop = (e) => {\r\n    e.preventDefault();\r\n    let droppedPos = 0;\r\n    if (switchingModus) {\r\n      if (!glavni) {\r\n        if (subConentCntRight.current.contains(e.target)) {\r\n          for (let i = 0; i < subConentCntRight.current.children.length; i++) {\r\n            if (subConentCntRight.current.children[i].contains(e.target)) {\r\n              if (i === 0) {\r\n                droppedPos = 4;\r\n              } else if (i === 1) {\r\n                droppedPos = 5;\r\n              }\r\n              let dragData = e.dataTransfer.getData(\"text\");\r\n              dragData = JSON.parse(dragData);\r\n              setArticles((old) => {\r\n                let newArr = [...old];\r\n                let extra = [...old];\r\n                newArr[dragData.dragPos] = { ...extra[droppedPos] };\r\n                newArr[droppedPos] = { ...extra[dragData.dragPos] };\r\n                return newArr;\r\n              });\r\n            }\r\n          }\r\n        }\r\n        if (subConentCntLeft.current.contains(e.target)) {\r\n          for (let i = 0; i < subConentCntLeft.current.children.length; i++) {\r\n            if (subConentCntLeft.current.children[i].contains(e.target)) {\r\n              droppedPos = i;\r\n            }\r\n          }\r\n          let dragData = e.dataTransfer.getData(\"text\");\r\n          dragData = JSON.parse(dragData);\r\n          console.log(dragData);\r\n          if (dragData.place === \"right\") {\r\n            setArticles((old) => {\r\n              let newArr = [...old];\r\n              let extra = [...old];\r\n              newArr[dragData.dragPos] = { ...extra[droppedPos] };\r\n              newArr[droppedPos] = { ...extra[dragData.dragPos] };\r\n              return newArr;\r\n            });\r\n          } else if (dragData.place === \"left\") {\r\n            setArticles((old) => {\r\n              let newArr = [...old];\r\n              let extra = [...old];\r\n              newArr[clickedPos] = { ...extra[droppedPos] };\r\n              newArr[droppedPos] = { ...extra[clickedPos] };\r\n              return newArr;\r\n            });\r\n          }\r\n        }\r\n      } else if (glavni) {\r\n        if (mainContentCnt.current.contains(e.target)) {\r\n          for (let i = 0; i < mainContentCnt.current.children.length; i++) {\r\n            if (mainContentCnt.current.children[i].contains(e.target)) {\r\n              droppedPos = i;\r\n              let dragData = e.dataTransfer.getData(\"text\");\r\n              dragData = JSON.parse(dragData);\r\n              setArticles((old) => {\r\n                let newArr = [...old];\r\n                let extra = [...old];\r\n                newArr[dragData.dragPos] = { ...extra[droppedPos] };\r\n                newArr[droppedPos] = { ...extra[dragData.dragPos] };\r\n                return newArr;\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveChanges = () => {\r\n    // const dbRef = db.ref(`articles/`)\r\n\r\n    const val1 = switchSelect.current.value;\r\n    const val2 = switchSelect.current.nextSibling.value;\r\n    const dbRef = db.ref(\r\n      `viewContent/${val1}/${val2}${\r\n        val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n      }`\r\n    );\r\n    console.log(curSelectTwo);\r\n    console.log(\r\n      `viewContent/${val1}/${val2}${\r\n        val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n      }`\r\n    );\r\n    // const dbRef = db.ref(`articles/auto/Testovi`);\r\n    console.log(articles);\r\n    const articleIds = {};\r\n    let incr = 0;\r\n    let notBiggerThanFour;\r\n    if (!subConentCntRight.current && !glavni) {\r\n      notBiggerThanFour = true;\r\n    }\r\n    articles.forEach((art, i) => {\r\n      if (!notBiggerThanFour) {\r\n        if (art.id) {\r\n          articleIds[incr] = [];\r\n          articleIds[incr][0] = art.id;\r\n          articleIds[incr][1] = `${art.category}/${art.subCategory}`;\r\n          incr++;\r\n        } else {\r\n          articleIds[incr] = \"\";\r\n          incr++;\r\n        }\r\n      } else {\r\n        if (i < 4) {\r\n          if (art.id) {\r\n            articleIds[incr] = [];\r\n            articleIds[incr][0] = art.id;\r\n            articleIds[incr][1] = `${art.category}/${art.subCategory}`;\r\n            incr++;\r\n          } else {\r\n            articleIds[incr] = \"\";\r\n            incr++;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    console.log(articleIds);\r\n    dbRef.get().then((snapshot) => {\r\n      if (snapshot.exists) {\r\n        const data = snapshot.val();\r\n        console.log(data);\r\n        // console.log(Object.keys(data));\r\n        if (data) {\r\n          const objKey = Object.keys(data);\r\n          console.log(objKey);\r\n          alert(\"does exist\");\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/viewContent/${val1}/${val2}${\r\n              val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n            }/${objKey[0]}.json`,\r\n            {\r\n              method: \"PATCH\",\r\n              body: JSON.stringify(articleIds),\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n            });\r\n        } else {\r\n          alert(\"does not exist\");\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/viewContent/${val1}/${val2}${\r\n              val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n            }.json`,\r\n            {\r\n              method: \"POST\",\r\n              body: JSON.stringify(articleIds),\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n            });\r\n        }\r\n        // let realData = [];\r\n        // let incr = 0;\r\n        // for (let key in data) {\r\n        //   realData.push(data[key]);\r\n        //   realData[incr].timeDiff = timeDifference(realData[incr].date);\r\n        //   incr++;\r\n        // }\r\n        // setArticleFetch(realData);\r\n      }\r\n    });\r\n    if (!glavni) {\r\n      const val3 = switchSelect.current.nextSibling.nextSibling.value;\r\n    }\r\n    // alert(selectMainVal);\r\n    // alert(selectTwo);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(articleFetch);\r\n  }, [articleFetch]);\r\n\r\n  return (\r\n    <>\r\n      {/* <iframe\r\n        id=\"sofa-standings-embed-1-37036\"\r\n        width=\"100%\"\r\n        height={717}\r\n        src=\"https://www.sofascore.com/tournament/1/37036/standings/tables/embed\"\r\n        frameBorder={0}\r\n        scrolling=\"no\"\r\n        style={{ height: '717px!important' }}\r\n      >\r\n        {'{'}' '{'}'}\r\n      </iframe>{' '}\r\n      <div>\r\n        Standings provided by{' '}\r\n        <a target=\"_blank\" href=\"https://www.sofascore.com/\">\r\n          SofaScore LiveScore\r\n        </a>\r\n      </div> */}\r\n      {adding && (\r\n        <Overlay handleCloseOverlay={handleCloseOverlay}>\r\n          <div id={s.allArticlesHeader}>\r\n            <select\r\n              onChange={(e) => handleSelectMain(e, \"jedan\")}\r\n              defaultValue={\"\"}\r\n              ref={selectMainVal}\r\n              disabled={\r\n                showSubCat && switchSelect2.current.value !== \"Poƒçetna\"\r\n                  ? true\r\n                  : false\r\n              }\r\n              value={\r\n                showSubCat && switchSelect2.current.value !== \"Poƒçetna\"\r\n                  ? switchSelect2.current.value\r\n                  : null\r\n              }\r\n            >\r\n              <option disabled={true} label={\" -- Izaberi opciju -- \"}></option>\r\n              <option>Vijesti</option>\r\n              <option>Biznis</option>\r\n              <option>Sport</option>\r\n              <option>Magazin</option>\r\n              <option>Lifestyle</option>\r\n              <option>Scitech</option>\r\n              <option>Auto</option>\r\n            </select>\r\n            {showSubCat && (\r\n              <>\r\n                <select\r\n                  value={curSelect}\r\n                  onChange={(e) => handleSelectChange(e, \"jedan\")}\r\n                >\r\n                  {select.map((item) => (\r\n                    <option key={uuid()}>{item}</option>\r\n                  ))}\r\n                </select>\r\n                <button id={s.fetchBtn} onClick={fetchArticles}>\r\n                  Prika≈æi sadr≈æaj\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            <div id={s.allArticlesItems} ref={articleFetchCnt}>\r\n              {articleFetch &&\r\n                articleFetch.map((articleItem) => {\r\n                  return (\r\n                    <div\r\n                      className={s.articleFetchItem}\r\n                      onClick={handleAddFetchedArticle}\r\n                      key={uuid()}\r\n                      style={{ flexDirection: \"column\" }}\r\n                    >\r\n                      <div className={s.addingBundler}>\r\n                        <div className={s.articleFetchItemImgCnt}>\r\n                          {/* <img src={articleItem.url[0]} /> */}\r\n                          <img src={articleItem.images[0]} />\r\n                        </div>\r\n                        <div className={s.articleItemFetchTitles}>\r\n                          <h3\r\n                            style={{\r\n                              color: `${\r\n                                clrs[articleItem.category.toLowerCase()]\r\n                              }`,\r\n                            }}\r\n                          >\r\n                            {articleItem.subTitle}\r\n                          </h3>\r\n                          <h3>{articleItem.title}</h3>\r\n                        </div>\r\n                      </div>\r\n                      <div className={s.articleItemFetchFooter}>\r\n                        <span>{articleItem.timeDiff}</span>\r\n                        <div className={s.articleItemFetchBundle}>\r\n                          <span>\r\n                            <i class=\"fas fa-comment\"></i>{\" \"}\r\n                            {!articleItem.comments\r\n                              ? 0\r\n                              : Object.keys(articleItem.comments).length}\r\n                          </span>\r\n                          <span>\r\n                            <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                            {articleItem.shares.constructor !== Object\r\n                              ? 0\r\n                              : Object.keys(articleItem.shares).length}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n          {showModal && (\r\n            <Modal ref={modalRef} handleClick={handleConfirmation} />\r\n          )}\r\n        </Overlay>\r\n      )}\r\n      {editing && (\r\n        <Overlay handleCloseOverlay={handleCloseOverlay}>\r\n          <div id={s.allArticlesHeader}>\r\n            <select\r\n              onChange={(e) => handleSelectMain(e, \"jedan\")}\r\n              defaultValue={\"\"}\r\n              ref={selectMainVal}\r\n            >\r\n              <option disabled={true} label={\" -- Izaberi opciju -- \"}></option>\r\n              <option>Vijesti</option>\r\n              <option>Biznis</option>\r\n              <option>Sport</option>\r\n              <option>Magazin</option>\r\n              <option>Lifestyle</option>\r\n              <option>Scitech</option>\r\n              <option>Auto</option>\r\n            </select>\r\n            {showSubCat && (\r\n              <>\r\n                <select\r\n                  value={curSelect}\r\n                  onChange={(e) => handleSelectChange(e, \"jedan\")}\r\n                >\r\n                  {select.map((item) => (\r\n                    <option key={uuid()}>{item}</option>\r\n                  ))}\r\n                </select>\r\n                <button id={s.fetchBtn} onClick={fetchArticles}>\r\n                  Prika≈æi sadr≈æaj\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            <div id={s.allArticlesItems} ref={articleFetchCnt}>\r\n              {articleFetch &&\r\n                articleFetch.map((articleItem) => {\r\n                  return (\r\n                    <div\r\n                      className={s.articleFetchItem}\r\n                      onMouseDown={(e) =>\r\n                        handleEditFetchedArticle(e, articleItem)\r\n                      }\r\n                      key={uuid()}\r\n                    >\r\n                      <Link\r\n                        to={{\r\n                          pathname: \"/adminpanel\",\r\n                          state: { articleData: articleItem },\r\n                        }}\r\n                      >\r\n                        <div className={s.editBundler}>\r\n                          <div className={s.articleFetchItemImgCnt}>\r\n                            {/* <img src={articleItem.url[0]} /> */}\r\n                            <img src={articleItem.images[0]} />\r\n                          </div>\r\n                          <div className={s.articleItemFetchTitles}>\r\n                            <h3\r\n                              style={{\r\n                                color: `${\r\n                                  clrs[articleItem.category.toLowerCase()]\r\n                                }`,\r\n                              }}\r\n                            >\r\n                              {articleItem.subTitle}\r\n                            </h3>\r\n                            <h3>{articleItem.title}</h3>\r\n                          </div>\r\n                        </div>\r\n                        <div className={s.articleItemFetchFooter}>\r\n                          <span>{articleItem.timeDiff}</span>\r\n                          <div className={s.articleItemFetchBundle}>\r\n                            <span>\r\n                              <i class=\"fas fa-comment\"></i>{\" \"}\r\n                              {!articleItem.comments\r\n                                ? 0\r\n                                : Object.keys(articleItem.comments).length}\r\n                            </span>\r\n                            <span>\r\n                              <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                              {articleItem.shares.constructor !== Object\r\n                                ? 0\r\n                                : Object.keys(articleItem.shares).length}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </Link>\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n          {showModal && (\r\n            <Modal ref={modalRef} handleClick={handleConfirmation} />\r\n          )}\r\n        </Overlay>\r\n      )}\r\n      <div id={s.editArticles}>\r\n        <div id={s.allArticles}></div>\r\n        <div id={s.allArticlesMain}>\r\n          <div id={s.allArticlesMainBody}>\r\n            <div id={s.allArticlesMainBodyHeader}>\r\n              <select\r\n                onChange={handleGlavni}\r\n                ref={switchSelect}\r\n                value={glavni ? \"Glavni sadr≈æaj\" : \"Sporedni sadr≈æaj\"}\r\n              >\r\n                <option>Glavni sadr≈æaj</option>\r\n                <option>Sporedni sadr≈æaj</option>\r\n              </select>\r\n              <select\r\n                onChange={(e) => handleSelectMain(e, \"two\")}\r\n                defaultValue={\"Poƒçetna\"}\r\n                ref={switchSelect2}\r\n              >\r\n                <option>Poƒçetna</option>\r\n                <option>Vijesti</option>\r\n                <option>Biznis</option>\r\n                <option>Sport</option>\r\n                <option>Magazin</option>\r\n                <option>Lifestyle</option>\r\n                <option>Scitech</option>\r\n                <option>Auto</option>\r\n              </select>\r\n              {!glavni && (\r\n                <select\r\n                  onChange={(e) => handleSelectChange(e, \"dva\")}\r\n                  value={curSelectTwo}\r\n                  defaultValue={\"Vijesti\"}\r\n                >\r\n                  {selectTwo.map((item) => (\r\n                    <option key={uuid()}>{item}</option>\r\n                  ))}\r\n                </select>\r\n              )}\r\n              <div id={s.chooseModeCnt}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"adding\"\r\n                  name=\"dodajswitch\"\r\n                  value=\"Dodaj clanak\"\r\n                  onClick={(e) => {\r\n                    handleModeSwitch(e, \"dodaj\");\r\n                  }}\r\n                  disabled={articles.length ? false : true}\r\n                  checked={addingModus}\r\n                  ref={addArticleBox}\r\n                />\r\n                <label htmlFor=\"adding\">Dodaj ƒçlanak</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"switching\"\r\n                  name=\"dodajswitch\"\r\n                  value=\"Zamjeni clanak\"\r\n                  onClick={(e) => {\r\n                    handleModeSwitch(e, \"zamjeni\");\r\n                  }}\r\n                  disabled={articles.length ? false : true}\r\n                  checked={switchingModus}\r\n                  ref={switchArticleBox}\r\n                />\r\n                <label htmlFor=\"switching\">Zamjeni poziciju</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"editing\"\r\n                  name=\"dodajswitch\"\r\n                  value=\"Edituj clanak\"\r\n                  onClick={(e) => {\r\n                    handleModeSwitch(e, \"edituj\");\r\n                  }}\r\n                  disabled={articles.length ? false : true}\r\n                  checked={editing}\r\n                  ref={editArticleBox}\r\n                />\r\n                <label htmlFor=\"editing\">Edituj ƒçlanak</label>\r\n              </div>\r\n              <div id={s.saveChanges}>\r\n                <button onClick={saveChanges}>Spasi izmjene</button>\r\n              </div>\r\n            </div>\r\n            {!glavni && (\r\n              <div\r\n                className={s.articleSubCnt}\r\n                style={\r\n                  (switchSelect2.current.value !== \"Poƒçetna\" &&\r\n                    curSelectTwo !== \"Scitech\") ||\r\n                  (switchSelect2.current.value !== \"Poƒçetna\" &&\r\n                    curSelectTwo !== \"Auto\") ||\r\n                  (switchSelect2.current.value === \"Poƒçetna\" &&\r\n                    (curSelectTwo === \"Auto\" || curSelectTwo === \"Scitech\"))\r\n                    ? {\r\n                        gridTemplateColumns: \"1fr\",\r\n                      }\r\n                    : null\r\n                }\r\n              >\r\n                <div className={s.subLeft} ref={subConentCntLeft}>\r\n                  {articles.map((article, i) => {\r\n                    if (Object.keys(article).length !== 0 && i < 4) {\r\n                      if (addingModus) {\r\n                        return (\r\n                          <div\r\n                            className={s.subLeftItem}\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            onMouseLeave={hideAdding}\r\n                            key={uuid()}\r\n                          >\r\n                            {clickedPos !== i && (\r\n                              <>\r\n                                <div className={s.subLeftItemImg}>\r\n                                  <img src={article.images[0]} />\r\n                                </div>\r\n                                <div className={s.subLeftItemText}>\r\n                                  <h3>{article.subTitle}</h3>\r\n                                  <h3>{article.title}</h3>\r\n                                </div>\r\n                                <div className={s.subLeftItemBundle}>\r\n                                  <span>{article.timeDiff}</span>\r\n                                  <div className={s.subLeftBundleRight}>\r\n                                    <span>\r\n                                      <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                      {!article.comments\r\n                                        ? 0\r\n                                        : Object.keys(article.comments).length}\r\n                                    </span>\r\n                                    <span>\r\n                                      <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                      {article.shares.constructor !== Object\r\n                                        ? 0\r\n                                        : Object.keys(article.shares).length}\r\n                                    </span>\r\n                                  </div>\r\n                                </div>\r\n                              </>\r\n                            )}{\" \"}\r\n                            {clickedPos === i && (\r\n                              <div className={s.addArticleLeft}>\r\n                                <i\r\n                                  class=\"fas fa-plus\"\r\n                                  onClick={() => setAdding(true)}\r\n                                ></i>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          <div\r\n                            className={s.subLeftItem}\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            onMouseLeave={hideAdding}\r\n                            key={uuid()}\r\n                            draggable={true}\r\n                            onDragStart={(e) => dragStart(e)}\r\n                            onDrop={(e) => drop(e)}\r\n                            onDragOver={(e) => allowDrop(e)}\r\n                          >\r\n                            <>\r\n                              <div className={s.subLeftItemImg}>\r\n                                <img src={article.images[0]} />\r\n                              </div>\r\n                              <div className={s.subLeftItemText}>\r\n                                <h3>{article.subTitle}</h3>\r\n                                <h3>{article.title}</h3>\r\n                              </div>\r\n                              <div className={s.subLeftItemBundle}>\r\n                                <span>{article.timeDiff}</span>\r\n                                <div className={s.subLeftBundleRight}>\r\n                                  <span>\r\n                                    <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                    {!article.comments\r\n                                      ? 0\r\n                                      : Object.keys(article.comments).length}\r\n                                  </span>\r\n                                  <span>\r\n                                    <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                    {article.shares.constructor !== Object\r\n                                      ? 0\r\n                                      : Object.keys(article.shares).length}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            </>\r\n                          </div>\r\n                        );\r\n                      }\r\n                    } else {\r\n                      if (i <= 3 && addingModus) {\r\n                        return (\r\n                          <div\r\n                            className={\r\n                              i !== 1 ? s.addArticle : `${s.addArticle}`\r\n                            }\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            key={uuid()}\r\n                          >\r\n                            <i\r\n                              class=\"fas fa-plus\"\r\n                              onClick={() => setAdding(true)}\r\n                            ></i>\r\n                          </div>\r\n                        );\r\n                      } else if (i <= 3 && !addingModus) {\r\n                        return <div className={s.emptySub} key={uuid()}></div>;\r\n                      }\r\n                    }\r\n                  })}\r\n                </div>\r\n                {switchSelect2.current.value === \"Poƒçetna\" &&\r\n                  curSelectTwo !== \"Scitech\" &&\r\n                  curSelectTwo !== \"Auto\" && (\r\n                    <div className={s.subRight} ref={subConentCntRight}>\r\n                      {articles.map((article, i) => {\r\n                        if (Object.keys(article).length !== 0) {\r\n                          if (i >= 4 && i <= 5) {\r\n                            if (addingModus) {\r\n                              return (\r\n                                <div\r\n                                  className={s.subRightItem}\r\n                                  key={uuid()}\r\n                                  onMouseEnter={() => showAdding(i)}\r\n                                  onMouseLeave={hideAdding}\r\n                                >\r\n                                  {clickedPos !== i && (\r\n                                    <>\r\n                                      <div className={s.subRightText}>\r\n                                        <h3>{article.subTitle}</h3>\r\n                                        <h3>{article.title}</h3>\r\n                                      </div>\r\n                                      <div className={s.subRightBundle}>\r\n                                        <span>{article.timeDiff}</span>\r\n                                        <div className={s.subRightBundleRight}>\r\n                                          <span>\r\n                                            <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                            {!article.comments\r\n                                              ? 0\r\n                                              : Object.keys(article.comments)\r\n                                                  .length}\r\n                                          </span>\r\n                                          <span>\r\n                                            <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                            {article.shares.constructor !==\r\n                                            Object\r\n                                              ? 0\r\n                                              : Object.keys(article.shares)\r\n                                                  .length}\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    </>\r\n                                  )}\r\n                                  {clickedPos === i && (\r\n                                    <div\r\n                                      className={s.addArticle}\r\n                                      onMouseEnter={() => showAdding(i)}\r\n                                      key={uuid()}\r\n                                      style={{\r\n                                        borderTop: \"0.1rem solid #e5e7eb\",\r\n                                      }}\r\n                                    >\r\n                                      <i\r\n                                        class=\"fas fa-plus\"\r\n                                        onClick={() => setAdding(true)}\r\n                                      ></i>\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              );\r\n                            } else {\r\n                              return (\r\n                                <div\r\n                                  className={s.subRightItem}\r\n                                  key={uuid()}\r\n                                  onMouseEnter={() => showAdding(i)}\r\n                                  onMouseLeave={hideAdding}\r\n                                  draggable={true}\r\n                                  onDragStart={(e) => dragStart(e)}\r\n                                  onDrop={(e) => drop(e)}\r\n                                  onDragOver={(e) => allowDrop(e)}\r\n                                >\r\n                                  <div className={s.subRightText}>\r\n                                    <h3>{article.subTitle}</h3>\r\n                                    <h3>{article.title}</h3>\r\n                                  </div>\r\n                                  <div className={s.subRightBundle}>\r\n                                    <span>{article.timeDiff}</span>\r\n                                    <div className={s.subRightBundleRight}>\r\n                                      <span>\r\n                                        <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                        {!article.comments\r\n                                          ? 0\r\n                                          : Object.keys(article.comments)\r\n                                              .length}\r\n                                      </span>\r\n                                      <span>\r\n                                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                        {article.shares.constructor !== Object\r\n                                          ? 0\r\n                                          : Object.keys(article.shares).length}\r\n                                      </span>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              );\r\n                            }\r\n                          }\r\n                        } else {\r\n                          if (i >= 4 && i < 6 && addingModus) {\r\n                            return (\r\n                              <div\r\n                                className={s.addArticle}\r\n                                onMouseEnter={() => showAdding(i)}\r\n                                key={uuid()}\r\n                              >\r\n                                <i\r\n                                  class=\"fas fa-plus\"\r\n                                  onClick={() => setAdding(true)}\r\n                                ></i>\r\n                              </div>\r\n                            );\r\n                          } else if (i >= 4 && i < 6 && !addingModus) {\r\n                            return (\r\n                              <div className={s.emptySub} key={uuid()}></div>\r\n                            );\r\n                          }\r\n                        }\r\n                      })}\r\n                    </div>\r\n                  )}\r\n              </div>\r\n            )}\r\n            {glavni && (\r\n              <div id={s.allArticlesMainBodyContent} ref={mainContentCnt}>\r\n                {articles &&\r\n                  articles.map((article, i) => {\r\n                    if (addingModus) {\r\n                      if (Object.keys(article).length !== 0) {\r\n                        if (i !== 1) {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemSm}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                            >\r\n                              {clickedPos !== i && (\r\n                                <>\r\n                                  <div className={s.articleImgCnt}>\r\n                                    <img src={article.images[0]} />\r\n                                    {article.images.length > 1 && (\r\n                                      <i class=\"far fa-images\"></i>\r\n                                    )}\r\n                                  </div>\r\n                                  <div className={s.articleTitles}>\r\n                                    <h3>{article.subTitle}</h3>\r\n                                    <h3>{article.title}</h3>\r\n                                  </div>\r\n                                  <div className={s.articleFooter}>\r\n                                    <span>{article.timeDiff}</span>\r\n                                    <span>\r\n                                      <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                      {!article.comments\r\n                                        ? 0\r\n                                        : Object.keys(article.comments).length}\r\n                                      <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                      {article.shares.constructor !== Object\r\n                                        ? 0\r\n                                        : Object.keys(article.shares).length}\r\n                                    </span>\r\n                                  </div>\r\n                                </>\r\n                              )}{\" \"}\r\n                              {clickedPos === i && (\r\n                                <div\r\n                                  className={s.addArticle}\r\n                                  style={{\r\n                                    borderTop: \"0.1rem solid #e5e7eb\",\r\n                                    borderBottom: \"0.1rem solid #e5e7eb\",\r\n                                  }}\r\n                                >\r\n                                  <i\r\n                                    class=\"fas fa-plus\"\r\n                                    onClick={() => setAdding(true)}\r\n                                  ></i>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        } else {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemBg}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                            >\r\n                              {clickedPos !== i && (\r\n                                <>\r\n                                  <div className={s.articleImageCntBg}>\r\n                                    <img src={article.images[0]} />\r\n                                  </div>\r\n                                  <div className={s.articleItemBgHeader}>\r\n                                    <h3>{article.subTitle}</h3>\r\n                                    <h3>{article.title}</h3>\r\n                                  </div>\r\n                                  <div className={s.articleItemBgFooter}>\r\n                                    <span>{article.timeDiff}</span>\r\n                                    <div\r\n                                      className={s.articleItemBgFooterBundle}\r\n                                    >\r\n                                      <span>\r\n                                        <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                        {!article.comments\r\n                                          ? 0\r\n                                          : Object.keys(article.comments)\r\n                                              .length}\r\n                                      </span>\r\n                                      <span>\r\n                                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                        {article.shares.constructor !== Object\r\n                                          ? 0\r\n                                          : Object.keys(article.shares).length}\r\n                                      </span>\r\n                                    </div>\r\n                                  </div>\r\n                                </>\r\n                              )}\r\n                              {clickedPos === i && (\r\n                                <div\r\n                                  className={s.addArticle}\r\n                                  style={{\r\n                                    borderTop: \"0.1rem solid #e5e7eb\",\r\n                                    borderBottom: \"0.1rem solid #e5e7eb\",\r\n                                  }}\r\n                                >\r\n                                  <i\r\n                                    class=\"fas fa-plus\"\r\n                                    onClick={() => setAdding(true)}\r\n                                  ></i>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        }\r\n                      } else {\r\n                        return (\r\n                          <div\r\n                            className={\r\n                              i !== 1\r\n                                ? s.addArticle\r\n                                : `${s.addArticle} ${s.addArticleBg}`\r\n                            }\r\n                            style={{\r\n                              borderTop: \"0.1rem solid #e5e7eb\",\r\n                              borderBottom: \"0.1rem solid #e5e7eb\",\r\n                            }}\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            key={uuid()}\r\n                          >\r\n                            <i\r\n                              class=\"fas fa-plus\"\r\n                              onClick={() => setAdding(true)}\r\n                            ></i>\r\n                          </div>\r\n                        );\r\n                      }\r\n                    } else {\r\n                      if (Object.keys(article).length !== 0) {\r\n                        if (i !== 1) {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemSm}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                              draggable={true}\r\n                              onDragStart={(e) => dragStart(e)}\r\n                              onDrop={(e) => drop(e)}\r\n                              onDragOver={(e) => allowDrop(e)}\r\n                            >\r\n                              <div className={s.articleImgCnt}>\r\n                                <img\r\n                                  src={article.images && article.images[0]}\r\n                                />\r\n                                {article.images &&\r\n                                  article.images.length > 1 && (\r\n                                    <i class=\"far fa-images\"></i>\r\n                                  )}\r\n                              </div>\r\n                              <div className={s.articleTitles}>\r\n                                <h3>{article.subTitle}</h3>\r\n                                <h3>{article.title}</h3>\r\n                              </div>\r\n                              <div className={s.articleFooter}>\r\n                                <span>{article.timeDiff}</span>\r\n                                <span>\r\n                                  <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                  {!article.comments\r\n                                    ? 0\r\n                                    : Object.keys(article.comments).length}\r\n                                  <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                  {article.shares.constructor !== Object\r\n                                    ? 0\r\n                                    : Object.keys(article.shares).length}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        } else {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemBg}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                              draggable={true}\r\n                              onDragStart={(e) => dragStart(e)}\r\n                              onDrop={(e) => drop(e)}\r\n                              onDragOver={(e) => allowDrop(e)}\r\n                            >\r\n                              <div className={s.articleImageCntBg}>\r\n                                <img src={article.images[0]} />\r\n                              </div>\r\n                              <div className={s.articleItemBgHeader}>\r\n                                <h3>{article.subTitle}</h3>\r\n                                <h3>{article.title}</h3>\r\n                              </div>\r\n                              <div className={s.articleItemBgFooter}>\r\n                                <span>{article.timeDiff}</span>\r\n                                <div className={s.articleItemBgFooterBundle}>\r\n                                  <span>\r\n                                    <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                    {!article.comments\r\n                                      ? 0\r\n                                      : article.comments.length}\r\n                                  </span>\r\n                                  <span>\r\n                                    <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                    {article.shares.constructor !== Object\r\n                                      ? 0\r\n                                      : Object.keys(article.shares).length}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        }\r\n                      } else {\r\n                        return (\r\n                          <div\r\n                            className={i !== 1 ? s.empty : s.emptyBg}\r\n                            key={uuid()}\r\n                          ></div>\r\n                        );\r\n                      }\r\n                    }\r\n                  })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditArticles;\r\n","import React from \"react\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport s from \"./CommentType.module.css\";\r\nimport { v1 as uuid } from \"uuid\";\r\n\r\nconst CommentType = (props) => {\r\n  const textareaRef = useRef();\r\n  useEffect(() => {\r\n    console.log(props);\r\n  }, [props]);\r\n\r\n  const objaviKomentar = () => {\r\n    if (textareaRef.current.value.length > 0) {\r\n      let userObj = JSON.parse(localStorage.getItem(\"userObj\"));\r\n      const userName = userObj.displayName;\r\n      const avatarColor = userObj.avatarColor;\r\n      const date = new Date();\r\n      const time = `${date.getFullYear()}-${\r\n        date.getMonth() + 1\r\n      }-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\r\n      // const arraycom = {};\r\n      const arraycom = {\r\n        userName: userName,\r\n        avatarColor: avatarColor,\r\n        date: time,\r\n        comment: textareaRef.current.value,\r\n      };\r\n      // replies: [\r\n      //   {\r\n      //     userName: \"user13\",\r\n      //     date: \"newdate\",\r\n      //     comment: \"hello\",\r\n      //     commentLikes: 0,\r\n      //     commentDislikes: 0,\r\n      //   },\r\n      // ],\r\n      const userId = auth.currentUser.uid;\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path.category}/${props.path.subCategory}/-${props.path.id}/comments.json`,\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify(arraycom),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          textareaRef.current.value = \"\";\r\n          if (props.getComments) {\r\n            console.log(props);\r\n            console.log(props.getComments);\r\n            //to fix if we write a comment on the article page instead of its comment page\r\n            props.getComments(true);\r\n          }\r\n          console.log(data);\r\n          const commentInfo = {\r\n            articlePath: `${props.path.category}/${props.path.subCategory}/-${props.path.id}`,\r\n            commentId: data.name,\r\n          };\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              const sendData = data + 1;\r\n              console.log(sendData);\r\n              // let num = data + 10;\r\n              // num = `${num}`;\r\n              // num = num.substring(0, num.length - 1);\r\n              // num = +num.concat(\"0\");\r\n              const promises = [\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/${\r\n                    data === null ? 0 : data\r\n                  }/${commentInfo.commentId}.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify(commentInfo),\r\n                  }\r\n                ).then((res) => res.json()),\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: sendData,\r\n                  }\r\n                ).then((res) => res.json()),\r\n              ];\r\n              const promiseData = Promise.all(promises);\r\n              promiseData.then((data) => {\r\n                console.log(data);\r\n              });\r\n            });\r\n        });\r\n\r\n      // fetch(\r\n      //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path.category}/${props.path.subCategory}/-${props.path.id}/comments.json`\r\n      // )\r\n      //   .then((response) => response.json())\r\n      //   .then((data) => {\r\n      //     let previousComments = {};\r\n      //     let previousComments1 = {};\r\n      //     console.log(data);\r\n      //     console.log(data[1]);\r\n      //     let incr = 1;\r\n      // if (data[0] !== \"\") {\r\n      //   for (let i = 0; i < data.length; i++) {\r\n      //     previousComments[incr] = { ...data[i] };\r\n      //     incr++;\r\n      //     if (i === data.length - 1) {\r\n      //       previousComments[0] = { ...arraycom[0] };\r\n      //     }\r\n      //   }\r\n      // } else {\r\n      //   previousComments = { ...arraycom[0] };\r\n      // }\r\n      // if (data[0] === undefined) {\r\n      //   for (let i = 0; i < data.length; i++) {\r\n      //     previousComments[data[i].commentId] = { ...data[i] };\r\n      //     if (i === data.length - 1) {\r\n      //       const keyValue = Object.entries(previousComments);\r\n      //       console.log(keyValue);\r\n      //       keyValue.splice(0, 0, [`${commentId}`, arraycom[commentId]]);\r\n      //       console.log(keyValue);\r\n      //       previousComments1 = Object.fromEntries(keyValue);\r\n      //     }\r\n      //   }\r\n      // } else {\r\n      //   previousComments1 = { ...arraycom };\r\n      // }\r\n      // console.log(previousComments1);\r\n      // fetch(\r\n      //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path.category}/${props.path.subCategory}/-${props.path.id}/comments.json`,\r\n      //   {\r\n      //     method: \"PATCH\",\r\n      //     body: JSON.stringify(arraycom),\r\n      //     headers: {\r\n      //       \"Content-Type\": \"application/json\",\r\n      //     },\r\n      //   }\r\n      // )\r\n      //   .then((response) => response.json())\r\n      //   .then((data) => console.log(data));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.postComment}>\r\n      <div className={s.postCommentBundle}>\r\n        <textarea\r\n          name=\"komentar\"\r\n          className={s.postCommentTextarea}\r\n          placeholder=\"upi≈°i komentar\"\r\n          ref={textareaRef}\r\n        ></textarea>\r\n        <button>\r\n          <span onClick={objaviKomentar}>\r\n            <i class=\"fas fa-pen\"></i> Objavi komentar\r\n          </span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentType;\r\n","import React, { useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport s from \"./CommentItem.module.css\";\r\n\r\nconst CommentItem = (props) => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const commentLike = useRef();\r\n  const commentDislike = useRef();\r\n  // const [commentLikes, setCommentLikes] = useState(\r\n  //   props.commentLikes === 0 ? 0 : props.commentLikes\r\n  // );\r\n  // const [commentDislikes, setCommentDislikes] = useState(\r\n  //   props.commentDislikes === 0 ? 0 : props.commentDislikes\r\n  // );\r\n  const [commentLikes, setCommentLikes] = useState(\r\n    location.state.articleData\r\n      ? Array.isArray(props.commentIndex)\r\n        ? location.state.articleData.comments[props.commentIndex[0]].replies[\r\n            props.commentIndex[1]\r\n          ].commentLikes === 0\r\n          ? 0\r\n          : location.state.articleData.comments[props.commentIndex[0]].replies[\r\n              props.commentIndex[1]\r\n            ].commentLikes\r\n        : location.state.articleData.comments[props.commentIndex]\r\n            .commentLikes === 0\r\n        ? 0\r\n        : location.state.articleData.comments[props.commentIndex].commentLikes\r\n      : props.commentLikes\r\n      ? props.commentLikes\r\n      : 0\r\n  );\r\n  const [commentDislikes, setCommentDislikes] = useState(\r\n    location.state.articleData //fix when we are commenting from /comment/id and when we are doing it from the article\r\n      ? Array.isArray(props.commentIndex)\r\n        ? location.state.articleData.comments[props.commentIndex[0]].replies[\r\n            props.commentIndex[1]\r\n          ].commentDislikes === 0\r\n          ? 0\r\n          : location.state.articleData.comments[props.commentIndex[0]].replies[\r\n              props.commentIndex[1]\r\n            ].commentDislikes\r\n        : location.state.articleData.comments[props.commentIndex]\r\n            .commentDislikes === 0\r\n        ? 0\r\n        : location.state.articleData.comments[props.commentIndex]\r\n            .commentDislikes\r\n      : props.commentDislikes\r\n      ? props.commentDislikes\r\n      : 0\r\n  );\r\n  const [updateLikeDislike, setUpdateLikeDislike] = useState(null);\r\n  const [fetching, setFetching] = useState(false);\r\n  const [updateLocation, setUpdateLocation] = useState(false);\r\n  useEffect(() => {\r\n    console.log(props.commentIndex);\r\n    console.log(props.topComment, props.commentIndex);\r\n    console.log(props.negativeComment, props.commentIndex);\r\n    console.log(props);\r\n  }, []);\r\n\r\n  const checkOppositeFn = (data, userIp) => {\r\n    //mode = comlikes || comdislikes\r\n    console.log(data);\r\n    if (data) {\r\n      for (let key in data) {\r\n        if (userIp === data[key]) {\r\n          return key.split(\"-\").join(\".\");\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLikeDislike = (opinion) => {\r\n    setFetching(true);\r\n    if (!fetching) {\r\n      //to prevent the user from clicking btn again when fetching is still ongoing\r\n      const userIp = localStorage.getItem(\"userIp\");\r\n      const path = location.state.articleData\r\n        ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n            location.state.articleData.category\r\n          }/${location.state.articleData.subCategory}/-${\r\n            location.state.articleData.id\r\n          }/comments/${\r\n            Array.isArray(props.commentIndex)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB\r\n          }${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? \"/replies/\" + props.commentIndexDB[1]\r\n              : \"\"\r\n          }.json`\r\n        : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}.json`;\r\n      console.log(path);\r\n      fetch(path)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          console.log(props.commentIndex);\r\n          // if (Array.isArray(props.commentIndexDB)) {\r\n          //   data = { ...data[props.commentIndexDB[1]] };\r\n          //   console.log(data);\r\n          //   //find out if we are working with the main comment or with one of it's replies\r\n          // }\r\n          let check = false;\r\n          let checkOpposite = false; //check for like/dislike, if there -1, +1 other side\r\n          let key = undefined;\r\n          if (opinion === \"like\") {\r\n            if (data.commentDislikes) {\r\n              key = checkOppositeFn(data.commentDislikes, userIp);\r\n            }\r\n            console.log(key);\r\n            if (data.commentLikes) {\r\n              for (let key in data.commentLikes) {\r\n                if (userIp === data.commentLikes[key]) {\r\n                  check = true;\r\n                }\r\n              }\r\n            }\r\n            if (!key && !check) {\r\n              //zero can be falsy, like at first pos returns ind zero\r\n              setCommentLikes((old) => {\r\n                console.log(data.commentLikes);\r\n                if (data.commentLikes) {\r\n                  let cpyObj = { ...data.commentLikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n            } else if (key && !check) {\r\n              setCommentLikes((old) => {\r\n                if (data.commentLikes) {\r\n                  let cpyObj = { ...data.commentLikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n              setCommentDislikes((old) => {\r\n                if (data.commentDislikes) {\r\n                  let cpyObj = { ...data.commentDislikes };\r\n                  const ind = Object.keys(cpyObj).find(\r\n                    (el) => el === key.split(\".\").join(\"-\")\r\n                  );\r\n                  if (ind !== undefined) {\r\n                    delete cpyObj[key.split(\".\").join(\"-\")];\r\n                  }\r\n                  if (Object.keys(cpyObj).length === 0) {\r\n                    return 0;\r\n                  }\r\n                  return cpyObj;\r\n                }\r\n              });\r\n            } else {\r\n              setFetching(false);\r\n              return;\r\n            }\r\n          } else {\r\n            if (data.commentLikes) {\r\n              key = checkOppositeFn(data.commentLikes, userIp);\r\n            }\r\n            if (data.commentDislikes) {\r\n              for (let key in data.commentDislikes) {\r\n                if (userIp === data.commentDislikes[key]) {\r\n                  check = true;\r\n                }\r\n              }\r\n            }\r\n            if (!key && !check) {\r\n              setCommentDislikes((old) => {\r\n                if (data.commentDislikes) {\r\n                  const cpyObj = { ...data.commentDislikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n            } else if (key && !check) {\r\n              setCommentDislikes((old) => {\r\n                if (data.commentDislikes) {\r\n                  const cpyObj = { ...data.commentDislikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n              setCommentLikes((old) => {\r\n                if (data.commentLikes) {\r\n                  const cpyObj = { ...data.commentLikes };\r\n                  const ind = Object.keys(cpyObj).find(\r\n                    (el) => el === key.split(\".\").join(\"-\")\r\n                  );\r\n                  if (ind !== undefined) {\r\n                    delete cpyObj[key.split(\".\").join(\"-\")];\r\n                  }\r\n                  console.log(cpyObj);\r\n                  if (Object.keys(cpyObj).length === 0) {\r\n                    return 0;\r\n                  }\r\n                  return cpyObj;\r\n                }\r\n              });\r\n            } else {\r\n              setFetching(false);\r\n              return;\r\n            }\r\n          }\r\n          console.log(checkOpposite);\r\n          console.log(Object.keys(data).length);\r\n          console.log(data);\r\n          // setUpdateLikeDislike((old) => {\r\n          //   if (Array.isArray(data)) {\r\n          //     console.log(data[props.commentIndexDB[1]]);\r\n          //     return data[props.commentIndexDB[1]];\r\n          //   } else {\r\n          //     return data;\r\n          //   }\r\n          // });\r\n          setUpdateLikeDislike((old) => {\r\n            if (opinion === \"like\" && !check) {\r\n              // console.log(data[props.commentIndexDB[1]]);\r\n              if (!key) {\r\n                return [\"/commentLikes/\", userIp];\r\n              } else {\r\n                return [\"/commentLikes/\", userIp, \"/commentDislikes/\"];\r\n              }\r\n            } else if (opinion === \"dislike\" && !check) {\r\n              if (!key) {\r\n                return [\"/commentDislikes/\", userIp];\r\n              } else {\r\n                return [\"/commentDislikes/\", userIp, \"/commentLikes/\"];\r\n              }\r\n            }\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (updateLikeDislike) {\r\n      console.log(commentLikes);\r\n      console.log(commentDislikes);\r\n      updateLikeDislike.commentLikes = commentLikes;\r\n      updateLikeDislike.commentDislikes = commentDislikes;\r\n      console.log(updateLikeDislike);\r\n      let userIpNoDot = updateLikeDislike[1].split(\".\").join(\"-\");\r\n      const path = location.state.articleData\r\n        ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n            location.state.articleData.category\r\n          }/${location.state.articleData.subCategory}/-${\r\n            location.state.articleData.id\r\n          }/comments/${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB + updateLikeDislike[0] + userIpNoDot\r\n          }${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? \"/replies/\" +\r\n                props.commentIndexDB[1] +\r\n                updateLikeDislike[0] +\r\n                userIpNoDot\r\n              : \"\"\r\n          }.json`\r\n        : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}${updateLikeDislike[0]}${userIpNoDot}.json`;\r\n      console.log(path);\r\n      if (updateLikeDislike.length === 2) {\r\n        fetch(`${path}`, {\r\n          method: \"PUT\",\r\n          body: JSON.stringify(updateLikeDislike[1]),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            console.log(data);\r\n            if (location.state.articleData) {\r\n              let cpyObj = [\r\n                ...JSON.parse(\r\n                  JSON.stringify(location.state.articleData.comments)\r\n                ),\r\n              ];\r\n              console.log(location.state.articleData.comments);\r\n              console.log(cpyObj);\r\n              console.log(props.commentIndex);\r\n              if (!Array.isArray(props.commentIndex)) {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  // cpyObj[props.commentIndex].commentLikes = commentLikes[\r\n                  //   props.commentIndex\r\n                  // ].commentLikes\r\n                  //   ? {\r\n                  //       ...commentLikes[props.commentIndex].commentLikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  // cpyObj[props.commentIndex].commentDislikes = cpyObj[\r\n                  //   props.commentIndex\r\n                  // ].commentDislikes\r\n                  //   ? {\r\n                  //       ...cpyObj[props.commentIndex].commentDislikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex].commentDislikes = {\r\n                    ...commentDislikes,\r\n                  };\r\n                }\r\n              } else {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  // cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentLikes = cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentLikes\r\n                  //   ? {\r\n                  //       ...cpyObj[props.commentIndex[0]].replies[\r\n                  //         props.commentIndex[1]\r\n                  //       ].commentLikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  // cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentDislikes = cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentDislikes\r\n                  //   ? {\r\n                  //       ...cpyObj[props.commentIndex[0]].replies[\r\n                  //         props.commentIndex[1]\r\n                  //       ].commentDislikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentDislikes = { ...commentDislikes };\r\n                }\r\n              }\r\n              console.log(cpyObj);\r\n              console.log(cpyObj[props.commentIndex]);\r\n              console.log(props);\r\n              history.replace({\r\n                state: {\r\n                  articleData: {\r\n                    ...location.state.articleData,\r\n                    comments: [...cpyObj],\r\n                  },\r\n                },\r\n              });\r\n              setFetching(false);\r\n            } else {\r\n              let cpyArr = JSON.parse(JSON.stringify(props.commentData));\r\n              if (!Array.isArray(props.commentIndex)) {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  cpyArr[props.commentIndex].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  cpyArr[props.commentIndex].commentDislikes = {\r\n                    ...commentDislikes,\r\n                  };\r\n                }\r\n              } else {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  cpyArr[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  cpyArr[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentDislikes = { ...commentDislikes };\r\n                }\r\n              }\r\n              props.setCommentData([...cpyArr]);\r\n              setFetching(false);\r\n            }\r\n          });\r\n        setUpdateLikeDislike(null);\r\n      } else {\r\n        // const configOptions = {\r\n        //   method: `${updateLikeDislike.length === 4 ? \"PUT\" : \"DELETE\"}`,\r\n        //   headers: {\r\n        //     \"Content-Type\": \"application/json\",\r\n        //   },\r\n        // };\r\n        // if (updateLikeDislike.length === 4) {\r\n        //   configOptions.body = 0;\r\n        // }\r\n        const deletePath = location.state.articleData\r\n          ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n              location.state.articleData.category\r\n            }/${location.state.articleData.subCategory}/-${\r\n              location.state.articleData.id\r\n            }/comments/${\r\n              Array.isArray(props.commentIndexDB)\r\n                ? props.commentIndexDB[0]\r\n                : props.commentIndexDB + updateLikeDislike[2] + userIpNoDot\r\n            }${\r\n              Array.isArray(props.commentIndexDB)\r\n                ? \"/replies/\" +\r\n                  props.commentIndexDB[1] +\r\n                  updateLikeDislike[2] +\r\n                  userIpNoDot\r\n                : \"\"\r\n            }.json`\r\n          : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}${updateLikeDislike[2]}${userIpNoDot}.json`;\r\n        const promises = [\r\n          fetch(`${path}`, {\r\n            method: \"PUT\",\r\n            body: JSON.stringify(updateLikeDislike[1]),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }).then((res) => res.json()),\r\n          fetch(`${deletePath}`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }).then((res) => res.json()),\r\n        ];\r\n        const promisedData = Promise.all(promises);\r\n        promisedData.then((data) => {\r\n          console.log(data);\r\n          if (location.state.articleData) {\r\n            let cpyObj = [\r\n              ...JSON.parse(\r\n                JSON.stringify(location.state.articleData.comments)\r\n              ),\r\n            ];\r\n            console.log(cpyObj);\r\n            console.log(props.commentIndex);\r\n            if (!Array.isArray(props.commentIndex)) {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                // cpyObj[props.commentIndex].commentLikes = Object.keys(\r\n                //   cpyObj[props.commentIndex].commentLikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex].commentLikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex].commentLikes = { ...commentLikes };\r\n                cpyObj[props.commentIndex].commentDislikes = commentDislikes\r\n                  ? {\r\n                      ...commentDislikes,\r\n                    }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                // cpyObj[props.commentIndex].commentDislikes = Object.keys(\r\n                //   cpyObj[props.commentIndex].commentDislikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex].commentDislikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex].commentLikes = commentLikes\r\n                  ? { ...commentLikes }\r\n                  : 0;\r\n                cpyObj[props.commentIndex].commentDislikes = {\r\n                  ...commentDislikes,\r\n                };\r\n              }\r\n            } else {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                // cpyObj[props.commentIndex[0]].replies[\r\n                //   props.commentIndex[1]\r\n                // ].commentLikes = Object.keys(\r\n                //   cpyObj[props.commentIndex[0]].replies[props.commentIndex[1]]\r\n                //     .commentLikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex[0]].replies[\r\n                //         props.commentIndex[1]\r\n                //       ].commentLikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = { ...commentLikes };\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = commentDislikes\r\n                  ? { ...commentDislikes }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                // cpyObj[props.commentIndex[0]].replies[\r\n                //   props.commentIndex[1]\r\n                // ].commentDislikes = Object.keys(\r\n                //   cpyObj[props.commentIndex[0]].replies[props.commentIndex[1]]\r\n                //     .commentDislikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex[0]].replies[\r\n                //         props.commentIndex[1]\r\n                //       ].commentDislikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = commentLikes ? { ...commentLikes } : 0;\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = { ...commentDislikes };\r\n              }\r\n            }\r\n            console.log(cpyObj);\r\n            console.log(cpyObj[props.commentIndex]);\r\n            console.log(props);\r\n            history.replace({\r\n              state: {\r\n                articleData: {\r\n                  ...location.state.articleData,\r\n                  comments: [...cpyObj],\r\n                },\r\n              },\r\n            });\r\n            setFetching(false);\r\n          } else {\r\n            let cpyArr = JSON.parse(JSON.stringify(props.commentData));\r\n            if (!Array.isArray(props.commentIndex)) {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                cpyArr[props.commentIndex].commentLikes = { ...commentLikes };\r\n                cpyArr[props.commentIndex].commentDislikes = commentDislikes\r\n                  ? {\r\n                      ...commentDislikes,\r\n                    }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                cpyArr[props.commentIndex].commentLikes = commentLikes\r\n                  ? { ...commentLikes }\r\n                  : 0;\r\n                cpyArr[props.commentIndex].commentDislikes = {\r\n                  ...commentDislikes,\r\n                };\r\n              }\r\n            } else {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = { ...commentLikes };\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = commentDislikes\r\n                  ? { ...commentDislikes }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = commentLikes ? { ...commentLikes } : 0;\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = { ...commentDislikes };\r\n              }\r\n            }\r\n            props.setCommentData([...cpyArr]);\r\n            setFetching(false);\r\n          }\r\n        });\r\n        setUpdateLikeDislike(null);\r\n      }\r\n    }\r\n  }, [updateLikeDislike, commentLikes, commentDislikes]);\r\n\r\n  useEffect(() => {\r\n    console.log(commentLikes);\r\n    const userIp = localStorage.getItem(\"userIp\");\r\n    if (commentLikes && Object.keys(commentLikes).length && userIp) {\r\n      if (\r\n        Object.keys(commentLikes).find(\r\n          (ip) => ip === userIp.split(\".\").join(\"-\")\r\n        )\r\n      ) {\r\n        commentLike.current.style.opacity = \"0.5\";\r\n      } else {\r\n        commentLike.current.style.opacity = \"1\";\r\n      }\r\n    } else {\r\n      commentLike.current.style.opacity = \"1\";\r\n    }\r\n  }, [commentLikes]);\r\n  useEffect(() => {\r\n    console.log(commentDislikes);\r\n    if (commentDislikes && Object.keys(commentDislikes).length) {\r\n      const userIp = localStorage.getItem(\"userIp\");\r\n      if (\r\n        Object.keys(commentDislikes).find(\r\n          (ip) => ip === userIp.split(\".\").join(\"-\")\r\n        )\r\n      ) {\r\n        commentDislike.current.style.opacity = \"0.5\";\r\n      } else {\r\n        commentDislike.current.style.opacity = \"1\";\r\n      }\r\n    } else {\r\n      commentDislike.current.style.opacity = \"1\";\r\n    }\r\n  }, [commentDislikes]);\r\n\r\n  useEffect(() => {\r\n    if (location) {\r\n      // console.log(\"locationchanged\");\r\n      console.log(location.state.articleData);\r\n    }\r\n  }, [location]);\r\n\r\n  const handleLike = () => {\r\n    handleLikeDislike(\"like\");\r\n  };\r\n  const handeDislike = () => {\r\n    handleLikeDislike(\"dislike\");\r\n  };\r\n\r\n  const testsmthng = () => {\r\n    // fetch(\r\n    //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Vijesti/BiH/-MpkjdqpHcSS6cQ0K_gx/comments/-MupKKYniZP1H1JYinS0/commentDislikes/12-55-444-664.json`,\r\n    //   {\r\n    //     method: \"PUT\",\r\n    //     body: JSON.stringify(\"12.23.222.222\"),\r\n    //     headers: {\r\n    //       \"Content-Type\": \"application/json\",\r\n    //     },\r\n    //   }\r\n    // )\r\n    //   .then((res) => res.json())\r\n    //   .then((data) => console.log(data));\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        props.commentIndex.constructor.name === \"Array\"\r\n          ? `${s.commentContainerReply}${\r\n              props.negativeComment ? \" \" + s.negativeComment : \"\"\r\n            }`\r\n          : `${s.commentContainer}${\r\n              props.topComment ? \" \" + s.topComment : \"\"\r\n            }${props.negativeComment ? \" \" + s.negativeComment : \"\"}`\r\n      }\r\n      onClick={testsmthng}\r\n    >\r\n      <div className={s.commentHeader}>\r\n        <div className={s.commentHeaderFirst}>\r\n          <i\r\n            class=\"fas fa-user\"\r\n            style={{\r\n              backgroundColor: `#${props.avatarColor}`,\r\n              color: \"rgb(255, 255, 255)\",\r\n              padding: \"1.5rem\",\r\n              borderRadius: \"0.3rem\",\r\n            }}\r\n          ></i>\r\n        </div>\r\n        <div className={s.commentHeaderSecond}>\r\n          <h4>\r\n            <Link to={`/profil/${props.displayName}`}>{props.displayName}</Link>\r\n          </h4>\r\n          <p>\r\n            {!props.path ? (\r\n              <Link\r\n                to={\r\n                  location.state.articleData && {\r\n                    pathname: `/komentar/${\r\n                      Array.isArray(props.commentIndexDB)\r\n                        ? props.commentIndexDB[1]\r\n                        : props.commentIndexDB\r\n                    }`,\r\n                    search: `?${JSON.stringify({\r\n                      articleLink: `${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}`,\r\n                      commentId: Array.isArray(props.commentIndexDB)\r\n                        ? props.commentIndexDB[1]\r\n                        : props.commentIndexDB,\r\n                      parentCommentId: Array.isArray(props.commentIndexDB)\r\n                        ? props.commentIndexDB[0]\r\n                        : undefined,\r\n                    })}`,\r\n                  }\r\n                }\r\n              >\r\n                {`prije ${props.date ? props.date : \"1 sekund\"}`}\r\n              </Link>\r\n            ) : (\r\n              `prije ${props.date ? props.date : \"1 sekund\"}`\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className={s.commentBody}>\r\n        <p>{props.comment}</p>\r\n      </div>\r\n      <div className={s.commentFooter}>\r\n        <div>\r\n          <span className={s.like} onClick={handleLike} ref={commentLike}>\r\n            <i class=\"fas fa-long-arrow-alt-up\"></i>{\" \"}\r\n            {commentLikes && Object.keys(commentLikes).length\r\n              ? Object.keys(commentLikes).length\r\n              : 0}\r\n          </span>\r\n          <span\r\n            className={s.dislike}\r\n            onClick={handeDislike}\r\n            ref={commentDislike}\r\n          >\r\n            <i class=\"fas fa-long-arrow-alt-down\"></i>{\" \"}\r\n            {commentDislikes && Object.keys(commentDislikes).length\r\n              ? Object.keys(commentDislikes).length\r\n              : 0}\r\n          </span>\r\n        </div>\r\n        <div className={s.reportLikeParent}>\r\n          <span\r\n            className={s.report}\r\n            onClick={() =>\r\n              props.handleReport({\r\n                commentId: Array.isArray(props.commentIndexDB)\r\n                  ? props.commentIndexDB[1]\r\n                  : props.commentIndexDB,\r\n                user: props.displayName,\r\n                comment: props.comment,\r\n                search: `?${JSON.stringify({\r\n                  comLink: props.path,\r\n                  commentId: Array.isArray(props.commentIndexDB)\r\n                    ? props.commentIndexDB[1]\r\n                    : props.commentIndexDB,\r\n                  parentCommentId: Array.isArray(props.commentIndexDB)\r\n                    ? props.commentIndexDB[0]\r\n                    : undefined,\r\n                })}`,\r\n              })\r\n            }\r\n          >\r\n            <i class=\"far fa-flag\"></i> <p>Prijavi</p>\r\n          </span>\r\n          <span className={s.divide} />\r\n          <span\r\n            className={s.reply}\r\n            onClick={() => props.handleReply(props.commentIndex)}\r\n          >\r\n            <i class=\"fas fa-pen\"></i>\r\n            <p>Odgovori</p>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentItem;\r\n","import React, { forwardRef, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useRef } from \"react\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { auth } from \"../../firebase\";\r\nimport s from \"./CommentReply.module.css\";\r\n\r\nconst CommentReply = forwardRef((props, ref) => {\r\n  const location = useLocation();\r\n  const textareaRef = useRef();\r\n  const handleReply = () => {\r\n    console.log(location.state);\r\n    let userObj = JSON.parse(localStorage.getItem(\"userObj\"));\r\n    if (userObj && textareaRef.current.value.length > 2) {\r\n      // const arrStr = `${props.commentIndex[0] / props.commentIndex[1]}`;\r\n      // fetch(\r\n      //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n      //     location.state.articleData.category\r\n      //   }/${location.state.articleData.subCategory}/-${\r\n      //     location.state.articleData.id\r\n      //   }/comments/${\r\n      //     Array.isArray(props.commentIndexDB)\r\n      //       ? props.commentIndexDB[0]\r\n      //       : props.commentIndexDB\r\n      //   }.json`\r\n      // )\r\n      //   .then((response) => response.json())\r\n      //   .then((data) => {\r\n      //     console.log(data);\r\n      const userName = userObj.displayName;\r\n      const avatarColor = userObj.avatarColor;\r\n      const date = new Date();\r\n      const time = `${date.getFullYear()}-${\r\n        date.getMonth() + 1\r\n      }-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\r\n      // const replyArray = { ...data };\r\n      // if (data.replies) {\r\n      //   replyArray.replies = [...data.replies];\r\n      // } else {\r\n      //   replyArray.replies = [];\r\n      // }\r\n      let replyObj = {\r\n        userName: userName,\r\n        avatarColor: avatarColor,\r\n        date: time,\r\n        comment: textareaRef.current.value,\r\n      };\r\n      const userId = auth.currentUser.uid;\r\n      // const pathx = !Array.isArray(props.commentIndexDB) ? props.path : \"\";\r\n      let articlePath =\r\n        props && props.path\r\n          ? props.path.split(\"/\")\r\n          : location.state.articleData.linkPath.split(\"/\");\r\n      articlePath.splice(3);\r\n      articlePath = articlePath.join(\"/\");\r\n      console.log(props.path);\r\n      // console.log(pathx);\r\n      const path = !props.path\r\n        ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n            location.state.articleData.category\r\n          }/${location.state.articleData.subCategory}/-${\r\n            location.state.articleData.id\r\n          }/comments/${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB\r\n          }/replies.json`\r\n        : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}/replies.json`;\r\n      fetch(`${path}`, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(replyObj),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          textareaRef.current.value = \"\";\r\n          if (props.getComments) {\r\n            props.getComments(true);\r\n          } else {\r\n            ref.current = ref.current + 1;\r\n            props.setCommentData((old) => {\r\n              let oldArr = [...JSON.parse(JSON.stringify(old))];\r\n              let ind = Array.isArray(props.commentIndex)\r\n                ? props.commentIndex[0]\r\n                : props.commentIndex;\r\n\r\n              replyObj.id = data.name;\r\n              replyObj.path = `${props.path}/replies/${data.name}`;\r\n              oldArr[ind].replies = oldArr[ind].replies\r\n                ? [...oldArr[ind].replies, { ...replyObj }]\r\n                : [{ ...replyObj }];\r\n              console.log(oldArr);\r\n              return oldArr;\r\n            });\r\n            props.setReplyIndex(null);\r\n          }\r\n          const commentInfo = {\r\n            articlePath: !props.path\r\n              ? `${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}`\r\n              : articlePath,\r\n            commentId: data.name,\r\n            parentCommentId: Array.isArray(props.commentIndexDB)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB,\r\n          };\r\n          console.log(props.commentIndexDB);\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              const sendData = data + 1;\r\n              console.log(sendData);\r\n              // let num = data + 10;\r\n              // num = `${num}`;\r\n              // num = num.substring(0, num.length - 1);\r\n              // num = +num.concat(\"0\");\r\n              const promises = [\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/${data}/${commentInfo.commentId}.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify(commentInfo),\r\n                  }\r\n                ).then((res) => res.json()),\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: sendData,\r\n                  }\r\n                ).then((res) => res.json()),\r\n              ];\r\n              const promiseData = Promise.all(promises);\r\n              promiseData.then((data) => {\r\n                console.log(data);\r\n              });\r\n            });\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      id={\r\n        Array.isArray(props.commentIndex)\r\n          ? s.commentReplyReplies\r\n          : s.commentReply\r\n      }\r\n    >\r\n      <textarea ref={textareaRef} placeholder=\"upi≈°i odgovor\"></textarea>\r\n      <div id={s.commentReplyFooter}>\r\n        <span onClick={handleReply}>\r\n          <i class=\"fas fa-pen\"></i>&nbsp; Odgovori\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default CommentReply;\r\n","import React from \"react\";\r\nimport s from \"./CommentShow.module.css\";\r\n\r\nconst CommentShow = (props) => {\r\n  return (\r\n    <div\r\n      className={`${s.showCommentReplies}${\r\n        props.showAll\r\n          ? \" \" + s.showAll\r\n          : !props.showReply\r\n          ? \" \" + s.showCommentMore\r\n          : \"\"\r\n      }`}\r\n      onClick={props.onClick}\r\n    >\r\n      {props.showAll\r\n        ? `PRIKA≈ΩI SVE KOMENTARE (${props.showAll})`\r\n        : props.showReply\r\n        ? `PRIKA≈ΩI ODGOVORE (${props.showReply})`\r\n        : props.loading\r\n        ? \"Uƒçitavam...\"\r\n        : !props.loading && \"PRIKA≈ΩI JO≈† KOMENTARA\"}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentShow;\r\n","import React, { useRef } from \"react\";\r\nimport s from \"./ReportComment.module.css\";\r\n\r\nconst ReportComment = (props) => {\r\n  const choiceRef = useRef();\r\n  const closeModal = () => {\r\n    props.closeModal(null);\r\n  };\r\n\r\n  const sendReport = () => {\r\n    const d = new Date();\r\n    const year = d.getFullYear();\r\n    const month = d.getMonth() + 1;\r\n    const day = d.getDate();\r\n    console.log(month);\r\n    console.log(day);\r\n    console.log(props.reportData);\r\n    console.log(choiceRef.current.style);\r\n    let inputs = [];\r\n    let commentData = props.reportData;\r\n    for (let i = 0; i < choiceRef.current.children.length; i++) {\r\n      if (choiceRef.current.children[i].children[0].checked) {\r\n        inputs.push(choiceRef.current.children[i].children[0]);\r\n      }\r\n    }\r\n    if (!inputs.length) {\r\n      alert(\"Molimo, odaberite razlog prijave.\");\r\n    } else {\r\n      commentData.reason = inputs[0].value;\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/reports/${year}/${month}/${day}.json`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(commentData),\r\n        }\r\n      );\r\n      props.closeModal(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id={s.reportContainer}>\r\n      <div id={s.reportHeader}>\r\n        <h3>Navedite razlog zbog kojeg ≈æelite prijaviti ovaj komentar?</h3>\r\n      </div>\r\n      <div id={s.reportBody}>\r\n        <div id={s.reportRadioBtns} ref={choiceRef}>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice1\"\r\n              name=\"report\"\r\n              value=\"govor mr≈ænje\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice1\">Govor mr≈ænje</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice2\"\r\n              name=\"report\"\r\n              value=\"negiranje genocida\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice2\">Negiranje genocida</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice3\"\r\n              name=\"report\"\r\n              value=\"neprikladan rjeƒçnik\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice3\">Neprikladan rjeƒçnik</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice4\"\r\n              name=\"report\"\r\n              value=\"off topic\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice4\">Off topic</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice5\"\r\n              name=\"report\"\r\n              value=\"vrijeƒëanje\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice5\">Vrijeƒëanje</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input type=\"radio\" id=\"reportChoice6\" name=\"report\" value=\"spam\" />\r\n            <label htmlFor=\"reportChoice6\">Spam</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice7\"\r\n              name=\"report\"\r\n              value=\"reklama\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice7\">Reklama</label>\r\n          </div>\r\n        </div>\r\n        <div id={s.confirm}>\r\n          <button onClick={closeModal}>Odustani</button>\r\n          <button onClick={sendReport}>Prijavi komentar</button>\r\n        </div>\r\n        <p id={s.footerNote}>\r\n          Ukoliko ≈æelite dopuniti va≈°u prijavu ili prijaviti odreƒëenog korisnika\r\n          molimo da nas kontaktirate na poseban e-mail: komentari@klix.ba.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportComment;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport s from \"./LinkedArticles.module.css\";\r\n\r\nconst LinkedArticles = ({ data, indL }) => {\r\n  useState(() => {\r\n    console.log(data);\r\n    console.log(indL);\r\n    console.log(indL[1] === 3 && indL[0] === 1);\r\n  }, []);\r\n  return (\r\n    <div\r\n      className={`${s.linkedArticle}${\r\n        indL[1] === 1 ? ` ${s.linkedArticleSolo}` : \"\"\r\n      }`}\r\n      style={indL[1] === 2 && indL[0] === 1 ? { position: \"static\" } : null} //hide right border of second item when we have length of 2, aesthetic purpose\r\n    >\r\n      <div className={s.imageContainer}>\r\n        <Link\r\n          to={{\r\n            pathname: encodeURI(`/${data.articlePath}`),\r\n            state: undefined,\r\n          }}\r\n        >\r\n          <img\r\n            src={data.thumbnail.replace(\r\n              \"https://firebasestorage.googleapis.com\",\r\n              \"https://ik.imagekit.io/1cryg5xvxsq/tr:w-300\"\r\n            )}\r\n          />\r\n        </Link>\r\n      </div>\r\n      <div className={s.titles}>\r\n        <h3\r\n          style={{\r\n            color: `${clrs[data.articlePath.split(\"/\")[0].toLowerCase()]}`,\r\n          }}\r\n        >\r\n          {data.subTitle}\r\n        </h3>\r\n        <h3>\r\n          <Link\r\n            to={{\r\n              pathname: encodeURI(`/${data.articlePath}`),\r\n              state: undefined,\r\n            }}\r\n          >\r\n            {data.title}\r\n          </Link>\r\n        </h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LinkedArticles;\r\n","import React from \"react\";\r\nimport s from \"./LinkedPromo.module.css\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { articleColors } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nconst LinkedPromo = ({ data }) => {\r\n  return (\r\n    <div className={s.promoItem}>\r\n      <div className={s.promoImageCnt}>\r\n        <Link\r\n          to={{\r\n            pathname: encodeURI(\r\n              `/${data.category}/${data.subCategory}/${splitTitle(\r\n                data.title\r\n              )}/${data.id}`\r\n            ),\r\n            state: { articleData: data },\r\n          }}\r\n        >\r\n          <img src={data.imageText[0][0]} />\r\n        </Link>\r\n      </div>\r\n      <div className={s.promoBody}>\r\n        <div className={s.promoTitles}>\r\n          <h3\r\n            style={{\r\n              color: articleColors[data.category.toLowerCase()],\r\n            }}\r\n          >\r\n            {data.subTitle}\r\n          </h3>\r\n          <h3>\r\n            <Link\r\n              to={{\r\n                pathname: encodeURI(\r\n                  `/${data.category}/${data.subCategory}/${splitTitle(\r\n                    data.title\r\n                  )}/${data.id}`\r\n                ),\r\n                state: { articleData: data },\r\n              }}\r\n            >\r\n              {data.title}\r\n            </Link>\r\n          </h3>\r\n        </div>\r\n        <div className={s.promoFooter}>\r\n          <span>{data.date ? timeDifference(data.date) : \"\"}</span>\r\n          <span>\r\n            <i class=\"fas fa-comments\"></i> 0<i class=\"fas fa-share-alt\"></i> 0\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LinkedPromo;\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport s from \"./Popular.module.css\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\n\r\nexport const getLen = (comObj) => {\r\n  console.log(comObj);\r\n  let comRepLen = 0;\r\n  if (comObj.comments) {\r\n    for (let j = 0; j < Object.keys(comObj.comments).length; j++) {\r\n      if (comObj.comments[Object.keys(comObj.comments)[j]].replies) {\r\n        comRepLen += Object.keys(\r\n          comObj.comments[Object.keys(comObj.comments)[j]].replies\r\n        ).length;\r\n      }\r\n    }\r\n    return comRepLen + Object.keys(comObj.comments).length;\r\n  } else {\r\n    return 0;\r\n  }\r\n};\r\n\r\nconst Popular = () => {\r\n  const [popularArts, setPopularArts] = useState(null);\r\n  useEffect(() => {\r\n    const dbRef = db.ref(`dates/2022/3/8`);\r\n    dbRef.once(\"value\", async (snap) => {\r\n      let currArts = [];\r\n      const firstData = snap.val();\r\n      console.log(firstData);\r\n      if (Object.keys(firstData).length) {\r\n        currArts = getDateData(firstData);\r\n        await currArts.then((data) => (currArts = [...data]));\r\n        currArts.sort((a, b) => {\r\n          if (a.len - b.len > 0) {\r\n            return -1;\r\n          } else if (a.len - b.len < 0) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        currArts.splice(2); //if it's curr morning and we do not have enough arts to work with so we imitate it by splicing what we have and getting arts from the prev day\r\n        if (currArts.length >= 5) {\r\n          currArts.splice(5);\r\n          setPopularArts([...currArts]);\r\n        } else {\r\n          const dbRef2 = db.ref(`dates/2022/3/7`);\r\n          dbRef2.once(\"value\", async (snap) => {\r\n            const data2 = snap.val();\r\n            console.log(data2);\r\n            let currArts2 = getDateData(data2);\r\n            await currArts2.then((data) => (currArts2 = [...data]));\r\n            currArts2.sort((a, b) => {\r\n              if (a.len - b.len > 0) {\r\n                return -1;\r\n              } else if (a.len - b.len < 0) {\r\n                return 1;\r\n              } else {\r\n                return 0;\r\n              }\r\n            });\r\n            currArts2.splice(5 - currArts.length);\r\n            currArts2 = currArts2.concat(currArts);\r\n            currArts2.sort((a, b) => {\r\n              if (a.len - b.len > 0) {\r\n                return -1;\r\n              } else if (a.len - b.len < 0) {\r\n                return 1;\r\n              } else {\r\n                return 0;\r\n              }\r\n            });\r\n            setPopularArts([...currArts2]);\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const getDateData = (initData) => {\r\n    return new Promise((resolve) => {\r\n      const currArts = [];\r\n      const promises = [];\r\n      for (let i = 0; i < Object.keys(initData).length; i++) {\r\n        promises.push(\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n              Object.values(initData)[i].path\r\n            }/${Object.values(initData)[i].id}.json`\r\n          ).then((res) => res.json())\r\n        );\r\n      }\r\n      const promisedData = Promise.all(promises);\r\n      promisedData.then((data) => {\r\n        console.log(data);\r\n        for (let i = 0; i < data.length; i++) {\r\n          if (data[i].comments) {\r\n            let comRepLen = getLen(data[i]);\r\n            if (comRepLen) {\r\n              if (\r\n                comRepLen +\r\n                  Object.keys(data[i].comments).length +\r\n                  (data[i].shares.constructor === Object\r\n                    ? Object.keys(data[i].shares).length\r\n                    : 0) >=\r\n                10\r\n              ) {\r\n                data[i].len =\r\n                  comRepLen +\r\n                  Object.keys(data[i].comments).length +\r\n                  (data[i].shares.constructor === Object\r\n                    ? Object.keys(data[i].shares).length\r\n                    : 0);\r\n                currArts.push(data[i]);\r\n              }\r\n            } else if (\r\n              Object.keys(data[i].comments).length +\r\n                (data[i].shares.constructor === Object\r\n                  ? Object.keys(data[i].shares).length\r\n                  : 0) >=\r\n              10\r\n            ) {\r\n              data[i].len =\r\n                Object.keys(data[i].comments).length +\r\n                (data[i].shares.constructor === Object\r\n                  ? Object.keys(data[i].shares).length\r\n                  : 0);\r\n              currArts.push(data[i]);\r\n            }\r\n          } else if (\r\n            data[i].shares.constructor === Object &&\r\n            Object.keys(data[i].shares).length >= 10\r\n          ) {\r\n            data[i].len = Object.keys(data[i].shares).length;\r\n            currArts.push(data[i]);\r\n          }\r\n        }\r\n        console.log(currArts);\r\n        return resolve(currArts);\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div id={s.popularCnt}>\r\n      <div id={s.popularHeader}>\r\n        <h3>Popularno</h3>\r\n        <span>\r\n          <svg\r\n            class=\"h-5 w-5\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"\r\n            ></path>\r\n          </svg>\r\n        </span>\r\n      </div>\r\n      <div id={s.popularBody}>\r\n        {popularArts &&\r\n          popularArts.map((popArt) => (\r\n            <div className={s.popularItem} key={uuid()}>\r\n              <div className={s.popularItemHeader}>\r\n                <h3\r\n                  style={{\r\n                    color: `${clrs[popArt.category.toLowerCase()]}`,\r\n                  }}\r\n                >\r\n                  {popArt.subTitle}\r\n                </h3>\r\n              </div>\r\n              <div className={s.popularItemBody}>\r\n                <p>\r\n                  <Link\r\n                    to={{\r\n                      pathname: encodeURI(\r\n                        `/${popArt.category}/${popArt.subCategory}/${splitTitle(\r\n                          popArt.title\r\n                        )}/${popArt.id}`\r\n                      ),\r\n                      state: {\r\n                        articleData: {\r\n                          ...popArt,\r\n                          linkPath: `/${popArt.category}/${\r\n                            popArt.subCategory\r\n                          }/${splitTitle(popArt.title)}/${popArt.id}`,\r\n                        },\r\n                      },\r\n                    }}\r\n                  >\r\n                    {popArt.title}\r\n                  </Link>\r\n                </p>\r\n              </div>\r\n              <div className={s.popularItemFooter}>\r\n                <span className={s.itemTime}>\r\n                  {timeDifference(popArt.date)}\r\n                </span>\r\n                <span className={s.spanComShare}>\r\n                  <span className={s.spanComment}>\r\n                    <svg\r\n                      class=\"inline h-3 w-3\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                    >\r\n                      <path d=\"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z\"></path>\r\n                      <path d=\"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z\"></path>\r\n                    </svg>\r\n                    {getLen(popArt)}\r\n                  </span>\r\n                  <span className={s.spanShare}>\r\n                    <svg\r\n                      class=\"ml-1 inline h-3 w-3\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                    >\r\n                      <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\"></path>\r\n                    </svg>{\" \"}\r\n                    {popArt.shares.constructor === Object\r\n                      ? Object.keys(popArt.shares).length\r\n                      : 0}\r\n                  </span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Popular;\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport parse from \"html-react-parser\";\r\nimport Nav from \"../Nav/Nav\";\r\nimport s from \"./Article.module.css\";\r\nimport ArticleLink from \"../ArticleLink/ArticleLink\";\r\nimport LinkedArticles from \"./LinkedArticles\";\r\nimport LinkedPromo from \"./LinkedPromo\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport CommentType from \"../comment/CommentType\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { getComLength } from \"../comment/Comment\";\r\nimport LoginContext from \"../../context\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { db } from \"../../firebase\";\r\nimport Popular from \"./Popular\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\n\r\nconst catSubCat = {\r\n  Vijesti: [\r\n    \"BiH\",\r\n    \"Regija\",\r\n    \"Svijet\",\r\n    \"Dijaspora\",\r\n    \"Crna hronika\",\r\n    \"Humanitarne akcije\",\r\n  ],\r\n  Biznis: [\r\n    \"Privreda\",\r\n    \"Finansije\",\r\n    \"Investicije\",\r\n    \"Smart Cash\",\r\n    \"Berza\",\r\n    \"Startupi\",\r\n    \"Posao\",\r\n  ],\r\n  Sport: [\r\n    \"Nogomet\",\r\n    \"Ko≈°arka\",\r\n    \"Tenis\",\r\n    \"Rukomet\",\r\n    \"Formula 1\",\r\n    \"Skijanje\",\r\n    \"Atletika\",\r\n    \"Borilaƒçki sportovi\",\r\n    \"Plivanje\",\r\n  ],\r\n  Magazin: [\"Kultura\", \"Muzika\", \"Film/TV\", \"Showbiz\", \"Zanimljivosti\"],\r\n  Lifestyle: [\r\n    \"Moda i ljepota\",\r\n    \"Zdravlje\",\r\n    \"Veze i seks\",\r\n    \"Gastro\",\r\n    \"Kuƒáa i ured\",\r\n    \"Putovanja\",\r\n    \"Bebe\",\r\n    \"Fitness\",\r\n    \"Ljubimci\",\r\n  ],\r\n  Scitech: [\"Nauka\", \"Tehnologija\"],\r\n  Auto: [\"Testovi\", \"Noviteti\", \"Koncepti\", \"Tuning\"],\r\n};\r\n\r\nexport const scrollFnSticky = (ref) => {\r\n  // console.log(navHeight);\r\n  if (ref.current) {\r\n    console.log(document.getElementsByTagName(\"header\")[0]);\r\n    const navStyles = window.getComputedStyle(\r\n      document.getElementsByTagName(\"header\")[0]\r\n    );\r\n    const navHeight = +navStyles.getPropertyValue(\"height\").split(\"px\")[0];\r\n    const sideBarParent = window.getComputedStyle(ref.current.parentElement);\r\n\r\n    const sideBarParentMagin = +sideBarParent\r\n      .getPropertyValue(\"margin-top\")\r\n      .split(\"px\")[0];\r\n    // console.log(\r\n    //   ref.current &&\r\n    //     ref.current.parentElement.getBoundingClientRect().top -\r\n    //       navHeight -\r\n    //       sideBarParentMagin\r\n    // );\r\n    if (\r\n      ref.current &&\r\n      ref.current.parentElement.getBoundingClientRect().top -\r\n        navHeight -\r\n        sideBarParentMagin <=\r\n        0\r\n    ) {\r\n      // ref.current.style.height = \"inherit\";\r\n      ref.current.children[0].style.position = \"sticky\";\r\n      ref.current.children[0].style.top = `${navHeight + sideBarParentMagin}px`;\r\n    }\r\n  }\r\n};\r\n\r\nconst ArticleComp = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [articleData, setArticleData] = useState(null);\r\n  const [text, setText] = useState([]);\r\n  const [linkData, setLinkData] = useState({});\r\n  const [internalLinks, setInternalLinks] = useState([]);\r\n  const [clickedSlider, setClickedSlider] = useState(false);\r\n  const [zoomedIn, setZoomedIn] = useState(false);\r\n  const [moving, setMoving] = useState(false);\r\n  const [posOfSlider, setPosOfSlider] = useState(null);\r\n  const [grabXPrev, setGrabXPrev] = useState(null);\r\n  const [grabYPrev, setGrabYPrev] = useState(null);\r\n  const [zoomPos, setZoomPos] = useState(\"\");\r\n  const [counter, setCounter] = useState(0);\r\n\r\n  const [relatedArticles, setRelatedArticles] = useState([]);\r\n  const [promoArticles, setPromoArticles] = useState([]);\r\n\r\n  const imageSliderRef = useRef();\r\n  const sliderFooterBar = useRef();\r\n  const timer = useRef(null);\r\n  const stickLeftSideBar = useRef();\r\n  const stickRightSideBar = useRef();\r\n  const fullComLength = useRef(0);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    function handlerFn() {\r\n      scrollFnSticky(stickLeftSideBar);\r\n      scrollFnSticky(stickRightSideBar);\r\n    }\r\n    //add +1 to visited\r\n    console.log(articleData);\r\n\r\n    if (window.twttr) {\r\n      window.twttr.widgets.load();\r\n    }\r\n    console.log(window);\r\n    // window.instgrm.Embeds.process();\r\n    if (window.instgrm) {\r\n      console.log(window.instgrm);\r\n      // setTimeout(() => {\r\n      window.instgrm.Embeds.process();\r\n      // }, 2000);\r\n    }\r\n    window.addEventListener(\"scroll\", handlerFn);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handlerFn);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n      window.scrollTo(0, 0);\r\n      console.log(location.state);\r\n      console.log(location.pathname);\r\n      setArticleData({ ...location.state.articleData });\r\n      if (location.state.articleData.tags) {\r\n        findRelatedTags(\r\n          location.state.articleData.tags,\r\n          location.state.articleData.category,\r\n          `-${location.state.articleData.id}`\r\n        );\r\n      }\r\n\r\n      //add +1 to visited\r\n      console.log(location.state.articleData);\r\n      fetch(\"https://api.ipify.org/?format=json\")\r\n        .then((response) => response.json())\r\n        .then((ip) => {\r\n          const dbRef = db.ref(\r\n            `articles/${location.state.articleData.category}/${\r\n              location.state.articleData.subCategory\r\n            }/-${location.state.articleData.id}/visited/${ip.ip\r\n              .split(\".\")\r\n              .join(\"_\")}`\r\n          );\r\n          dbRef.once(\"value\", (snap) => {\r\n            const data = snap.val();\r\n            console.log(data);\r\n            // if (!data) {\r\n            console.log(\"s\");\r\n            console.log(\r\n              `articles/${location.state.articleData.category}/${\r\n                location.state.articleData.subCategory\r\n              }/-${location.state.articleData.id}/visited/${ip.ip\r\n                .split(\".\")\r\n                .join(\"_\")}`\r\n            );\r\n            dbRef.set(ip.ip);\r\n            // const len = Math.floor(Math.random() * 100);\r\n            // const temp = [];\r\n            // for (let i = 0; i < len; i++) {\r\n            //   temp.push(\r\n            //     `${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}.${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}`\r\n            //   );\r\n            // }\r\n            // console.log(temp);\r\n\r\n            // for (let i = 0; i < temp.length; i++) {\r\n            //   ((ind) => {\r\n            //     db.ref(\r\n            //       `articles/${location.state.articleData.category}/${\r\n            //         location.state.articleData.subCategory\r\n            //       }/-${location.state.articleData.id}/visited/${temp[ind]\r\n            //         .split(\".\")\r\n            //         .join(\"_\")}`\r\n            //     ).set(temp[ind]);\r\n            //   })(i);\r\n            // }\r\n            // }\r\n          });\r\n        });\r\n\r\n      // get promos, recursion\r\n      const dbRef = db.ref(\r\n        `articles/Promo/${location.state.articleData.category}`\r\n      );\r\n      dbRef\r\n        .orderByKey()\r\n        .limitToLast(9)\r\n        .once(\"value\", (snap) => {\r\n          console.log(snap.val());\r\n          const data = snap.val();\r\n          const indeces = [];\r\n          const fn = (arr, num, length) => {\r\n            console.log(arr);\r\n            console.log(num);\r\n            console.log(length);\r\n            if (arr.length < 3) {\r\n              if (arr.some((val) => val === num)) {\r\n                fn(arr, Math.floor(Math.random() * length), length);\r\n              } else {\r\n                arr.push(num);\r\n                fn(arr, Math.floor(Math.random() * length), length);\r\n              }\r\n            }\r\n          };\r\n          if (!data || Object.keys(data).length < 9) {\r\n            return;\r\n          }\r\n          fn(\r\n            indeces,\r\n            Math.floor(Math.random() * Object.keys(data).length),\r\n            Object.keys(data).length\r\n          );\r\n          console.log(indeces);\r\n          const promoArr = [];\r\n          for (let i = 0; i < indeces.length; i++) {\r\n            promoArr.push(data[Object.keys(data)[indeces[i]]]);\r\n          }\r\n          console.log(promoArr);\r\n          setPromoArticles([...promoArr]);\r\n        });\r\n\r\n      let replyLength = 0;\r\n      // for (let i = 0; i < location.state.articleData.comments.length; i++) {\r\n      //   if (location.state.articleData.comments[i].replies) {\r\n      //     replyLength += location.state.articleData.comments[i].replies.length;\r\n      //   }\r\n      // }\r\n      if (location.state.articleData.comments) {\r\n        for (let key in location.state.articleData.comments) {\r\n          if (location.state.articleData.comments[key].replies) {\r\n            replyLength += Object.keys(\r\n              location.state.articleData.comments[key].replies\r\n            ).length;\r\n          }\r\n        }\r\n        fullComLength.current =\r\n          replyLength + Object.keys(location.state.articleData.comments).length;\r\n      }\r\n      const txt = location.state.articleData.articleText;\r\n      const paragraphs = [];\r\n      let temp = \"\";\r\n      const finalParagraphs = [];\r\n      let pos = 0;\r\n      for (let i = 0; i < txt.length; i++) {\r\n        if (txt[i] === \"\\n\" && txt[i + 1] === \"\\n\") {\r\n          paragraphs.push({ text: txt.slice(pos, i) });\r\n          pos = i;\r\n        }\r\n        if (i === txt.length - 1) {\r\n          paragraphs.push({ text: txt.slice(pos) });\r\n        }\r\n      }\r\n      console.log(paragraphs);\r\n\r\n      const inbetweenArray = [];\r\n      let check = null;\r\n      let checkBool = false;\r\n      let ind = 0;\r\n      let testArr = [];\r\n      let linkStart = 0;\r\n      paragraphs.forEach((paragraph) => {\r\n        console.log(paragraph);\r\n        for (let i = 0; i < paragraph.text.length; i++) {\r\n          if (\r\n            paragraph.text[i] === \"<\" &&\r\n            paragraph.text[i + 1] === \"b\" &&\r\n            paragraph.text[i + 2] === \">\" &&\r\n            !paragraph.text.includes(\"<list>\") &&\r\n            !paragraph.text.includes(\"</list>\")\r\n          ) {\r\n            check = i;\r\n            checkBool = true;\r\n            if (temp) {\r\n              // inbetweenArray[ind].push({ text: temp });\r\n              testArr.push({ text: temp });\r\n              temp = \"\";\r\n            }\r\n          } else if (\r\n            paragraph.text[i] === \"<\" &&\r\n            paragraph.text[i + 1] === \"/\" &&\r\n            paragraph.text[i + 2] === \"b\" &&\r\n            paragraph.text[i + 3] === \">\" &&\r\n            !paragraph.text.includes(\"<list>\") &&\r\n            !paragraph.text.includes(\"</list>\")\r\n          ) {\r\n            // inbetweenArray[ind].push({\r\n            //   bold: paragraph.text.slice(check + 3, i),\r\n            // });\r\n            testArr.push({\r\n              bold: paragraph.text.slice(check + 3, i),\r\n            });\r\n            i = i + 3;\r\n            check = null;\r\n            checkBool = false;\r\n          } else if (paragraph.text[i] !== \"\\n\" && !checkBool) {\r\n            temp = temp.concat(paragraph.text[i]);\r\n          }\r\n          if (i === paragraph.text.length - 1 || i >= paragraph.text.length) {\r\n            console.log(ind);\r\n            let listChecker = false;\r\n            if (temp !== \"\") {\r\n              for (let j = 0; j < temp.length; j++) {\r\n                if (\r\n                  temp[j] === \"<\" &&\r\n                  temp[j + 1] === \"l\" &&\r\n                  temp[j + 2] === \"i\" &&\r\n                  temp[j + 3] === \"s\" &&\r\n                  temp[j + 4] === \"t\" &&\r\n                  temp[j + 5] === \">\"\r\n                ) {\r\n                  listChecker = j + 6;\r\n                } else if (\r\n                  temp[j] === \"<\" &&\r\n                  temp[j + 1] === \"/\" &&\r\n                  temp[j + 2] === \"l\" &&\r\n                  temp[j + 3] === \"i\" &&\r\n                  temp[j + 4] === \"s\" &&\r\n                  temp[j + 5] === \"t\" &&\r\n                  temp[j + 6] === \">\"\r\n                ) {\r\n                  let configListArr = temp.slice(listChecker, j);\r\n                  testArr.push({ list: configListArr });\r\n                }\r\n              }\r\n              if (!listChecker) {\r\n                testArr.push({ text: temp });\r\n              }\r\n            }\r\n            // inbetweenArray[ind].push({ texts: temp });\r\n            inbetweenArray.push([...testArr]);\r\n            ind++;\r\n            finalParagraphs.push({ text: temp });\r\n            temp = \"\";\r\n            testArr = [];\r\n          }\r\n        }\r\n      });\r\n      console.log(paragraphs);\r\n      console.log(finalParagraphs);\r\n      console.log(inbetweenArray);\r\n      let start = undefined;\r\n      const linkEmbedArr = [];\r\n      const linksArr = [];\r\n      let tempArr = [];\r\n      let tempLink = \"\";\r\n      let linkThere = false;\r\n      let linkPos = 0;\r\n      let linkPosEnd = 0;\r\n      let embedLink = \"\";\r\n      let embedThere = false;\r\n      let embedPos = 0;\r\n      let embedPosEnd = 0;\r\n      let incr = 0;\r\n      let listSkipLink = false;\r\n      inbetweenArray.forEach((items, ind) => {\r\n        console.log(items);\r\n        items.forEach((item) => {\r\n          console.log(ind);\r\n          for (let key in item) {\r\n            if (key === \"list\") {\r\n              listSkipLink = true;\r\n            }\r\n            console.log(item[key]);\r\n            for (let i = 0; i < item[key].length; i++) {\r\n              if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"l\" &&\r\n                item[key][i + 2] === \"i\" &&\r\n                item[key][i + 3] === \"n\" &&\r\n                item[key][i + 4] === \"k\" &&\r\n                item[key][i + 5] === \">\" &&\r\n                !listSkipLink\r\n              ) {\r\n                if (tempLink) {\r\n                  //text inbetween links\r\n                  for (let j = i + 6; j < item[key].length; j++) {\r\n                    if (\r\n                      item[key][j] === \"<\" &&\r\n                      item[key][j + 1] === \"/\" &&\r\n                      item[key][j + 2] === \"l\" &&\r\n                      item[key][j + 3] === \"i\" &&\r\n                      item[key][j + 4] === \"n\" &&\r\n                      item[key][j + 5] === \"k\" &&\r\n                      item[key][j + 6] === \">\"\r\n                    ) {\r\n                      if (item[key].slice(i, j + 7).includes(\" external\")) {\r\n                        //push text inbetween links but if next link is externallink dont make new line link like usually but just add it together with the text\r\n                        tempArr.push({ text: item[key].slice(linkPosEnd, i) });\r\n                        linkPosEnd = 0;\r\n                        break;\r\n                      } else {\r\n                        linkEmbedArr[incr] = [item[key].slice(0, i)]; //in case it's image or internal link\r\n                        incr++;\r\n                      }\r\n                    }\r\n                  }\r\n                  // linkEmbedArr[incr] = [item[key].slice(linkPosEnd, i)];\r\n                  // linkPosEnd = 0;\r\n                  // incr++;\r\n                } else if (!tempLink && !embedThere && i - 2 > 0) {\r\n                  //text before link\r\n                  for (let j = i + 6; j < item[key].length; j++) {\r\n                    if (\r\n                      item[key][j] === \"<\" &&\r\n                      item[key][j + 1] === \"/\" &&\r\n                      item[key][j + 2] === \"l\" &&\r\n                      item[key][j + 3] === \"i\" &&\r\n                      item[key][j + 4] === \"n\" &&\r\n                      item[key][j + 5] === \"k\" &&\r\n                      item[key][j + 6] === \">\"\r\n                    ) {\r\n                      if (item[key].slice(i, j + 7).includes(\" external\")) {\r\n                        //push text before link but if next link is externallink dont push new line since next link is part of the text\r\n                        tempArr.push({ text: item[key].slice(0, i) });\r\n                        console.log(JSON.parse(JSON.stringify(tempArr)));\r\n                        break; //in case we have more ext links in the same paragraph we wanna stop once we get what we need here\r\n                      } else {\r\n                        linkEmbedArr[incr] = [item[key].slice(0, i)]; //in case it's image or internal link\r\n                        incr++;\r\n                      }\r\n                    }\r\n                  }\r\n                  // linkEmbedArr[incr] = [item[key].slice(0, i)];\r\n                  // incr++;\r\n                }\r\n                linkThere = true;\r\n                linkPos = i;\r\n              } else if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"/\" &&\r\n                item[key][i + 2] === \"l\" &&\r\n                item[key][i + 3] === \"i\" &&\r\n                item[key][i + 4] === \"n\" &&\r\n                item[key][i + 5] === \"k\" &&\r\n                item[key][i + 6] === \">\" &&\r\n                !listSkipLink\r\n              ) {\r\n                tempLink = item[key].slice(linkPos, i + 7);\r\n                linkPosEnd = i + 7;\r\n                linksArr.push(tempLink);\r\n                console.log(\"s\");\r\n                if (tempLink.includes(\" external\")) {\r\n                  tempArr.push({ externalLink: tempLink });\r\n                  console.log(tempArr);\r\n                } else {\r\n                  //if not extlink make new line for image or innerlink to article\r\n                  linkEmbedArr[incr] = [{ link: tempLink }];\r\n                  incr++;\r\n                }\r\n              }\r\n              if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"e\" &&\r\n                item[key][i + 2] === \"m\" &&\r\n                item[key][i + 3] === \"b\" &&\r\n                item[key][i + 4] === \"e\" &&\r\n                item[key][i + 5] === \"d\" &&\r\n                item[key][i + 6] === \">\"\r\n              ) {\r\n                if (embedLink) {\r\n                  linkEmbedArr[incr] = [item[key].slice(embedPosEnd, i)];\r\n                  linkPosEnd = 0;\r\n                }\r\n                embedThere = true;\r\n                embedPos = i;\r\n              } else if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"/\" &&\r\n                item[key][i + 2] === \"e\" &&\r\n                item[key][i + 3] === \"m\" &&\r\n                item[key][i + 4] === \"b\" &&\r\n                item[key][i + 5] === \"e\" &&\r\n                item[key][i + 6] === \"d\" &&\r\n                item[key][i + 7] === \">\"\r\n              ) {\r\n                embedLink = item[key].slice(embedPos, i + 8);\r\n                embedPosEnd = i + 8;\r\n                linkEmbedArr[incr] = [{ embed: embedLink }];\r\n                incr++;\r\n              }\r\n              if (i === item[key].length - 1 && !linkThere && !embedThere) {\r\n                tempArr.push({ [key]: item[key] });\r\n              } else if (\r\n                i === item[key].length - 1 &&\r\n                linkThere &&\r\n                !embedThere\r\n              ) {\r\n                if (i > linkPosEnd) {\r\n                  tempArr.push({ text: item[key].slice(linkPosEnd) });\r\n                }\r\n                linkThere = false;\r\n              } else if (\r\n                i === item[key].length - 1 &&\r\n                !linkThere &&\r\n                embedThere\r\n              ) {\r\n                tempArr.push({ text: item[key].slice(embedPosEnd) });\r\n                embedThere = false;\r\n              }\r\n            }\r\n            if (key === \"list\") {\r\n              listSkipLink = false;\r\n            }\r\n            tempLink = \"\"; //so that if we have a link in a new p we empty out everything so it can func normally\r\n          }\r\n        });\r\n        linkEmbedArr[incr] = [...tempArr];\r\n        incr++;\r\n        tempArr = [];\r\n      });\r\n      console.log(linkEmbedArr);\r\n      console.log(finalParagraphs);\r\n      console.log(linksArr);\r\n      const finishedLinks = [];\r\n      const internalLinks = [];\r\n      let checker = false;\r\n      linksArr.forEach((linkInd, ind) => {\r\n        console.log(linkInd);\r\n        if (linkInd.includes(\" external\")) {\r\n          linkInd = linkInd.slice(6, linkInd.length - 7);\r\n          console.log(linkInd);\r\n          const splitArr = linkInd.split(\" \");\r\n          console.log(splitArr);\r\n          finishedLinks.push({\r\n            external: { url: splitArr[0], text: splitArr[1] },\r\n          });\r\n        } else if (linkInd.includes(\" image\")) {\r\n          let splitArr = linkInd.slice(6, linkInd.length - 7);\r\n          let imageText = \"\";\r\n          console.log(splitArr);\r\n          for (let i = 0; i < splitArr.length; i++) {\r\n            if (\r\n              splitArr[i] === \" \" &&\r\n              splitArr[i - 1] === \"e\" &&\r\n              splitArr[i - 2] === \"g\" &&\r\n              splitArr[i - 3] === \"a\" &&\r\n              splitArr[i - 4] === \"m\" &&\r\n              splitArr[i - 5] === \"i\" &&\r\n              splitArr[i - 6] === \" \"\r\n            ) {\r\n              imageText = splitArr.slice(i + 1);\r\n              splitArr = splitArr.slice(0, i);\r\n              splitArr = splitArr.split(\" \");\r\n              console.log(splitArr);\r\n              splitArr.push(imageText);\r\n            }\r\n          }\r\n          // splitArr = splitArr.split(\" \");\r\n          console.log(splitArr);\r\n          finishedLinks.push({\r\n            image: { url: splitArr[0], text: splitArr[2] },\r\n          });\r\n        } else {\r\n          //internal\r\n          let linkText = linkInd.slice(6, linkInd.length - 7);\r\n          console.log(linkText);\r\n          linkText = linkText.split(\" \");\r\n          linkText.splice(linkText.length - 1);\r\n          //handle space in cat or sub cat like crna hronika\r\n          let path = `${\r\n            linkText.length > 2\r\n              ? linkText\r\n                  .map((item, i) => {\r\n                    if (i !== 0) {\r\n                      return item;\r\n                    }\r\n                  })\r\n                  .join(\" \")\r\n                  .slice(1)\r\n              : linkText[1]\r\n          }/-${linkText[0]}`;\r\n          console.log(path);\r\n          const path2 = linkText[1].split(\"/\");\r\n          for (let key in catSubCat) {\r\n            // if (key === path2[0]) {\r\n            //   alert(\"d\");\r\n            // }\r\n            if (key.toLowerCase().includes(path2[0])) {\r\n              for (let i = 0; i < catSubCat[key].length; i++) {\r\n                if (catSubCat[key][i].toLowerCase().includes(path2[1])) {\r\n                  path = `${key}/${catSubCat[key][i]}`;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${path}.json`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              const titleSplit = data.title.split(\" \");\r\n              let titleSplit2 = [];\r\n              let titleSplit3;\r\n              titleSplit.forEach((split) => {\r\n                titleSplit2.push(split.toLowerCase());\r\n              });\r\n              titleSplit3 = titleSplit2.join(\"-\");\r\n              titleSplit3 = titleSplit3\r\n                .split(\",\")\r\n                .join(\"\")\r\n                .split(\" \")\r\n                .join(\"-\");\r\n              setInternalLinks((old) => {\r\n                const oldArr = [...old];\r\n                oldArr.push({\r\n                  title: data.title,\r\n                  subTitle: data.subTitle,\r\n                  imageUrl: data.images[0],\r\n                  linkPath: `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`,\r\n                  category: data.category,\r\n                  subCategory: data.subCategory,\r\n                  id: data.id,\r\n                });\r\n                return oldArr;\r\n              });\r\n              // internalLinks.push({\r\n              //   internal: {\r\n              //     title: data.title,\r\n              //     subTitle: data.subTitle,\r\n              //     imageUrl: data.images[0],\r\n              //     linkPath: `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`,\r\n              //   },\r\n              // });\r\n            });\r\n        }\r\n        if (ind === linksArr.length - 1) {\r\n          console.log(internalLinks);\r\n          console.log(finishedLinks);\r\n          setLinkData([...finishedLinks]);\r\n        }\r\n      });\r\n      // setText(finalParagraphs);\r\n      setText(linkEmbedArr);\r\n    } else {\r\n      console.log(history.location.pathname);\r\n      let deconstructPathName = history.location.pathname.split(\"/\");\r\n      console.log(deconstructPathName);\r\n      const path = {\r\n        category: deconstructPathName[1],\r\n        subCategory: deconstructPathName[2],\r\n        id: deconstructPathName[4],\r\n      };\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${path.category}/${path.subCategory}/-${path.id}.json`\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setInternalLinks([]);\r\n          console.log(data);\r\n          let commentData = [];\r\n          let replies = [];\r\n          let linkPath = \"\";\r\n          if (data.comments) {\r\n            for (let key in data.comments) {\r\n              if (data.comments[key].replies) {\r\n                for (let keyRep in data.comments[key].replies) {\r\n                  replies.push(data.comments[key].replies[keyRep]);\r\n                }\r\n                commentData.push(data.comments[key]);\r\n                commentData[commentData.length - 1].replies = [...replies];\r\n                replies = [];\r\n              } else {\r\n                commentData.push(data.comments[key]);\r\n              }\r\n            }\r\n            data.comments = [...commentData];\r\n          }\r\n          const titleSplit = data.title.split(\" \");\r\n          let titleSplit2 = [];\r\n          let titleSplit3;\r\n          titleSplit.forEach((split) => {\r\n            titleSplit2.push(split.toLowerCase());\r\n          });\r\n          titleSplit3 = titleSplit2.join(\"-\");\r\n          titleSplit3 = titleSplit3.split(\",\").join(\"\").split(\" \").join(\"-\");\r\n          data.timeDiff = timeDifference(data.date);\r\n          data.linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n          history.replace({\r\n            state: {\r\n              articleData: {\r\n                ...JSON.parse(JSON.stringify(data)),\r\n              },\r\n            },\r\n          });\r\n        });\r\n    }\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    if (articleData) {\r\n      console.log(articleData.shares);\r\n      // console.log(Object.keys(articleData.comments[0]).length);\r\n      console.log(articleData.images[0]);\r\n      // if (typeof articleData.comments[0] == 'undefined') {\r\n      //   alert('x');\r\n      // }\r\n      // console.log(articleData.comments[0]);\r\n      console.log(typeof articleData.images);\r\n      console.log(articleData.comments);\r\n      console.log(Array.isArray(articleData.comments));\r\n\r\n      // console.log(articleData.comments.length);\r\n      // console.log(articleData.comments[0]);\r\n    }\r\n  }, [articleData]);\r\n\r\n  useEffect(() => {\r\n    console.log(linkData);\r\n  }, [linkData]);\r\n  const itemsarr = [];\r\n  const [itemsarrtxt, setitemsarrtxt] = useState([]);\r\n  useEffect(() => {\r\n    console.log(itemsarrtxt);\r\n  }, [itemsarrtxt]);\r\n  let intLinkThere = false;\r\n  let imageThere = false;\r\n  let embedThere = false;\r\n  let intLinkIncr = 0;\r\n  let extLinkIncr = 0;\r\n  let arrTemp = [];\r\n  let listIncr = 0;\r\n  let removeBrAfterInt = false;\r\n  console.log(text);\r\n  text.map((textInd, l) => {\r\n    console.log(window.twttr);\r\n    console.log(textInd);\r\n    textInd.map((it) => {\r\n      for (let key in it) {\r\n        if (key === \"bold\" && textInd.length === 1) {\r\n          itemsarr.push(\r\n            <React.Fragment key={uuid()}>\r\n              <b key={uuid()}>{it[key]}</b>\r\n              <br></br>\r\n            </React.Fragment>\r\n          );\r\n        } else if (key === \"link\") {\r\n          if (it[key].includes(\" external\")) {\r\n            //never runs?\r\n            console.log(it[key]);\r\n            console.log(linkData[0].url);\r\n            console.log(linkData[0].text);\r\n            itemsarr.push(\r\n              <a\r\n                key={uuid()}\r\n                href={linkData[0].external.url}\r\n                target=\"_blank\"\r\n                rel=\"noreferrer noopener\"\r\n              >\r\n                {linkData[0].external.text}\r\n              </a>\r\n            );\r\n          } else if (it[key].includes(\" image\")) {\r\n            console.log(linkData);\r\n            console.log(linkData[extLinkIncr].image.url);\r\n            itemsarr.push(\r\n              <>\r\n                <img\r\n                  style={{ width: \"100%\", height: \"initial\" }}\r\n                  key={uuid()}\r\n                  src={linkData[extLinkIncr].image.url}\r\n                />\r\n                {linkData[extLinkIncr].image.text !== \"blank\" ? (\r\n                  <p className={s.textBelowImage}>\r\n                    {linkData[extLinkIncr].image.text}\r\n                  </p>\r\n                ) : (\r\n                  <br />\r\n                )}\r\n              </>\r\n            );\r\n            imageThere = true;\r\n            extLinkIncr++;\r\n          } else {\r\n            if (internalLinks.length > 0) {\r\n              //async req\r\n              console.log(internalLinks);\r\n              console.log(intLinkIncr);\r\n              intLinkThere = true;\r\n              itemsarr.push(\r\n                <ArticleLink\r\n                  key={uuid()}\r\n                  subTitle={internalLinks[intLinkIncr].subTitle}\r\n                  title={internalLinks[intLinkIncr].title}\r\n                  imageUrl={internalLinks[intLinkIncr].imageUrl}\r\n                  linkPath={internalLinks[intLinkIncr].linkPath}\r\n                  category={internalLinks[intLinkIncr].category}\r\n                  subCategory={internalLinks[intLinkIncr].subCategory}\r\n                  id={internalLinks[intLinkIncr].id}\r\n                />\r\n              );\r\n              if (internalLinks.length - 1 > intLinkIncr) {\r\n                //fix case where we add ++ but where we havent reached the other intlinks, so when we get to a new line it all rerenders and we get intlink[1].random = undefined\r\n                intLinkIncr++;\r\n              }\r\n            }\r\n          }\r\n        } else if (key === \"embed\") {\r\n          console.log(it[key]);\r\n          if (!it[key].includes(\"YouTube video player\")) {\r\n            itemsarr.push(\r\n              // <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n              //   {parse(it[key])}\r\n              // </div>\r\n              <div style={{ maxWidth: \"70%\", margin: \"auto\" }}>\r\n                {parse(it[key])}\r\n              </div>\r\n            );\r\n          } else {\r\n            itemsarr.push(<div className={s.ytConfig}>{parse(it[key])}</div>);\r\n          }\r\n          embedThere = true;\r\n        } else if (key === \"list\") {\r\n          const listArr = it[key].split(\" || \");\r\n          console.log(listArr);\r\n          let foundLinkVar = 0;\r\n          let foundBoldVar = 0;\r\n          const tempListArr = [];\r\n          let tempListLinkArr = [];\r\n          let tempListText = \"\";\r\n          for (let i = 0; i < listArr.length; i++) {\r\n            if (\r\n              (listArr[i].includes(\"<link>\") &&\r\n                listArr[i].includes(\"</link>\")) ||\r\n              (listArr[i].includes(\"<b>\") && listArr[i].includes(\"</b>\"))\r\n            ) {\r\n              for (let j = 0; j < listArr[i].length; j++) {\r\n                if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"b\" &&\r\n                  listArr[i][j + 2] === \">\"\r\n                ) {\r\n                  foundBoldVar = j + 3;\r\n                  j = j + 2;\r\n                } else if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"/\" &&\r\n                  listArr[i][j + 2] === \"b\" &&\r\n                  listArr[i][j + 3] === \">\"\r\n                ) {\r\n                  if (tempListText) {\r\n                    tempListLinkArr.push(\r\n                      <span key={uuid()}>{tempListText}</span>\r\n                    );\r\n                    tempListText = \"\";\r\n                  }\r\n                  tempListLinkArr.push(\r\n                    <b key={uuid()}>{listArr[i].slice(foundBoldVar, j)}</b>\r\n                  );\r\n                  foundBoldVar = 0;\r\n                  j = j + 3;\r\n                } else if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"l\" &&\r\n                  listArr[i][j + 2] === \"i\" &&\r\n                  listArr[i][j + 3] === \"n\" &&\r\n                  listArr[i][j + 4] === \"k\" &&\r\n                  listArr[i][j + 5] === \">\"\r\n                ) {\r\n                  foundLinkVar = j + 6;\r\n                  j = j + 5;\r\n                } else if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"/\" &&\r\n                  listArr[i][j + 2] === \"l\" &&\r\n                  listArr[i][j + 3] === \"i\" &&\r\n                  listArr[i][j + 4] === \"n\" &&\r\n                  listArr[i][j + 5] === \"k\" &&\r\n                  listArr[i][j + 6] === \">\"\r\n                ) {\r\n                  let listLink = listArr[i].slice(foundLinkVar, j);\r\n                  const listLinkFirstIndex = listLink.split(\" \")[0];\r\n                  listLink = listLink.replace(listLinkFirstIndex + \" \", \"\");\r\n                  if (tempListText) {\r\n                    tempListLinkArr.push(\r\n                      <span key={uuid()}>{tempListText}</span>\r\n                    );\r\n                    tempListText = \"\";\r\n                  }\r\n                  tempListLinkArr.push(\r\n                    <a\r\n                      key={uuid()}\r\n                      href={listLinkFirstIndex}\r\n                      target=\"_blank\"\r\n                      rel=\"noreferrer noopener\"\r\n                    >\r\n                      {listLink}\r\n                    </a>\r\n                  );\r\n                  console.log(listLink);\r\n                  console.log(listLinkFirstIndex);\r\n                  foundLinkVar = 0;\r\n                  j = j + 6;\r\n                } else {\r\n                  if (!foundLinkVar && !foundBoldVar) {\r\n                    tempListText = tempListText.concat(listArr[i][j]);\r\n                  }\r\n                }\r\n                if (j === listArr[i].length - 1) {\r\n                  if (tempListText) {\r\n                    tempListLinkArr.push(\r\n                      <span key={uuid()}>{tempListText}</span>\r\n                    );\r\n                  }\r\n                  tempListArr.push(<li key={uuid()}>{tempListLinkArr}</li>);\r\n                  console.log(tempListLinkArr);\r\n                  console.log(tempListArr);\r\n                  tempListLinkArr = [];\r\n                  tempListText = [];\r\n                }\r\n              }\r\n            } else {\r\n              tempListArr.push(<li key={uuid()}>{listArr[i]}</li>);\r\n            }\r\n          }\r\n          console.log(articleData.listOrder);\r\n          console.log(articleData);\r\n          if (articleData.listOrder[listIncr] === \"ol\") {\r\n            itemsarr.push(<ol key={uuid()}>{tempListArr}</ol>);\r\n          } else if (articleData.listOrder[listIncr] === \"ul\") {\r\n            itemsarr.push(<ul key={uuid()}>{tempListArr}</ul>);\r\n          }\r\n          listIncr++;\r\n          console.log(tempListText);\r\n        } else {\r\n          if (textInd.length > 1) {\r\n            if (key === \"bold\") {\r\n              arrTemp.push(<b key={uuid()}>{it[key]}</b>);\r\n            } else if (key === \"externalLink\") {\r\n              let separate = it[key];\r\n              console.log(separate);\r\n              console.log(it);\r\n              console.log(key);\r\n              separate = separate.slice(6, separate.length - 8);\r\n              separate = separate.split(\" \");\r\n              let separateurl = separate[0];\r\n              separate.splice(0, 1);\r\n              separate.splice(separate.length - 1, 1);\r\n              let separatetxt = separate.join(\" \");\r\n              console.log(separatetxt);\r\n              arrTemp.push(\r\n                <a\r\n                  key={uuid()}\r\n                  href={separateurl}\r\n                  target=\"_blank\"\r\n                  rel=\"noreferrer noopener\"\r\n                >\r\n                  {separatetxt}\r\n                </a>\r\n              );\r\n              extLinkIncr++;\r\n            } else {\r\n              arrTemp.push(<span key={uuid()}>{it[key]}</span>);\r\n            }\r\n            if (arrTemp.length === textInd.length) {\r\n              console.log(arrTemp);\r\n              itemsarr.push(\r\n                <React.Fragment key={uuid()}>\r\n                  <p key={uuid()}>{arrTemp}</p>\r\n                </React.Fragment>\r\n              );\r\n              arrTemp = [];\r\n            }\r\n          } else {\r\n            console.log(it[key]);\r\n            if (textInd.length === 1 && key === \"externalLink\") {\r\n              //ext link takes up the whole p tag, no txt before or after the ext link\r\n              console.log(it[key]);\r\n              let separate = it[key];\r\n              separate = separate.slice(6, separate.length - 8);\r\n              separate = separate.split(\" \");\r\n              let separateurl = separate[0];\r\n              separate.splice(0, 1);\r\n              separate.splice(separate.length - 1, 1);\r\n              let separatetxt = separate.join(\" \");\r\n              console.log(separatetxt);\r\n              itemsarr.push(\r\n                <a\r\n                  key={uuid()}\r\n                  href={separateurl}\r\n                  target=\"_blank\"\r\n                  rel=\"noreferrer noopener\"\r\n                  style={{ display: \"block\" }}\r\n                >\r\n                  {separatetxt}\r\n                </a>\r\n              );\r\n              extLinkIncr++;\r\n            } else {\r\n              itemsarr.push(\r\n                <React.Fragment key={uuid()}>\r\n                  <p key={uuid()}>{it[key]}</p>\r\n                </React.Fragment>\r\n              );\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    if (intLinkThere) {\r\n      //remove brs\r\n      itemsarr.splice(itemsarr.length - 2, 1);\r\n      intLinkThere = false;\r\n      removeBrAfterInt = true;\r\n    } else if (imageThere) {\r\n      imageThere = false;\r\n    } else if (embedThere) {\r\n      embedThere = false;\r\n      if (window.instgrm) {\r\n        //we do it like this because this fn needs to run when the blockquote is in the dom, so it gets transformed to an iframe\r\n        //at useeff[] the text is not there yet cuz we have to build it first\r\n        // setTimeout(() => {\r\n        window.instgrm.Embeds.process();\r\n        // }, 2000);\r\n      }\r\n    } else {\r\n      if (removeBrAfterInt) {\r\n        removeBrAfterInt = false;\r\n      } else {\r\n        itemsarr.push(<br key={uuid()}></br>);\r\n      }\r\n    }\r\n    console.log(text.length);\r\n    if (l === text.length - 1) {\r\n      // setitemsarrtxt(itemsarr);\r\n    }\r\n    console.log(itemsarr);\r\n  });\r\n\r\n  const handleSliderOverlay = () => {\r\n    setClickedSlider((old) => !old);\r\n    setCounter(0);\r\n  };\r\n\r\n  const addRemoveOverlay = () => {\r\n    if (!zoomedIn) {\r\n      setClickedSlider(false);\r\n    }\r\n  };\r\n\r\n  const addRemoveOverlayClick = (e) => {\r\n    const { id } = e.target;\r\n    if (id.includes(\"clickedSlider\")) {\r\n      setClickedSlider(false);\r\n      if (zoomedIn) {\r\n        setZoomedIn(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (clickedSlider) {\r\n      if (!posOfSlider) {\r\n        setPosOfSlider(imageSliderRef.current.getBoundingClientRect().top);\r\n      }\r\n    }\r\n  }, [clickedSlider]);\r\n\r\n  const zoomOut = () => {\r\n    imageSliderRef.current.style.width = \"62.5%\";\r\n    imageSliderRef.current.style.height = \"85vh\";\r\n    imageSliderRef.current.style.top = \"7vh\";\r\n    // imageSliderRef.current.style.transform = \"translateY(0%)\";\r\n    imageSliderRef.current.style.transform = \"translateX(-50%)\";\r\n    sliderFooterBar.current.style.color = \"#c4c4c4\";\r\n  };\r\n\r\n  const zoomIn = (mode) => {\r\n    imageSliderRef.current.style.width = \"90%\";\r\n    // imageSliderRef.current.style.height = \"fit-content\";\r\n    imageSliderRef.current.style.height = \"150vh\";\r\n    sliderFooterBar.current.style.color = \"#fff\";\r\n    imageSliderRef.current.style.transform = \"translateX(-50%)\";\r\n    switch (mode) {\r\n      case \"normal\":\r\n        imageSliderRef.current.style.top = \"0vh\"; //-20bot -10 mid 0 top\r\n        break;\r\n      case \"upper\":\r\n        // imageSliderRef.current.style.top = \"-10%\"; //-20bot -10 mid 0 top\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -10%)\";\r\n        break;\r\n      case \"middle\":\r\n        // imageSliderRef.current.style.top = \"-15%\"; //-20bot -10 mid 0 top\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -20%)\";\r\n        break;\r\n      case \"lower\":\r\n        // imageSliderRef.current.style.top = \"-40vh\"; //-20bot -10 mid 0 top\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -30%)\";\r\n        break;\r\n    }\r\n  };\r\n\r\n  const zoomInPerBtn = () => {\r\n    if (zoomedIn) {\r\n      setZoomedIn(false);\r\n      zoomOut();\r\n    } else {\r\n      setZoomedIn(true);\r\n      // imageSliderRef.current.style.width = \"90%\";\r\n      // // imageSliderRef.current.style.transform = \"translateY(-30%)\"; //zoom down\r\n\r\n      // imageSliderRef.current.style.height = \"150vh\";\r\n\r\n      // // imageSliderRef.current.style.transform = \"translateY(-10%)\"; //center zoom\r\n      // // imageSliderRef.current.style.transform = \"translateY(0%)\"; //top zoom\r\n      // imageSliderRef.current.style.marginTop = \"0%\"; //-20bot -10 mid 0 top\r\n      // sliderFooterBar.current.style.color = \"#fff\";\r\n      zoomIn(\"middle\");\r\n    }\r\n  };\r\n\r\n  const mouseDownMove = () => {\r\n    if (zoomedIn) {\r\n      console.log(\"mousedown\");\r\n      imageSliderRef.current.style.cursor = \"grabbing\";\r\n      timer.current = setTimeout(() => {\r\n        setMoving(true);\r\n      }, 250);\r\n    }\r\n  };\r\n\r\n  const mouseUpMove = (e) => {\r\n    clearTimeout(timer.current);\r\n    timer.current = null;\r\n\r\n    if (zoomedIn) {\r\n      imageSliderRef.current.style.cursor = \"grab\";\r\n      imageSliderRef.current.style.transform = \"none\";\r\n      imageSliderRef.current.style.top = `7vh`;\r\n\r\n      if (zoomPos === \"upper\") {\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -10%)\";\r\n      } else if (zoomPos === \"middle\") {\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -20%)\";\r\n      } else if (zoomPos === \"lower\") {\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -30%)\";\r\n      } else {\r\n        imageSliderRef.current.style.top = `0`;\r\n      }\r\n      imageSliderRef.current.style.left = `50%`;\r\n      setGrabXPrev(null);\r\n      setGrabYPrev(null);\r\n    }\r\n    if (!moving) {\r\n      const oneThird = imageSliderRef.current.offsetHeight / 3;\r\n      const positionOnElement =\r\n        e.clientY - imageSliderRef.current.getBoundingClientRect().top;\r\n      if (positionOnElement < oneThird) {\r\n        if (zoomedIn) {\r\n          setZoomedIn(false);\r\n          zoomOut();\r\n        } else {\r\n          setZoomedIn(true);\r\n          zoomIn(\"upper\");\r\n          setZoomPos(\"upper\");\r\n        }\r\n      } else if (\r\n        positionOnElement >= oneThird &&\r\n        positionOnElement <= oneThird * 2\r\n      ) {\r\n        if (zoomedIn) {\r\n          setZoomedIn(false);\r\n          zoomOut();\r\n        } else {\r\n          setZoomedIn(true);\r\n          zoomIn(\"middle\");\r\n          setZoomPos(\"middle\");\r\n        }\r\n      } else {\r\n        if (zoomedIn) {\r\n          setZoomedIn(false);\r\n          zoomOut();\r\n        } else {\r\n          setZoomedIn(true);\r\n          zoomIn(\"lower\");\r\n          setZoomPos(\"lower\");\r\n        }\r\n      }\r\n    }\r\n    if (moving) {\r\n      setMoving(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (imageSliderRef.current) {\r\n      console.log(imageSliderRef.current.style.top);\r\n      console.log(imageSliderRef.current.style.left);\r\n    }\r\n  }, [imageSliderRef]);\r\n\r\n  const mouseMove = (e) => {\r\n    console.log(\"mousemove\");\r\n    if (zoomedIn && moving) {\r\n      if (imageSliderRef.current.style) {\r\n        const widthX = imageSliderRef.current.width;\r\n        const heightY = imageSliderRef.current.height;\r\n        let tst1 = imageSliderRef.current.style.left;\r\n        let tst2 = imageSliderRef.current.style.top;\r\n        setGrabXPrev(e.clientX);\r\n        setGrabYPrev(e.clientY);\r\n        console.log(grabXPrev);\r\n        console.log(grabYPrev);\r\n        let addX = 1;\r\n        let addY = 5;\r\n        console.log(imageSliderRef.current.style);\r\n        console.log(Object.assign({}, imageSliderRef.current.style));\r\n        console.log(tst1);\r\n        console.log(tst2);\r\n        console.log(tst1.replace(/\\D/g, \"\"));\r\n        console.log(typeof +tst2.replace(/\\D/g, \"\"));\r\n        tst1 = +tst1.replace(/\\D/g, \"\");\r\n        tst2 = +tst2.replace(/\\D/g, \"\");\r\n        console.log(e.clientX);\r\n        console.log(e.clientY);\r\n        console.log(widthX);\r\n        console.log(heightY);\r\n        console.log(imageSliderRef.current.offsetLeft);\r\n        console.log(imageSliderRef.current.offsetTop);\r\n        console.log(imageSliderRef.current.offsetTop - e.clientY);\r\n        console.log(imageSliderRef.current.offsetLeft - e.clientX);\r\n        // const offset = [imageSliderRef.current.offsetLeft - e.clientX, imageSliderRef.current.offsetTop - e.clientY]\r\n        // imageSliderRef.current.style.left = e.clientX + offset[0] + 'px'\r\n        // imageSliderRef.current.style.top = e.clientY + offset[1] + 'px'\r\n        if (grabXPrev && grabYPrev) {\r\n          const pos1 = grabXPrev - e.clientX;\r\n          const pos2 = grabYPrev - e.clientY;\r\n          console.log(grabXPrev);\r\n          console.log(e.clientX);\r\n          console.log(e.clientY);\r\n          console.log(grabYPrev);\r\n          console.log(pos2);\r\n          console.log(imageSliderRef.current.offsetTop);\r\n          console.log(imageSliderRef.current.offsetTop - pos2);\r\n          const offsetArr = [\r\n            imageSliderRef.current.offsetLeft - pos1,\r\n            imageSliderRef.current.offsetTop - pos2,\r\n          ];\r\n\r\n          imageSliderRef.current.style.top = offsetArr[1] + \"px\";\r\n\r\n          imageSliderRef.current.style.left = offsetArr[0] + \"px\";\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {}, [moving]);\r\n\r\n  useEffect(() => {\r\n    if (zoomedIn) {\r\n      if (imageSliderRef.current) {\r\n        imageSliderRef.current.style.cursor = \"grab\";\r\n      }\r\n      // document.body.style.position = \"fixed\";\r\n      // document.body.style.overflowY = \"scroll\";\r\n    } else {\r\n      if (imageSliderRef.current) {\r\n        imageSliderRef.current.style.cursor = \"zoom-in\";\r\n      }\r\n      // document.body.style.position = \"static\";\r\n    }\r\n  }, [zoomedIn]);\r\n\r\n  const handleSliderControls = (e, mode) => {\r\n    // setArticleData((old) => {\r\n    // let oldArr = [...old.images];\r\n    // console.log(old);\r\n    // const takeAndAdd = oldArr[0];\r\n    // oldArr.splice(0, 1);\r\n    // oldArr.push(takeAndAdd);\r\n    // console.log(oldArr);\r\n    // old.images = [...oldArr];\r\n    // console.log(old);\r\n    // imageSliderRef.current.src = oldArr[0];\r\n    // return old;\r\n    // });\r\n    if (mode === \"right\") {\r\n      if (counter < articleData.images.length - 1) {\r\n        setCounter((old) => old + 1);\r\n        imageSliderRef.current.src = articleData.imageText[counter + 1][0];\r\n      } else if (counter === articleData.images.length - 1) {\r\n        setCounter(0);\r\n        imageSliderRef.current.src = articleData.imageText[0][0];\r\n      }\r\n    } else if (mode === \"left\") {\r\n      if (counter === 0) {\r\n        setCounter(articleData.images.length - 1);\r\n        imageSliderRef.current.src = articleData.imageText[counter][0];\r\n      } else {\r\n        setCounter((old) => old - 1);\r\n        imageSliderRef.current.src = articleData.imageText[counter - 1][0];\r\n      }\r\n    }\r\n  };\r\n\r\n  const openSliderFromThumbnail = (index) => {\r\n    setClickedSlider(true);\r\n    setCounter(index);\r\n    // setTimeout(() => {\r\n    //   if (imageSliderRef.current) {\r\n    //     imageSliderRef.current.src = articleData.images[index];\r\n    //   }\r\n    // }, 10);\r\n  };\r\n\r\n  const toggleFullscren = (e) => {\r\n    imageSliderRef.current.parentElement.requestFullscreen();\r\n    e.target.className = \"fas fa-compress\";\r\n    if (document.fullscreenElement) {\r\n      document.exitFullscreen();\r\n      e.target.className = \"fas fa-expand\";\r\n    }\r\n  };\r\n\r\n  const findRelatedTags = (tags, cat, artId) => {\r\n    const dbRef = db.ref(`related/${cat}`);\r\n    // dbRef.once(\"value\", (snap) => {\r\n    //   console.log(snap.val());\r\n    // });\r\n    const findLatestThree = [];\r\n    const dates = [];\r\n    for (let ind of tags) {\r\n      const newRef = dbRef.child(ind.constructor === Object ? ind.value : ind);\r\n      newRef\r\n        .orderByKey()\r\n        .limitToLast(4) //4because, same id as cur art now we have 3 useful, same id(not cur art) but it reoccurs in other tags\r\n        .once(\"value\", (snap) => {\r\n          console.log(snap.val());\r\n          const data = snap.val();\r\n          //we want to not include the existing article in the retailed articles and we want to not have any duplicat articles in related(same art added in many tag branches)\r\n          for (let key in data) {\r\n            const id =\r\n              data[key].articlePath.split(\"/\")[\r\n                data[key].articlePath.split(\"/\").length - 1\r\n              ];\r\n            if (\r\n              id !== artId &&\r\n              findLatestThree.filter((el) => el.id !== id).length ===\r\n                findLatestThree.length\r\n            ) {\r\n              let artPath = data[key].articlePath.split(\"/\");\r\n              artPath[2] = artPath[2].slice(1);\r\n              artPath.splice(2, 0, splitTitle(data[key].title));\r\n              delete data[key].articlePath;\r\n              console.log(artPath.join(\"/\"));\r\n              data[key].articlePath = artPath.join(\"/\");\r\n              console.log(data[key]);\r\n              findLatestThree.push({\r\n                ...data[key],\r\n                id,\r\n              });\r\n              dates.push(new Date(data[key].date));\r\n            }\r\n          }\r\n          console.log(findLatestThree);\r\n          console.log(dates);\r\n          // console.log(+dates[2] == +dates[3]); //this is how u compare dates with +\r\n          const findThree = [];\r\n          let cur;\r\n          //sort array of objects by date in an descending order\r\n          cur = findLatestThree.sort((x, y) => {\r\n            // console.log(a.date);\r\n            // console.log(b.date);\r\n            // if (new Date(a.date) > new Date(b.bdate)) {\r\n            //   return -1; //place in descending, imagine -1 as taking it out of it's normal index and pulling it to the left, 1 is putting it to the right, zero keep pos'\r\n            // } else if (new Date(a.date) < new Date(b.date)) {\r\n            //   return 1;\r\n            // }\r\n            // return 0;\r\n            let a = new Date(x.date),\r\n              b = new Date(y.date);\r\n            return b - a;\r\n          });\r\n          console.log(cur);\r\n          if (cur.length > 3) {\r\n            cur.splice(3);\r\n          }\r\n          setRelatedArticles([...cur]);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleTagUnderscore = () => {\r\n    const tgs = [];\r\n    location.state.articleData.tags.forEach((tag) => {\r\n      if (tag.value) {\r\n        if (tag.value.includes(\"_\")) {\r\n          let valObj = { id: tag.id };\r\n          let val = tag.value.split(\"_\");\r\n          valObj.value = val.join(\".\");\r\n          tgs.push(valObj);\r\n        } else {\r\n          tgs.push(tag);\r\n        }\r\n      } else {\r\n        if (tag.includes(\"_\")) {\r\n          let val = tag.split(\"_\");\r\n          val = val.join(\".\");\r\n          tgs.push(val);\r\n        } else {\r\n          tgs.push(tag);\r\n        }\r\n      }\r\n    });\r\n    return tgs;\r\n  };\r\n\r\n  const handleFbShare = () => {\r\n    const url = window.location.href;\r\n    const shareUrl = `https://www.facebook.com/sharer/sharer.phpu=${url}`;\r\n    const params = \"menubar=no,toolbar=no,status=no,width=570,height=570\";\r\n    window.open(shareUrl, \"NewWindow\", params);\r\n  };\r\n\r\n  const handleTwitterShare = () => {\r\n    const text = encodeURIComponent(articleData.title);\r\n    const url = window.location.href;\r\n    const user_id = ctx.isLoggedIn ? ctx.isLoggedIn : \"anonymous\";\r\n    const hash_tags = articleData.tags.length\r\n      ? articleData.tags[0].constructor === Object\r\n        ? articleData.tags.map((item) => item.value).join(\", \")\r\n        : articleData.tags.join(\", \")\r\n      : \"\";\r\n    const params = \"menubar=no,toolbar=no,status=no,width=570,height=570\";\r\n    const shareurl = `https://twitter.com/intent/tweet?url=${url}&text=${text}&via=${user_id}&hashtags=${hash_tags}`;\r\n    window.open(shareurl, \"NewWindow\", params);\r\n    handleShareFirebase();\r\n  };\r\n\r\n  const handleShareFirebase = () => {\r\n    const dbRef = db.ref(\r\n      `articles/${articleData.category}/${articleData.subCategory}/-${articleData.id}`\r\n    );\r\n    dbRef.child(\"shares\").once(\"value\", (snap) => {\r\n      console.log(snap.val());\r\n      const data = snap.val();\r\n      fetch(\"https://api.ipify.org/?format=json\")\r\n        .then((response) => response.json())\r\n        .then((ip) => {\r\n          if (data.length === 1 && data[0] === \"\") {\r\n            db.ref(\r\n              `articles/${articleData.category}/${articleData.subCategory}/-${articleData.id}/shares`\r\n            ).set({ [ip.ip.split(\".\").join(\"_\")]: ip.ip });\r\n            setArticleData((old) => {\r\n              const oldArr = { ...old };\r\n              delete oldArr.shares;\r\n              oldArr.shares = {};\r\n              oldArr.shares[ip.ip.split(\".\").join(\"_\")] = ip.ip;\r\n              return oldArr;\r\n            });\r\n            // const len = Math.floor(Math.random() * 100 + 1);\r\n            // const temp = [];\r\n            // for (let i = 0; i < len; i++) {\r\n            //   temp.push(\r\n            //     `${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}.${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}`\r\n            //   );\r\n            // }\r\n\r\n            // for (let i = 0; i < temp.length; i++) {\r\n            //   ((ind) => {\r\n            //     db.ref(\r\n            //       `articles/${articleData.category}/${\r\n            //         articleData.subCategory\r\n            //       }/-${articleData.id}/shares/${temp[ind].split(\".\").join(\"_\")}`\r\n            //     ).set(temp[ind]);\r\n            //   })(i);\r\n            // }\r\n          } else {\r\n            if (\r\n              !Object.values(articleData.shares).some((val) => val === ip.ip)\r\n            ) {\r\n              db.ref(\r\n                `articles/${articleData.category}/${articleData.subCategory}/-${\r\n                  articleData.id\r\n                }/shares/${[ip.ip.split(\".\").join(\"_\")]}`\r\n              ).set(ip.ip);\r\n              setArticleData((old) => {\r\n                const oldArr = { ...old };\r\n                oldArr.shares[ip.ip.split(\".\").join(\"_\")] = ip.ip;\r\n                return oldArr;\r\n              });\r\n              // const ips = {\r\n              //   11_22_333_321: \"11.22.333.321\",\r\n              //   11_22_333_422: \"11.22.333.422\",\r\n              //   11_22_333_523: \"11.22.333.523\",\r\n              //   11_22_333_624: \"11.22.333.624\",\r\n              //   11_22_333_725: \"11.22.333.725\",\r\n              //   11_22_333_826: \"11.22.333.826\",\r\n              //   11_22_333_927: \"11.22.333.927\",\r\n              //   11_22_331_228: \"11.22.331.228\",\r\n              //   11_22_332_229: \"11.22.332.229\",\r\n              //   11_22_333_220: \"11.22.333.220\",\r\n              //   11_22_334_231: \"11.22.334.231\",\r\n              //   11_22_335_232: \"11.22.335.232\",\r\n              //   11_22_336_233: \"11.22.336.233\",\r\n              //   11_22_337_234: \"11.22.337.234\",\r\n              //   11_22_338_235: \"11.22.338.235\",\r\n              // };\r\n              // for (let i = 0; i < Object.keys(ips).length; i++) {\r\n              //   ((ind) => {\r\n              //     db.ref(\r\n              //       `articles/${articleData.category}/${\r\n              //         articleData.subCategory\r\n              //       }/-${articleData.id}/shares/${Object.values(ips)\r\n              //         [ind].split(\".\")\r\n              //         .join(\"_\")}`\r\n              //     ).set(Object.values(ips)[ind]);\r\n              //   })(i);\r\n              // }\r\n            }\r\n          }\r\n        });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div id={s.articleParent}>\r\n      {clickedSlider && (\r\n        <div\r\n          onClick={addRemoveOverlayClick}\r\n          onWheel={addRemoveOverlay}\r\n          id={s.clickedSlider}\r\n        >\r\n          <div id={s.sliderMainImgContainer}>\r\n            <div id={s.sliderHeaderBar}>\r\n              <span id={s.slideNumbers}>{`${counter + 1} / ${\r\n                articleData.images.length\r\n              }`}</span>\r\n              <span id={s.slideZoomExpand}>\r\n                {!zoomedIn && (\r\n                  <i class=\"fas fa-search-plus\" onClick={zoomInPerBtn}></i>\r\n                )}\r\n                {zoomedIn && (\r\n                  <i class=\"fas fa-search-minus\" onClick={zoomInPerBtn}></i>\r\n                )}\r\n                <i class=\"fas fa-expand\" onClick={toggleFullscren}></i>\r\n              </span>\r\n            </div>\r\n            <img\r\n              ref={imageSliderRef}\r\n              src={articleData && articleData.imageText[counter][0]}\r\n              onMouseDown={mouseDownMove}\r\n              onMouseUp={mouseUpMove}\r\n              onMouseMove={mouseMove}\r\n            />\r\n            <div\r\n              id={s.sliderRight}\r\n              onClick={(e) => handleSliderControls(e, \"right\")}\r\n            >\r\n              <i class=\"fas fa-long-arrow-alt-right\"></i>\r\n            </div>\r\n            <div\r\n              id={s.sliderLeft}\r\n              onClick={(e) => handleSliderControls(e, \"left\")}\r\n            >\r\n              <i class=\"fas fa-long-arrow-alt-left\"></i>\r\n            </div>\r\n            <div id={s.sliderFooterBar} ref={sliderFooterBar}>\r\n              {/* (Foto: D. S./Klix.ba) */}\r\n              {articleData.imageText[counter][1] === \"blank\"\r\n                ? \"\"\r\n                : articleData.imageText[counter][1]}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div id={s.articleHeader}>\r\n        <h3\r\n          style={{\r\n            color: articleData && `${clrs[articleData.category.toLowerCase()]}`,\r\n          }}\r\n        >\r\n          {articleData && articleData.subTitle}\r\n        </h3>\r\n        <h1>{articleData && articleData.title}</h1>\r\n      </div>\r\n      <div id={s.articleBody}>\r\n        <div id={s.articleSidebarLeft} ref={stickLeftSideBar}>\r\n          <div id={s.bundleDiv}>\r\n            <div id={s.postedData}>\r\n              <div id={s.postedDataOne}>\r\n                <i\r\n                  class=\"fas fa-user\"\r\n                  style={{\r\n                    backgroundColor: `rgb(209,213,219)`,\r\n                    color: \"#fff\",\r\n                    padding: \"1.2rem\",\r\n                    borderRadius: \".3rem\",\r\n                    fontSize: \"1.6rem\",\r\n                  }}\r\n                ></i>\r\n              </div>\r\n              <div id={s.postedDataTwo}>\r\n                <h3>\r\n                  {(articleData &&\r\n                    (articleData.sponsored\r\n                      ? \"Sponzorirani ƒçlanak\"\r\n                      : articleData.author)) ||\r\n                    \"R. D.\"}\r\n                </h3>\r\n                <p>{timeDifference(articleData && articleData.date)}</p>\r\n              </div>\r\n            </div>\r\n            <div id={s.commentsShare}>\r\n              <div id={s.comments}>\r\n                <h2>\r\n                  {articleData && articleData.commentsAllowed === \"Ne\" ? (\r\n                    // <i\r\n                    //   style={{\r\n                    //     color: \"rgb(75,85,99)\",\r\n                    //     transform: \"scale(0.9)\",\r\n                    //   }}\r\n                    //   class=\"fas fa-comment-slash\"\r\n                    // ></i>\r\n                    <svg\r\n                      class=\"h-5 w-5 inline my-1\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      stroke=\"currentColor\"\r\n                      style={{ width: \"2rem\" }}\r\n                    >\r\n                      <path\r\n                        style={{ color: \"rgb(75,85,99)\", fontSize: \"1rem\" }}\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                        stroke-width=\"2\"\r\n                        d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\"\r\n                      ></path>\r\n                    </svg>\r\n                  ) : articleData && !articleData.comments ? (\r\n                    0\r\n                  ) : articleData && articleData.comments ? (\r\n                    fullComLength.current\r\n                  ) : (\r\n                    0\r\n                  )}\r\n                </h2>\r\n                <p>\r\n                  {articleData && articleData.commentsAllowed === \"Ne\"\r\n                    ? \"komentari\"\r\n                    : articleData &&\r\n                      articleData.comments &&\r\n                      Object.values(articleData.comments).length === 1\r\n                    ? \"komentar\"\r\n                    : \"komentara\"}\r\n                </p>\r\n              </div>\r\n              <div id={s.shares}>\r\n                <h2>\r\n                  {articleData\r\n                    ? articleData.shares.constructor === Object\r\n                      ? Object.keys(articleData.shares).length\r\n                      : 0\r\n                    : \"\"}\r\n                </h2>\r\n                <p>dijeljenja</p>\r\n              </div>\r\n            </div>\r\n            <div id={s.shareArticle}>\r\n              <ul>\r\n                <li onClick={handleFbShare}>\r\n                  <i class=\"fab fa-facebook\"></i>\r\n                </li>\r\n                <li onClick={handleTwitterShare}>\r\n                  <i class=\"fab fa-twitter\"></i>\r\n                </li>\r\n                <li>\r\n                  <i class=\"far fa-envelope\"></i>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id={s.articleBodyContent}>\r\n          {articleData && articleData.images.length > 1 ? (\r\n            <div id={s.imageSliderContainer}>\r\n              <div id={s.mainSliderImage}>\r\n                <img\r\n                  onClick={handleSliderOverlay}\r\n                  src={articleData.imageText[0][0]}\r\n                />\r\n              </div>\r\n              <div id={s.sliderImages}>\r\n                {articleData.imageText.map((img, i) =>\r\n                  i < 4 && i !== 0 ? (\r\n                    <img\r\n                      key={uuid()}\r\n                      src={img[0]}\r\n                      onClick={() => openSliderFromThumbnail(i)}\r\n                    />\r\n                  ) : i === 4 && articleData.imageText.length - 5 > 0 ? (\r\n                    <div id={s.clickForMore} key={uuid()}>\r\n                      <span onClick={() => openSliderFromThumbnail(i)}>\r\n                        +{articleData.imageText.length - 5}\r\n                      </span>\r\n                      <img\r\n                        src={img[0]}\r\n                        onClick={() => openSliderFromThumbnail(i)}\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    i === 4 && (\r\n                      <img\r\n                        key={uuid()}\r\n                        src={img[0]}\r\n                        onClick={() => openSliderFromThumbnail(i)}\r\n                      />\r\n                    )\r\n                  )\r\n                )}\r\n              </div>\r\n              <p>\r\n                {articleData &&\r\n                  (articleData.imageText[0][1] === \"blank\"\r\n                    ? \"\"\r\n                    : articleData.imageText[0][1])}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div id={s.imageContainer}>\r\n              <img src={articleData && articleData.imageText[0][0]} />\r\n              <div id={s.captionTxt}>\r\n                <p>\r\n                  {articleData &&\r\n                    (articleData.imageText[0][1] === \"blank\"\r\n                      ? \"\"\r\n                      : articleData.imageText[0][1])}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div id={s.articleText}>\r\n            {/* {text.map((textInd) => {\r\n              console.log(textInd);\r\n              textInd.map((it) => {\r\n                for (let key in it) {\r\n                  key === \"bold\"\r\n                    ? itemsarr.push(\r\n                        <React.Fragment key={uuid()}>\r\n                          <b key={uuid()}>{it[key]}</b>\r\n                          <br></br>\r\n                        </React.Fragment>\r\n                      )\r\n                    : itemsarr.push(\r\n                        <React.Fragment key={uuid()}>\r\n                          <p key={uuid()}>{it[key]}</p>\r\n                        </React.Fragment>\r\n                      );\r\n                }\r\n              });\r\n              itemsarr.push(<br key={uuid()}></br>);\r\n            })} */}\r\n            {itemsarr}\r\n            {/* {articleData && articleData.articleText} */}\r\n            {/* Vijest da WizzAir uvodi letove sa Aerodroma Sarajevo i Aerodroma\r\n            Banja Luka odjeknula je u bh. dijaspori, a i meƒëu svima koji su\r\n            tokom pandemije po≈æeljeli putovanja. Od juna 2021. godine WizzAir iz */}\r\n            {/* {parse(\r\n              '<iframe src=\"https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2FKlix.ba%2Fposts%2F10158031303966821&show_text=true&width=500\" width=\"500\" height=\"487\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowfullscreen=\"true\" allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"></iframe>'\r\n            )} */}\r\n            {/* {parse(\r\n              '<blockquote class=\"instagram-media\" data-instgrm-captioned data-instgrm-permalink=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" data-instgrm-version=\"13\" style=\" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);\"><div style=\"padding:16px;\"> <a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;\" target=\"_blank\"> <div style=\" display: flex; flex-direction: row; align-items: center;\"> <div style=\"background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;\"></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;\"></div></div></div><div style=\"padding: 19% 0;\"></div> <div style=\"display:block; height:50px; margin:0 auto 12px; width:50px;\"><svg width=\"50px\" height=\"50px\" viewBox=\"0 0 60 60\" version=\"1.1\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\"><g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(-511.000000, -20.000000)\" fill=\"#000000\"><g><path d=\"M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631\"></path></g></g></g></svg></div><div style=\"padding-top: 8px;\"> <div style=\" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;\"> View this post on Instagram</div></div><div style=\"padding: 12.5% 0;\"></div> <div style=\"display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;\"><div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);\"></div> <div style=\"background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;\"></div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);\"></div></div><div style=\"margin-left: 8px;\"> <div style=\" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;\"></div> <div style=\" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)\"></div></div><div style=\"margin-left: auto;\"> <div style=\" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);\"></div> <div style=\" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);\"></div> <div style=\" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);\"></div></div></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;\"></div></div></a><p style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;\"><a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;\" target=\"_blank\">A post shared by Chloe Ventura (@chloe.ventura)</a></p></div></blockquote>  <script async src=\"//www.instagram.com/embed.js\"></script>'\r\n            )} */}\r\n            {/* Sarajeva leti za ƒçak devet destinacija: Basel, Brussels, Dortmund,\r\n            Memmingen, Eindhoven, Copenhagen, Gothenburg, Stockholm i Paris. Iz\r\n            Banja Luke WizzAir leti za Basel, Dortmund, Eindhoven, Malmo i\r\n            Stockholm, te se pridru≈æuje RyanAiru koji iz Banja Luke leti za\r\n            Memmingen i Gothenburg. */}\r\n          </div>\r\n          <div id={s.tags}>\r\n            {articleData &&\r\n              articleData.tags &&\r\n              location.state &&\r\n              location.state.articleData &&\r\n              handleTagUnderscore(articleData.tags).map((tag) => (\r\n                <span key={uuid()}>\r\n                  {tag.constructor === Object ? tag.value : tag}\r\n                </span>\r\n              ))}\r\n          </div>\r\n          {articleData && articleData.commentsAllowed === \"Da\" && (\r\n            <div id={s.addComment}>\r\n              <h3>Komentari</h3>\r\n              {ctx.isLoggedIn && (\r\n                <CommentType\r\n                  path={{\r\n                    category:\r\n                      location.state && location.state.articleData.category,\r\n                    subCategory:\r\n                      location.state && location.state.articleData.subCategory,\r\n                    id: location.state && location.state.articleData.id,\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              <button className={s.showComments}>\r\n                <Link\r\n                  to={\r\n                    articleData && {\r\n                      pathname: `${\r\n                        articleData.linkPath\r\n                          ? articleData.linkPath\r\n                          : `/${articleData.category}/${\r\n                              articleData.subCategory\r\n                            }/${splitTitle(articleData.title)}/${\r\n                              articleData.id\r\n                            }`\r\n                      }/komentari`,\r\n                      state: {\r\n                        articleData,\r\n                      },\r\n                    }\r\n                  }\r\n                >\r\n                  PRIKA≈ΩI SVE KOMENTARE (\r\n                  {articleData && !articleData.comments\r\n                    ? 0\r\n                    : articleData && articleData.comments\r\n                    ? fullComLength.current\r\n                    : 0}\r\n                  )\r\n                </Link>\r\n              </button>\r\n            </div>\r\n          )}\r\n          <div id={s.linkedArticles}>\r\n            {relatedArticles.length > 0 && (\r\n              <>\r\n                <div id={s.linkedArticlesHeader}>\r\n                  <h3>Vezani ƒçlanci</h3>\r\n                  <i class=\"fas fa-link\"></i>\r\n                </div>\r\n                <div\r\n                  id={s.linkedArticlesBody}\r\n                  style={\r\n                    relatedArticles.length === 1\r\n                      ? {\r\n                          gridTemplateColumns: \"33%\",\r\n                          justifyContent: \"center\",\r\n                        }\r\n                      : relatedArticles.length === 2\r\n                      ? {\r\n                          gridTemplateColumns: \"repeat(2, minmax(30%, 1fr))\",\r\n                        }\r\n                      : null\r\n                  }\r\n                >\r\n                  {relatedArticles.map((relArt, i) => (\r\n                    <LinkedArticles\r\n                      key={uuid()}\r\n                      data={relArt}\r\n                      indL={[i, relatedArticles.length]}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n            <div id={s.linkedPromo}>\r\n              <div id={s.linkedPromoHeader}>\r\n                <h3>Promo</h3>\r\n                <i class=\"fas fa-mouse-pointer\"></i>\r\n              </div>\r\n              <div id={s.linkedPromoBody}>\r\n                {promoArticles.map((prom, i) => (\r\n                  <LinkedPromo data={prom} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id={s.articleSidebarRight} ref={stickRightSideBar}>\r\n          <Popular />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ArticleComp;\r\n","import React, { useContext } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport LoginContext from \"../../context\";\r\nimport s from \"./Comment.module.css\";\r\nimport CommentType from \"./CommentType\";\r\nimport CommentItem from \"./CommentItem\";\r\nimport CommentReply from \"./CommentReply\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport CommentShow from \"./CommentShow\";\r\nimport ReportComment from \"./reportComment/ReportComment\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport { scrollFnSticky } from \"../Article/Article\";\r\nimport Popular from \"../Article/Popular\";\r\n\r\nexport const getComLength = (data) => {\r\n  let fullCommentsLength = 0;\r\n  console.log(data);\r\n  for (let i = 0; i < data.length; i++) {\r\n    if (data[i].replies) {\r\n      fullCommentsLength += data[i].replies.length;\r\n    }\r\n    if (i === data.length - 1) {\r\n      fullCommentsLength += data.length;\r\n      console.log(fullCommentsLength);\r\n      return fullCommentsLength;\r\n    }\r\n  }\r\n};\r\n\r\nexport const getComLengthIfObject = (data) => {\r\n  let fullComLength = 0;\r\n  let replyLength = 0;\r\n  for (let key in data) {\r\n    if (data[key].replies) {\r\n      replyLength += Object.keys(data[key].replies).length;\r\n    }\r\n  }\r\n  fullComLength = Object.keys(data).length + replyLength;\r\n  return fullComLength;\r\n};\r\n\r\nexport const handleReplyHide = (data) => {\r\n  const replyHideArray = [];\r\n  console.log(data);\r\n  for (let i = 0; i < data.length; i++) {\r\n    if (data[i].replies && data[i].replies.length > 2) {\r\n      replyHideArray.push(i);\r\n    }\r\n  }\r\n\r\n  if (replyHideArray.length) {\r\n    return [...replyHideArray];\r\n    // setRepliesToHide([...replyHideArray]);\r\n  }\r\n  console.log(replyHideArray);\r\n};\r\n\r\nconst Comment = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [comments, setComments] = useState([]);\r\n  const [replyIndex, setReplyIndex] = useState(null);\r\n  const [getComments, setGetComments] = useState(true);\r\n  const [safeToProceed, setSafeToProceed] = useState(false);\r\n  const [repliesToHide, setRepliesToHide] = useState([]);\r\n  const [showMore, setShowMore] = useState([]);\r\n  const [reportComment, setReportComment] = useState(null);\r\n  const initRef = useRef(null);\r\n  const pushFinal = useRef(undefined);\r\n  const pushFinal2 = useRef(undefined);\r\n  const fullCommentsLengthRef = useRef(0);\r\n  const stickLeftSidebar = useRef();\r\n  const stickRightSideBar = useRef();\r\n  // useEffect(() => {\r\n  //   window.onbeforeunload = function () {\r\n  //     return true;\r\n  //   };\r\n\r\n  //   return () => {\r\n  //     window.onbeforeunload = null;\r\n  //   };\r\n  // }, []);\r\n  // useEffect(() => {\r\n  //   if (getComments) {\r\n  //     alert(\"its true\");\r\n  //   }\r\n  // }, [getComments]);\r\n  useEffect(() => {\r\n    console.log(\"\");\r\n    function handlerFn() {\r\n      scrollFnSticky(stickLeftSidebar);\r\n      scrollFnSticky(stickRightSideBar);\r\n    }\r\n    window.addEventListener(\"scroll\", handlerFn);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handlerFn);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // if (getComments) {\r\n    //   alert(\"its true\");\r\n    // }\r\n    if (!location.state) {\r\n      console.log(location);\r\n    }\r\n    if (location.state && getComments) {\r\n      console.log(location.state);\r\n      // alert(initRef.current);\r\n      if (!initRef.current) {\r\n        console.log(location.state.articleData.comments);\r\n        if (location.state.articleData.comments) {\r\n          const reverseArr = [\r\n            ...Object.values(location.state.articleData.comments),\r\n          ];\r\n          reverseArr.reverse();\r\n          setComments([...reverseArr]);\r\n        }\r\n        initRef.current = \"initialized\";\r\n      }\r\n      if (location.state.articleData.comments) {\r\n        // setFullCommentsLength(\r\n        //   getComLength(location.state.articleData.comments)\r\n        // );\r\n        fullCommentsLengthRef.current = getComLength(\r\n          location.state.articleData.comments\r\n        );\r\n      } else {\r\n        setGetComments(false);\r\n      }\r\n      fetch(\"https://api.ipify.org/?format=json\")\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          localStorage.setItem(\"userIp\", data.ip);\r\n          console.log(data);\r\n        });\r\n      // alert(\"gettingComments\");\r\n      if (typeof replyIndex === \"number\" || Array.isArray(replyIndex)) {\r\n        setReplyIndex(null);\r\n      }\r\n      window.scrollTo(0, 0);\r\n      console.log(location.state);\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}/comments.json`\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          let modifyData = [];\r\n          if (data) {\r\n            let replies = [];\r\n            for (let key in data) {\r\n              console.log(key);\r\n              modifyData.push(data[key]);\r\n              modifyData[modifyData.length - 1].id = key;\r\n              if (data[key].replies) {\r\n                for (let keyRep in data[key].replies) {\r\n                  replies.push(data[key].replies[keyRep]);\r\n                  replies[replies.length - 1].id = [key, keyRep];\r\n                }\r\n                modifyData[modifyData.length - 1].replies = [...replies];\r\n                replies = [];\r\n              }\r\n            }\r\n            console.log(modifyData);\r\n            modifyData.reverse();\r\n            const check = checkForTopComments([...modifyData]);\r\n            const replyHideArray = handleReplyHide(check);\r\n            if (replyHideArray) {\r\n              setRepliesToHide(replyHideArray);\r\n            }\r\n            console.log(check);\r\n            setComments([...check]);\r\n            showMoreFn(check.length);\r\n            // alert(\"test\");\r\n            // location.state.articleData.comments = [...data];\r\n            setGetComments(false);\r\n            // setFullCommentsLength(getComLength(check));\r\n            fullCommentsLengthRef.current = getComLength(check);\r\n            history.replace({\r\n              state: {\r\n                articleData: {\r\n                  ...JSON.parse(JSON.stringify(location.state.articleData)),\r\n                  comments: [...JSON.parse(JSON.stringify(check))],\r\n                },\r\n              },\r\n            });\r\n            setSafeToProceed(true);\r\n          }\r\n        });\r\n    } else if (!location.state) {\r\n      console.log(history.location.pathname);\r\n      let deconstructPathName = history.location.pathname.split(\"/\");\r\n      console.log(deconstructPathName);\r\n      const path = {\r\n        category: deconstructPathName[1],\r\n        subCategory: deconstructPathName[2],\r\n        id: deconstructPathName[4],\r\n      };\r\n      console.log(path);\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${path.category}/${path.subCategory}/-${path.id}.json`\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          let commentData = [];\r\n          let replies = [];\r\n          let linkPath = \"\";\r\n          if (data.comments) {\r\n            for (let key in data.comments) {\r\n              if (data.comments[key].replies) {\r\n                for (let keyRep in data.comments[key].replies) {\r\n                  replies.push(data.comments[key].replies[keyRep]);\r\n                }\r\n                commentData.push(data.comments[key]);\r\n                commentData[commentData.length - 1].replies = [...replies];\r\n                replies = [];\r\n              } else {\r\n                commentData.push(data.comments[key]);\r\n              }\r\n            }\r\n            data.comments = [...commentData];\r\n          }\r\n          const titleSplit = data.title.split(\" \");\r\n          let titleSplit2 = [];\r\n          let titleSplit3;\r\n          titleSplit.forEach((split) => {\r\n            titleSplit2.push(split.toLowerCase());\r\n          });\r\n          titleSplit3 = titleSplit2.join(\"-\");\r\n          titleSplit3 = titleSplit3.split(\",\").join(\"\").split(\" \").join(\"-\");\r\n          data.timeDiff = timeDifference(data.date);\r\n          data.linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n          history.replace({\r\n            state: {\r\n              articleData: {\r\n                ...JSON.parse(JSON.stringify(data)),\r\n              },\r\n            },\r\n          });\r\n        });\r\n    }\r\n  }, [location, getComments]);\r\n\r\n  const spliceRepliesHide = (ind, mode) => {\r\n    if (mode === \"replies\") {\r\n      const testingFn = (el) => el === ind;\r\n      console.log(repliesToHide.findIndex(testingFn));\r\n      setRepliesToHide((old) => {\r\n        let oldArr = [...old];\r\n        const index = repliesToHide.findIndex(testingFn);\r\n        oldArr.splice(index, 1);\r\n        console.log(oldArr);\r\n        if (oldArr.length) {\r\n          return oldArr;\r\n        }\r\n        return [];\r\n      });\r\n    } else {\r\n      console.log(\"check\");\r\n      setShowMore((old) => {\r\n        const oldArr = [...old];\r\n        oldArr.splice(0, 1);\r\n        console.log(oldArr);\r\n        if (oldArr.length > 0) {\r\n          return oldArr;\r\n        } else {\r\n          return [];\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const showMoreFn = (dataLength) => {\r\n    let numberOfShows = dataLength / 3;\r\n    let arr = [];\r\n    let val = 0;\r\n    if (numberOfShows > 1) {\r\n      if (numberOfShows % 1 === 0) {\r\n        numberOfShows--;\r\n      } else {\r\n        numberOfShows.toFixed();\r\n      }\r\n      for (let i = 0; i < numberOfShows; i++) {\r\n        val += 3;\r\n        arr.push(val);\r\n      }\r\n      setShowMore([...arr]);\r\n      console.log(arr);\r\n    }\r\n    // alert(numberOfShows);\r\n  };\r\n\r\n  // const sortCommentsByOrder = (comments) => {\r\n  //   let sortComments = [];\r\n  //   for (let i = 0; i < comments.length; i++) {\r\n  //     sortComments[i] = [];\r\n  //     sortComments[i][0] = comments[i].commentId.split(\"_\");\r\n  //     sortComments[i][1] = i;\r\n  //   }\r\n  //   let sortArr = [];\r\n  //   for (let i = 0; i < sortComments.length; i++) {\r\n  //     for (let j = 0; j < sortComments.length; j++) {\r\n  //       if (+sortComments[j][0][0] === i) {\r\n  //         sortArr[i] = sortComments[j];\r\n  //       }\r\n  //     }\r\n  //   }\r\n  //   let finalComments = [];\r\n  //   let incr = 0;\r\n  //   for (let i = sortArr.length - 1; i >= 0; i--) {\r\n  //     finalComments[incr] = { ...comments[sortArr[i][1]] };\r\n  //     incr++;\r\n  //   }\r\n  //   console.log(comments);\r\n  //   console.log(sortArr);\r\n  //   console.log(sortComments);\r\n  //   console.log(finalComments);\r\n  //   return finalComments;\r\n  // };\r\n\r\n  const handleReply = (ind) => {\r\n    setReplyIndex(ind);\r\n  };\r\n  const handleNavigateTitle = () => {\r\n    console.log(location.state.articleData);\r\n    // alert(location.state.articleData.linkPath);\r\n    // history.push(location.state.articleData.linkPath);\r\n  };\r\n\r\n  const checkForTopComments = (comments) => {\r\n    let storeTopCommentsIndx = [];\r\n    for (let i = 0; i < comments.length; i++) {\r\n      if (\r\n        comments[i].commentLikes &&\r\n        Object.keys(comments[i].commentLikes).length >= 5\r\n      ) {\r\n        if (\r\n          comments[i].commentDislikes &&\r\n          Object.keys(comments[i].commentLikes).length >=\r\n            Object.keys(comments[i].commentDislikes).length + 5\r\n        ) {\r\n          storeTopCommentsIndx.push([\r\n            i,\r\n            Object.keys(comments[i].commentLikes).length,\r\n          ]);\r\n        } else if (\r\n          !comments[i].commentDislikes &&\r\n          Object.keys(comments[i].commentLikes).length >= 5\r\n        ) {\r\n          storeTopCommentsIndx.push([\r\n            i,\r\n            Object.keys(comments[i].commentLikes).length,\r\n          ]);\r\n        }\r\n      }\r\n    }\r\n    console.log(storeTopCommentsIndx);\r\n    if (storeTopCommentsIndx.length > 0) {\r\n      // let pushFinal = [storeTopCommentsIndx[0]];\r\n      // let pushFinal2 = [];\r\n      pushFinal.current = [storeTopCommentsIndx[0]];\r\n      pushFinal2.current = [];\r\n      let spliceInd = 0;\r\n      const secondLoopArray = [...storeTopCommentsIndx];\r\n      for (let i = 0; i < storeTopCommentsIndx.length; i++) {\r\n        if (storeTopCommentsIndx.length >= 2) {\r\n          if (pushFinal.current[0][1] < storeTopCommentsIndx[i][1]) {\r\n            pushFinal.current = [storeTopCommentsIndx[i]];\r\n            spliceInd = i;\r\n          }\r\n          if (i === storeTopCommentsIndx.length - 1) {\r\n            secondLoopArray.splice(spliceInd, 1);\r\n            console.log(secondLoopArray);\r\n            if (secondLoopArray.length) {\r\n              for (let j = 0; j < secondLoopArray.length; j++) {\r\n                if (j === 0) {\r\n                  pushFinal2.current = [secondLoopArray[0]];\r\n                }\r\n                if (pushFinal2.current[0][1] < secondLoopArray[j][1]) {\r\n                  pushFinal2.current = [secondLoopArray[j]];\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      console.log(pushFinal.current);\r\n      console.log(pushFinal2.current);\r\n      let cpyCom = [...JSON.parse(JSON.stringify(comments))];\r\n      let firstTopCom = {\r\n        ...cpyCom.slice(pushFinal.current[0][0], pushFinal.current[0][0] + 1),\r\n      };\r\n      let secondTopCom = undefined;\r\n      cpyCom.splice(pushFinal.current[0][0], 1);\r\n      cpyCom.splice(0, 0, firstTopCom[0]);\r\n      if (pushFinal2.current.length) {\r\n        if (pushFinal2.current[0][0] > pushFinal.current[0][0]) {\r\n          secondTopCom = cpyCom.slice(\r\n            pushFinal2.current[0][0],\r\n            pushFinal2.current[0][0] + 1\r\n          );\r\n        } else {\r\n          secondTopCom = cpyCom.slice(\r\n            pushFinal2.current[0][0] + 1,\r\n            pushFinal2.current[0][0] + 2\r\n          );\r\n        }\r\n        console.log(secondTopCom);\r\n        cpyCom.splice(1, 0, secondTopCom[0]);\r\n        if (pushFinal2.current[0][0] > pushFinal.current[0][0]) {\r\n          cpyCom.splice(pushFinal2.current[0][0] + 1, 1);\r\n        } else {\r\n          cpyCom.splice(pushFinal2.current[0][0] + 2, 1);\r\n        }\r\n      }\r\n      console.log(cpyCom);\r\n      return cpyCom;\r\n      // let finalComArray =\r\n    } else {\r\n      return comments;\r\n    }\r\n  };\r\n\r\n  const handleReport = (commentData) => {\r\n    setReportComment(commentData);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {reportComment && (\r\n        <Overlay navZ={true}>\r\n          <ReportComment\r\n            closeModal={setReportComment}\r\n            reportData={reportComment}\r\n          />\r\n        </Overlay>\r\n      )}\r\n      <div id={s.commentPageContainer}>\r\n        <div id={s.commentPageContainerHeader}>\r\n          <div id={s.headerBundle}>\r\n            <h3\r\n              style={{\r\n                color:\r\n                  location.state &&\r\n                  location.state.articleData &&\r\n                  `${clrs[location.state.articleData.category.toLowerCase()]}`,\r\n              }}\r\n            >\r\n              {location.state && location.state.articleData.subTitle}\r\n            </h3>\r\n            <h1 onClick={handleNavigateTitle}>\r\n              <Link\r\n                to={\r\n                  location.state && {\r\n                    pathname: location.state.articleData.linkPath,\r\n                    state: {\r\n                      articleData: location.state.articleData,\r\n                    },\r\n                  }\r\n                }\r\n              >\r\n                {location.state && location.state.articleData.title}\r\n              </Link>\r\n            </h1>\r\n          </div>\r\n          <div id={s.headerShares}>\r\n            <i class={\"fas fa-share-alt\"}></i>{\" \"}\r\n            {location.state.articleData.shares.constructor === Object\r\n              ? Object.keys(location.state.articleData.shares).length\r\n              : 0}\r\n          </div>\r\n        </div>\r\n        <div id={s.commentPageContainerBody}>\r\n          <div id={s.commentSidebarLeft} ref={stickLeftSidebar}>\r\n            <div id={s.bundleDiv}>\r\n              <div id={s.postedData}>\r\n                <div>\r\n                  <i\r\n                    class=\"fas fa-user\"\r\n                    style={{\r\n                      backgroundColor: `rgb(209,213,219)`,\r\n                      color: \"#fff\",\r\n                      padding: \"1.2rem\",\r\n                      borderRadius: \".3rem\",\r\n                      fontSize: \"1.6rem\",\r\n                    }}\r\n                  ></i>\r\n                </div>\r\n                <div id={s.postedDataTwo}>\r\n                  <h3>\r\n                    {(location.state && location.state.articleData.author) ||\r\n                      \"R. D.\"}\r\n                  </h3>\r\n                  <p>\r\n                    {timeDifference(\r\n                      location.state && location.state.articleData.date\r\n                    )}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div id={s.commentsShare}>\r\n                <div id={s.comments}>\r\n                  <h2>{fullCommentsLengthRef.current}</h2>\r\n                  <p>komentara</p>\r\n                </div>\r\n                <div>\r\n                  <h2>\r\n                    {location.state.articleData.shares.constructor === Object\r\n                      ? Object.keys(location.state.articleData.shares).length\r\n                      : 0}\r\n                  </h2>\r\n                  <p>dijeljenja</p>\r\n                </div>\r\n              </div>\r\n              <div id={s.shareArticle}>\r\n                <ul>\r\n                  <li>\r\n                    <i class=\"fab fa-facebook\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"fab fa-twitter\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"far fa-envelope\"></i>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id={s.commentBodyContent}>\r\n            <div id={s.commentBodyHeader}>\r\n              <div id={s.commentBodyHeaderInfo}>\r\n                <h3>Komentari ({fullCommentsLengthRef.current})</h3>\r\n                <div id={s.povratakNaClanak}>\r\n                  <Link\r\n                    to={\r\n                      location.state && {\r\n                        pathname: location.state.articleData.linkPath,\r\n                        state: {\r\n                          articleData: location.state.articleData,\r\n                        },\r\n                      }\r\n                    }\r\n                  >\r\n                    <i class=\"far fa-arrow-alt-circle-left\"></i> Povratak na\r\n                    ƒçlanak\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n              <div id={s.commentBodyHeaderTypeSignIn}>\r\n                {!ctx.isLoggedIn ? (\r\n                  <Link to=\"/login\">\r\n                    <div id={s.prijavaKorisnika}>Prijava korisnika</div>\r\n                  </Link>\r\n                ) : (\r\n                  <CommentType\r\n                    path={\r\n                      location.state && {\r\n                        category: location.state.articleData.category,\r\n                        subCategory: location.state.articleData.subCategory,\r\n                        id: location.state.articleData.id,\r\n                      }\r\n                    }\r\n                    getComments={setGetComments}\r\n                  />\r\n                )}\r\n              </div>\r\n              <div id={s.commentBodyHeaderAlert}>\r\n                <span>NAPOMENA:</span> &nbsp;\r\n                <span>\r\n                  Komentarisanje ƒçlanaka na portalu Klix.ba dozvoljeno je samo\r\n                  registrovanim korisnicima. Molimo korisnike da se suzdr≈æe od\r\n                  vrijeƒëanja, psovanja i vulgarnog izra≈æavanja. Komentari\r\n                  odra≈æavaju stavove iskljuƒçivo njihovih autora, koji zbog\r\n                  govora mr≈ænje mogu biti i kriviƒçno gonjeni. Kao ƒçitatelj\r\n                  prihvatate moguƒánost da meƒëu komentarima mogu biti pronaƒëeni\r\n                  sadr≈æaji koji mogu biti u suprotnosti sa va≈°im vjerskim,\r\n                  moralnim i drugim naƒçelima i uvjerenjima. Svaki korisnik prije\r\n                  pisanja komentara mora se upoznati sa\r\n                </span>\r\n                &nbsp;\r\n                <Link\r\n                  to={{ pathname: \"/komentari\" }}\r\n                  target=\"_blank\"\r\n                  style={\r\n                    location.state && {\r\n                      color:\r\n                        location.state.articleData &&\r\n                        `${\r\n                          clrs[\r\n                            location.state.articleData.category.toLowerCase()\r\n                          ]\r\n                        }`,\r\n                    }\r\n                  }\r\n                >\r\n                  Pravilima i uslovima kori≈°tenja komentara.\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            <div id={s.commentBody}>\r\n              {safeToProceed &&\r\n                getComLength(comments) ===\r\n                  getComLength(location.state.articleData.comments) &&\r\n                comments.map((comment, i) => {\r\n                  if (i === replyIndex) {\r\n                    if (!comment.replies) {\r\n                      return (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          <CommentReply\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            getComments={setGetComments}\r\n                          />\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      );\r\n                    } else if (comment.replies) {\r\n                      return (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          <CommentReply\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            getComments={setGetComments}\r\n                          />\r\n                          {comment.replies.map((comRep, ind) => {\r\n                            return (\r\n                              <>\r\n                                {repliesToHide.length > 0 &&\r\n                                repliesToHide.find((el) => el === i) !==\r\n                                  undefined &&\r\n                                ind < 2 ? (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                ) : null}\r\n                                {((repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i)) ===\r\n                                  undefined ||\r\n                                  !repliesToHide.length) && (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                )}\r\n                                {repliesToHide.length > 0 ? (\r\n                                  repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i) !==\r\n                                    undefined &&\r\n                                  ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() =>\r\n                                        spliceRepliesHide(i, \"replies\")\r\n                                      }\r\n                                      showReply={comment.replies.length - 2}\r\n                                    />\r\n                                  ) : null\r\n                                ) : null}\r\n                              </>\r\n                            );\r\n                          })}\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      );\r\n                    }\r\n                  } else if (Array.isArray(replyIndex)) {\r\n                    return (\r\n                      ((showMore.length > 0 && i < showMore[0]) ||\r\n                        showMore.length === 0) && (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          {comment.replies &&\r\n                            comment.replies.map((comRep, ind) => {\r\n                              return (\r\n                                <React.Fragment key={uuid()}>\r\n                                  {repliesToHide.length > 0 &&\r\n                                    repliesToHide.find((el) => el === i) !==\r\n                                      undefined &&\r\n                                    ind < 2 && (\r\n                                      <>\r\n                                        <CommentItem\r\n                                          commentIndex={[i, ind]}\r\n                                          commentIndexDB={comRep.id}\r\n                                          comment={comRep.comment}\r\n                                          displayName={comRep.userName}\r\n                                          commentLikes={comRep.commentLikes}\r\n                                          commentDislikes={\r\n                                            comRep.commentDislikes\r\n                                          }\r\n                                          avatarColor={comRep.avatarColor}\r\n                                          negativeComment={\r\n                                            comRep.commentDislikes &&\r\n                                            Object.keys(comRep.commentDislikes)\r\n                                              .length >=\r\n                                              (comRep.commentLikes\r\n                                                ? Object.keys(\r\n                                                    comRep.commentLikes\r\n                                                  ).length + 5\r\n                                                : 5)\r\n                                          }\r\n                                          date={timeDifference(comRep.date)}\r\n                                          handleReply={handleReply}\r\n                                          handleReport={handleReport}\r\n                                        />\r\n                                        {replyIndex[1] === ind &&\r\n                                        replyIndex[0] === i ? (\r\n                                          <CommentReply\r\n                                            commentIndex={[i, ind]}\r\n                                            commentIndexDB={comRep.id}\r\n                                            getComments={setGetComments}\r\n                                          />\r\n                                        ) : null}\r\n                                      </>\r\n                                    )}\r\n                                  {((repliesToHide.length &&\r\n                                    repliesToHide.find((el) => el === i) ===\r\n                                      undefined) ||\r\n                                    !repliesToHide.length) && (\r\n                                    <>\r\n                                      <CommentItem\r\n                                        commentIndex={[i, ind]}\r\n                                        commentIndexDB={comRep.id}\r\n                                        comment={comRep.comment}\r\n                                        displayName={comRep.userName}\r\n                                        commentLikes={comRep.commentLikes}\r\n                                        commentDislikes={comRep.commentDislikes}\r\n                                        avatarColor={comRep.avatarColor}\r\n                                        negativeComment={\r\n                                          comRep.commentDislikes &&\r\n                                          Object.keys(comRep.commentDislikes)\r\n                                            .length >=\r\n                                            (comRep.commentLikes\r\n                                              ? Object.keys(comRep.commentLikes)\r\n                                                  .length + 5\r\n                                              : 5)\r\n                                        }\r\n                                        date={timeDifference(comRep.date)}\r\n                                        handleReply={handleReply}\r\n                                        handleReport={handleReport}\r\n                                      />\r\n                                      {replyIndex[1] === ind &&\r\n                                      replyIndex[0] === i ? (\r\n                                        <CommentReply\r\n                                          commentIndex={[i, ind]}\r\n                                          commentIndexDB={comRep.id}\r\n                                          getComments={setGetComments}\r\n                                        />\r\n                                      ) : null}\r\n                                    </>\r\n                                  )}\r\n                                  {repliesToHide.length > 0 ? (\r\n                                    repliesToHide.length &&\r\n                                    repliesToHide.find((el) => el === i) !==\r\n                                      undefined &&\r\n                                    ind === 1 ? (\r\n                                      <CommentShow\r\n                                        onClick={() =>\r\n                                          spliceRepliesHide(i, \"replies\")\r\n                                        }\r\n                                        showReply={comment.replies.length - 2}\r\n                                      />\r\n                                    ) : null\r\n                                  ) : null}\r\n                                </React.Fragment>\r\n                              );\r\n                            })}\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      )\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      ((showMore.length > 0 && i < showMore[0]) ||\r\n                        showMore.length === 0) &&\r\n                      (!comment.replies ? (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            key={uuid()}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      ) : (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          {comment.replies.map((comRep, ind) => {\r\n                            return (\r\n                              <React.Fragment key={uuid()}>\r\n                                {repliesToHide.length > 0 &&\r\n                                repliesToHide.find((el) => el === i) !==\r\n                                  undefined &&\r\n                                ind < 2 ? (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                ) : null}\r\n                                {(repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i)) ===\r\n                                  undefined || !repliesToHide.length ? (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                ) : null}\r\n                                {repliesToHide.length > 0 ? (\r\n                                  repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i) !==\r\n                                    undefined &&\r\n                                  ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() =>\r\n                                        spliceRepliesHide(i, \"replies\")\r\n                                      }\r\n                                      showReply={comment.replies.length - 2}\r\n                                    />\r\n                                  ) : null\r\n                                ) : null}\r\n                              </React.Fragment>\r\n                            );\r\n                          })}\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      ))\r\n                    );\r\n                  }\r\n                })}\r\n            </div>\r\n          </div>\r\n          <div id={s.commentSidebarRight} ref={stickRightSideBar}>\r\n            <Popular />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n    // <div className={s.postComment}>\r\n    //   <div className={s.postCommentBundle}>\r\n    //     <textarea\r\n    //       name=\"komentar\"\r\n    //       className={s.postCommentTextarea}\r\n    //       placeholder=\"upi≈°i komentar\"\r\n    //     ></textarea>\r\n    //     <button>\r\n    //       <span>\r\n    //         <i class=\"fas fa-pen\"></i> Objavi komentar\r\n    //       </span>\r\n    //     </button>\r\n    //   </div>\r\n    // </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport s from \"./HomeMainSub.module.css\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { getLen } from \"../Article/Popular\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { subcategories } from \"../AdminPanel/AddArticle\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { splitTitle } from \"./HomeMain\";\r\n\r\nconst getVisitShare = (mode, data) => {\r\n  const dbRef2 = db.ref(`dates/2022/3/7`);\r\n  return new Promise((resolve) => {\r\n    dbRef2.once(\"value\", (snap) => {\r\n      const promises2 = [];\r\n      let dataVisitPath = snap.val();\r\n      for (let key in dataVisitPath) {\r\n        promises2.push(\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${dataVisitPath[key].path}/${dataVisitPath[key].id}.json`\r\n          ).then((res) => res.json())\r\n        );\r\n      }\r\n      const promisedData2 = Promise.all(promises2);\r\n      promisedData2.then((data2) => {\r\n        data2.sort((a, b) => {\r\n          if (\r\n            (a[mode].constructor === Object ? Object.keys(a[mode]).length : 0) -\r\n              (b[mode].constructor === Object\r\n                ? Object.keys(b[mode]).length\r\n                : 0) >\r\n            0\r\n          ) {\r\n            return -1;\r\n          } else if (\r\n            (a[mode].constructor === Object ? Object.keys(a[mode]).length : 0) -\r\n              (b[mode].constructor === Object\r\n                ? Object.keys(b[mode]).length\r\n                : 0) <\r\n            0\r\n          ) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        data2.splice(15 - data.length);\r\n        data = data.concat(data2);\r\n        data.sort((a, b) => {\r\n          if (Object.keys(a[mode]).length - Object.keys(b[mode]).length > 0) {\r\n            return -1;\r\n          } else if (\r\n            Object.keys(a[mode]).length - Object.keys(b[mode]).length <\r\n            0\r\n          ) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        console.log(data);\r\n        return resolve(data);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nconst getPrevDateData = (data, route) => {\r\n  return new Promise(async (resolve) => {\r\n    console.log(data);\r\n    const dbRef2 = db.ref(`dates/2022/3/7`);\r\n    let dataVisit;\r\n    let dataShares;\r\n    const promises3 = [];\r\n    let listOfUnder15 = \"\";\r\n    if (data[1].length < 15) {\r\n      dataVisit = getVisitShare(\"visited\", data[1]);\r\n      promises3.push(dataVisit);\r\n      listOfUnder15 = \"visited\";\r\n    }\r\n    if (data[2].length < 15) {\r\n      dataShares = getVisitShare(\"shares\", data[2]);\r\n      promises3.push(dataShares);\r\n      listOfUnder15 = listOfUnder15.concat(\"shares\");\r\n    }\r\n\r\n    if (route === \"poƒçetna\" && data[0].length < 15) {\r\n      await dbRef2.once(\"value\", (snap) => {\r\n        const dataPaths2 = snap.val();\r\n        let promises1 = [];\r\n        const keys = Object.keys(dataPaths2).reverse();\r\n        keys.splice(15 - data[0].length);\r\n        console.log(keys);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          promises1.push(\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n                dataPaths2[keys[i]].path\r\n              }/${dataPaths2[keys[i]].id}.json`\r\n            ).then((res) => res.json())\r\n          );\r\n        }\r\n        promises3.unshift(...promises1);\r\n        console.log(promises3);\r\n      });\r\n    }\r\n\r\n    const promisedData2 = Promise.all(promises3);\r\n    promisedData2.then((data2) => {\r\n      console.log(data2);\r\n      let final = [];\r\n      if (\r\n        (listOfUnder15.includes(\"visited\") &&\r\n          !listOfUnder15.includes(\"shares\")) ||\r\n        (!listOfUnder15.includes(\"visited\") && listOfUnder15.includes(\"shares\"))\r\n      ) {\r\n        final.push(...data2.slice(data2.length - 1));\r\n        data2.splice(data2.length - 1);\r\n      } else if (\r\n        listOfUnder15.includes(\"visited\") &&\r\n        listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.push(...data2.slice(data2.length - 2, data.length - 1));\r\n        final.push(...data2.slice(data2.length - 1));\r\n        data2.splice(data2.length - 2);\r\n      }\r\n      console.log(data2);\r\n      if (data[0].length < 15) {\r\n        final.unshift([...data[0].concat(data2)]);\r\n      } else {\r\n        final.unshift(data[0]);\r\n      }\r\n      if (\r\n        !listOfUnder15.includes(\"visited\") &&\r\n        listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.splice(1, 0, data[1]);\r\n      } else if (\r\n        listOfUnder15.includes(\"visited\") &&\r\n        !listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.push(data[2]);\r\n      } else if (\r\n        !listOfUnder15.includes(\"visited\") &&\r\n        !listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.push(data[1]);\r\n        final.push(data[2]);\r\n      }\r\n      console.log(final);\r\n      return resolve(final);\r\n    });\r\n  });\r\n  //make below a func and reuse it for shares\r\n  // const dataVisit = await getVisitShare(\"visited\", data).then((data) => data);\r\n  // console.log(dataVisit);\r\n  // const dataShares = await getVisitShare(\"shares\", data).then((data) => data);\r\n  // console.log(dataShares);\r\n  // dataVisit.forEach((it) => console.log(Object.keys(it.visited).length));\r\n  // dataShares.forEach((it) => console.log(Object.keys(it.shares).length));\r\n};\r\n\r\nexport const getSidebarData = (route) => {\r\n  return new Promise(async (resolve) => {\r\n    console.log(route);\r\n    let finalData = [];\r\n    const dbRef = db.ref(`dates/2022/3/8`);\r\n    const promisesCat = [];\r\n    let xd1 = [];\r\n    console.log(subcategories[\"vijesti\"]);\r\n    if (route !== \"Poƒçetna\") {\r\n      for (let i = 0; i < subcategories[route.toLowerCase()].length; i++) {\r\n        ((incr) => {\r\n          const dbRef2 = db\r\n            .ref(\r\n              `articles/${route}/${subcategories[route.toLowerCase()][incr]}`\r\n            )\r\n            .orderByKey()\r\n            .limitToLast(15);\r\n\r\n          xd1.push(dbRef2.once(\"value\", (snap) => {}));\r\n        })(i);\r\n      }\r\n    }\r\n\r\n    // promisesCat.sort((a, b) => {\r\n    //   if (new Date(a.date) - new Date(b.date) > 0) {\r\n    //     return -1;\r\n    //   } else if (new Date(a.date) - new Date(b.date) < 0) {\r\n    //     return 1;\r\n    //   } else {\r\n    //     return 0;\r\n    //   }\r\n    // });\r\n    // console.log(promisesCat);\r\n\r\n    const dataPaths = dbRef.once(\"value\", (snap) => {});\r\n\r\n    console.log(dataPaths);\r\n    console.log(xd1);\r\n    let dataEdit = [];\r\n    const promises = [];\r\n    await dataPaths.then((data) => (dataEdit[0] = data.val()));\r\n    if (Object.keys(dataEdit[0]).length) {\r\n      for (let key in dataEdit[0]) {\r\n        promises.push(\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${dataEdit[0][key].path}/${dataEdit[0][key].id}.json`\r\n          ).then((res) => res.json())\r\n        );\r\n      }\r\n    }\r\n    if (route === \"Poƒçetna\") {\r\n      // const xy = Promise.all(dataPaths);\r\n      await dataPaths.then((data) => (dataEdit = data.val()));\r\n      dataEdit = await Promise.all(promises);\r\n      console.log(dataEdit);\r\n      // xy.then((data) => console.log(data));\r\n    } else {\r\n      const promisedData = await Promise.all([...promises, ...xd1]);\r\n      // dataEdit.push(promisedData[0].val());\r\n      dataEdit[0] = promisedData.slice(0, promises.length);\r\n      promisedData.splice(0, promises.length);\r\n      const acc = promisedData.reduce((acc, curr, i) => {\r\n        let data = [];\r\n        for (let key in curr.val()) {\r\n          data.push(curr.val()[key]);\r\n        }\r\n        return [...acc, ...data];\r\n      }, []);\r\n      dataEdit.push([...acc]);\r\n    }\r\n    dataEdit.reverse();\r\n    console.log(dataEdit);\r\n\r\n    let buildingFinalData = [];\r\n    if (route === \"Poƒçetna\") {\r\n      buildingFinalData.push(dataEdit);\r\n    } else if (route !== \"Poƒçetna\") {\r\n      dataEdit[0].sort((a, b) => {\r\n        if (new Date(a.date) - new Date(b.date) > 0) {\r\n          return -1;\r\n        } else if (new Date(a.date) - b.date < 0) {\r\n          return 1;\r\n        } else {\r\n          return 0;\r\n        }\r\n      });\r\n      if (dataEdit[0].length > 15) {\r\n        dataEdit[0].splice(15);\r\n      }\r\n      buildingFinalData.push(dataEdit[0]);\r\n      buildingFinalData.push(dataEdit[1]);\r\n      console.log(buildingFinalData);\r\n    }\r\n    console.log(buildingFinalData);\r\n    let dataJson = JSON.parse(\r\n      JSON.stringify(route === \"Poƒçetna\" ? dataEdit : dataEdit[1])\r\n    );\r\n    let visitedDataSort = [];\r\n    let sharedDataSort = [];\r\n    //remove art with share equal to zero\r\n    console.log(dataJson);\r\n    dataJson.forEach((item) => {\r\n      if (\r\n        item.visited &&\r\n        item.visited.constructor === Object &&\r\n        Object.keys(item.visited).length >= 10\r\n      ) {\r\n        visitedDataSort.push(item);\r\n      }\r\n      if (\r\n        item.shares.constructor === Object &&\r\n        Object.keys(item.shares).length >= 10\r\n      ) {\r\n        sharedDataSort.push(item);\r\n      }\r\n    });\r\n\r\n    visitedDataSort.sort((a, b) => {\r\n      if (Object.keys(a.visited).length - Object.keys(b.visited).length > 0) {\r\n        return -1;\r\n      } else if (\r\n        Object.keys(a.visited).length - Object.keys(b.visited).length <\r\n        0\r\n      ) {\r\n        return 1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n\r\n    sharedDataSort.sort((a, b) => {\r\n      if (\r\n        (a.shares.constructor === Object ? Object.keys(a.shares).length : 0) -\r\n          (b.shares.constructor === Object ? Object.keys(b.shares).length : 0) >\r\n        0\r\n      ) {\r\n        return -1;\r\n      } else if (\r\n        (a.shares.constructor === Object ? Object.keys(a.shares).length : 0) -\r\n          (b.shares.constructor === Object ? Object.keys(b.shares).length : 0) <\r\n        0\r\n      ) {\r\n        return 1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    if (route !== \"Poƒçetna\") {\r\n      buildingFinalData.pop();\r\n    }\r\n    buildingFinalData.push(visitedDataSort);\r\n    buildingFinalData.push(sharedDataSort);\r\n    console.log(buildingFinalData);\r\n    // buildingFinalData[0].splice(2);\r\n    if (buildingFinalData[0].length > 15) {\r\n      buildingFinalData[0].splice(15);\r\n    }\r\n    if (buildingFinalData[1].length > 15) {\r\n      buildingFinalData[1].splice(15);\r\n    }\r\n    if (buildingFinalData[2].length > 15) {\r\n      buildingFinalData[2].splice(15);\r\n    }\r\n    buildingFinalData[1].splice(2);\r\n    if (\r\n      buildingFinalData[0].length === 15 &&\r\n      buildingFinalData[1].length === 15 &&\r\n      buildingFinalData[2].length === 15\r\n    ) {\r\n      resolve(buildingFinalData);\r\n    } else {\r\n      const retData = await getPrevDateData(\r\n        buildingFinalData,\r\n        route === \"Poƒçetna\" ? \"Poƒçetna\" : \"other\"\r\n      ).then((data) => data);\r\n      console.log(retData);\r\n      resolve(retData);\r\n    }\r\n  });\r\n};\r\n\r\nconst HomeMainSub = ({ route }) => {\r\n  const [sideBarData, setSidebarData] = useState([\r\n    {\r\n      first: [],\r\n      second: [],\r\n      third: [],\r\n      current: \"first\",\r\n    },\r\n  ]);\r\n  useEffect(async () => {\r\n    let retData = getSidebarData(route);\r\n    retData = await retData.then((data) => data);\r\n    console.log(retData);\r\n    setSidebarData([\r\n      {\r\n        first: [...retData[0]],\r\n        second: [...retData[1]],\r\n        third: [...retData[2]],\r\n        current: \"first\",\r\n      },\r\n    ]);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (sideBarData[0].first.length) {\r\n      console.log(sideBarData);\r\n    }\r\n    console.log(sideBarData);\r\n  }, [sideBarData]);\r\n\r\n  const handleFilterSidebar = (e) => {\r\n    const { textContent } = e.target;\r\n    switch (textContent) {\r\n      case \"Najnovije\":\r\n        setSidebarData((old) => [{ ...old[0], current: \"first\" }]);\r\n        break;\r\n      case \"Najƒçitanije\":\r\n        setSidebarData((old) => [{ ...old[0], current: \"second\" }]);\r\n        break;\r\n      case \"Preporuke\":\r\n        setSidebarData((old) => [{ ...old[0], current: \"third\" }]);\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id={s.sideBar}>\r\n      <div id={s.sideBarControls}>\r\n        <div\r\n          className={`${s.sideBarControlItem}${\r\n            sideBarData[0].current === \"first\" ? \" \" + s.itemActive : \"\"\r\n          }`}\r\n          onClick={handleFilterSidebar}\r\n        >\r\n          Najnovije\r\n        </div>\r\n        <div\r\n          className={`${s.sideBarControlItem}${\r\n            sideBarData[0].current === \"second\" ? \" \" + s.itemActive : \"\"\r\n          }`}\r\n          onClick={handleFilterSidebar}\r\n        >\r\n          Najƒçitanije\r\n        </div>\r\n        <div\r\n          className={`${s.sideBarControlItem}${\r\n            sideBarData[0].current === \"third\" ? \" \" + s.itemActive : \"\"\r\n          }`}\r\n          onClick={handleFilterSidebar}\r\n        >\r\n          Preporuke\r\n        </div>\r\n      </div>\r\n      <div id={s.sideBarContent}>\r\n        {sideBarData[0][sideBarData[0].current].length\r\n          ? sideBarData[0][sideBarData[0].current].map((item) => (\r\n              <div className={s.sideBarItem} key={uuid()}>\r\n                <h3 style={{ color: `${clrs[item.category.toLowerCase()]}` }}>\r\n                  {item.subTitle}\r\n                </h3>\r\n                <p>\r\n                  <Link\r\n                    to={{\r\n                      pathname: encodeURI(\r\n                        `/${item.category}/${item.subCategory}/${splitTitle(\r\n                          item.title\r\n                        )}/${item.id}`\r\n                      ),\r\n                      state: { articleData: item },\r\n                    }}\r\n                  >\r\n                    {item.title}\r\n                  </Link>\r\n                </p>\r\n                <div className={s.sideBarItemBundle}>\r\n                  <span>{timeDifference(item.date)}</span>\r\n                  <div className={s.sideBarItemBundleRight}>\r\n                    <span>\r\n                      <i class=\"fas fa-comments\"></i>\r\n                      {getLen(item)}\r\n                    </span>\r\n                    <span>\r\n                      <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                      {item.shares.constructor === Object\r\n                        ? Object.keys(item.shares).length\r\n                        : 0}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomeMainSub;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport s from \"./HomeMain.module.css\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { articleColors } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getComLength } from \"../comment/Comment\";\r\nimport HomeMainSub from \"./HomeMainSub\";\r\n\r\nexport const splitTitle = (title) => {\r\n  const titleSplit = title.split(\" \");\r\n  let titleSplit2 = [];\r\n  let titleSplit3;\r\n  console.log(titleSplit);\r\n  titleSplit.forEach((split) => {\r\n    titleSplit2.push(split.toLowerCase());\r\n  });\r\n  titleSplit3 = titleSplit2.join(\"-\");\r\n  titleSplit3 = titleSplit3.split(\",\").join(\"\").split(\" \").join(\"-\");\r\n  console.log(titleSplit2);\r\n  return titleSplit3;\r\n};\r\n\r\nconst HomeMain = ({ route }) => {\r\n  const [articlesMain, setArticlesMain] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const dbRef = db.ref(`viewContent/Glavni sadr≈æaj/${route}`);\r\n    dbRef.get().then((snapshot) => {\r\n      if (snapshot.exists()) {\r\n        const data = snapshot.val();\r\n        console.log(data);\r\n        const articlePaths = [];\r\n        for (let key in data) {\r\n          data[key].forEach((item) => {\r\n            articlePaths.push(`${item[1]}/-${item[0]}`);\r\n          });\r\n        }\r\n        console.log(articlePaths);\r\n        const placeHolderArray = [];\r\n        const promises = [];\r\n        for (let i = 0; i < articlePaths.length; i++) {\r\n          promises.push(\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${articlePaths[i]}.json`\r\n            ).then((res) => res.json())\r\n          );\r\n        }\r\n        const promisedData = Promise.all(promises);\r\n        promisedData.then((data) => {\r\n          console.log(data);\r\n          for (let i = 0; i < data.length; i++) {\r\n            placeHolderArray.push(JSON.parse(JSON.stringify(data[i])));\r\n            for (let key in articleColors) {\r\n              if (\r\n                key === data[i].category.toLowerCase() &&\r\n                placeHolderArray[i]\r\n              ) {\r\n                placeHolderArray[i].subTitleClr = articleColors[key];\r\n                const titleSplit = splitTitle(data[i].title);\r\n                placeHolderArray[\r\n                  i\r\n                ].linkPath = `/${data[i].category}/${data[i].subCategory}/${titleSplit}/${data[i].id}`;\r\n              }\r\n            }\r\n            if (placeHolderArray[i]) {\r\n              placeHolderArray[i].timeDiff = timeDifference(data[i].date);\r\n              if (\r\n                placeHolderArray[i].comments &&\r\n                placeHolderArray[i].comments.constructor === Object\r\n              ) {\r\n                const comArr = [];\r\n                let replies = [];\r\n                for (let key in placeHolderArray[i].comments) {\r\n                  if (placeHolderArray[i].comments[key].replies) {\r\n                    for (let keyRep in placeHolderArray[i].comments[key]\r\n                      .replies) {\r\n                      replies.push(\r\n                        placeHolderArray[i].comments[key].replies[keyRep]\r\n                      );\r\n                    }\r\n                    comArr.push(placeHolderArray[i].comments[key]);\r\n                    comArr[comArr.length - 1].replies = [...replies];\r\n                    replies = [];\r\n                  } else {\r\n                    comArr.push(placeHolderArray[i].comments[key]);\r\n                  }\r\n                }\r\n                placeHolderArray[i].comments = [...comArr];\r\n                console.log(comArr);\r\n              }\r\n            }\r\n            console.log(placeHolderArray[i]);\r\n            if (i === articlePaths.length - 1) {\r\n              console.log(placeHolderArray);\r\n              setArticlesMain([...placeHolderArray]);\r\n            }\r\n          }\r\n        });\r\n        // fetch(\r\n        //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${articlePaths[i]}.json`\r\n        // )\r\n        //   .then((response) => response.json())\r\n        //   .then((data) => {\r\n        //     console.log(data);\r\n        //     placeHolderArray.push(JSON.parse(JSON.stringify(data)));\r\n        //     const objEntries = Object.entries(articleColors);\r\n        //     // for (let j = 0; j < objEntries.length; j++) {\r\n        //     //   if (\r\n        //     //     objEntries[j][0] === data.category.toLowerCase() &&\r\n        //     //     placeHolderArray[i]\r\n        //     //   ) {\r\n        //     //     placeHolderArray[i].subTitleClr = objEntries[j][1];\r\n        //     //     const titleSplit = data.title.split(\" \");\r\n        //     //     let titleSplit2 = [];\r\n        //     //     let titleSplit3;\r\n        //     //     console.log(titleSplit);\r\n        //     //     for (let k = 0; k < titleSplit.length; k++) {\r\n        //     //       titleSplit2.push(titleSplit[k].toLowerCase);\r\n        //     //     }\r\n        //     //     titleSplit3 = titleSplit2.join(\"-\");\r\n        //     //     titleSplit3 = titleSplit3\r\n        //     //       .split(\",\")\r\n        //     //       .join(\"\")\r\n        //     //       .split(\" \")\r\n        //     //       .join(\"-\");\r\n        //     //     console.log(titleSplit2);\r\n        //     //     placeHolderArray[\r\n        //     //       i\r\n        //     //     ].linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n        //     //   }\r\n        //     // }\r\n        //     // for (let key in articleColors) {\r\n        //     //   if (\r\n        //     //     key === data.category.toLowerCase() &&\r\n        //     //     placeHolderArray[i]\r\n        //     //   ) {\r\n        //     //     placeHolderArray[i].subTitleClr = articleColors[key];\r\n        //     //     const titleSplit = data.title.split(\" \");\r\n        //     //     let titleSplit2 = [];\r\n        //     //     let titleSplit3;\r\n        //     //     console.log(titleSplit);\r\n        //     //     titleSplit.forEach((split) => {\r\n        //     //       titleSplit2.push(split.toLowerCase());\r\n        //     //     });\r\n        //     //     titleSplit3 = titleSplit2.join(\"-\");\r\n        //     //     titleSplit3 = titleSplit3\r\n        //     //       .split(\",\")\r\n        //     //       .join(\"\")\r\n        //     //       .split(\" \")\r\n        //     //       .join(\"-\");\r\n        //     //     console.log(titleSplit2);\r\n        //     //     placeHolderArray[\r\n        //     //       i\r\n        //     //     ].linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n        //     //   }\r\n        //     // }\r\n        //     // if (placeHolderArray[i]) {\r\n        //     //   placeHolderArray[i].timeDiff = timeDifference(data.date);\r\n        //     //   // if (\r\n        //     //   //   placeHolderArray[i].comments.length === 1 &&\r\n        //     //   //   placeHolderArray[i].comments[0] === ''\r\n        //     //   // ) {\r\n        //     //   //   placeHolderArray[i].comments[0] = 'dasdsa';\r\n        //     //   // }\r\n        //     // }\r\n        //     console.log(placeHolderArray[i]);\r\n        //     if (\r\n        //       i === articlePaths.length - 1 &&\r\n        //       placeHolderArray.length === articlePaths.length\r\n        //     ) {\r\n        //       console.log(placeHolderArray);\r\n        //       setArticlesMain([...placeHolderArray]);\r\n        //     }\r\n        //   });\r\n        // }\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(articlesMain);\r\n  }, [articlesMain]);\r\n\r\n  return (\r\n    <div id={s.homeMain}>\r\n      <div id={s.main}>\r\n        {articlesMain.length > 1 &&\r\n          articlesMain.map((article, i) => {\r\n            if (i !== 1) {\r\n              return (\r\n                <div className={s.mainBox} key={uuid()}>\r\n                  <div className={s.mainBoxImg}>\r\n                    <Link\r\n                      to={{\r\n                        pathname: encodeURI(article.linkPath), //encodeuri problem with % char\r\n                        state: { articleData: article },\r\n                      }}\r\n                    >\r\n                      <img src={article.imageText[0][0]} alt=\"\" />\r\n                      {article.images.length > 1 && (\r\n                        <i class=\"far fa-images\"></i>\r\n                      )}\r\n                    </Link>\r\n                  </div>\r\n                  <div className={s.mainBoxHeader}>\r\n                    <h3 style={{ color: article.subTitleClr }}>\r\n                      {article.subTitle}\r\n                    </h3>\r\n                    <h3>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(article.linkPath),\r\n                          state: { articleData: article },\r\n                        }}\r\n                      >\r\n                        {article.title}\r\n                      </Link>\r\n                    </h3>\r\n                  </div>\r\n                  <div className={s.mainBoxFooter}>\r\n                    <span>{article.timeDiff}</span>\r\n                    <div className={s.mainBoxFooterBundle}>\r\n                      <span>\r\n                        <i class=\"fas fa-comments\"></i>\r\n                        {article.comments ? getComLength(article.comments) : 0}\r\n                      </span>\r\n                      <span>\r\n                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                        {article.shares.length === 1 && article.shares[0] === \"\"\r\n                          ? 0\r\n                          : Object.keys(article.shares).length}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            } else {\r\n              return (\r\n                <div className={s.mainBoxBig} key={uuid()}>\r\n                  <div className={s.mainBoxImg}>\r\n                    <Link\r\n                      to={{\r\n                        pathname: encodeURI(article.linkPath),\r\n                        state: { articleData: article },\r\n                      }}\r\n                    >\r\n                      <img src={article.imageText[0][0]} alt=\"\" />\r\n                      {article.images.length > 1 && (\r\n                        <i class=\"far fa-images\"></i>\r\n                      )}\r\n                    </Link>\r\n                  </div>\r\n                  <div className={s.mainBoxHeader}>\r\n                    <h3>{article.subTitle}</h3>\r\n                    <h3>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(article.linkPath),\r\n                          state: { articleData: article },\r\n                        }}\r\n                      >\r\n                        {article.title}\r\n                      </Link>\r\n                    </h3>\r\n                  </div>\r\n                  <div className={s.mainBoxFooter}>\r\n                    <span>{article.timeDiff}</span>\r\n                    <div className={s.mainBoxFooterBundle}>\r\n                      <span>\r\n                        <i class=\"fas fa-comments\"></i>\r\n                        {article.comments ? getComLength(article.comments) : 0}\r\n                      </span>\r\n                      <span>\r\n                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                        {article.shares.length === 1 && article.shares[0] === \"\"\r\n                          ? 0\r\n                          : Object.keys(article.shares).length}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n          })}\r\n      </div>\r\n      <HomeMainSub route={route} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomeMain;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport { subcategories } from \"../AdminPanel/AddArticle\";\r\nimport {\r\n  articleColors,\r\n  timeDifference,\r\n} from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { getComLengthIfObject } from \"../comment/Comment\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport s from \"./HomeSub.module.css\";\r\n\r\nconst HomeSub = ({ route }) => {\r\n  const [articles, setArticles] = useState([]);\r\n  const [promos, setPromos] = useState([]);\r\n  useEffect(() => {\r\n    if (route === \"Poƒçetna\") {\r\n      const dbRefPromo = db.ref(\"articles/Promo\");\r\n      dbRefPromo.once(\"value\", (snap) => {\r\n        console.log(snap.val());\r\n        const data = snap.val();\r\n        let build = [];\r\n        for (let key in data) {\r\n          build = build.concat(Object.values(data[key]).reverse().slice(0, 20));\r\n        }\r\n        build.sort((a, b) => {\r\n          if (new Date(a.date) - new Date(b.date) > 0) {\r\n            return -1;\r\n          } else if (new Date(a.date) - new Date(b.date) < 0) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        build.splice(20);\r\n        setPromos(build);\r\n        console.log(build);\r\n      });\r\n    }\r\n    fetch(\r\n      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/viewContent/Sporedni sadr≈æaj/${route}.json`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        let newArr = [];\r\n        let newObj = {};\r\n        for (let key in data) {\r\n          if (route === \"Magazin\") {\r\n            if (key === \"Film\") {\r\n              newObj[\"Film/TV\"] = Object.values(data[key][\"TV\"])[0];\r\n            } else {\r\n              newObj[key] = Object.values(data[key])[0];\r\n            }\r\n          } else {\r\n            newObj[key] = Object.values(data[key])[0];\r\n          }\r\n        }\r\n        newArr.push({ ...newObj });\r\n        console.log(newArr);\r\n        const promises = [];\r\n        for (let key in newArr[0]) {\r\n          newArr[0][key].forEach((item) => {\r\n            promises.push(\r\n              fetch(\r\n                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${item[1]}/-${item[0]}.json`\r\n              ).then((res) => res.json())\r\n            );\r\n          });\r\n        }\r\n        const promised = Promise.all(promises);\r\n        promised.then((data) => {\r\n          console.log(data);\r\n          const final = [];\r\n          const fin2 = [];\r\n          let num = 0;\r\n          for (let key in newArr[0]) {\r\n            final.push({\r\n              category: key,\r\n              data: data.slice(num, num + newArr[0][key].length),\r\n            });\r\n            num = num + newArr[0][key].length;\r\n          }\r\n          subcategories[route.toLowerCase()].forEach((sub) => {\r\n            final.forEach((sub2) => {\r\n              if (sub2.category === sub) {\r\n                fin2.push(sub2);\r\n              }\r\n            });\r\n          });\r\n          console.log(fin2);\r\n          setArticles(fin2);\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(articles);\r\n  }, [articles]);\r\n\r\n  return (\r\n    <>\r\n      {articles.length\r\n        ? articles.map((art) => (\r\n            <div id={s.sub} key={uuid()}>\r\n              <div id={s.subBodyHeader}>\r\n                <span\r\n                  style={{\r\n                    backgroundColor: `${\r\n                      clrs[\r\n                        route !== \"Poƒçetna\"\r\n                          ? route.toLowerCase()\r\n                          : art.category.toLowerCase()\r\n                      ]\r\n                    }`,\r\n                  }}\r\n                ></span>\r\n                <h3>{art.category}</h3>\r\n              </div>\r\n              <div\r\n                id={s.subBody}\r\n                style={\r\n                  art.data.length === 4 ? { gridTemplateColumns: \"1fr\" } : null\r\n                }\r\n              >\r\n                <div id={s.subBodyLeft}>\r\n                  {art.data.map((artItem, i) => {\r\n                    if (i < 4) {\r\n                      return (\r\n                        <div className={s.subBodyItem} key={uuid()}>\r\n                          <div\r\n                            className={`${s.itemImg} ${\r\n                              art.data.length === 4 ? s.itemImgFour : null\r\n                            }`}\r\n                          >\r\n                            <Link\r\n                              to={{\r\n                                pathname: encodeURI(\r\n                                  `/${artItem.category}/${\r\n                                    artItem.subCategory\r\n                                  }/${splitTitle(artItem.title)}/${artItem.id}`\r\n                                ),\r\n                                state: { articleData: artItem },\r\n                              }}\r\n                            >\r\n                              <img src={artItem.imageText[0][0]} />\r\n                              {artItem.images.length > 1 && (\r\n                                <i class=\"far fa-images\"></i>\r\n                              )}\r\n                            </Link>\r\n                          </div>\r\n                          <div className={s.itemText}>\r\n                            <h3\r\n                              style={{\r\n                                color:\r\n                                  articleColors[\r\n                                    route !== \"Poƒçetna\"\r\n                                      ? route.toLowerCase()\r\n                                      : art.category.toLowerCase()\r\n                                  ],\r\n                              }}\r\n                            >\r\n                              {artItem.subTitle}\r\n                            </h3>\r\n                            <h3>\r\n                              <Link\r\n                                to={{\r\n                                  pathname: encodeURI(\r\n                                    `/${artItem.category}/${\r\n                                      artItem.subCategory\r\n                                    }/${splitTitle(artItem.title)}/${\r\n                                      artItem.id\r\n                                    }`\r\n                                  ),\r\n                                  state: { articleData: artItem },\r\n                                }}\r\n                              >\r\n                                {artItem.title}\r\n                              </Link>\r\n                            </h3>\r\n                          </div>\r\n                          <div className={s.itemBundle}>\r\n                            <span>{timeDifference(artItem.date)}</span>\r\n                            <div className={s.itemBundleR}>\r\n                              <span>\r\n                                <i class=\"fas fa-comments\"></i>\r\n                                {artItem.comments\r\n                                  ? getComLengthIfObject(artItem.comments)\r\n                                  : 0}\r\n                              </span>\r\n                              <span>\r\n                                <i class=\"fas fa-share-alt\"></i>\r\n                                {artItem.shares.constructor === Object\r\n                                  ? Object.keys(artItem.shares).length\r\n                                  : 0}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    }\r\n                  })}\r\n                </div>\r\n                {art.data.length > 4 ? (\r\n                  <div className={s.subBodyItemsBundle}>\r\n                    {art.data.map((artItem, i) => {\r\n                      if (i >= 4) {\r\n                        return (\r\n                          <div className={s.subBodyBundleItem} key={uuid()}>\r\n                            <div className={s.itemText}>\r\n                              <h3\r\n                                style={{\r\n                                  color:\r\n                                    articleColors[art.category.toLowerCase()],\r\n                                }}\r\n                              >\r\n                                {artItem.subTitle}\r\n                              </h3>\r\n                              <h3>\r\n                                <Link\r\n                                  to={{\r\n                                    pathname: encodeURI(\r\n                                      `/${artItem.category}/${\r\n                                        artItem.subCategory\r\n                                      }/${splitTitle(artItem.title)}/${\r\n                                        artItem.id\r\n                                      }`\r\n                                    ),\r\n                                    state: { articleData: artItem },\r\n                                  }}\r\n                                >\r\n                                  {artItem.title}\r\n                                </Link>\r\n                              </h3>\r\n                            </div>\r\n                            <div className={s.itemBundle}>\r\n                              <span>{timeDifference(artItem.date)}</span>\r\n                              <div className={s.itemBundleRight}>\r\n                                <span>\r\n                                  <i class=\"fas fa-comments\"></i>\r\n                                  {artItem.comments\r\n                                    ? getComLengthIfObject(artItem.comments)\r\n                                    : 0}\r\n                                </span>\r\n                                <span>\r\n                                  <i class=\"fas fa-share-alt\"></i>\r\n                                  {artItem.shares.constructor === Object\r\n                                    ? Object.keys(artItem.shares).length\r\n                                    : 0}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      }\r\n                    })}\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          ))\r\n        : null}\r\n      {promos.length ? (\r\n        <div id={s.promoCnt}>\r\n          <div id={s.promoHeader}>\r\n            <span></span>\r\n            <h3>Promo</h3>\r\n          </div>\r\n          <div id={s.promoBody}>\r\n            {promos.map((promo, i) => {\r\n              return (\r\n                <div className={s.subBodyItem} key={uuid()}>\r\n                  {i < 4 ? (\r\n                    <div className={`${s.itemImg} ${s.itemImgFour}`}>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(\r\n                            `/${promo.category}/${\r\n                              promo.subCategory\r\n                            }/${splitTitle(promo.title)}/${promo.id}`\r\n                          ),\r\n                          state: { articleData: promo },\r\n                        }}\r\n                      >\r\n                        <img src={promo.imageText[0][0]} />\r\n                        {promo.images.length > 1 && (\r\n                          <i class=\"far fa-images\"></i>\r\n                        )}\r\n                      </Link>\r\n                    </div>\r\n                  ) : null}\r\n                  <div className={s.itemText}>\r\n                    <h3\r\n                      style={{\r\n                        color: articleColors[promo.category.toLowerCase()],\r\n                      }}\r\n                    >\r\n                      {promo.subTitle}\r\n                    </h3>\r\n                    <h3>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(\r\n                            `/${promo.category}/${\r\n                              promo.subCategory\r\n                            }/${splitTitle(promo.title)}/${promo.id}`\r\n                          ),\r\n                          state: { articleData: promo },\r\n                        }}\r\n                      >\r\n                        {promo.title}\r\n                      </Link>\r\n                    </h3>\r\n                  </div>\r\n                  <div className={s.itemBundle}>\r\n                    <span>{timeDifference(promo.date)}</span>\r\n                    <div className={s.itemBundleR}>\r\n                      <span>\r\n                        <i class=\"fas fa-comments\"></i>\r\n                        {promo.comments\r\n                          ? getComLengthIfObject(promo.comments)\r\n                          : 0}\r\n                      </span>\r\n                      <span>\r\n                        <i class=\"fas fa-share-alt\"></i>\r\n                        {promo.shares.constructor === Object\r\n                          ? Object.keys(promo.shares).length\r\n                          : 0}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomeSub;\r\n","import React, { useEffect } from \"react\";\r\nimport HomeMain from \"../components/HomeMain/HomeMain\";\r\nimport HomeSub from \"../components/HomeSub/HomeSub\";\r\nimport { v1 as uuid } from \"uuid\";\r\n\r\nconst Home = ({ route }) => {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  });\r\n  return (\r\n    <div key={uuid()}>\r\n      <HomeMain route={route} />\r\n      <HomeSub route={route} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport s from \"./UserComment.module.css\";\r\n\r\nexport const reload = () => {\r\n  window.location.reload();\r\n};\r\n\r\nconst UserComment = (props) => {\r\n  useEffect(() => {\r\n    // console.log(props.commentData[Object.keys(props.commentData)].commentId);\r\n    console.log(props);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={s.commentContainer}>\r\n      <div className={s.commentHeader}>\r\n        <div className={s.commentHeaderFirst}>\r\n          <i\r\n            class=\"fas fa-user\"\r\n            style={{\r\n              backgroundColor: `#${props.commentData.avatarColor}`,\r\n              color: \"#fff\",\r\n              padding: \"1.5rem\",\r\n              borderRadius: \".3rem\",\r\n            }}\r\n          ></i>\r\n        </div>\r\n        <div className={s.commentHeaderSecond}>\r\n          {/* <h4>gooUser1621584554</h4> */}\r\n          {/* <h4>{props.commentData[Object.keys(props.commentData)].commentId}</h4> */}\r\n          <h4 onClick={reload}>{props.commentData.userName}</h4>\r\n          <p>\r\n            <Link\r\n              to={{\r\n                pathname: `/komentar/${props.commentData.commentId}`,\r\n                state: {\r\n                  articleLink: props.commentData.articlePath,\r\n                  commentId: props.commentData.commentId,\r\n                  parentCommentId: props.commentData.parentCommentId,\r\n                },\r\n                search: `?${JSON.stringify({\r\n                  articleLink: props.commentData.articlePath,\r\n                  commentId: props.commentData.commentId,\r\n                  parentCommentId: props.commentData.parentCommentId,\r\n                })}`,\r\n              }}\r\n            >{`prije ${timeDifference(props.commentData.date)}`}</Link>\r\n          </p>\r\n          {/* <p>{`prije ${timeDifference(props.commentData.date)}`}</p> */}\r\n        </div>\r\n      </div>\r\n      <div className={s.commentBody}>\r\n        <p>{props.commentData.comment}</p>\r\n      </div>\r\n      <div className={s.commentFooter}>\r\n        <div className={s.commentFooterF}>\r\n          <span className={s.like}>\r\n            <i class=\"fas fa-long-arrow-alt-up\"></i>{\" \"}\r\n            {props.commentData.commentLikes\r\n              ? Object.keys(props.commentData.commentLikes).length\r\n              : 0}\r\n          </span>\r\n          <span className={s.dislike}>\r\n            <i class=\"fas fa-long-arrow-alt-down\"></i>{\" \"}\r\n            {props.commentData.commentDislikes\r\n              ? Object.keys(props.commentData.commentDislikes).length\r\n              : 0}\r\n          </span>\r\n        </div>\r\n        <div>\r\n          <span\r\n            className={s.report}\r\n            onClick={() =>\r\n              props.handleReport({\r\n                commentId: props.commentData.commentId,\r\n                user: props.commentData.userName,\r\n                comment: props.commentData.comment,\r\n                search: `?${JSON.stringify({\r\n                  comLink: `${props.commentData.articlePath}/comments/${\r\n                    props.commentData.parentCommentId\r\n                      ? props.commentData.parentCommentId\r\n                      : props.commentData.commentId\r\n                  }${\r\n                    props.commentData.parentCommentId\r\n                      ? \"/replies/\" + props.commentData.commentId\r\n                      : \"\"\r\n                  }`,\r\n                  commentId: props.commentData.commentId,\r\n                  parentCommentId: props.commentData.parentCommentId\r\n                    ? props.commentData.parentCommentId\r\n                    : undefined,\r\n                })}`,\r\n              })\r\n            }\r\n          >\r\n            <i class=\"far fa-flag\"></i> <p>Prijavi</p>\r\n          </span>\r\n          <span className={s.reply}>\r\n            <i class=\"fas fa-pen\"></i>\r\n            <p>Odgovori</p>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserComment;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoginContext from \"../../context\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport CommentShow from \"../comment/CommentShow\";\r\nimport UserComment from \"../UserComment/UserComment\";\r\nimport s from \"./UserInfo.module.css\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport ReportComment from \"../comment/reportComment/ReportComment\";\r\n\r\nconst UserConfig = () => {\r\n  const [uData, setUData] = useState({});\r\n  const ctx = useContext(LoginContext);\r\n  const [showMore, setShowMore] = useState(false);\r\n  const [fetching, setFetching] = useState(true);\r\n  const [reportComment, setReportComment] = useState(false);\r\n  const { user } = ctx;\r\n  const logoutHandler = () => {\r\n    ctx.logout();\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (fetching) {\r\n      getData();\r\n    }\r\n  }, [fetching]);\r\n\r\n  useEffect(() => {\r\n    console.log(Object.assign({}, uData.comments));\r\n    if (uData.comments && fetching) {\r\n      console.log(uData.comments);\r\n      const promises = [];\r\n      const spliceArray = [];\r\n      const contentArray = {};\r\n      const currentLength =\r\n        Object.keys(Object.assign({}, uData.comments)).length - 1;\r\n      console.log(currentLength);\r\n      for (let key in uData.comments) {\r\n        const { articlePath } = Object.values(uData.comments[key])[0];\r\n        const { commentId } = Object.values(uData.comments[key])[0];\r\n        const { parentCommentId } = Object.values(uData.comments[key])[0];\r\n        if (articlePath && commentId) {\r\n          spliceArray.push(key);\r\n          contentArray[key] = Object.values(uData.comments[key])[0];\r\n          promises.push(\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${articlePath}/comments/${\r\n                parentCommentId ? \"/\" + parentCommentId : commentId\r\n              }${parentCommentId ? \"/replies/\" + commentId : \"\"}.json`\r\n            ).then((res) => res.json())\r\n          );\r\n        }\r\n      }\r\n      const promisedData = Promise.all(promises);\r\n      promisedData.then((data) => {\r\n        console.log(data);\r\n        console.log(spliceArray);\r\n        console.log(contentArray);\r\n        setFetching(false); //it must be above setData because if we put it below that then once setdata finishes the useeffect won't wait for setfetching to turn to false so it will count as true when the useeffect reruns\r\n        setUData((old) => {\r\n          let oldCpy = { ...old };\r\n          const range = [spliceArray[0], spliceArray[spliceArray.length - 1]];\r\n          console.log(range);\r\n          console.log(uData.comLength - 1 - currentLength - 2);\r\n          console.log(uData.comLength - 1 - currentLength);\r\n          let incr = 0;\r\n          for (let i = +range[0]; i <= +range[1]; i++) {\r\n            oldCpy.comments[i] = { ...data[incr] };\r\n            oldCpy.comments[i] = { ...oldCpy.comments[i], ...contentArray[i] };\r\n            incr++;\r\n          }\r\n          console.log(oldCpy.comments);\r\n          console.log(oldCpy);\r\n          return oldCpy;\r\n        });\r\n        if (uData.comLength - 1 - currentLength - 3 > 0) {\r\n          setShowMore(true);\r\n        } else {\r\n          if (uData.comLength - 1 - currentLength > 0) {\r\n            setShowMore(true);\r\n          } else {\r\n            setShowMore(false);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, [uData]);\r\n\r\n  const getData = () => {\r\n    const userObj = JSON.parse(localStorage.getItem(\"userObj\"));\r\n    if (userObj && !Object.keys(uData).length) {\r\n      setUData({ ...userObj });\r\n    }\r\n    const dbRef = db.ref(\"users\").child(`${userObj.uId}`).child(\"comments\");\r\n    dbRef.child(\"comLength\").once(\"value\", (snap) => {\r\n      const dataLength = snap.val();\r\n      const currentLength = uData.comments ? uData.comments.length - 1 : 0;\r\n      let lessThanZero = false;\r\n      if (dataLength - 1 - currentLength - 3 < 0) {\r\n        lessThanZero = true;\r\n      }\r\n      dbRef\r\n        .orderByKey()\r\n        .startAt(\r\n          `${\r\n            lessThanZero\r\n              ? 0\r\n              : currentLength\r\n              ? dataLength - 1 - currentLength - 3 // -10 so when we add + 9 we dont get the latest fetched item in the ui as the last item here, so we would only fetch 9 new ones and the last one would be a comment that is already showing\r\n              : dataLength - 1 - 2\r\n          }`\r\n        )\r\n        .endAt(\r\n          `${\r\n            currentLength ? dataLength - 1 - currentLength - 1 : dataLength - 1\r\n          }`\r\n        )\r\n        .once(\"value\", (snap) => {\r\n          console.log(snap.val());\r\n          const data = snap.val();\r\n          if (data) {\r\n            const newArr =\r\n              data.constructor === Array\r\n                ? data.filter((n) => n !== undefined && n !== null).reverse()\r\n                : Object.values(data).reverse(); // remove empty fields\r\n            console.log(newArr);\r\n            setUData((old) => {\r\n              let oldCpy = { ...JSON.parse(JSON.stringify(old)) };\r\n              if (oldCpy.comments) {\r\n                let cpy = [...oldCpy.comments];\r\n                oldCpy.comments = [...cpy, ...newArr];\r\n              } else {\r\n                oldCpy.comments = [...newArr];\r\n              }\r\n              if (!oldCpy.comLength) {\r\n                oldCpy.comLength = dataLength;\r\n              }\r\n              console.log(oldCpy);\r\n              return oldCpy;\r\n            });\r\n            // if (dataLength - 1 - currentLength - 3 > 0) {\r\n            //   setShowMore(true);\r\n            // } else {\r\n            //   setShowMore(false);\r\n            // }\r\n            // setFetching(false);\r\n          }\r\n        });\r\n    });\r\n  };\r\n\r\n  const showMoreFn = () => {\r\n    setFetching(true);\r\n    // setShowMore(false); //to hide it for a moment so the data gets pushed down, and it shouldn't be there until we know if we need it again or not\r\n    //fixed with double conditionals in jsx\r\n  };\r\n\r\n  const handleReport = (reportData) => {\r\n    console.log(reportData);\r\n    setReportComment(reportData);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {reportComment && (\r\n        <Overlay navZ={true}>\r\n          <ReportComment\r\n            closeModal={setReportComment}\r\n            reportData={reportComment}\r\n          />\r\n        </Overlay>\r\n      )}\r\n      <div id={s.userInfoContainer}>\r\n        <div id={s.userInfo}>\r\n          <div\r\n            id={s.userInfoF}\r\n            style={{ backgroundColor: `#${ctx.user.avatarColor}` }}\r\n          >\r\n            <i\r\n              class=\"fas fa-user\"\r\n              style={{\r\n                backgroundColor: \"rgba(255, 255, 255, 0.2)\",\r\n                color: \"#fff\",\r\n                padding: \"1rem\",\r\n                borderRadius: \".5rem\",\r\n                fontSize: \"1.3rem\",\r\n              }}\r\n            ></i>\r\n            <h1>{uData.displayName}</h1> (\r\n            <Link to=\"/mojprofil\">uredi profil</Link> |\r\n            <Link onClick={logoutHandler} to=\"/\">\r\n              odjavi se\r\n            </Link>\r\n            )\r\n          </div>\r\n          <div id={s.userData}>\r\n            <div className={s.userDataItem}>\r\n              <h3>Spol</h3>\r\n              <p>{uData.gender}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Boja avatara</h3>\r\n              <p>{uData.avatarColor}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Banovan</h3>\r\n              <p>{uData.banned}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Registrovan</h3>\r\n              <p>{uData.registered}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Komentari</h3>\r\n              <p>{uData.comLength}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id={s.commentContainer}>\r\n          <div id={s.comments}>\r\n            <h3>Komentari korisnika</h3>\r\n            <div>\r\n              {uData.comments &&\r\n                !fetching &&\r\n                uData.comments.map((comment, i) => (\r\n                  <UserComment\r\n                    key={uuid()}\r\n                    commentData={comment}\r\n                    index={i}\r\n                    handleReport={handleReport}\r\n                  />\r\n                ))}\r\n              {uData.comments &&\r\n                fetching &&\r\n                uData.comments.map((comment, i) =>\r\n                  comment.avatarColor ? (\r\n                    <UserComment\r\n                      key={uuid()}\r\n                      commentData={comment}\r\n                      index={i}\r\n                      handleReport={handleReport}\r\n                    />\r\n                  ) : null\r\n                )}\r\n              {showMore && fetching ? (\r\n                <CommentShow loading={fetching} onClick={showMoreFn} />\r\n              ) : null}\r\n              {showMore && !fetching ? (\r\n                <CommentShow loading={fetching} onClick={showMoreFn} />\r\n              ) : null}\r\n              {/* for clean rendering, there is flickering otherwise and content jumps */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserConfig;\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { auth } from \"../../firebase\";\r\nimport LoginContext from \"../../context\";\r\nimport firebase from \"../../firebase\";\r\nimport s from \"./LoginForm.module.css\";\r\nconst gooProvider = new firebase.auth.GoogleAuthProvider();\r\nconst fbProvider = new firebase.auth.FacebookAuthProvider();\r\ngooProvider.addScope(\"https://www.googleapis.com/auth/contacts.readonly\");\r\nfbProvider.addScope(\"user_birthday\");\r\n\r\nconst LoginForm = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const [uId, setUid] = useState();\r\n  const [errMsg, setErrMsg] = useState(null);\r\n  const [forgotten, setForgotten] = useState(false);\r\n  const history = useHistory();\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n  const rememberMe = useRef();\r\n  const user = auth.currentUser;\r\n  const newPassword = \"jedandvatri\";\r\n  const newEmail = \"denis5396@gmail.com\";\r\n\r\n  const API_KEY = \"AIzaSyDDpLMfCuKs4jQJwf_5xsNQ5VuSBPZtIDk\";\r\n\r\n  const handleError = (err) => {\r\n    console.log(err);\r\n  };\r\n\r\n  const submitForm = async (e) => {\r\n    e.preventDefault();\r\n    let url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${API_KEY}`;\r\n    let expirationTime;\r\n    console.log(emailRef.current.value);\r\n    let userNameLoginEmail = undefined;\r\n    if (!emailRef.current.value.includes(\"@\")) {\r\n      const res = await fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${emailRef.current.value}.json`\r\n      );\r\n      userNameLoginEmail = await res.json();\r\n      console.log(userNameLoginEmail);\r\n      if (!userNameLoginEmail) {\r\n        setErrMsg(\"Korisnicko ime ne postoji.\");\r\n        return;\r\n      }\r\n    }\r\n    await fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        email: userNameLoginEmail || emailRef.current.value,\r\n        password: passwordRef.current.value,\r\n        returnSecureToken: true,\r\n      }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        if (data) {\r\n          if (rememberMe.current.checked) {\r\n            firebase\r\n              .auth()\r\n              .setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n            localStorage.setItem(\"rememberMe\", true);\r\n          } else if (!rememberMe.current.checked) {\r\n            firebase\r\n              .auth()\r\n              .setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n          }\r\n          expirationTime = new Date(\r\n            new Date().getTime() + +data.expiresIn * 1000\r\n          );\r\n          auth.onAuthStateChanged((user) => {\r\n            if (user) {\r\n              let date = new Date()\r\n                .toJSON()\r\n                .slice(0, 10)\r\n                .split(\"-\")\r\n                .reverse()\r\n                .join(\".\");\r\n              ctx.signUp(user.uid);\r\n              if (!rememberMe.current.checked) {\r\n                ctx.login(data.idToken, expirationTime.toISOString());\r\n              }\r\n              console.log(data);\r\n              history.push(\"/\");\r\n            }\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n\r\n    auth\r\n      .signInWithEmailAndPassword(\r\n        userNameLoginEmail || emailRef.current.value,\r\n        passwordRef.current.value\r\n      )\r\n      .then((userCredential) => {\r\n        const uId = userCredential.user.providerData[0].uid.slice(0, 10);\r\n        console.log(userCredential.user);\r\n        console.log(userCredential.user.refreshToken);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.code.includes(\"user-not-found\")) {\r\n          setErrMsg(\"Email adresa ne odgovara nijednom profilu.\");\r\n        } else if (err.code.includes(\"password\")) {\r\n          setErrMsg(\"Lozinka je neispravna.\");\r\n        } else if (err.code.includes(\"too-many-requests\")) {\r\n          setErrMsg(\r\n            \"Previse puta ste unijeli pogresne podatke, tako da pristup ovom profilu je privremeno zabranjen, molimo vas pokusajte kasnije, ili resetujte lozinku.\"\r\n          );\r\n        }\r\n      });\r\n\r\n    // if (user) {\r\n    //   alert('y');\r\n    //   user.updateEmail(newEmail).then(() => {\r\n    //     console.log('update successful');\r\n    //   });\r\n    // }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log(user);\r\n    }\r\n  }, [user]);\r\n\r\n  const login = (provider) => {\r\n    provider = provider === \"fb\" ? fbProvider : gooProvider;\r\n    // auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(\r\n    if (!rememberMe.current.checked) {\r\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n    } else if (rememberMe.current.checked) {\r\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n      localStorage.setItem(\"rememberMe\", true);\r\n      // ctx.setRememberMe(true);\r\n    }\r\n    auth.signInWithPopup(provider).then((result) => {\r\n      let credential = result.credential;\r\n      console.log(credential);\r\n      let providerName = credential.signInMethod.includes(\"google\")\r\n        ? \"gooUser\"\r\n        : \"fbUser\";\r\n      auth.onAuthStateChanged((user) => {\r\n        if (user) {\r\n          console.log(user);\r\n          providerName = providerName.concat(\r\n            user.providerData[0].uid.slice(0, 10)\r\n          );\r\n          let date = new Date()\r\n            .toJSON()\r\n            .slice(0, 10)\r\n            .split(\"-\")\r\n            .reverse()\r\n            .join(\".\");\r\n          ctx.signUp(user.uid, providerName, date); //check if acc is created already or not if not push acc information to db, otherwise take data and put it in ls\r\n          const expirationTime = new Date(new Date().getTime() + 3600 * 1000);\r\n          if (!localStorage.getItem(\"rememberMe\")) {\r\n            ctx.login(user.refreshToken, expirationTime.toISOString()); //set ls with token and exp time\r\n          }\r\n          history.push(\"/\");\r\n        }\r\n      });\r\n\r\n      // var user = result.user;\r\n      console.log(user);\r\n      // if (user) {\r\n      //   user\r\n      //     .updatePassword('jedandvatri')\r\n      //     .then(() => {\r\n      //       // Update successful.\r\n      //       console.log('update successful');\r\n      //     })\r\n      //     .catch((error) => {\r\n      //       // An error ocurred\r\n      //       // ...\r\n      //     });\r\n      // }\r\n      // if (user) {\r\n      //   user.updateEmail(newEmail).then(() => {\r\n      //     console.log('update successful');\r\n      //   });\r\n      // }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Prijava korisnika</h1>\r\n      <p>\r\n        Na portal se mo≈æe≈° prijaviti ili registrovati putem svog Facebook <br />\r\n        ili Google raƒçuna.\r\n      </p>\r\n      <form id={s.loginForm} onSubmit={submitForm}>\r\n        {errMsg && (\r\n          <div id={s.error}>\r\n            <h3>{errMsg}</h3>\r\n          </div>\r\n        )}\r\n        <div id={s.fbgoo}>\r\n          <div id={s.fb} onClick={() => login(\"fb\")}>\r\n            <i class=\"fab fa-facebook\"></i>\r\n          </div>\r\n          <div id={s.goo} onClick={() => login(\"goo\")}>\r\n            <img src={require(\"../../assets/img/gooicon.png\").default} />\r\n          </div>\r\n        </div>\r\n        <div id={s.nastavite}>\r\n          <span></span>\r\n          ili nastavite sa\r\n          <span></span>\r\n        </div>\r\n        <div id={s.username}>\r\n          <label htmlFor=\"username\">Korisniƒçko ime ili e-mail adresa</label>\r\n          <input ref={emailRef} type=\"text\" required id=\"username\" />\r\n        </div>\r\n        <div id={s.password}>\r\n          <label htmlFor=\"password\">Lozinka</label>\r\n          <input ref={passwordRef} type=\"password\" id=\"password\" />\r\n        </div>\r\n        <div id={s.remember}>\r\n          <label>\r\n            <input type=\"checkbox\" ref={rememberMe} />\r\n            <span className={s.checkmark} />\r\n            Zapamti me\r\n          </label>\r\n          <Link to=\"/resetpass\">Zaboravljena lozinka?</Link>\r\n        </div>\r\n        <button type=\"submit\">Prijavi se</button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport LoginContext from '../../context';\r\nimport { auth } from '../../firebase';\r\nimport UserInfo from '../UserInfo/UserInfo';\r\nimport s from './Login.module.css';\r\nimport LoginForm from './LoginForm';\r\n\r\nconst LoginP = (props) => {\r\n  const ctx = useContext(LoginContext);\r\n  const user = auth.currentUser;\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    // if (ctx.user.displayName) {\r\n    //   history.replace(`/profil/${ctx.user.displayName}`);\r\n    // }\r\n  }, []);\r\n\r\n  return (\r\n    <div id={!ctx.isLoggedIn ? s.border : s.borderTwo}>\r\n      {/* {!ctx.user.displayName && <LoginForm />}\r\n      {ctx.user.displayName && <UserInfo />} */}\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginP;\r\n","import React from 'react';\r\nimport LoginP from '../components/Login/Login';\r\nimport Nav from '../components/Nav/Nav';\r\n\r\nconst Login = (props) => {\r\n  return (\r\n    <>\r\n      <Nav />\r\n      <LoginP>{props.children}</LoginP>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport s from './Footer.module.css';\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <div id={s.footer}>\r\n      <nav>\r\n        <ul>\r\n          <li>Poƒçetna</li>\r\n          <li>Impressum</li>\r\n          <li>Komentari</li>\r\n          <li>Kontakt</li>\r\n          <li>Marketing</li>\r\n          <li>O nama</li>\r\n          <li>Privatnost</li>\r\n          <li>RSS</li>\r\n        </ul>\r\n      </nav>\r\n      <div id={s.followUs}>\r\n        Pratite nas <i class=\"fab fa-facebook\"></i>\r\n        <i class=\"fab fa-twitter\"></i>\r\n        <i class=\"fab fa-instagram\"></i>\r\n        <i class=\"fab fa-youtube\"></i>\r\n        <i class=\"fab fa-linkedin\"></i>\r\n      </div>\r\n      <div id={s.cpr}>\r\n        Copyright 2000-2021 InvolSoft d.o.o. Sarajevo. ISSN 2143-3271. Sva prava\r\n        zadr≈æana. Zabranjeno preuzimanje sadr≈æaja bez dozvole izdavaƒça.\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport LoginContext from \"../../context\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport s from \"./EditProfile.module.css\";\r\n\r\nconst EditProfile = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const [error, setError] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    success: \"\",\r\n  });\r\n  const username = useRef();\r\n  const avatarColor = useRef();\r\n  const password = useRef();\r\n  const repeatPassword = useRef();\r\n  const gender = useRef();\r\n\r\n  const [uData, setUData] = useState({\r\n    username: \"\",\r\n    avatarColor: \"\",\r\n    password: \"\",\r\n    gender: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    let clrUser = ctx.user.avatarColor;\r\n\r\n    for (let i = 0; i < avatarColor.current.children.length; i++) {\r\n      let temp = window\r\n        .getComputedStyle(avatarColor.current.children[i])\r\n        .getPropertyValue(\"background-color\")\r\n        .match(/(\\d+)/g);\r\n      temp = rgbToHex(+temp[0], +temp[1], +temp[2]);\r\n      if (temp === clrUser) {\r\n        avatarColor.current.children[i].children[0].click();\r\n      }\r\n    }\r\n    if (ctx.user.gender === \"≈Ωenski\") {\r\n      gender.current.children[1].children[0].click();\r\n    }\r\n  }, []);\r\n\r\n  const rgbToHex = (r, g, b) =>\r\n    [r, g, b].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\");\r\n  //  '#' + [r, g, b].map((x) => x.toString(16).padStart(2, '0')).join('');\r\n\r\n  const saveInfo = async () => {\r\n    setError((old) => {\r\n      return { ...old, success: \"\" };\r\n    });\r\n    let usernameVal =\r\n      username.current.value.trim().length >= 4 &&\r\n      username.current.value.trim().length <= 20\r\n        ? username.current.value.trim()\r\n        : \"\";\r\n    const ok =\r\n      username.current.value.trim().length >= 4 &&\r\n      username.current.value.trim().length <= 20;\r\n    console.log(ok);\r\n    console.log(usernameVal);\r\n    let passwordNum;\r\n    if (password.current.value.trim().length > 0) {\r\n      passwordNum = /\\d/.test(password.current.value.trim());\r\n    }\r\n    let check = true;\r\n    let clr;\r\n    let genderVal;\r\n    let passwordVal;\r\n    for (let i = 0; i < avatarColor.current.children.length; i++) {\r\n      if (avatarColor.current.children[i].children[0].checked) {\r\n        clr = window\r\n          .getComputedStyle(avatarColor.current.children[i])\r\n          .getPropertyValue(\"background-color\");\r\n        // console.log(rgbToHex(clr));\r\n        clr = clr.match(/(\\d+)/g);\r\n        clr = rgbToHex(+clr[0], +clr[1], +clr[2]);\r\n      }\r\n    }\r\n    for (let i = 0; i < gender.current.children.length; i++) {\r\n      if (gender.current.children[i].children[0].checked) {\r\n        genderVal = gender.current.children[i].children[1].textContent;\r\n      }\r\n    }\r\n    if (\r\n      password.current.value.trim().length >= 6 &&\r\n      repeatPassword.current.value.trim() === password.current.value.trim() &&\r\n      passwordNum\r\n    ) {\r\n      passwordVal = password.current.value;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length >= 6 &&\r\n      repeatPassword.current.value.trim() !== password.current.value.trim() &&\r\n      repeatPassword.current.value.trim().length > 0 &&\r\n      passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Lozinke se ne podudaraju.\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length >= 6 &&\r\n      repeatPassword.current.value.trim().length === 0 &&\r\n      passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Ponovite lozinku.\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length < 6 &&\r\n      password.current.value.trim().length > 0 &&\r\n      passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Lozinka mora imati minimalno 6 karaktera.\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length < 6 &&\r\n      password.current.value.trim().length > 0 &&\r\n      !passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password:\r\n            \"Lozinka mora imati minimalno 6 karaktera i barem jedan broj\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length >= 6 &&\r\n      // repeatPassword.current.value.trim() === password.current.value.trim() &&\r\n      !passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Lozinka mora imati minimalno jedan broj\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length === 0 &&\r\n      repeatPassword.current.value.trim().length === 0\r\n    ) {\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"\",\r\n        };\r\n      });\r\n    }\r\n    console.log(clr);\r\n    console.log(usernameVal ? usernameVal : ctx.user.displayName);\r\n    if (usernameVal.includes(\" \") && ok) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username: \"Korisniƒçko ime ne mo≈æe imati razmak, koristite _ ili -\",\r\n        };\r\n      });\r\n    } else if (usernameVal.includes(\" \") && !ok) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username:\r\n            \"Korisniƒçko ime ne mo≈æe imati razmak, koristite _ ili -, i mora imati izmeƒëu 4 i 20 karaktera\",\r\n        };\r\n      });\r\n    } else if (!usernameVal.includes(\" \") && !ok) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username: \"Korisniƒçko ime mora imati izmeƒëu 4 i 20 karaktera\",\r\n        };\r\n      });\r\n    } else {\r\n      usernameVal = usernameVal ? usernameVal : ctx.user.displayName;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username: \"\",\r\n        };\r\n      });\r\n    }\r\n    passwordVal = passwordVal ? passwordVal : \"\";\r\n    genderVal = genderVal ? genderVal : \"\";\r\n    if (check) {\r\n      // setUData({\r\n      //   username: usernameVal ? usernameVal : ctx.user.displayName,\r\n      //   avatarColor: clr ? clr : ctx.user.avatarColor,\r\n      //   password: passwordVal\r\n      //     ? passwordVal\r\n      //     : ctx.user.password\r\n      //     ? ctx.user.password\r\n      //     : \"\",\r\n      //   gender: genderVal ? genderVal : \"\",\r\n      // });\r\n      let oldObjCopy;\r\n      const userNameExists = await checkIfUserNameExists(usernameVal);\r\n      console.log(userNameExists);\r\n      console.log(\"see?\");\r\n      if (userNameExists || usernameVal === ctx.user.displayName) {\r\n        setError((old) => {\r\n          return {\r\n            ...old,\r\n            success: \"Trenutno korisniƒçko ime je zauzeto.\",\r\n          };\r\n        });\r\n        return;\r\n      } else {\r\n        const promises = [\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${usernameVal}.json`,\r\n            {\r\n              method: \"PUT\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n              body: JSON.stringify(auth.currentUser.email),\r\n            }\r\n          ).then((res) => res.json()),\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${ctx.user.displayName}.json`,\r\n            {\r\n              method: \"DELETE\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          ).then((res) => res.json()),\r\n        ];\r\n        const promisedData = await Promise.all(promises);\r\n        // promisedData.then((data) => console.log(data));\r\n        console.log(promisedData);\r\n      }\r\n      console.log(\"why?\");\r\n      ctx.setUserObj((oldObj) => {\r\n        oldObjCopy = {\r\n          ...oldObj,\r\n          displayName: usernameVal,\r\n          avatarColor: clr ? clr : ctx.user.avatarColor,\r\n          password: passwordVal\r\n            ? passwordVal\r\n            : ctx.user.password\r\n            ? ctx.user.password\r\n            : \"\",\r\n          gender: genderVal,\r\n        };\r\n        return oldObjCopy;\r\n      });\r\n      let keyId;\r\n      auth.onAuthStateChanged((user) => {\r\n        if (user) {\r\n          if (passwordVal) {\r\n            user\r\n              .updatePassword(passwordVal)\r\n              .then(() => {\r\n                // Update successful.\r\n                console.log(\"update successful\");\r\n              })\r\n              .catch((error) => {\r\n                // An error ocurred\r\n                // ...\r\n                console.log(error);\r\n              });\r\n          }\r\n          const dbRef = db.ref(`/users/${user.uid}/userData`);\r\n          dbRef.update({ ...oldObjCopy }).then((res) => {\r\n            setError((old) => {\r\n              return {\r\n                ...old,\r\n                success: \"Uspje≈°no ste editovali profil.\",\r\n              };\r\n            });\r\n          });\r\n          // dbRef.get().then((snapshot) => {\r\n          // if (snapshot.exists) {\r\n          //   console.log(snapshot.val());\r\n          //   const data = snapshot.val();\r\n          //   console.log(user.uid);\r\n          //   for (let key in data) {\r\n          //     console.log(data[key]);\r\n          //     if (data[key].uId === user.uid) {\r\n          //       keyId = key;\r\n          //       console.log(key);\r\n          //       dbRef\r\n          //         .child(`${key}`)\r\n          //         .update({ ...oldObjCopy })\r\n          //         .then((res) => {\r\n          //           setError((old) => {\r\n          //             return {\r\n          //               ...old,\r\n          //               success: 'Uspje≈°no ste editovali profil.',\r\n          //             };\r\n          //           });\r\n          //         });\r\n          //       break;\r\n          //     }\r\n          //   }\r\n          // }\r\n          // });\r\n        }\r\n      });\r\n    }\r\n\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  const checkIfUserNameExists = async (userName) => {\r\n    const res = await fetch(\r\n      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${userName}.json`\r\n    );\r\n    const data = await res.json();\r\n    console.log(data);\r\n\r\n    return data;\r\n  };\r\n\r\n  useEffect(() => {\r\n    // auth.onAuthStateChanged((user) => {\r\n    //   if (user) {\r\n    //     setUData({ ...uData });\r\n    //   }\r\n    // });\r\n  }, []);\r\n\r\n  return (\r\n    <div id={s.border}>\r\n      <div id={s.editProfileContainer}>\r\n        <div id={s.possibleErrors}>\r\n          {error.success ? (\r\n            <h2>{error.success}</h2>\r\n          ) : (\r\n            <>\r\n              <h2>{error.username.length > 0 ? error.username : \"\"}</h2>\r\n              <h2>{error.password.length > 0 ? error.password : \"\"}</h2>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className={s.editProfileItem}>\r\n          <h2>Editovanje profila</h2>\r\n          <p>Uredite va≈° korisniƒçki profil</p>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Korisniƒçko ime</h3>\r\n          </div>\r\n          <div id={s.username}>\r\n            <div>www.klix.ba/profil/</div>\r\n            <input\r\n              ref={username}\r\n              type=\"text\"\r\n              defaultValue={ctx.user.displayName}\r\n              spellCheck={false}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Boja avatara</h3>\r\n          </div>\r\n          <div id={s.colors} ref={avatarColor}>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Lozinka</h3>\r\n          </div>\r\n          <div>\r\n            <input id={s.password} type=\"password\" ref={password} />\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Ponovi lozinku</h3>\r\n          </div>\r\n          <div>\r\n            <input\r\n              id={s.passwordConfirm}\r\n              type=\"password\"\r\n              ref={repeatPassword}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Spol</h3>\r\n          </div>\r\n          <div id={s.gender} ref={gender}>\r\n            <div>\r\n              <input\r\n                className={s.xd}\r\n                id=\"spol\"\r\n                name=\"spol\"\r\n                type=\"radio\"\r\n                defaultChecked\r\n              />\r\n              <label htmlFor=\"spol\">Mu≈°ki</label>\r\n            </div>\r\n            <div>\r\n              <input\r\n                id=\"spol2\"\r\n                className={s.gender2}\r\n                name=\"spol\"\r\n                type=\"radio\"\r\n              />\r\n              <label htmlFor=\"spol\">≈Ωenski</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem}`}>\r\n          <h2>Napomena</h2>\r\n          <p>\r\n            Na komentarima i drugim servisima portala ƒáe biti prikazano samo\r\n            Va≈°e korisniƒçko ime i spol, dok nijedan drugi podatak neƒáe biti\r\n            javno dostupan.\r\n          </p>\r\n        </div>\r\n        <div id={s.saveBtn}>\r\n          <button onClick={saveInfo}>Spasi</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n","import React from 'react';\r\nimport EditProfile from '../components/EditProfile/EditProfile';\r\n\r\nconst Profile = () => {\r\n  return (\r\n    <>\r\n      <EditProfile />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport AddArticle from './AddArticle';\r\nimport s from './AdminPanelContainer.module.css';\r\nimport Articles from './Articles';\r\n\r\nconst AdminPanelContainer = () => {\r\n  return (\r\n    <div id={s.border}>\r\n      <AddArticle />\r\n      {/* <div id={s.itemContainer}>\r\n        <div id={s.addArticle}>\r\n          <i class=\"fas fa-plus\"></i>\r\n        </div>\r\n        <div id={s.articles}>\r\n          <Articles />\r\n          <Articles /> */}\r\n      {/* <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles /> */}\r\n      {/* </div> */}\r\n      {/* </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanelContainer;\r\n","import React from 'react';\r\nimport AdminPanelContainer from '../components/AdminPanel/AdminPanelContainer';\r\n\r\nconst AdminPanel = () => {\r\n  return (\r\n    <>\r\n      <AdminPanelContainer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","import React from 'react';\r\nimport ArticleComp from '../components/Article/Article';\r\n\r\nconst Article = () => {\r\n  return <ArticleComp />;\r\n};\r\n\r\nexport default Article;\r\n","import React from 'react';\r\nimport EditArticles from '../components/AdminPanel/EditArticle/EditArticle';\r\n\r\nconst EditArticlesPage = () => {\r\n  return (\r\n    <>\r\n      <EditArticles />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditArticlesPage;\r\n","import React from \"react\";\r\nimport Comment from \"../components/comment/Comment\";\r\n\r\nconst Comments = () => {\r\n  return (\r\n    <div>\r\n      <Comment />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import React from \"react\";\r\nimport s from \"./CommentRules.module.css\";\r\n\r\nconst CommentRules = () => {\r\n  return (\r\n    <div id={s.commentRulesCnt}>\r\n      <div id={s.commentRulesBody}>\r\n        <h1>Pravila i uslovi kori≈°tenja komentara</h1>\r\n        <p>\r\n          Internet portal Klix.ba je najposjeƒáeniji i najrelevantniji internet\r\n          medij u Bosni i Hercegovini koji postoji vi≈°e od 20 godina, a kojeg\r\n          posjeƒáuje veliki broj korisnika iz Bosne i Hercegovine i dijaspore.\r\n          Dok veƒáina korisnika nije registrovana i ne pi≈°e komentare, jedan dio\r\n          korisnika predstavljaju <b>registrovani korisnici</b> portala Klix.ba\r\n          i oni aktivno uƒçestvuju u <b>diskusijama</b> na ƒçlancima kroz\r\n          komentare.\r\n        </p>\r\n        <p>\r\n          Klix.ba ozbiljno shvata problem govora mr≈ænje u komentarima i\r\n          poduzimamo sve mjere kako bismo onemoguƒáili objavljivanje sadr≈æaja\r\n          koji potiƒçe na nasilje ili mr≈ænju. S obzirom da dnevni broj komentara\r\n          mo≈æe biti jako veliki, trenutno je nemoguƒáe sve komentare pregledati u\r\n          stvarnom vremenu i reagovati na one koji kr≈°e pravila i uslove\r\n          kori≈°tenja, pa je moguƒáe da u pojedinim komentarima jo≈° uvijek naiƒëete\r\n          na poneki sadr≈æaj koji predstavlja govor mr≈ænje.\r\n        </p>\r\n        <p>\r\n          Stoga, molimo sve korisnike da koriste{\" \"}\r\n          <b>opciju za prijavu komentara</b>\r\n          koja se nalazi pored svakog komentara (govor mr≈ænje, neprikladan\r\n          rijeƒçnik, off topic, vrijeƒëanje, spam, reklama) i tako nam pomognu\r\n          kako bismo prijavljene komentare prioritetnije pregledali.\r\n          Neprimjerene komentare mo≈æete prijaviti i putem e-maila&nbsp;\r\n          <b>komentari@klix.ba</b>, ≈°to je i naƒçin slu≈æbene ≈æalbe.\r\n        </p>\r\n        <h3>\r\n          Svi korisnici su du≈æni da se pridr≈æavaju sljedeƒáih pravila uslova\r\n          kori≈°tenja:\r\n        </h3>\r\n        <ul>\r\n          <li>\r\n            Komentari odra≈æavaju stavove njihovih autora, a ne nu≈æno i stavove\r\n            uredni≈°tva i novinara internet portala Klix.ba.\r\n          </li>\r\n          <li>\r\n            Molimo korisnike da se suzdr≈æe od vrijeƒëanja, psovanja i vulgarnog\r\n            izra≈æavanja.\r\n          </li>\r\n          <li>\r\n            Komentari koji su agresivni, bezobrazni, uvredljivi po bilo kojoj\r\n            osnovi bit ƒáe uklonjeni. Ne pi≈°ite komentare koji podstiƒçu na\r\n            mr≈ænju. Liƒçni i necivilizirani napadi na bilo koga mogu rezultirati\r\n            potpunom zabranom komentarisanja.\r\n          </li>\r\n          <li>\r\n            Klix.ba zadr≈æava pravo da zabrani komentarisanje na pojedine ƒçlanke.\r\n          </li>\r\n          <li>\r\n            Zbog velikog broja komentara Klix.ba nije du≈æan obrisati sve\r\n            komentare koji kr≈°e pravila.\r\n          </li>\r\n          <li>\r\n            Svaki ƒçitatelj koji koristi govor mr≈ænje mo≈æe biti kriviƒçno gonjen.\r\n          </li>\r\n          <li>\r\n            Klix.ba ima pravo i obavezu na zahtjev zvaniƒçnih organa dostaviti\r\n            sve podatke o korisniku ƒçiji komentari sadr≈æe govor mr≈ænje.\r\n          </li>\r\n          <li>\r\n            Portal Klix.ba zadr≈æava pravo da obri≈°e komentar bez najave i\r\n            obja≈°njenja.\r\n          </li>\r\n          <li>\r\n            Kao ƒçitalac takoƒëer prihvatate moguƒánost da meƒëu komentarima mogu\r\n            biti pronaƒëeni sadr≈æaji koji mogu biti u suprotnosti sa va≈°im\r\n            vjerskim, moralnim i drugim naƒçelima i uvjerenjima. Na takve\r\n            komentare ne odgovarajte neprimjerenim rijeƒçima veƒá ukoliko su\r\n            uvredljivi prijavite ih po gore opisanom modelu.\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentRules;\r\n","import React from \"react\";\r\nimport CommentRules from \"../components/comment/CommentRules\";\r\n\r\nconst CommentRulesPage = () => {\r\n  return (\r\n    <>\r\n      <CommentRules />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CommentRulesPage;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nimport { getComLengthIfObject, handleReplyHide } from \"./Comment\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport CommentItem from \"./CommentItem\";\r\nimport s from \"./LinkToComment.module.css\";\r\nimport CommentReply from \"./CommentReply\";\r\nimport CommentShow from \"./CommentShow\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport ReportComment from \"./reportComment/ReportComment\";\r\nimport { auth } from \"../../firebase\";\r\n\r\nconst LinkToComment = (props) => {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [commentData, setCommentData] = useState([]);\r\n  const [articleData, setArticleData] = useState({});\r\n  const [replyIndex, setReplyIndex] = useState(null);\r\n  const [repliesToHide, setRepliesToHide] = useState([]);\r\n  const [reportComment, setReportComment] = useState(false);\r\n  const fullComLength = useRef(0);\r\n  useEffect(() => {\r\n    if (location) {\r\n      console.log(location);\r\n      console.log(location.state);\r\n      if (location.state) {\r\n        if (location.search) {\r\n          history.replace({\r\n            pathname: location.pathname,\r\n            state: {\r\n              ...location.state,\r\n            },\r\n          });\r\n        } else {\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n              location.state.articleLink || location.state.articlePath\r\n            }.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              setArticleData({\r\n                title: data.title,\r\n                subTitle: data.subTitle,\r\n                category: data.category.toLowerCase(),\r\n                shares: data.shares ? data.shares : 0,\r\n                date: data.date,\r\n                commentsLength: getComLengthIfObject(data.comments),\r\n                linkPath: `/${data.category}/${data.subCategory}/${splitTitle(\r\n                  data.title\r\n                )}/${data.id}`,\r\n              });\r\n              fullComLength.current = getComLengthIfObject(data.comments);\r\n              let arr = undefined;\r\n              const path = `${data.category}/${data.subCategory}/-${data.id}`;\r\n              for (let key in data.comments) {\r\n                if (location.state.parentCommentId) {\r\n                  if (key === location.state.parentCommentId) {\r\n                    let replies = [];\r\n                    console.log(data.comments[key]);\r\n                    arr = [{ ...data.comments[key] }];\r\n                    arr[0].path = `${path}/comments/${key}`;\r\n                    arr[0].id = key;\r\n                    let incr = 0;\r\n                    for (let ind of Object.values(data.comments[key].replies)) {\r\n                      replies.push(ind);\r\n                      const repId = Object.keys(data.comments[key].replies)[\r\n                        incr\r\n                      ];\r\n                      replies[\r\n                        replies.length - 1\r\n                      ].path = `${path}/comments/${key}/replies/${repId}`;\r\n                      replies[replies.length - 1].id = repId;\r\n                      incr++;\r\n                    }\r\n                    arr[0].replies = [...replies];\r\n                    console.log(arr[0]);\r\n                    console.log(arr);\r\n                    setCommentData(arr);\r\n                    const replyHideArray = handleReplyHide(arr);\r\n                    console.log(replyHideArray);\r\n                    if (replyHideArray) {\r\n                      setRepliesToHide(replyHideArray);\r\n                    }\r\n                  }\r\n                } else {\r\n                  if (key === location.state.commentId) {\r\n                    console.log(data.comments[key]);\r\n                    arr = [{ ...data.comments[key] }];\r\n                    arr[0].path = `${path}/comments/${key}`;\r\n                    arr[0].id = key;\r\n                    if (arr[0].replies) {\r\n                      let replies = [];\r\n                      let incr = 0;\r\n                      for (let ind of Object.values(\r\n                        data.comments[key].replies\r\n                      )) {\r\n                        replies.push(ind);\r\n                        const repId = Object.keys(data.comments[key].replies)[\r\n                          incr\r\n                        ];\r\n                        replies[\r\n                          replies.length - 1\r\n                        ].path = `${path}/comments/${key}/replies/${repId}`;\r\n                        replies[replies.length - 1].id = repId;\r\n                        incr++;\r\n                      }\r\n                      arr[0].replies = [...replies];\r\n                    }\r\n                    console.log(arr[0]);\r\n                    setCommentData(arr);\r\n                    const replyHideArray = handleReplyHide(arr);\r\n                    console.log(replyHideArray);\r\n                    if (replyHideArray) {\r\n                      setRepliesToHide(replyHideArray);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            });\r\n        }\r\n      } else {\r\n        if (location.search) {\r\n          const urlParam = JSON.parse(\r\n            location.search.slice(1).split(\"%22\").join('\"')\r\n          );\r\n          console.log(urlParam);\r\n          history.replace({\r\n            pathname: location.pathname,\r\n            state: {\r\n              ...urlParam,\r\n            },\r\n          });\r\n        } else {\r\n          const userId =\r\n            JSON.parse(localStorage.getItem(\"userObj\")).uId ||\r\n            auth.currentUser.uid;\r\n          let idFromPath = location.pathname.split(\"/\");\r\n          idFromPath = idFromPath[idFromPath.length - 1];\r\n          console.log(idFromPath);\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              for (let key in data) {\r\n                if (Object.keys(data[key])[0] === idFromPath) {\r\n                  console.log(Object.values(data[key])[0]);\r\n                  const obj = Object.values(data[key])[0];\r\n                  const path = `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n                    obj.articlePath\r\n                  }/comments/${\r\n                    obj.parentCommentId ? obj.parentCommentId : obj.commentId\r\n                  }.json`;\r\n\r\n                  console.log(path);\r\n                  console.log(obj);\r\n                  history.replace({\r\n                    pathname: location.pathname,\r\n                    state: {\r\n                      ...obj,\r\n                    },\r\n                  });\r\n                }\r\n              }\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }, [location]);\r\n\r\n  const handleReply = (ind) => {\r\n    setReplyIndex(ind);\r\n  };\r\n\r\n  const removeShowMore = () => {\r\n    setRepliesToHide([]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(props);\r\n  }, []);\r\n\r\n  const handleReport = (reportData) => {\r\n    console.log(reportData);\r\n    setReportComment(reportData);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (commentData) {\r\n      console.log(commentData);\r\n    }\r\n  }, [commentData]);\r\n\r\n  return (\r\n    <>\r\n      {reportComment && (\r\n        <Overlay navZ={true}>\r\n          <ReportComment\r\n            closeModal={setReportComment}\r\n            reportData={reportComment}\r\n          />\r\n        </Overlay>\r\n      )}\r\n      <div id={s.commentLinkContainer}>\r\n        <div id={s.commentPageContainerHeader}>\r\n          <div id={s.headerBundle}>\r\n            <h3\r\n              style={{\r\n                color: `${clrs[articleData.category]}`,\r\n              }}\r\n            >\r\n              {articleData.subTitle}\r\n            </h3>\r\n            <h1>\r\n              <Link to={articleData.linkPath}>{articleData.title}</Link>\r\n            </h1>\r\n          </div>\r\n          <div id={s.headerShares}>\r\n            <i class=\"fas fa-share-alt\"></i>63\r\n          </div>\r\n        </div>\r\n        <div id={s.commentPageContainerBody}>\r\n          <div id={s.commentSidebarLeft}>\r\n            <div id={s.bundleDiv}>\r\n              <div id={s.postedData}>\r\n                <div>\r\n                  <i\r\n                    class=\"fas fa-user\"\r\n                    style={{\r\n                      backgroundColor: `rgb(209,213,219)`,\r\n                      color: \"#fff\",\r\n                      padding: \"1.2rem\",\r\n                      borderRadius: \".3rem\",\r\n                      fontSize: \"1.6rem\",\r\n                    }}\r\n                  ></i>\r\n                </div>\r\n                <div id={s.postedDataTwo}>\r\n                  <h3>R. D.</h3>\r\n                  <p>{timeDifference(articleData.date)}</p>\r\n                </div>\r\n              </div>\r\n              <div id={s.commentsShare}>\r\n                <div>\r\n                  <h2>{fullComLength.current}</h2>\r\n                  <p>komentara</p>\r\n                </div>\r\n                <div>\r\n                  <h2>0</h2>\r\n                  <p>dijeljenja</p>\r\n                </div>\r\n              </div>\r\n              <div id={s.shareArticle}>\r\n                <ul>\r\n                  <li>\r\n                    <i class=\"fab fa-facebook\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"fab fa-twitter\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"far fa-envelope\"></i>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id={s.commentBodyContent}>\r\n            <div id={s.commentBodyContentHeader}>\r\n              <h3>Komentar</h3>\r\n              <div id={s.povratakNaClanak}>\r\n                <Link to={articleData.linkPath}>\r\n                  <i class=\"far fa-arrow-alt-circle-left\"></i>&nbsp;Povratak na\r\n                  ƒçlanak\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            {commentData &&\r\n              commentData.map((com, i) => {\r\n                if (i === replyIndex) {\r\n                  if (!com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                        <CommentReply\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          setCommentData={setCommentData}\r\n                          setReplyIndex={setReplyIndex}\r\n                          path={com.path}\r\n                          ref={fullComLength}\r\n                        />\r\n                      </React.Fragment>\r\n                    );\r\n                  } else if (com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                        <CommentReply\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          setCommentData={setCommentData}\r\n                          setReplyIndex={setReplyIndex}\r\n                          path={com.path}\r\n                          ref={fullComLength}\r\n                        />\r\n                        {com.replies\r\n                          ? com.replies.map((comRep, ind) => {\r\n                              return (\r\n                                <React.Fragment>\r\n                                  {repliesToHide.length && ind < 2 ? (\r\n                                    <CommentItem\r\n                                      key={uuid()}\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {!repliesToHide.length ? (\r\n                                    <CommentItem\r\n                                      key={uuid()}\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {repliesToHide.length && ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() => removeShowMore()}\r\n                                      showReply={com.replies.length - 2}\r\n                                    />\r\n                                  ) : null}\r\n                                </React.Fragment>\r\n                              );\r\n                            })\r\n                          : null}\r\n                      </React.Fragment>\r\n                    );\r\n                  }\r\n                } else if (Array.isArray(replyIndex)) {\r\n                  return (\r\n                    <React.Fragment key={uuid()}>\r\n                      <CommentItem\r\n                        commentIndex={i}\r\n                        commentIndexDB={com.id}\r\n                        comment={com.comment}\r\n                        displayName={com.userName}\r\n                        commentLikes={com.commentLikes}\r\n                        commentDislikes={com.commentDislikes}\r\n                        avatarColor={com.avatarColor}\r\n                        date={timeDifference(com.date)}\r\n                        path={com.path}\r\n                        setCommentData={setCommentData}\r\n                        commentData={commentData}\r\n                        handleReply={handleReply}\r\n                        handleReport={handleReport}\r\n                      />\r\n                      {com.replies &&\r\n                        com.replies.map((comRep, ind) => {\r\n                          return (\r\n                            <React.Fragment key={uuid()}>\r\n                              {repliesToHide.length && ind < 2 ? (\r\n                                <>\r\n                                  <CommentItem\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    date={timeDifference(comRep.date)}\r\n                                    path={comRep.path}\r\n                                    setCommentData={setCommentData}\r\n                                    commentData={commentData}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                  {replyIndex[1] === ind &&\r\n                                  replyIndex[0] === i ? (\r\n                                    <CommentReply\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={[com.id, comRep.id]}\r\n                                      setCommentData={setCommentData}\r\n                                      setReplyIndex={setReplyIndex}\r\n                                      path={com.path}\r\n                                      ref={fullComLength}\r\n                                    />\r\n                                  ) : null}\r\n                                </>\r\n                              ) : null}\r\n                              {!repliesToHide.length ? (\r\n                                <>\r\n                                  <CommentItem\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    date={timeDifference(comRep.date)}\r\n                                    path={comRep.path}\r\n                                    setCommentData={setCommentData}\r\n                                    commentData={commentData}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                  {replyIndex[1] === ind &&\r\n                                  replyIndex[0] === i ? (\r\n                                    <CommentReply\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={[com.id, comRep.id]}\r\n                                      setCommentData={setCommentData}\r\n                                      setReplyIndex={setReplyIndex}\r\n                                      path={com.path}\r\n                                      ref={fullComLength}\r\n                                    />\r\n                                  ) : null}\r\n                                </>\r\n                              ) : null}\r\n                              {repliesToHide.length && ind === 1 ? (\r\n                                <CommentShow\r\n                                  onClick={() => removeShowMore()}\r\n                                  showReply={com.replies.length - 2}\r\n                                />\r\n                              ) : null}\r\n                            </React.Fragment>\r\n                          );\r\n                        })}\r\n                    </React.Fragment>\r\n                  );\r\n                } else {\r\n                  if (!com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                      </React.Fragment>\r\n                    );\r\n                  } else if (com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                        {com.replies\r\n                          ? com.replies.map((comRep, ind) => {\r\n                              return (\r\n                                <React.Fragment key={uuid()}>\r\n                                  {repliesToHide.length && ind < 2 ? (\r\n                                    <CommentItem\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {!repliesToHide.length ? (\r\n                                    <CommentItem\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {repliesToHide.length && ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() => removeShowMore()}\r\n                                      showReply={com.replies.length - 2}\r\n                                    />\r\n                                  ) : null}\r\n                                </React.Fragment>\r\n                              );\r\n                            })\r\n                          : null}\r\n                      </React.Fragment>\r\n                    );\r\n                  }\r\n                }\r\n              })}\r\n            <Link\r\n              to={`${articleData.linkPath}/komentari`}\r\n              style={{ textDecoration: \"none\" }}\r\n            >\r\n              <CommentShow showAll={fullComLength.current} />\r\n            </Link>\r\n          </div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LinkToComment;\r\n","import React from \"react\";\r\nimport LinkToComment from \"../components/comment/LinkToComment\";\r\n\r\nconst CommentLink = () => {\r\n  return <LinkToComment />;\r\n};\r\n\r\nexport default CommentLink;\r\n","import React from \"react\";\r\nimport LoginP from \"../components/Login/Login\";\r\nimport Nav from \"../components/Nav/Nav\";\r\n\r\nconst ResetPass = (props) => {\r\n  return (\r\n    <>\r\n      <Nav />\r\n      <LoginP>{props.children}</LoginP>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPass;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport s from \"./ResetPassword.module.css\";\r\n\r\nconst ResetPassword = () => {\r\n  const emailRef = useRef(null);\r\n  const [errMsg, setErrMsg] = useState(null);\r\n  const reset = async () => {\r\n    if (emailRef.current.value.length < 3) {\r\n      return;\r\n    }\r\n    let userNameLoginEmail = undefined;\r\n    if (!emailRef.current.value.includes(\"@\")) {\r\n      const res = await fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${emailRef.current.value}.json`\r\n      );\r\n      userNameLoginEmail = await res.json();\r\n      console.log(userNameLoginEmail);\r\n      if (!userNameLoginEmail) {\r\n        setErrMsg(\"Korisnicko ime ne postoji.\");\r\n        return;\r\n      }\r\n    }\r\n    auth\r\n      .sendPasswordResetEmail(userNameLoginEmail || emailRef.current.value)\r\n      .then((data) => {\r\n        console.log(data);\r\n        console.log(\"pass email sent\");\r\n        setErrMsg(\"Lozinka je resetovana, provjerite vasu email adresu.\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.code.includes(\"user-not-found\")) {\r\n          setErrMsg(\"Email adresa nije odgovarajuƒáa.\");\r\n        }\r\n      });\r\n    // window.Email.send({\r\n    //   SecureToken: \"3cd1b780-5c5d-4846-9d91-2d6e018085ff\",\r\n    //   To: \"denis5396@gmail.com\",\r\n    //   From: \"mahmudxsd3@gmail.com\",\r\n    //   Subject: \"ememail\",\r\n    //   Body: \"And this is the body\",\r\n    // }).then((message) => alert(message));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 id={s.header}>Zaboravljena lozinka</h1>\r\n      <p id={s.parag}>\r\n        Da biste resetovali va≈°u lozinku molimo unesite email koji ste <br />\r\n        koristili prilikom registracije.\r\n      </p>\r\n      <form id={s.form} onSubmit={(e) => e.preventDefault()}>\r\n        {errMsg && <p id={s.errMsg}>{errMsg}</p>}\r\n        <div id={s.inputBundle}>\r\n          <label htmlFor=\"email\">Korisniƒçko ime ili e-mail adresa</label>\r\n          <input id=\"email\" ref={emailRef} />\r\n        </div>\r\n        {/* <div\r\n          class=\"g-recaptcha\"\r\n          data-sitekey=\"6LdCcWkeAAAAAJXA7ZrPRvz9iSTFq5CLLiCzrX2u\"\r\n        ></div> */}\r\n        <button onClick={reset}>Resetuj</button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n","import { Route, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport Nav from \"./components/Nav/Nav\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport Footer from \"./components/Footer/Footer\";\nimport Profile from \"./pages/Profile\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport LoginContext from \"./context\";\nimport { auth } from \"./firebase\";\nimport AdminPanel from \"./pages/AdminPanel\";\nimport LoginForm from \"./components/Login/LoginForm\";\nimport UserInfo from \"./components/UserInfo/UserInfo\";\nimport Overlay from \"./components/Overlay/Overlay\";\nimport Article from \"./pages/Article\";\nimport EditArticlesPage from \"./pages/EditArticles\";\nimport Comment from \"./components/comment/Comment\";\nimport Comments from \"./pages/Comments\";\nimport CommentRulesPage from \"./pages/CommentRulesPage\";\nimport CommentLink from \"./pages/CommentLink\";\nimport ResetPass from \"./pages/ResetPass\";\nimport ResetPassword from \"./components/Login/ResetPassword\";\n\nfunction App() {\n  const ctx = useContext(LoginContext);\n\n  const clearStorage = () => {\n    const session = sessionStorage.getItem(\"ref\");\n    if (session == null) {\n      localStorage.removeItem(\"remove\");\n      localStorage.removeItem(\"userObj\");\n      ctx.logout();\n    }\n    sessionStorage.setItem(\"ref\", 1);\n  };\n  useEffect(() => {\n    // window.addEventListener('load', clearStorage);\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        // alert('userhere');\n      } else if (!user) {\n        if (localStorage.getItem(\"token\")) {\n        } else {\n          ctx.logout();\n        }\n      }\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Nav />\n      <Switch>\n        <Route path=\"/\" exact>\n          <Home route=\"Poƒçetna\" />\n        </Route>\n        <Route path=\"/Vijesti\" exact>\n          <Home route=\"Vijesti\" />\n        </Route>\n        <Route path=\"/Biznis\" exact>\n          <Home route=\"Biznis\" />\n        </Route>\n        <Route path=\"/Sport\" exact>\n          <Home route=\"Sport\" />\n        </Route>\n        <Route path=\"/Magazin\" exact>\n          <Home route=\"Magazin\" />\n        </Route>\n        <Route path=\"/Lifestyle\" exact>\n          <Home route=\"Lifestyle\" />\n        </Route>\n        <Route path=\"/Scitech\" exact>\n          <Home route=\"Scitech\" />\n        </Route>\n        <Route path=\"/Auto\" exact>\n          <Home route=\"Auto\" />\n        </Route>\n        <Route path=\"/login\">\n          <Login>\n            <LoginForm />\n          </Login>\n        </Route>\n        <Route path=\"/profil/:user\">\n          <Login>\n            <UserInfo />\n          </Login>\n        </Route>\n        <Route path=\"/mojprofil\">\n          <Profile />\n        </Route>\n        <Route path=\"/adminpanel\">\n          <AdminPanel />\n        </Route>\n        <Route path=\"/editarticles\">\n          <EditArticlesPage />\n        </Route>\n        <Route path=\"/:category/:subCategory/:title/:articleId/komentari\">\n          <Comments />\n        </Route>\n        <Route path=\"/:category/:subCategory/:title/:articleId\">\n          <Article />\n        </Route>\n        <Route path=\"/komentar/:commentId\">\n          <CommentLink />\n        </Route>\n        <Route path=\"/komentari\">\n          <CommentRulesPage />\n        </Route>\n        <Route path=\"/resetpass\">\n          <ResetPass>\n            <ResetPassword />\n          </ResetPass>\n        </Route>\n      </Switch>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { LoginContextProvider } from \"./context\";\n\nReactDOM.render(\n  <LoginContextProvider>\n    <BrowserRouter basename=\"/klix\">\n      <App />\n    </BrowserRouter>\n  </LoginContextProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}