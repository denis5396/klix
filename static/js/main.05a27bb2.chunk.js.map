{"version":3,"sources":["components/AdminPanel/EditArticle/EditArticle.module.css","components/Dropdown/Dropdown.module.css","components/Article/Article.module.css","components/AdminPanel/AddArticle.module.css","components/EditProfile/EditProfile.module.css","components/HomeSub/HomeSub.module.css","components/comment/Comment.module.css","components/comment/CommentItem.module.css","components/Nav/Nav.module.css","components/comment/LinkToComment.module.css","components/comment/reportComment/ReportComment.module.css","components/HomeMain/HomeMain.module.css","components/HomeMain/HomeMainSub.module.css","components/Article/Popular.module.css","components/UserComment/UserComment.module.css","components/UserInfo/UserInfo.module.css","components/Login/LoginForm.module.css","components/AdminPanel/Articles.module.css","components/Tagovi/TagArticle.module.css","components/Tagovi/Tags.module.css","components/ProgressBar/ProgressBar.module.css","components/Article/LinkedPromo.module.css","components/Login/ResetPassword.module.css","components/Article/LinkedArticles.module.css","components/ArticleLink/ArticleLink.module.css","components/comment/CommentType.module.css","components/comment/CommentReply.module.css","components/comment/CommentShow.module.css","components/Footer/Footer.module.css","components/Modal/Modal.module.css","components/Login/Login.module.css","components/comment/CommentRules.module.css","components/Nav/Search.module.css","components/Overlay/Overlay.module.css","components/AdminPanel/AdminPanelContainer.module.css","assets/img/gooicon.png","assets/img/powerplant.jpg","firebase/index.js","context/index.js","components/Dropdown/Dropdown.js","components/Nav/Search.js","components/Nav/Nav.js","components/Overlay/Overlay.js","components/Modal/Modal.js","components/ProgressBar/ProgressBar.js","components/AdminPanel/AddArticle.js","components/ArticleLink/ArticleLink.js","components/AdminPanel/EditArticle/EditArticle.js","components/comment/CommentType.js","components/comment/CommentItem.js","components/comment/CommentReply.js","components/comment/CommentShow.js","components/comment/reportComment/ReportComment.js","components/Article/LinkedArticles.js","components/Article/LinkedPromo.js","components/Article/Popular.js","components/Article/Article.js","components/comment/Comment.js","components/HomeMain/HomeMainSub.js","components/HomeMain/HomeMain.js","components/HomeSub/HomeSub.js","pages/Home.js","components/UserComment/UserComment.js","components/UserInfo/UserInfo.js","components/Login/LoginForm.js","components/Login/Login.js","pages/Login.js","components/Footer/Footer.js","components/EditProfile/EditProfile.js","pages/Profile.js","components/AdminPanel/AdminPanelContainer.js","pages/AdminPanel.js","pages/Article.js","pages/EditArticles.js","pages/Comments.js","components/comment/CommentRules.js","pages/CommentRulesPage.js","components/comment/LinkToComment.js","pages/CommentLink.js","pages/ResetPass.js","components/Login/ResetPassword.js","components/Tagovi/TagArticle.js","components/Tagovi/Tags.js","pages/TagsPage.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","storage","db","database","auth","LoginContext","createContext","token","isLoggedIn","user","uId","displayName","gender","avatarColor","banned","registered","overlay","signUp","time","setUserObj","login","logout","handleOverlay","calculateRemainingTime","expirationTime","currentTime","Date","getTime","retrieveStoredToken","storedToken","localStorage","getItem","storedExpirationDate","remainingTime","removeItem","duration","LoginContextProvider","props","initialToken","tokenData","userObjInitial","useState","JSON","parse","userObj","setToken","curUser","currentUser","userIsLoggedIn","setOverlay","logoutTimer","useRef","useEffect","current","timer","setTimeout","logoutHandler","console","log","setItem","stringify","useCallback","clearTimeout","signOut","LoginContextValue","uid","date","userObjCopy","ref","get","then","snapshot","exists","val","data","onAuthStateChanged","getIdToken","idToken","fetch","method","body","headers","response","json","catch","err","Provider","value","children","Dropdown","forwardRef","showHide","history","useHistory","nextSibling","id","includes","style","cssText","html","document","getElementsByTagName","scrollBehavior","window","scrollTo","handleFn","route","location","pathname","s","dropdown","className","dropdownColumn","dropdownItemHeader","onClick","to","poƒçetna","dropdownColumnItem","vijesti","biznis","sport","magazin","lifestyle","scitech","auto","Search","searchInputRef","focus","searchCnt","class","onKeyDown","e","target","keyCode","length","push","placeholder","Nav","ctx","useContext","dropdownRef","headerRef","showDropdown","setShowDropdown","search","setSearch","navHeader","logo","wlogo","hlogo","xmlns","viewBox","dangerouslySetInnerHTML","__html","points","x","y","width","height","headerUl","box","bundle","old","fontSize","backgroundColor","color","padding","borderRadius","removeAttribute","setAttribute","margin","Overlay","textContent","handleConfirm","onMouseDown","handleCloseOverlay","navZ","zIndex","React","Modal","modal","handleClick","modalBtns","ProgressBar","progressParent","articleAdded","progress","map","item","progressItem","imageName","progressBar","currentProgress","done","uuid","finished","subcategories","AddArticle","paste","setPaste","useLocation","enter","num","imageArray","setImageArray","imagePreview","setImagePreview","savedNames","setSavedNames","setDeleteMode","tags","setTags","setCurProgress","setArticleAdded","sending","setSending","subcategoriesMap","setSubcategoriesMap","saveSubcat","setSaveSubcat","showSecondList","setShowSecondList","currentList","setCurrentList","lists","setLists","subCatInit","setSubCatInit","setDragIndex","setReplacedIdx","didMountRef","postaviSlikeText","postaviSlikeBorder","textareaRef","imgCnt","tagContainer","titles","captionText","categorySelect","progressRef","sendArticleOverlay","commentsRadio","subcategorySelect","state","articleData","subCategory","alert","strDate","timeDifference","title","sponsored","subTitle","disabled","articleText","listOrder","commentsAllowed","checked","category","toLowerCase","event","Event","bubbles","dispatchEvent","imageText","txtString","forEach","imgTxt","i","concat","locationImgArray","blobToFileArray","img","url","name","cntr","a","blob","file","File","type","imgPre","handleInsert","mode","selectionStart","selectionEnd","start","found","j","handleSelect","selectFound","handleDeleteImg","contains","oldCopy","oldArr","ind","check","oldObj","nameI","handleRemoveTag","splice","checkIfContainsPromo","string","str","trim","seeWhichList","selStart","occurence","previousSibling","allowDrop","preventDefault","imageCaptionTextAttach","strValue","split","finalValue","saveName","replaceState","replace","addArticle","addArticleBody","addArticleContent","addTitle","onChange","addText","addTextHeader","addTextBody","addTextBodyHeader","activeElement","check1","check2","check3","check4","firstPart","slice","secondPart","textareaText","selectedText","substring","bold","curClickedList","tagName","posOfInsertion","onMouseEnter","onMouseLeave","listOl","addTextBodyBody","slStart","slEnd","enterPosFind","insideList","readOnly","startStart","startEnd","listCount","ret","copyTxt1","copyTxt2","copyTxt3","slice2","slice3","newStr","join","k","onPaste","strArr","copyArr","addImages","addImagesHeader","addImagesBundleLeft","addImagesBundleRight","addImagesBody","uploadImageContainer","uploadImageText","uploadImage","accept","multiple","files","fileList","Array","from","previewArray","imgObj","copy","URL","createObjectURL","htmlFor","borderColor","imageContainer","imageWrapper","draggable","onDragStart","dataTransfer","setData","src","dragStart","onDrop","dropInd","drgIdx","replacedIdx","getData","drop","onDragOver","previewImage","deletable","imageCaptionContainer","imageCaptionText","imageCaption","addArticleInfo","author","authorCnt","authorInfo","textTransform","toUpperCase","promoSubTitle","captionTxt","catSel","subcatSel","checkIfPromo","commentChoice","deletedTags","reduce","acc","cur","some","el","articleFinished","images","shares","visited","captTxt","promoId","categoriesNoChange","imgUrls","d","year","getFullYear","month","getMonth","day","getDate","path","progressArray","percent","put","on","bytesTransferred","Math","floor","totalBytes","arr","display","error","child","getDownloadURL","indx","getHours","getMinutes","getSeconds","dbRef","promises","changedCat","changedSubCat","newlyAdded","oldTags","find","checker","articlePath","thumbnail","res","Promise","all","reformattedTags","promisesPatch","pos","incr","update","once","set","finalizePromo","patchPromises","subcategory","tag","tagItem","commentBundle","commentItem","defaultChecked","clrs","ArticleLink","articleLink","encodeURI","splitTitle","undefined","articleLinkImage","imageUrl","articleLinkText","articleColors","daysInMonth","difference","transformedDate","curTime","dateDiff","hour","minute","second","monthLower","dateLower","hourLower","minuteLower","secondLower","abs","returnVal","diff","xform","EditArticles","select","setSelect","curSelect","setCurSelect","selectTwo","setSelectTwo","curSelectTwo","setCurSelectTwo","glavni","setGlavni","adding","setAdding","addingModus","setAddingModus","switchingModus","setSwitchingModus","showSubCat","setShowSubCat","setLoading","switching","editing","setEditing","articles","setArticles","clickedPos","setClickedPos","fetchPos","setFetchPos","switchMode","setSwitchMode","switchSelect","selectMainVal","articleFetchCnt","mainContentCnt","subConentCntLeft","subConentCntRight","modalRef","addArticleBox","switchArticleBox","editArticleBox","switchSelect2","articleFetch","setArticleFetch","showModal","setShowModal","fetchArticles","handleSelectChange","handleSelectMain","realData","key","art","isArray","cpy","timeDiff","inc","cp","Object","keys","mainVal","reverse","handleAddFetchedArticle","showAdding","hideAdding","handleConfirmation","newArr","handleModeSwitch","input","dragNum","xferObj","dragPos","place","droppedPos","dragData","extra","allArticlesHeader","defaultValue","label","fetchBtn","allArticlesItems","articleItem","articleFetchItem","flexDirection","addingBundler","articleFetchItemImgCnt","articleItemFetchTitles","articleItemFetchFooter","articleItemFetchBundle","comments","constructor","artItem","button","buttons","handleEditFetchedArticle","editBundler","editArticles","allArticles","allArticlesMain","allArticlesMainBody","allArticlesMainBodyHeader","chooseModeCnt","saveChanges","val1","val2","notBiggerThanFour","articleIds","objKey","articleSubCnt","gridTemplateColumns","subLeft","article","subLeftItem","subLeftItemImg","subLeftItemText","subLeftItemBundle","subLeftBundleRight","addArticleLeft","emptySub","subRight","subRightItem","subRightText","subRightBundle","subRightBundleRight","borderTop","allArticlesMainBodyContent","articleItemSm","articleImgCnt","articleTitles","articleFooter","borderBottom","articleItemBg","articleImageCntBg","articleItemBgHeader","articleItemBgFooter","articleItemBgFooterBundle","addArticleBg","empty","emptyBg","CommentType","postComment","postCommentBundle","postCommentTextarea","userName","arraycom","comment","userId","getComments","commentInfo","commentId","sendData","CommentItem","commentLike","commentDislike","commentIndex","replies","commentLikes","setCommentLikes","commentDislikes","setCommentDislikes","updateLikeDislike","setUpdateLikeDislike","fetching","setFetching","topComment","negativeComment","checkOppositeFn","userIp","handleLikeDislike","opinion","commentIndexDB","cpyObj","userIpNoDot","cpyArr","commentData","setCommentData","deletePath","ip","opacity","commentContainerReply","commentContainer","commentHeader","commentHeaderFirst","commentHeaderSecond","parentCommentId","commentBody","commentFooter","like","dislike","reportLikeParent","report","marginRight","handleReport","comLink","divide","reply","handleReply","CommentReply","commentReplyReplies","commentReply","commentReplyFooter","replyObj","linkPath","setReplyIndex","CommentShow","showCommentReplies","showAll","showReply","showCommentMore","loading","ReportComment","choiceRef","reportContainer","reportHeader","reportBody","reportRadioBtns","bundleRadios","readonly","confirm","closeModal","reportData","inputs","reason","footerNote","LinkedArticles","indL","linkedArticle","linkedArticleSolo","position","LinkedPromo","promoItem","promoImageCnt","promoBody","promoTitles","promoFooter","getLen","comObj","comRepLen","Popular","popularArts","setPopularArts","snap","currArts","firstData","getDateData","sort","b","len","data2","currArts2","initData","resolve","values","popularCnt","popularHeader","fill","stroke","popularBody","popArt","popularItem","popularItemHeader","popularItemBody","popularItemFooter","itemTime","spanComShare","spanComment","spanShare","catSubCat","Vijesti","Biznis","Sport","Magazin","Lifestyle","Scitech","Auto","scrollFnSticky","navHeight","getComputedStyle","getPropertyValue","sideBarParentMagin","parentElement","getBoundingClientRect","top","ArticleComp","setArticleData","text","setText","linkData","setLinkData","internalLinks","setInternalLinks","clickedSlider","setClickedSlider","zoomedIn","setZoomedIn","moving","setMoving","posOfSlider","setPosOfSlider","grabXPrev","setGrabXPrev","grabYPrev","setGrabYPrev","zoomPos","setZoomPos","counter","setCounter","relatedArticles","setRelatedArticles","promoArticles","setPromoArticles","imageSliderRef","sliderFooterBar","stickLeftSideBar","stickRightSideBar","fullComLength","handlerFn","twttr","widgets","load","instgrm","Embeds","process","addEventListener","removeEventListener","findRelatedTags","orderByKey","limitToLast","indeces","fn","random","promoArr","replyLength","txt","paragraphs","temp","finalParagraphs","inbetweenArray","checkBool","testArr","paragraph","listChecker","configListArr","list","linkEmbedArr","linksArr","tempArr","tempLink","linkThere","linkPos","linkPosEnd","embedLink","embedThere","embedPos","embedPosEnd","listSkipLink","items","externalLink","link","embed","finishedLinks","linkInd","splitArr","external","image","linkText","path2","titleSplit3","titleSplit","titleSplit2","deconstructPathName","keyRep","itemsarr","itemsarrtxt","intLinkThere","imageThere","intLinkIncr","extLinkIncr","arrTemp","listIncr","removeBrAfterInt","textInd","l","it","Fragment","href","rel","textBelowImage","ytConfig","maxWidth","listArr","foundLinkVar","foundBoldVar","tempListArr","tempListLinkArr","tempListText","listLink","listLinkFirstIndex","separate","separateurl","separatetxt","zoomOut","transform","zoomIn","zoomInPerBtn","left","cursor","handleSliderControls","openSliderFromThumbnail","index","cat","artId","findLatestThree","dates","filter","artPath","handleShareFirebase","articleParent","onWheel","sliderMainImgContainer","sliderHeaderBar","slideNumbers","slideZoomExpand","requestFullscreen","fullscreenElement","exitFullscreen","onMouseUp","oneThird","offsetHeight","positionOnElement","clientY","onMouseMove","widthX","heightY","tst1","tst2","clientX","assign","offsetLeft","offsetTop","pos1","pos2","offsetArr","sliderRight","sliderLeft","articleHeader","articleBody","articleSidebarLeft","bundleDiv","postedData","postedDataOne","postedDataTwo","commentsShare","shareArticle","shareUrl","open","encodeURIComponent","user_id","hash_tags","shareurl","articleBodyContent","imageSliderContainer","mainSliderImage","sliderImages","clickForMore","tgs","valObj","handleTagUnderscore","addComment","showComments","linkedArticles","linkedArticlesHeader","linkedArticlesBody","justifyContent","relArt","linkedPromo","linkedPromoHeader","linkedPromoBody","prom","articleSidebarRight","getComLength","fullCommentsLength","getComLengthIfObject","handleReplyHide","replyHideArray","Comment","setComments","replyIndex","setGetComments","safeToProceed","setSafeToProceed","repliesToHide","setRepliesToHide","showMore","setShowMore","reportComment","setReportComment","initRef","pushFinal","pushFinal2","fullCommentsLengthRef","stickLeftSidebar","reverseArr","modifyData","checkForTopComments","showMoreFn","spliceRepliesHide","testingFn","findIndex","dataLength","numberOfShows","toFixed","storeTopCommentsIndx","spliceInd","secondLoopArray","cpyCom","firstTopCom","secondTopCom","commentPageContainer","commentPageContainerHeader","headerBundle","headerShares","commentPageContainerBody","commentSidebarLeft","commentBodyContent","commentBodyHeader","commentBodyHeaderInfo","povratakNaClanak","commentBodyHeaderTypeSignIn","prijavaKorisnika","commentBodyHeaderAlert","comRep","marginTop","marginBottom","commentSidebarRight","getVisitShare","dbRef2","promises2","dataVisitPath","getPrevDateData","promises3","listOfUnder15","dataVisit","dataShares","dataPaths2","promises1","unshift","final","getSidebarData","xd1","dataPaths","dataEdit","promisedData","curr","buildingFinalData","dataJson","visitedDataSort","sharedDataSort","pop","retData","HomeMainSub","first","third","sideBarData","setSidebarData","handleFilterSidebar","sideBar","sideBarControls","sideBarControlItem","itemActive","sideBarContent","sideBarItem","sideBarItemBundle","sideBarItemBundleRight","HomeMain","articlesMain","setArticlesMain","articlePaths","placeHolderArray","subTitleClr","comArr","homeMain","main","mainBox","mainBoxImg","alt","mainBoxHeader","mainBoxFooter","mainBoxFooterBundle","mainBoxBig","HomeSub","promos","setPromos","build","newObj","fin2","sub","sub2","subBodyHeader","subBody","subBodyLeft","subBodyItem","itemImg","itemImgFour","itemText","itemBundle","itemBundleR","subBodyItemsBundle","subBodyBundleItem","itemBundleRight","promoCnt","promoHeader","promo","Home","reload","UserComment","commentFooterF","UserConfig","uData","setUData","spliceArray","contentArray","currentLength","oldCpy","range","comLength","lessThanZero","startAt","endAt","n","userInfoContainer","userInfo","userInfoF","userData","userDataItem","gooProvider","GoogleAuthProvider","fbProvider","FacebookAuthProvider","addScope","LoginForm","errMsg","setErrMsg","emailRef","passwordRef","rememberMe","submitForm","userNameLoginEmail","email","password","returnSecureToken","ok","setPersistence","Auth","Persistence","LOCAL","SESSION","expiresIn","toJSON","toISOString","signInWithEmailAndPassword","userCredential","providerData","refreshToken","code","provider","signInWithPopup","result","credential","providerName","signInMethod","loginForm","onSubmit","fbgoo","fb","goo","require","default","nastavite","username","required","remember","checkmark","LoginP","borderTwo","border","Login","Footer","footer","followUs","cpr","EditProfile","success","setError","repeatPassword","clrUser","match","rgbToHex","click","r","g","toString","padStart","saveInfo","usernameVal","passwordNum","test","clr","genderVal","passwordVal","checkIfUserNameExists","userNameExists","oldObjCopy","updatePassword","editProfileContainer","possibleErrors","editProfileItem","spellCheck","colors","radioField","passwordConfirm","xd","gender2","saveBtn","Profile","AdminPanelContainer","AdminPanel","Article","EditArticlesPage","EditArticle","Comments","CommentRules","commentRulesCnt","commentRulesBody","CommentRulesPage","LinkToComment","commentsLength","repId","urlParam","idFromPath","obj","removeShowMore","commentLinkContainer","commentBodyContentHeader","com","textDecoration","CommentLink","ResetPass","ResetPassword","reset","sendPasswordResetEmail","header","parag","form","inputBundle","TagArticle","tagArticle","imageCnt","articleBodyCnt","Tags","term","setTerm","changeRoute","setChangeRoute","searchData","setSearchData","mostPopData","setMostPopData","noMatch","setNoMatch","init","idToStartFrom","indexToStartFrom","indexToStartFrom2","getDataFromPath","endBefore","dataCmb","cats","tempData","key2","loopTerms","containsWord","word","RegExp","tagsCnt","tagsLeft","tagsLeftHeader","tagsLeftBody","nill","tagsLeftFooter","tagsRight","TagsPage","App","exact","UserInfo","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","getElementById"],"mappings":"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","file":"static/js/main.05a27bb2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"editArticles\":\"EditArticle_editArticles__1N9zU\",\"allArticlesMainBodyContent\":\"EditArticle_allArticlesMainBodyContent__1M2Oe\",\"articleTitles\":\"EditArticle_articleTitles__hMYMj\",\"articleItemSm\":\"EditArticle_articleItemSm__2sym_\",\"articleItemBg\":\"EditArticle_articleItemBg__23RhP\",\"articleImgCnt\":\"EditArticle_articleImgCnt__DHec4\",\"articleImageCntBg\":\"EditArticle_articleImageCntBg__ww2Mv\",\"articleItemFetchTitles\":\"EditArticle_articleItemFetchTitles__MLGso\",\"editBundler\":\"EditArticle_editBundler__s9JFl\",\"addingBundler\":\"EditArticle_addingBundler__37Y6U\",\"articleFooter\":\"EditArticle_articleFooter__2eIcI\",\"articleItemBgHeader\":\"EditArticle_articleItemBgHeader__2mpz_\",\"articleItemBgFooter\":\"EditArticle_articleItemBgFooter__2LR-F\",\"articleItemBgFooterBundle\":\"EditArticle_articleItemBgFooterBundle__1yrOO\",\"articleSubCnt\":\"EditArticle_articleSubCnt__mLHo7\",\"subLeft\":\"EditArticle_subLeft__3si0I\",\"subLeftItem\":\"EditArticle_subLeftItem__2tKQD\",\"subLeftItemImg\":\"EditArticle_subLeftItemImg__1Q9JG\",\"subLeftItemText\":\"EditArticle_subLeftItemText__3AyKF\",\"subLeftItemBundle\":\"EditArticle_subLeftItemBundle__21Gni\",\"subLeftBundleRight\":\"EditArticle_subLeftBundleRight__2HeS4\",\"subRightBundleRight\":\"EditArticle_subRightBundleRight__1Rvvu\",\"subRight\":\"EditArticle_subRight__YDdyo\",\"subRightItem\":\"EditArticle_subRightItem__1MF3l\",\"subRightText\":\"EditArticle_subRightText__20e11\",\"subRightBundle\":\"EditArticle_subRightBundle__1kibv\",\"allArticlesBody\":\"EditArticle_allArticlesBody__RLm0F\",\"allArticleItem\":\"EditArticle_allArticleItem__-Z4Hi\",\"addArticle\":\"EditArticle_addArticle__3ORhu\",\"addArticleLeft\":\"EditArticle_addArticleLeft__3hum5\",\"addArticleBg\":\"EditArticle_addArticleBg__1wLwd\",\"allArticlesHeader\":\"EditArticle_allArticlesHeader__6vEJs\",\"allArticlesItems\":\"EditArticle_allArticlesItems__2nsnm\",\"articleFetchItem\":\"EditArticle_articleFetchItem__2oQcT\",\"articleFetchItemImgCnt\":\"EditArticle_articleFetchItemImgCnt__20qK7\",\"articleItemFetchFooter\":\"EditArticle_articleItemFetchFooter__2JYbM\",\"articleItemFetchBundle\":\"EditArticle_articleItemFetchBundle__YIeDF\",\"fetchBtn\":\"EditArticle_fetchBtn__18naX\",\"saveChanges\":\"EditArticle_saveChanges__301Ra\",\"chooseModeCnt\":\"EditArticle_chooseModeCnt__2nnff\",\"empty\":\"EditArticle_empty__3w86Y\",\"emptyBg\":\"EditArticle_emptyBg__1WZcG\",\"emptySub\":\"EditArticle_emptySub__3aH44\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdown\":\"Dropdown_dropdown__1FDOI\",\"dropdownColumn\":\"Dropdown_dropdownColumn__24p8j\",\"dropdownItemHeader\":\"Dropdown_dropdownItemHeader__3NL1Z\",\"dropdownColumnItem\":\"Dropdown_dropdownColumnItem__zgBA0\",\"poƒçetna\":\"Dropdown_poƒçetna__277HU\",\"vijesti\":\"Dropdown_vijesti__VqnGg\",\"biznis\":\"Dropdown_biznis__14JgO\",\"sport\":\"Dropdown_sport__2uzfP\",\"magazin\":\"Dropdown_magazin__3TYlp\",\"lifestyle\":\"Dropdown_lifestyle__3_RE3\",\"scitech\":\"Dropdown_scitech__2UaRO\",\"auto\":\"Dropdown_auto__1R2AU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"articleParent\":\"Article_articleParent__1_-Oq\",\"articleHeader\":\"Article_articleHeader__1tol4\",\"articleBody\":\"Article_articleBody__1eBLk\",\"articleSidebarLeft\":\"Article_articleSidebarLeft__i5-X4\",\"bundleDiv\":\"Article_bundleDiv___XfdY\",\"articleBodyContent\":\"Article_articleBodyContent__2Nbwn\",\"articleSidebarRight\":\"Article_articleSidebarRight__2HQau\",\"postedData\":\"Article_postedData__r36L3\",\"postedDataTwo\":\"Article_postedDataTwo__3HEvG\",\"commentsShare\":\"Article_commentsShare__2z0YI\",\"comments\":\"Article_comments__3xH9D\",\"shareArticle\":\"Article_shareArticle__3ryig\",\"imageContainer\":\"Article_imageContainer__fUn54\",\"captionTxt\":\"Article_captionTxt__xXuMg\",\"articleText\":\"Article_articleText__2g8tl\",\"tags\":\"Article_tags__ERLsn\",\"addComment\":\"Article_addComment__rZDU9\",\"showComments\":\"Article_showComments__PnNNE\",\"linkedArticlesBody\":\"Article_linkedArticlesBody__29JER\",\"linkedArticlesHeader\":\"Article_linkedArticlesHeader__2ZqxO\",\"linkedPromoHeader\":\"Article_linkedPromoHeader__3eCnl\",\"linkedPromo\":\"Article_linkedPromo__XaJ-e\",\"artTxt\":\"Article_artTxt__1_UE6\",\"artTxtBold\":\"Article_artTxtBold__3oLsM\",\"textBelowImage\":\"Article_textBelowImage__3kDyE\",\"imageSliderContainer\":\"Article_imageSliderContainer__1LJV_\",\"mainSliderImage\":\"Article_mainSliderImage__2OYto\",\"sliderImages\":\"Article_sliderImages__2_4n4\",\"clickForMore\":\"Article_clickForMore__2KeRK\",\"clickedSlider\":\"Article_clickedSlider__2owTV\",\"sliderMainImgContainer\":\"Article_sliderMainImgContainer__2KwoX\",\"sliderHeaderBar\":\"Article_sliderHeaderBar__2C_4B\",\"slideZoomExpand\":\"Article_slideZoomExpand__2WAGB\",\"sliderFooterBar\":\"Article_sliderFooterBar__1Nhf1\",\"slideNumbers\":\"Article_slideNumbers__2nEq2\",\"sliderRight\":\"Article_sliderRight__6PNfh\",\"sliderLeft\":\"Article_sliderLeft__1alWh\",\"ytConfig\":\"Article_ytConfig__XpqCg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addArticle\":\"AddArticle_addArticle__1Pint\",\"addTitle\":\"AddArticle_addTitle__1Dr-P\",\"addArticleBody\":\"AddArticle_addArticleBody__18vce\",\"addText\":\"AddArticle_addText__28Sm9\",\"addImages\":\"AddArticle_addImages___T9Rc\",\"addTextHeader\":\"AddArticle_addTextHeader__1zP61\",\"addImagesHeader\":\"AddArticle_addImagesHeader__2KsVQ\",\"addImagesBundleLeft\":\"AddArticle_addImagesBundleLeft__3sN90\",\"addImagesBundleRight\":\"AddArticle_addImagesBundleRight__2Yosg\",\"addTextBody\":\"AddArticle_addTextBody__1WThD\",\"addTextBodyHeader\":\"AddArticle_addTextBodyHeader__2nJuv\",\"listOl\":\"AddArticle_listOl__7k0uz\",\"imageContainer\":\"AddArticle_imageContainer__2r7am\",\"deletable\":\"AddArticle_deletable__1g7Vr\",\"imageWrapper\":\"AddArticle_imageWrapper__GxsmQ\",\"previewImage\":\"AddArticle_previewImage__1lZ7O\",\"addImagesBody\":\"AddArticle_addImagesBody__2B1JU\",\"uploadImageContainer\":\"AddArticle_uploadImageContainer__1CfsS\",\"imageCaptionContainer\":\"AddArticle_imageCaptionContainer__3r7AA\",\"uploadImageText\":\"AddArticle_uploadImageText__1vIBB\",\"imageCaptionText\":\"AddArticle_imageCaptionText__1qKwT\",\"uploadImage\":\"AddArticle_uploadImage__OoIbw\",\"imageCaption\":\"AddArticle_imageCaption__3AJGo\",\"author\":\"AddArticle_author__K6tXR\",\"authorInfo\":\"AddArticle_authorInfo__3s98h\",\"authorCnt\":\"AddArticle_authorCnt__1VDqz\",\"category\":\"AddArticle_category__2_K-v\",\"tag\":\"AddArticle_tag__2g2XB\",\"tagItem\":\"AddArticle_tagItem__3ysme\",\"tagContainer\":\"AddArticle_tagContainer__oX3bd\",\"commentsAllowed\":\"AddArticle_commentsAllowed__3joov\",\"commentBundle\":\"AddArticle_commentBundle__3eupi\",\"commentItem\":\"AddArticle_commentItem__2XRYX\",\"subcategory\":\"AddArticle_subcategory__2S4x5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"EditProfile_border__m7kmD\",\"editProfileContainer\":\"EditProfile_editProfileContainer__34i5D\",\"editProfileItem\":\"EditProfile_editProfileItem__1BiBT\",\"bundle\":\"EditProfile_bundle__2G3_7\",\"username\":\"EditProfile_username__3ZYc_\",\"colors\":\"EditProfile_colors__131Ma\",\"radioField\":\"EditProfile_radioField__RZI5t\",\"password\":\"EditProfile_password__2DeyI\",\"passwordConfirm\":\"EditProfile_passwordConfirm__3SN9f\",\"gender\":\"EditProfile_gender__1pDAi\",\"gender2\":\"EditProfile_gender2__3DXHi\",\"saveBtn\":\"EditProfile_saveBtn__1MB0Q\",\"possibleErrors\":\"EditProfile_possibleErrors__2hIgt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sub\":\"HomeSub_sub__2TEoo\",\"itemImg\":\"HomeSub_itemImg__3o1UV\",\"subBodyHeader\":\"HomeSub_subBodyHeader__2zZ6U\",\"subBody\":\"HomeSub_subBody__1fiy_\",\"subBodyLeft\":\"HomeSub_subBodyLeft__pVzJJ\",\"subBodyItemsBundle\":\"HomeSub_subBodyItemsBundle__1sh7Q\",\"subBodyItem\":\"HomeSub_subBodyItem__wh5rw\",\"itemText\":\"HomeSub_itemText__2VBOk\",\"itemImgFour\":\"HomeSub_itemImgFour__yAr0E\",\"itemBundle\":\"HomeSub_itemBundle__2a_XD\",\"itemBundleR\":\"HomeSub_itemBundleR__i0AJA\",\"subBodyBundleItem\":\"HomeSub_subBodyBundleItem__2EWGE\",\"itemBundleRight\":\"HomeSub_itemBundleRight__1YlM2\",\"promoCnt\":\"HomeSub_promoCnt__PES26\",\"promoHeader\":\"HomeSub_promoHeader__3ldhJ\",\"promoBody\":\"HomeSub_promoBody__NsLD5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentPageContainer\":\"Comment_commentPageContainer__3XQE-\",\"commentPageContainerHeader\":\"Comment_commentPageContainerHeader__69dyh\",\"headerBundle\":\"Comment_headerBundle__1U8HJ\",\"headerShares\":\"Comment_headerShares__2Ob5H\",\"commentPageContainerBody\":\"Comment_commentPageContainerBody__2-fiK\",\"commentSidebarLeft\":\"Comment_commentSidebarLeft__1vM-s\",\"bundleDiv\":\"Comment_bundleDiv__4fbiL\",\"postedData\":\"Comment_postedData__TQyov\",\"postedDataTwo\":\"Comment_postedDataTwo__3nhNp\",\"commentsShare\":\"Comment_commentsShare__1_y-s\",\"postCommentTextarea\":\"Comment_postCommentTextarea__1_zbU\",\"shareArticle\":\"Comment_shareArticle__3R4YC\",\"commentBodyContent\":\"Comment_commentBodyContent__1G4QM\",\"commentBodyHeaderInfo\":\"Comment_commentBodyHeaderInfo__3ou1U\",\"povratakNaClanak\":\"Comment_povratakNaClanak__26Js3\",\"prijavaKorisnika\":\"Comment_prijavaKorisnika__2as8H\",\"commentBodyHeaderTypeSignIn\":\"Comment_commentBodyHeaderTypeSignIn__2rUd6\",\"commentBodyHeaderAlert\":\"Comment_commentBodyHeaderAlert__oTgfr\",\"postCommentBundle\":\"Comment_postCommentBundle__30VG4\",\"commentBody\":\"Comment_commentBody__3qQ5w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentContainer\":\"CommentItem_commentContainer__3ep8C\",\"commentContainerReply\":\"CommentItem_commentContainerReply__mETek\",\"commentHeader\":\"CommentItem_commentHeader__lP07n\",\"commentHeaderFirst\":\"CommentItem_commentHeaderFirst__1DbO6\",\"commentHeaderSecond\":\"CommentItem_commentHeaderSecond__169IQ\",\"commentBody\":\"CommentItem_commentBody__13nqz\",\"commentFooter\":\"CommentItem_commentFooter__LDr2y\",\"like\":\"CommentItem_like__14jTY\",\"dislike\":\"CommentItem_dislike__Fh6nx\",\"reportLikeParent\":\"CommentItem_reportLikeParent__3SThR\",\"divide\":\"CommentItem_divide__1a9fX\",\"report\":\"CommentItem_report__16Io5\",\"reply\":\"CommentItem_reply__1-FUT\",\"topComment\":\"CommentItem_topComment__3TTwg\",\"negativeComment\":\"CommentItem_negativeComment__1igMr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Nav_logo__eGT1n\",\"navHeader\":\"Nav_navHeader__kz4uz\",\"bundle\":\"Nav_bundle__2Hi_W\",\"box\":\"Nav_box__tijUH\",\"headerUl\":\"Nav_headerUl__FKu_b\",\"wlogo\":\"Nav_wlogo__1Htqu\",\"hlogo\":\"Nav_hlogo__2pJFD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentLinkContainer\":\"LinkToComment_commentLinkContainer__1A3Co\",\"commentPageContainerHeader\":\"LinkToComment_commentPageContainerHeader__22ZWJ\",\"headerBundle\":\"LinkToComment_headerBundle__2Ia_z\",\"headerShares\":\"LinkToComment_headerShares__1lcTK\",\"commentPageContainerBody\":\"LinkToComment_commentPageContainerBody__3xA0o\",\"commentSidebarLeft\":\"LinkToComment_commentSidebarLeft__29iNi\",\"bundleDiv\":\"LinkToComment_bundleDiv__3_2W6\",\"postedData\":\"LinkToComment_postedData__1VBC_\",\"postedDataTwo\":\"LinkToComment_postedDataTwo__sMY6_\",\"commentsShare\":\"LinkToComment_commentsShare__1Yl6X\",\"shareArticle\":\"LinkToComment_shareArticle__3Ki8n\",\"commentBodyContent\":\"LinkToComment_commentBodyContent__1oHmo\",\"commentBodyContentHeader\":\"LinkToComment_commentBodyContentHeader__yJb8S\",\"povratakNaClanak\":\"LinkToComment_povratakNaClanak__1KANv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reportContainer\":\"ReportComment_reportContainer__3tPhE\",\"reportRadioBtns\":\"ReportComment_reportRadioBtns__30UBP\",\"bundleRadios\":\"ReportComment_bundleRadios__33oUJ\",\"confirm\":\"ReportComment_confirm__2NMuL\",\"footerNote\":\"ReportComment_footerNote__1u9sP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homeMain\":\"HomeMain_homeMain__1c5Dz\",\"main\":\"HomeMain_main__3xFDk\",\"mainBoxBig\":\"HomeMain_mainBoxBig__3IM8w\",\"mainBox\":\"HomeMain_mainBox__3_qEQ\",\"mainBoxHeader\":\"HomeMain_mainBoxHeader__1b5oQ\",\"mainBoxFooter\":\"HomeMain_mainBoxFooter__1rZ3k\",\"mainBoxFooterBundle\":\"HomeMain_mainBoxFooterBundle__1PBgS\",\"mainBoxImg\":\"HomeMain_mainBoxImg__1DNdc\",\"sideBar\":\"HomeMain_sideBar__SxZrO\",\"sideBarControls\":\"HomeMain_sideBarControls__3bR7b\",\"sideBarControlItem\":\"HomeMain_sideBarControlItem__vB4gs\",\"sideBarContent\":\"HomeMain_sideBarContent__32bU2\",\"sideBarItem\":\"HomeMain_sideBarItem__DhiuP\",\"sideBarItemBundle\":\"HomeMain_sideBarItemBundle__MGyCv\",\"sideBarItemBundleRight\":\"HomeMain_sideBarItemBundleRight__A-zNX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sideBar\":\"HomeMainSub_sideBar__3M4dE\",\"sideBarControls\":\"HomeMainSub_sideBarControls__1ual7\",\"sideBarControlItem\":\"HomeMainSub_sideBarControlItem__ICqAn\",\"itemActive\":\"HomeMainSub_itemActive__30TMJ\",\"sideBarContent\":\"HomeMainSub_sideBarContent__1Yrkz\",\"sideBarItem\":\"HomeMainSub_sideBarItem__3HxYF\",\"sideBarItemBundle\":\"HomeMainSub_sideBarItemBundle__KGUjS\",\"sideBarItemBundleRight\":\"HomeMainSub_sideBarItemBundleRight__IlXpM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popularCnt\":\"Popular_popularCnt__21fyL\",\"popularHeader\":\"Popular_popularHeader__6tLvR\",\"popularItem\":\"Popular_popularItem__3gtjF\",\"popularItemHeader\":\"Popular_popularItemHeader__3gZim\",\"popularItemBody\":\"Popular_popularItemBody__2b0Jp\",\"popularItemFooter\":\"Popular_popularItemFooter__3-Om5\",\"itemTime\":\"Popular_itemTime__XpWi6\",\"spanComShare\":\"Popular_spanComShare__z3Tri\",\"spanShare\":\"Popular_spanShare__1SnNR\",\"spanComment\":\"Popular_spanComment__THqgY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentContainer\":\"UserComment_commentContainer__mOCVT\",\"commentHeader\":\"UserComment_commentHeader__26NZj\",\"commentHeaderFirst\":\"UserComment_commentHeaderFirst__1pa_0\",\"commentHeaderSecond\":\"UserComment_commentHeaderSecond__29A7i\",\"commentBody\":\"UserComment_commentBody__380YP\",\"commentFooter\":\"UserComment_commentFooter__31gc-\",\"like\":\"UserComment_like__51qDR\",\"dislike\":\"UserComment_dislike__1s03A\",\"report\":\"UserComment_report__cKvyb\",\"reply\":\"UserComment_reply__2wSTA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userInfoContainer\":\"UserInfo_userInfoContainer__21zAf\",\"userInfo\":\"UserInfo_userInfo__2V8z1\",\"userInfoF\":\"UserInfo_userInfoF__U2QYJ\",\"userData\":\"UserInfo_userData__3-s6a\",\"userDataItem\":\"UserInfo_userDataItem__1S8zh\",\"commentContainer\":\"UserInfo_commentContainer__1HMp9\",\"comments\":\"UserInfo_comments__1MNmM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginForm\":\"LoginForm_loginForm__226Wf\",\"fbgoo\":\"LoginForm_fbgoo__1LKhf\",\"fb\":\"LoginForm_fb__W6OC_\",\"goo\":\"LoginForm_goo__32aZq\",\"nastavite\":\"LoginForm_nastavite__2SsaO\",\"username\":\"LoginForm_username__gffse\",\"password\":\"LoginForm_password__1wt-s\",\"remember\":\"LoginForm_remember__1LbVK\",\"error\":\"LoginForm_error__1wkod\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"article\":\"Articles_article__2D2dX\",\"textBundle\":\"Articles_textBundle__-OhVj\",\"articleOptionsBundle\":\"Articles_articleOptionsBundle__MKj7r\",\"articleOptions\":\"Articles_articleOptions__3HO9L\",\"editArticle\":\"Articles_editArticle__nm3bT\",\"editArticleItem\":\"Articles_editArticleItem__1NfvT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tagArticle\":\"TagArticle_tagArticle__1KX28\",\"imageCnt\":\"TagArticle_imageCnt__2y5gv\",\"articleBodyCnt\":\"TagArticle_articleBodyCnt__352Ok\",\"subTitle\":\"TagArticle_subTitle__2PRT8\",\"title\":\"TagArticle_title__JdTcT\",\"txt\":\"TagArticle_txt__x2VFy\",\"footer\":\"TagArticle_footer__1fLhb\",\"date\":\"TagArticle_date__2CByH\",\"bundle\":\"TagArticle_bundle__GCW-a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tagsCnt\":\"Tags_tagsCnt__1Zrd2\",\"tagsLeft\":\"Tags_tagsLeft__1wsdV\",\"tagsLeftHeader\":\"Tags_tagsLeftHeader__2gZ5R\",\"tagsLeftFooter\":\"Tags_tagsLeftFooter__1Bxxi\",\"tagsLeftBody\":\"Tags_tagsLeftBody__21La7\",\"nill\":\"Tags_nill__2cuFf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progressParent\":\"ProgressBar_progressParent__pnVaP\",\"progressItem\":\"ProgressBar_progressItem__eaz92\",\"progressBar\":\"ProgressBar_progressBar__t3Lzb\",\"currentProgress\":\"ProgressBar_currentProgress__21z0_\",\"done\":\"ProgressBar_done__vJLqe\",\"finished\":\"ProgressBar_finished__3qtOS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"promoItem\":\"LinkedPromo_promoItem__2Lu50\",\"promoImageCnt\":\"LinkedPromo_promoImageCnt__3v4jF\",\"promoBody\":\"LinkedPromo_promoBody__2xaj5\",\"promoFooter\":\"LinkedPromo_promoFooter__2JKSx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"ResetPassword_header__3Jilb\",\"parag\":\"ResetPassword_parag__2h7Ml\",\"form\":\"ResetPassword_form__JIYaX\",\"inputBundle\":\"ResetPassword_inputBundle__26Esc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageContainer\":\"LinkedArticles_imageContainer__1m5OA\",\"linkedArticle\":\"LinkedArticles_linkedArticle__5kdV8\",\"linkedArticleSolo\":\"LinkedArticles_linkedArticleSolo__25yac\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"articleLinkImage\":\"ArticleLink_articleLinkImage__tKtk6\",\"articleLink\":\"ArticleLink_articleLink__Jd70I\",\"articleLinkText\":\"ArticleLink_articleLinkText__3N-iv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postCommentTextarea\":\"CommentType_postCommentTextarea__2lemm\",\"postCommentBundle\":\"CommentType_postCommentBundle__O6-fL\",\"postComment\":\"CommentType_postComment__yasYQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentReply\":\"CommentReply_commentReply__3ty_t\",\"commentReplyFooter\":\"CommentReply_commentReplyFooter__3jxjT\",\"commentReplyReplies\":\"CommentReply_commentReplyReplies__1jFXz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"showCommentReplies\":\"CommentShow_showCommentReplies__20HUz\",\"showCommentMore\":\"CommentShow_showCommentMore__1DBIw\",\"showAll\":\"CommentShow_showAll__nfhXw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__25BDU\",\"followUs\":\"Footer_followUs__1DOPk\",\"cpr\":\"Footer_cpr__3kN3H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__24H1s\",\"modalBtns\":\"Modal_modalBtns__36Xur\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"Login_border__Avq0k\",\"borderTwo\":\"Login_borderTwo__2YKuN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentRulesCnt\":\"CommentRules_commentRulesCnt__3Z-tf\",\"commentRulesBody\":\"CommentRules_commentRulesBody__3oqTL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchCnt\":\"Search_searchCnt__38Ues\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Overlay_overlay__1urC2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"AdminPanelContainer_border__2RyGz\",\"itemContainer\":\"AdminPanelContainer_itemContainer__1Z5qq\",\"addArticle\":\"AdminPanelContainer_addArticle__1v5mA\",\"articles\":\"AdminPanelContainer_articles__c3vDP\"};","export default __webpack_public_path__ + \"static/media/gooicon.35bcce80.png\";","export default __webpack_public_path__ + \"static/media/powerplant.e7b7fee7.jpg\";","import firebase from \"firebase/app\";\r\nimport \"firebase/storage\";\r\nimport \"firebase/database\";\r\nimport \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDDpLMfCuKs4jQJwf_5xsNQ5VuSBPZtIDk\",\r\n  authDomain: \"klix-74c29.firebaseapp.com\",\r\n  databaseURL:\r\n    \"https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"klix-74c29\",\r\n  storageBucket: \"klix-74c29.appspot.com\",\r\n  messagingSenderId: \"121815054131\",\r\n  appId: \"1:121815054131:web:d4fc6a7fc766feb7897046\",\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nconst storage = firebase.storage();\r\nconst db = firebase.database();\r\nconst auth = firebase.auth();\r\n\r\nexport { auth, storage, db, firebase as default };\r\n","import { createContext, useCallback, useState, useEffect, useRef } from \"react\";\r\nimport { auth, db } from \"../firebase\";\r\n\r\nconst LoginContext = createContext({\r\n  token: \"\",\r\n  isLoggedIn: false,\r\n  user: {\r\n    uId: \"\",\r\n    displayName: \"\",\r\n    gender: \"\",\r\n    avatarColor: \"\",\r\n    banned: false,\r\n    registered: \"\",\r\n  },\r\n  overlay: false,\r\n  signUp: (uId, displayName, time) => {},\r\n  setUserObj: () => {},\r\n  login: (token) => {},\r\n  logout: () => {},\r\n  handleOverlay: () => {},\r\n});\r\n\r\nconst calculateRemainingTime = (expirationTime) => {\r\n  const currentTime = new Date().getTime();\r\n  const adjExpirationTime = new Date(expirationTime).getTime();\r\n  const remainingDuration = adjExpirationTime - currentTime;\r\n  // return 5000;\r\n  return remainingDuration;\r\n};\r\n\r\nconst retrieveStoredToken = () => {\r\n  const storedToken = localStorage.getItem(\"token\");\r\n  const storedExpirationDate = localStorage.getItem(\"expirationTime\");\r\n\r\n  const remainingTime = calculateRemainingTime(storedExpirationDate);\r\n\r\n  if (remainingTime <= 60000) {\r\n    //60kms = 1minute\r\n    // 3595000 -> more than 5s\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"expirationTime\");\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    token: storedToken,\r\n    duration: remainingTime,\r\n  };\r\n};\r\n\r\nexport const LoginContextProvider = (props) => {\r\n  const tokenData = retrieveStoredToken();\r\n  // alert(tokenData.token);\r\n  let initialToken;\r\n  if (tokenData) {\r\n    initialToken = tokenData.token;\r\n  }\r\n\r\n  const userObjInitial = {\r\n    uId: \"\",\r\n    displayName: \"\",\r\n    gender: \"Jo≈° niste odabrali\",\r\n    avatarColor: \"c1c1c1\",\r\n    banned: \"Ne\",\r\n    registered: \"\",\r\n  };\r\n  const [userObj, setUserObj] = useState(\r\n    JSON.parse(localStorage.getItem(\"userObj\")) || userObjInitial\r\n  );\r\n  const [token, setToken] = useState(initialToken);\r\n  const curUser = auth.currentUser;\r\n  const userIsLoggedIn =\r\n    (!!token && userObj.displayName) ||\r\n    (localStorage.getItem(\"rememberMe\") && userObj.displayName);\r\n\r\n  const [overlay, setOverlay] = useState(false);\r\n  const logoutTimer = useRef(null);\r\n\r\n  const handleOverlay = () => {\r\n    if (overlay) {\r\n      setOverlay(false);\r\n    } else {\r\n      setOverlay(true);\r\n    }\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   console.log('rerender');\r\n  //   console.log(userObj);\r\n  //   console.log(userIsLoggedIn);\r\n  // });\r\n\r\n  useEffect(() => {\r\n    if (!logoutTimer.current && tokenData) {\r\n      const timer = retrieveStoredToken();\r\n      logoutTimer.current = setTimeout(logoutHandler, timer.duration);\r\n    }\r\n    // auth.onAuthStateChanged((user) => {\r\n    //   if (user) {\r\n    //     const dbRef = db.ref();\r\n    //     dbRef\r\n    //       .child(\"users\")\r\n    //       .get()\r\n    //       .then((snapshot) => {\r\n    //         if (snapshot.exists) {\r\n    //           console.log(snapshot.val());\r\n    //           const data = snapshot.val();\r\n    //           for (let key in data) {\r\n    //             if (data[key].uId === user.uid) {\r\n    //               setUserObj({ ...data[key] });\r\n    //             }\r\n    //           }\r\n    //         }\r\n    //       });\r\n    //   }\r\n    // });\r\n\r\n    // window.addEventListener(\"beforeunload\", () => {\r\n    //   setToken(null);\r\n    //   localStorage.removeItem(\"token\");\r\n    //   localStorage.removeItem(\"expirationTime\");\r\n    //   localStorage.removeItem(\"userObj\");\r\n    //   setUserObj(userObjInitial);\r\n    //   if (logoutTimer) {\r\n    //     clearTimeout(logoutTimer);\r\n    //   }\r\n    // });\r\n    return () => {\r\n      // logoutHandler();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (curUser) {\r\n      // localStorage.setItem('userObj', JSON.stringify(userObj));\r\n      console.log(\"userhere\");\r\n    }\r\n  }, [curUser]);\r\n\r\n  useEffect(() => {\r\n    if (userObj && curUser) {\r\n      console.log(userObj);\r\n      localStorage.setItem(\"userObj\", JSON.stringify(userObj));\r\n    }\r\n  }, [userObj]);\r\n\r\n  const signUp = (uid, displayName, date) => {\r\n    console.log(\"signupstart\");\r\n    const userObjCopy = { ...userObj, displayName, uId: uid };\r\n    const dbRef = db.ref(`/users/${uid}/userData`);\r\n    dbRef\r\n      .get()\r\n      .then((snapshot) => {\r\n        if (snapshot.exists) {\r\n          console.log(\"signupsuccess\");\r\n          console.log(snapshot.val());\r\n          const data = snapshot.val();\r\n          if (data) {\r\n            setUserObj({ ...data }); //for email password always, cuz u can only sign up with fb or google first and then u always go into else. and then when u add a password then user will exist and u just take the data from the db and set it to userobj\r\n          } else {\r\n            setUserObj({ ...userObjCopy, registered: date });\r\n            auth.onAuthStateChanged((user) => {\r\n              if (user) {\r\n                user.getIdToken(true).then((idToken) => {\r\n                  fetch(\r\n                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${uid}/userData.json?auth=${idToken}`,\r\n                    {\r\n                      method: \"PUT\",\r\n                      body: JSON.stringify({\r\n                        ...userObjCopy,\r\n                        registered: date,\r\n                      }),\r\n                      headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                      },\r\n                    }\r\n                  )\r\n                    .then((response) => response.json())\r\n                    .then((data) => console.log(data));\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const logoutHandler = useCallback(() => {\r\n    setToken(null);\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"expirationTime\");\r\n    localStorage.removeItem(\"userObj\");\r\n    localStorage.removeItem(\"rememberMe\");\r\n    setUserObj(userObjInitial);\r\n    if (logoutTimer.current) {\r\n      clearTimeout(logoutTimer.current);\r\n    }\r\n    auth.signOut();\r\n  }, []);\r\n\r\n  const loginHandler = (token, expirationTime) => {\r\n    console.log(\"signin\");\r\n    setToken(token);\r\n    console.log(token);\r\n    localStorage.setItem(\"token\", token);\r\n    localStorage.setItem(\"expirationTime\", expirationTime);\r\n    // sessionStorage.setItem(\"randomkey\", \"randomtxt\");\r\n    // document.cookie = \"cookiename=cookieval\";\r\n\r\n    const remainingTime = calculateRemainingTime(expirationTime);\r\n\r\n    logoutTimer.current = setTimeout(logoutHandler, remainingTime);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (tokenData) {\r\n      console.log(tokenData.duration);\r\n      logoutTimer.current = setTimeout(logoutHandler, tokenData.duration);\r\n    }\r\n  }, [tokenData, logoutHandler]);\r\n\r\n  const LoginContextValue = {\r\n    token,\r\n    isLoggedIn: userIsLoggedIn,\r\n    user: userObj,\r\n    overlay: overlay,\r\n    signUp: signUp,\r\n    setUserObj,\r\n    login: loginHandler,\r\n    logout: logoutHandler,\r\n    handleOverlay,\r\n  };\r\n\r\n  return (\r\n    <LoginContext.Provider value={LoginContextValue}>\r\n      {props.children}\r\n    </LoginContext.Provider>\r\n  );\r\n};\r\n\r\nexport default LoginContext;\r\n","import React, { forwardRef, useEffect, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport s from \"./Dropdown.module.css\";\r\n\r\nconst Dropdown = forwardRef(({ showHide }, ref) => {\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    console.log(ref);\r\n    if (ref.current.nextSibling.id.includes(\"tagsCnt\")) {\r\n      ref.current.nextSibling.style.cssText += \";margin-top:2rem !important;\";\r\n    } else {\r\n      ref.current.nextSibling.children[0].style.cssText +=\r\n        \";margin-top:2rem !important;\";\r\n    }\r\n  });\r\n  useEffect(() => {\r\n    const html = document.getElementsByTagName(\"html\");\r\n    html[0].style.scrollBehavior = \"smooth\";\r\n    setTimeout(() => {\r\n      window.scrollTo(0, 0);\r\n      html[0].style.scrollBehavior = \"auto\";\r\n    }, 50);\r\n  }, []);\r\n\r\n  const handleFn = (route) => {\r\n    showHide(false);\r\n    if (history.location.pathname === route) {\r\n      ref.current.nextSibling.children[0].style.cssText +=\r\n        \";margin-top:10rem !important;\";\r\n    } else {\r\n      if (ref.current.nextSibling.id.includes(\"tagsCnt\")) {\r\n        ref.current.nextSibling.style.cssText +=\r\n          \";margin-top:7.5rem !important;\";\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id={s.dropdown} ref={ref}>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/\")} to=\"/\">\r\n            <span id={s.poƒçetna}></span>\r\n            <h3>Naslovnica</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/najnovije\">\r\n            <span></span>\r\n            <p>Najnovije</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link\r\n            onClick={() => {\r\n              handleFn();\r\n            }}\r\n            to=\"/najƒçitanije\"\r\n          >\r\n            <span></span>\r\n            <p>Najƒçitanije</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link\r\n            onClick={() => {\r\n              handleFn();\r\n            }}\r\n            to=\"/popularno\"\r\n          >\r\n            <span></span>\r\n            <p>Popularno</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link\r\n            onClick={() => {\r\n              handleFn();\r\n            }}\r\n            to=\"/vremenska prognoza\"\r\n          >\r\n            <span></span>\r\n            <p>Vremenska prognoza</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link\r\n            onClick={() => {\r\n              handleFn();\r\n            }}\r\n            to=\"/Dojavi vijest\"\r\n          >\r\n            <span></span>\r\n            <p>Dojavi vijest</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <span></span>\r\n          <p>Forum</p>\r\n        </div>\r\n      </div>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/Vijesti\")} to=\"/Vijesti\">\r\n            <span id={s.vijesti}></span>\r\n            <h3>Vijesti</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Vijesti/BiH\">\r\n            <span></span>\r\n            <p>BiH</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Vijesti/Regija\">\r\n            <span></span>\r\n            <p>Regija</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Vijesti/Svijet\">\r\n            <span></span>\r\n            <p>Svijet</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Vijesti/Dijaspora\">\r\n            <span></span>\r\n            <p>Dijaspora</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Vijesti/Crna hronika\">\r\n            <span></span>\r\n            <p>Crna hronika</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Vijesti/Humanitarne akcije\">\r\n            <span></span>\r\n            <p>Humanitarne akcije</p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/Biznis\")} to=\"/Biznis\">\r\n            <span id={s.biznis}></span>\r\n            <h3>Biznis</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Biznis/Privreda\">\r\n            <span></span>\r\n            <p>Privreda</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Biznis/Finansije\">\r\n            <span></span>\r\n            <p>Finansije</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Biznis/Investicije\">\r\n            <span></span>\r\n            <p>Investicije</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Biznis/Smart Cash\">\r\n            <span></span>\r\n            <p>Smart Cash</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Biznis/Berza\">\r\n            <span></span>\r\n            <p>Berza</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Biznis/Startupi\">\r\n            <span></span>\r\n            <p>Startupi</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Biznis/Posao\">\r\n            <span></span>\r\n            <p>Posao</p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/Sport\")} to=\"/Sport\">\r\n            <span id={s.sport}></span>\r\n            <h3>Sport</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Nogomet\">\r\n            <span></span>\r\n            <p>Nogomet</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Ko≈°arka\">\r\n            <span></span>\r\n            <p>Ko≈°arka</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Tenis\">\r\n            <span></span>\r\n            <p>Tenis</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Rukomet\">\r\n            <span></span>\r\n            <p>Rukomet</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Formula 1\">\r\n            <span></span>\r\n            <p>Formula 1</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Skijanje\">\r\n            <span></span>\r\n            <p>Skijanje</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Atletika\">\r\n            <span></span>\r\n            <p>Atletika</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Borilaƒçki sportovi\">\r\n            <span></span>\r\n            <p>Borilaƒçki sportovi</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Sport/Plivanje\">\r\n            <span></span>\r\n            <p>Plivanje</p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/Magazin\")} to=\"/Magazin\">\r\n            <span id={s.magazin}></span>\r\n            <h3>Magazin</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Magazin/Kultura\">\r\n            <span></span>\r\n            <p>Kultura</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Magazin/Muzika\">\r\n            <span></span>\r\n            <p>Muzika</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Magazin/Film-TV\">\r\n            <span></span>\r\n            <p>Film/TV</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Magazin/Showbiz\">\r\n            <span></span>\r\n            <p>Showbiz</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Magazin/Zanimljivosti\">\r\n            <span></span>\r\n            <p>Zanimljivosti</p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/Lifestyle\")} to=\"/Lifestyle\">\r\n            <span id={s.lifestyle}></span>\r\n            <h3>Lifestyle</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Moda i ljepota\">\r\n            <span></span>\r\n            <p>Moda i ljepota</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Zdravlje\">\r\n            <span></span>\r\n            <p>Zdravlje</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Veze i seks\">\r\n            <span></span>\r\n            <p>Veze i seks</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Gastro\">\r\n            <span></span>\r\n            <p>Gastro</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Kuƒáa i ured\">\r\n            <span></span>\r\n            <p>Kuƒáa i ured</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Putovanja\">\r\n            <span></span>\r\n            <p>Putovanja</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Bebe\">\r\n            <span></span>\r\n            <p>Bebe</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Fitness\">\r\n            <span></span>\r\n            <p>Fitness</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Lifestyle/Ljubimci\">\r\n            <span></span>\r\n            <p>Ljubimci</p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/Scitech\")} to=\"/Scitech\">\r\n            <span id={s.scitech}></span>\r\n            <h3>Scitech</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Scitech/Nauka\">\r\n            <span></span>\r\n            <p>Nauka</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Scitech/Tehnologija\">\r\n            <span></span>\r\n            <p>Tehnologija</p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <div className={s.dropdownColumn}>\r\n        <div className={s.dropdownItemHeader}>\r\n          <Link onClick={() => handleFn(\"/Auto\")} to=\"/Auto\">\r\n            <span id={s.auto}></span>\r\n            <h3>Auto</h3>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Auto/Testovi\">\r\n            <span></span>\r\n            <p>Testovi</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Auto/Noviteti\">\r\n            <span></span>\r\n            <p>Noviteti</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Auto/Koncepti\">\r\n            <span></span>\r\n            <p>Koncepti</p>\r\n          </Link>\r\n        </div>\r\n        <div className={s.dropdownColumnItem}>\r\n          <Link onClick={() => handleFn()} to=\"/Auto/Tuning\">\r\n            <span></span>\r\n            <p>Tuning</p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Dropdown;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport s from \"./Search.module.css\";\r\n\r\nconst Search = () => {\r\n  const searchInputRef = useRef();\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    searchInputRef.current.focus();\r\n  }, []);\r\n\r\n  const handleEnter = (e) => {\r\n    const { value } = e.target;\r\n    if (e.keyCode === 13) {\r\n      if (value.length >= 3) {\r\n        history.push(`/pretraga?q=${value}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id={s.searchCnt}>\r\n      <i class=\"fas fa-search\"></i>\r\n      <input\r\n        onKeyDown={handleEnter}\r\n        ref={searchInputRef}\r\n        placeholder=\"pretra≈æi\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoginContext from \"../../context\";\r\nimport Dropdown from \"../Dropdown/Dropdown\";\r\nimport s from \"./Nav.module.css\";\r\nimport Search from \"./Search\";\r\n\r\nconst Nav = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const isLogged = ctx.isLoggedIn;\r\n  const dropdownRef = useRef();\r\n  const headerRef = useRef();\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [search, setSearch] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <header id={s.navHeader} ref={headerRef}>\r\n        {!search ? (\r\n          <>\r\n            <div id={s.logo}>\r\n              <Link onClick={() => setShowDropdown(false)} to=\"/\">\r\n                {/* <h1>plus</h1> */}\r\n                <svg\r\n                  className={`${s.wlogo} ${s.hlogo}`}\r\n                  id=\"logo\"\r\n                  data-name=\"logo\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 57.93 24\"\r\n                >\r\n                  <defs>\r\n                    <style\r\n                      dangerouslySetInnerHTML={{\r\n                        __html:\r\n                          \".cls-1{fill:#1599c9;}.cls-2,.cls-3{fill:#6a696e;}.cls-3{fill-rule:evenodd;}\",\r\n                      }}\r\n                    />\r\n                  </defs>\r\n                  <title>Klix logo</title>\r\n                  <polygon\r\n                    className=\"cls-1\"\r\n                    points=\"42.81 4.37 38.48 8.69 43.98 14.18 38.48 19.68 42.81 24 52.63 14.18 42.81 4.37\"\r\n                  />\r\n                  <rect\r\n                    className=\"cls-2\"\r\n                    x=\"29.44\"\r\n                    y=\"4.74\"\r\n                    width=\"6.32\"\r\n                    height=\"18.95\"\r\n                  />\r\n                  <rect\r\n                    className=\"cls-2\"\r\n                    x=\"20.33\"\r\n                    width=\"6.32\"\r\n                    height=\"23.68\"\r\n                  />\r\n                  <rect className=\"cls-2\" width=\"6.32\" height=\"23.68\" />\r\n                  <polygon\r\n                    className=\"cls-3\"\r\n                    points=\"17.86 8.76 13.58 4.47 8.08 9.97 3.8 14.25 8.08 18.54 13.24 23.7 17.53 23.7 17.53 19.41 12.37 14.25 17.86 8.76\"\r\n                  />\r\n                  <polygon\r\n                    className=\"cls-2\"\r\n                    points=\"57.93 8.69 53.18 13.56 48.86 9.24 53.6 4.37 57.93 8.69\"\r\n                  />\r\n                  <polygon\r\n                    className=\"cls-2\"\r\n                    points=\"48.86 19.12 53.6 24 57.93 19.68 53.18 14.8 48.86 19.12\"\r\n                  />\r\n                </svg>\r\n              </Link>\r\n            </div>\r\n            <ul id={s.headerUl}>\r\n              <li>\r\n                <Link\r\n                  onClick={() => setShowDropdown(false)}\r\n                  to={{ pathname: \"/Vijesti\" }}\r\n                >\r\n                  <span className={s.box}></span>Vijesti\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  onClick={() => setShowDropdown(false)}\r\n                  to={{ pathname: \"/Biznis\" }}\r\n                >\r\n                  <span className={s.box}></span>Biznis\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  onClick={() => setShowDropdown(false)}\r\n                  to={{ pathname: \"/Sport\" }}\r\n                >\r\n                  <span className={s.box}></span>Sport\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  onClick={() => setShowDropdown(false)}\r\n                  to={{ pathname: \"/Magazin\" }}\r\n                >\r\n                  <span className={s.box}></span>Magazin\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  onClick={() => setShowDropdown(false)}\r\n                  to={{ pathname: \"/Lifestyle\" }}\r\n                >\r\n                  <span className={s.box}></span>Lifestyle\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  onClick={() => setShowDropdown(false)}\r\n                  to={{ pathname: \"/Scitech\" }}\r\n                >\r\n                  <span className={s.box}></span>Scitech\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  onClick={() => setShowDropdown(false)}\r\n                  to={{ pathname: \"/Auto\" }}\r\n                >\r\n                  <span className={s.box}></span>Auto\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <span className={s.box}></span>Forum\r\n              </li>\r\n            </ul>\r\n          </>\r\n        ) : (\r\n          <Search />\r\n        )}\r\n        <div id={s.bundle}>\r\n          {search ? (\r\n            <i\r\n              onClick={() => setSearch((old) => !old)}\r\n              class=\"fas fa-times\"\r\n              style={{ fontSize: \"2rem\" }}\r\n            ></i>\r\n          ) : (\r\n            <i\r\n              onClick={() => setSearch((old) => !old)}\r\n              class=\"fas fa-search\"\r\n            ></i>\r\n          )}\r\n          {!search ? (\r\n            <Link\r\n              onClick={() => setShowDropdown(false)}\r\n              to={\r\n                ctx.user.displayName\r\n                  ? `/profil/${ctx.user.displayName}`\r\n                  : \"/login\"\r\n              }\r\n            >\r\n              {!ctx.isLoggedIn && <i class=\"far fa-user\"></i>}\r\n\r\n              {ctx.isLoggedIn && (\r\n                <i\r\n                  class=\"fas fa-user\"\r\n                  style={{\r\n                    backgroundColor: `#${ctx.user.avatarColor}`,\r\n                    color: \"#fff\",\r\n                    padding: \".7rem\",\r\n                    borderRadius: \".3rem\",\r\n                    fontSize: \"1.3rem\",\r\n                  }}\r\n                ></i>\r\n              )}\r\n            </Link>\r\n          ) : null}\r\n          {!showDropdown ? (\r\n            <i\r\n              onClick={() => {\r\n                setShowDropdown((old) => !old);\r\n                if (headerRef.current.nextSibling.id.includes(\"borderTwo\")) {\r\n                  headerRef.current.nextSibling.style.margin = \"2rem auto 5rem\";\r\n                }\r\n              }}\r\n              class=\"fas fa-bars\"\r\n            ></i>\r\n          ) : (\r\n            <i\r\n              style={{ fontSize: \"2rem\" }}\r\n              onClick={() => {\r\n                setShowDropdown((old) => !old);\r\n                if (\r\n                  headerRef.current.nextSibling.nextSibling.id.includes(\r\n                    \"tagsCnt\"\r\n                  )\r\n                ) {\r\n                  headerRef.current.nextSibling.nextSibling.removeAttribute(\r\n                    \"style\"\r\n                  );\r\n                  headerRef.current.nextSibling.nextSibling.setAttribute(\r\n                    \"style\",\r\n                    \"margin-top: 7.5rem !important;\"\r\n                  );\r\n                } else if (\r\n                  headerRef.current.nextSibling.nextSibling.id.includes(\r\n                    \"borderTwo\"\r\n                  )\r\n                ) {\r\n                  headerRef.current.nextSibling.nextSibling.style.margin =\r\n                    \"10rem auto 5rem\";\r\n                } else {\r\n                  console.log(\r\n                    headerRef.current.nextSibling.nextSibling.children[0]\r\n                  );\r\n                  headerRef.current.nextSibling.nextSibling.children[0].removeAttribute(\r\n                    \"style\"\r\n                  );\r\n                  headerRef.current.nextSibling.nextSibling.children[0].setAttribute(\r\n                    \"style\",\r\n                    \"margin-top: 10rem;\"\r\n                  );\r\n                }\r\n              }}\r\n              class=\"fas fa-times\"\r\n            ></i>\r\n          )}\r\n        </div>\r\n      </header>\r\n      {showDropdown && (\r\n        <Dropdown showHide={setShowDropdown} ref={dropdownRef} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Nav;\r\n","import React, {\r\n  forwardRef,\r\n  useContext,\r\n  useEffect,\r\n  useImperativeHandle,\r\n  useState,\r\n} from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport LoginContext from \"../../context\";\r\nimport s from \"./Overlay.module.css\";\r\n\r\nconst Overlay = (props, ref) => {\r\n  const ctx = useContext(LoginContext);\r\n  const handleClick = (e) => {\r\n    const id = e.target.id;\r\n    if (\r\n      (ctx.overlay && id.includes(\"overlay\")) ||\r\n      (ctx.overlay && e.target.textContent === \"Ne\")\r\n    ) {\r\n      ctx.handleOverlay();\r\n    } else if (ctx.overlay && e.target.textContent === \"Da\") {\r\n      props.handleConfirm();\r\n      ctx.handleOverlay();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // return () => {\r\n    //   alert('d');\r\n    //   setHide(false);\r\n    // };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      id={s.overlay}\r\n      onClick={handleClick}\r\n      ref={ref}\r\n      onMouseDown={props.handleCloseOverlay}\r\n      style={\r\n        props.navZ && {\r\n          zIndex: 1,\r\n        }\r\n      }\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.forwardRef(Overlay);\r\n","import React from 'react';\r\n\r\nimport s from './Modal.module.css';\r\n\r\nconst Modal = (props, ref) => {\r\n  return (\r\n    <div id={s.modal} ref={ref} onClick={props.handleClick}>\r\n      <div>Da li ste sigurni?</div>\r\n      <div id={s.modalBtns}>\r\n        <button>Da</button>\r\n        <button>Ne</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.forwardRef(Modal);\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport s from \"./ProgressBar.module.css\";\r\n\r\nconst ProgressBar = (props, ref) => {\r\n  return (\r\n    <div id={s.progressParent} ref={ref}>\r\n      {!props.articleAdded &&\r\n        props.progress.map((item) => {\r\n          return (\r\n            <div className={s.progressItem} key={uuid()}>\r\n              <div>\r\n                <h3>{item.imageName}</h3>\r\n              </div>\r\n              <div className={s.progressBar}>\r\n                <div\r\n                  className={s.currentProgress}\r\n                  // style={{ width: `${item.percent}%` }}\r\n                ></div>\r\n              </div>\r\n              <div className={s.done}>\r\n                <i class=\"fas fa-check\"></i>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      {props.articleAdded && (\r\n        <div id={s.finished}>\r\n          <h3>ƒålanak je uspje≈°no postavljen u bazu podataka.</h3>\r\n          <button>Ok</button>\r\n        </div>\r\n      )}\r\n\r\n      {/* <div className={s.progressItem}>\r\n        <div>\r\n          <h3>TITLE</h3>\r\n        </div>\r\n        <div className={s.progressBar}>\r\n          <div className={s.currentProgress}></div>\r\n        </div>\r\n      </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.forwardRef(ProgressBar);\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport parse from \"html-react-parser\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport s from \"./AddArticle.module.css\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport LoginContext from \"../../context\";\r\nimport { auth, db, storage } from \"../../firebase\";\r\nimport ProgressBar from \"../ProgressBar/ProgressBar\";\r\nimport {\r\n  useHistory,\r\n  useLocation,\r\n} from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { timeDifference } from \"./EditArticle/EditArticle\";\r\n\r\nexport const subcategories = {\r\n  poƒçetna: [\r\n    \"Vijesti\",\r\n    \"Biznis\",\r\n    \"Sport\",\r\n    \"Magazin\",\r\n    \"Lifestyle\",\r\n    \"Auto\",\r\n    \"Scitech\",\r\n  ],\r\n  vijesti: [\r\n    \"BiH\",\r\n    \"Regija\",\r\n    \"Svijet\",\r\n    \"Dijaspora\",\r\n    \"Crna hronika\",\r\n    \"Humanitarne akcije\",\r\n  ],\r\n  biznis: [\r\n    \"Privreda\",\r\n    \"Finansije\",\r\n    \"Investicije\",\r\n    \"Smart Cash\",\r\n    \"Berza\",\r\n    \"Startupi\",\r\n    \"Posao\",\r\n  ],\r\n  sport: [\r\n    \"Nogomet\",\r\n    \"Ko≈°arka\",\r\n    \"Tenis\",\r\n    \"Rukomet\",\r\n    \"Formula 1\",\r\n    \"Skijanje\",\r\n    \"Atletika\",\r\n    \"Borilaƒçki sportovi\",\r\n    \"Plivanje\",\r\n  ],\r\n  magazin: [\"Kultura\", \"Muzika\", \"Film/TV\", \"Showbiz\", \"Zanimljivosti\"],\r\n  lifestyle: [\r\n    \"Moda i ljepota\",\r\n    \"Zdravlje\",\r\n    \"Veze i seks\",\r\n    \"Gastro\",\r\n    \"Kuƒáa i ured\",\r\n    \"Putovanja\",\r\n    \"Bebe\",\r\n    \"Fitness\",\r\n    \"Ljubimci\",\r\n  ],\r\n  scitech: [\"Nauka\", \"Tehnologija\"],\r\n  auto: [\"Testovi\", \"Noviteti\", \"Koncepti\", \"Tuning\"],\r\n};\r\n\r\nconst AddArticle = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const [paste, setPaste] = useState(false);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [embed, setEmbed] = useState(false);\r\n  const [selStart, setSelStart] = useState({\r\n    enter: false,\r\n    num: 0,\r\n  });\r\n  const [imageArray, setImageArray] = useState([]);\r\n  const [imagePreview, setImagePreview] = useState({});\r\n  const [savedNames, setSavedNames] = useState([]);\r\n  const [deleteMode, setDeleteMode] = useState(false);\r\n  const [tags, setTags] = useState([]);\r\n  const [progress, setCurProgress] = useState([]);\r\n  const [articleAdded, setArticleAdded] = useState(false);\r\n  const [sending, setSending] = useState(false);\r\n  const [subcategoriesMap, setSubcategoriesMap] = useState([]);\r\n  const [saveSubcat, setSaveSubcat] = useState(\"BiH\");\r\n  const [showSecondList, setShowSecondList] = useState(false);\r\n  const [currentList, setCurrentList] = useState(\"ul\");\r\n  const [lists, setLists] = useState([]);\r\n  const [subCatInit, setSubCatInit] = useState(false);\r\n\r\n  //dragging\r\n  const [dragIndex, setDragIndex] = useState(0);\r\n  const [replacedIdx, setReplacedIdx] = useState(0);\r\n  const [clone, setClone] = useState(null);\r\n  const [storeRef, setStoreRef] = useState(null);\r\n  const [drag, setDrag] = useState(false);\r\n\r\n  const didMountRef = useRef(false);\r\n  const postaviSlikeText = useRef();\r\n  const postaviSlikeBorder = useRef();\r\n  const textareaRef = useRef();\r\n  const imgCnt = useRef();\r\n  const overlayRef = useRef();\r\n  const tagContainer = useRef();\r\n  const titles = useRef();\r\n  const captionText = useRef();\r\n  const categorySelect = useRef();\r\n  const progressRef = useRef();\r\n  const sendArticleOverlay = useRef();\r\n  const commentsRadio = useRef();\r\n  const subcategorySelect = useRef();\r\n  const isPromo = useRef();\r\n\r\n  useEffect(() => {\r\n    console.log(progress);\r\n  }, [progress]);\r\n\r\n  useEffect(() => {}, []);\r\n  useEffect(() => {\r\n    if (subCatInit) {\r\n      setSaveSubcat(location.state.articleData.subCategory);\r\n      setSubCatInit(false);\r\n    }\r\n    console.log(subcategoriesMap);\r\n    console.log(didMountRef.current);\r\n  }, [subcategoriesMap, subCatInit]);\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n      alert(\"locationhere\");\r\n      console.log(location);\r\n      const { articleData } = location.state;\r\n      const strDate = timeDifference(articleData.date);\r\n      console.log(strDate);\r\n      titles.current.children[0].value = articleData.title;\r\n      titles.current.children[1].value =\r\n        articleData.sponsored && articleData.subTitle !== \"PROMO\"\r\n          ? `PROMO ${articleData.subTitle}`\r\n          : articleData.sponsored && articleData.subTitle === \"PROMO\"\r\n          ? \"PROMO\"\r\n          : articleData.subTitle;\r\n      if (articleData.sponsored) {\r\n        commentsRadio.current.children[0].children[1].disabled = true;\r\n        commentsRadio.current.children[1].children[1].disabled = true;\r\n      }\r\n      textareaRef.current.value = articleData.articleText;\r\n      if (articleData.tags) {\r\n        setTags([...articleData.tags]);\r\n      }\r\n      if (articleData.listOrder) {\r\n        setLists([...articleData.listOrder]);\r\n      }\r\n      if (articleData.commentsAllowed === \"Da\") {\r\n        commentsRadio.current.children[0].children[1].checked = true;\r\n      } else {\r\n        commentsRadio.current.children[1].children[1].checked = true;\r\n      }\r\n      console.log(subcategories[articleData.category.toLowerCase()]);\r\n      console.log(articleData.subCategory);\r\n      categorySelect.current.value = articleData.category;\r\n      const event = new Event(\"change\", { bubbles: true });\r\n      categorySelect.current.dispatchEvent(event);\r\n      setSubCatInit(true); //init subcategory in select when first loading an art which we want to edit\r\n      if (typeof articleData.imageText === \"string\") {\r\n        captionText.current.value = articleData.imageText;\r\n      } else {\r\n        let txtString = \"\";\r\n        articleData.imageText.forEach((imgTxt, i) => {\r\n          if (i !== articleData.imageText.length - 1) {\r\n            txtString = txtString.concat(`${imgTxt[1]} || `);\r\n          } else {\r\n            txtString = txtString.concat(`${imgTxt[1]}`);\r\n          }\r\n        });\r\n        captionText.current.value = txtString;\r\n      }\r\n      const locationImgArray = [];\r\n      let blobToFileArray = [];\r\n      articleData.imageText.forEach((img, i) => {\r\n        locationImgArray.push({\r\n          url: img[0],\r\n          checked: \"false\",\r\n          name: img[2] ? img[2] : `random${i}`,\r\n        });\r\n      });\r\n      for (let i = 0; i < locationImgArray.length; i++) {\r\n        // fetch(locationImgArray[i].url)\r\n        //   .then((response) => response.blob())\r\n        //   .then((blob) => {\r\n        //     const file = new File([blob], locationImgArray[i].name, {\r\n        //       type: blob.type,\r\n        //     });\r\n        //     blobToFileArray[i] = file;\r\n        //     // blobToFileArray.push(file);\r\n        //     if (i === locationImgArray.length - 1) {\r\n        //       setImageArray([...blobToFileArray]);\r\n        //       console.log(blobToFileArray);\r\n        //     }\r\n        //   });\r\n        (async function (cntr) {\r\n          const response = await fetch(locationImgArray[cntr].url);\r\n          const blob = await response.blob();\r\n          const file = new File([blob], locationImgArray[cntr].name, {\r\n            type: blob.type,\r\n          });\r\n          blobToFileArray[cntr] = file;\r\n          if (cntr === locationImgArray.length - 1) {\r\n            setImageArray(blobToFileArray);\r\n          }\r\n        })(i);\r\n      }\r\n      locationImgArray.forEach((imgPre, i) => {\r\n        // (async function () {\r\n        //   const response = await fetch(imgPre.url);\r\n        //   const blob = await response.blob();\r\n        //   const file = new File([blob], imgPre.name, { type: blob.type });\r\n        //   blobToFileArray.push(file);\r\n        //   if (i === locationImgArray.length - 1) {\r\n        //     setImageArray(blobToFileArray);\r\n        //   }\r\n        // })();\r\n      });\r\n      setImagePreview([...locationImgArray]);\r\n    }\r\n  }, [location]);\r\n\r\n  const handleHoverEnter = () => {\r\n    postaviSlikeBorder.current.style.borderColor = \"#3f87e5\";\r\n  };\r\n\r\n  const handleHoverLeave = () => {\r\n    postaviSlikeBorder.current.style.borderColor = \"#d8dee4\";\r\n  };\r\n\r\n  //inserting a diff tag into a tag\r\n\r\n  const handleInsert = (mode) => {\r\n    const selectionStart = textareaRef.current.selectionStart;\r\n    const selectionEnd = textareaRef.current.selectionEnd;\r\n    const { value } = textareaRef.current;\r\n    let start = 0;\r\n    switch (mode) {\r\n      case \"bold\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 3\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"list\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            selectionStart >= start + 6 &&\r\n            selectionStart <= i\r\n          ) {\r\n            let found = 0;\r\n            for (let j = start + 6; j < i; j++) {\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"b\" &&\r\n                value[j + 2] === \">\"\r\n              ) {\r\n                found = j + 1;\r\n              } else if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"/\" &&\r\n                value[j + 2] === \"b\" &&\r\n                value[j + 3] === \">\" &&\r\n                selectionStart >= found &&\r\n                selectionStart <= j + 3\r\n              ) {\r\n                return \"dontAllow\";\r\n              }\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"l\" &&\r\n                value[j + 2] === \"i\" &&\r\n                value[j + 3] === \"n\" &&\r\n                value[j + 4] === \"k\" &&\r\n                value[j + 5] === \">\"\r\n              ) {\r\n                found = j + 1;\r\n              } else if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"/\" &&\r\n                value[j + 2] === \"l\" &&\r\n                value[j + 3] === \"i\" &&\r\n                value[j + 4] === \"n\" &&\r\n                value[j + 5] === \"k\" &&\r\n                value[j + 6] === \">\" &&\r\n                selectionStart >= found &&\r\n                selectionStart <= j + 6\r\n              ) {\r\n                return \"dontAllow\";\r\n              }\r\n            }\r\n            return \"betweenTags\";\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 6\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"embed\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 7\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"link\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            selectionStart >= start + 1 &&\r\n            selectionStart <= i + 6\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleSelect = (mode) => {\r\n    const selectionStart = textareaRef.current.selectionStart;\r\n    const selectionEnd = textareaRef.current.selectionEnd;\r\n    const { value } = textareaRef.current;\r\n    let start = 0;\r\n    //either selStart starts between the tags OR selEnd no other case\r\n    switch (mode) {\r\n      case \"bold\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"b\" &&\r\n              value[i + 3] === \">\" &&\r\n              selectionStart >= start &&\r\n              selectionStart <= i + 3) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"b\" &&\r\n              value[i + 3] === \">\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 4) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"b\" &&\r\n              value[i + 3] === \">\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 4)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"list\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            selectionStart >= start + 6 &&\r\n            selectionEnd <= i\r\n          ) {\r\n            let selectFound = 0;\r\n            for (let j = start + 7; j < i; j++) {\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"b\" &&\r\n                value[j + 2] === \">\"\r\n              ) {\r\n                selectFound = j;\r\n              } else if (\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"b\" &&\r\n                  value[j + 3] === \">\" &&\r\n                  selectionStart >= selectFound &&\r\n                  selectionStart <= j + 3) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"b\" &&\r\n                  value[j + 3] === \">\" &&\r\n                  selectionEnd >= selectFound + 1 &&\r\n                  selectionEnd <= j + 4) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"b\" &&\r\n                  value[j + 3] === \">\" &&\r\n                  selectionStart < selectFound &&\r\n                  selectionEnd > j + 4)\r\n              ) {\r\n                return \"notAllowed\";\r\n              }\r\n              if (\r\n                value[j] === \"<\" &&\r\n                value[j + 1] === \"l\" &&\r\n                value[j + 2] === \"i\" &&\r\n                value[j + 3] === \"n\" &&\r\n                value[j + 4] === \"k\" &&\r\n                value[j + 5] === \">\"\r\n              ) {\r\n                selectFound = j;\r\n              } else if (\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"l\" &&\r\n                  value[j + 3] === \"i\" &&\r\n                  value[j + 4] === \"n\" &&\r\n                  value[j + 5] === \"k\" &&\r\n                  value[j + 6] === \">\" &&\r\n                  selectionStart >= selectFound &&\r\n                  selectionStart <= j + 6) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"l\" &&\r\n                  value[j + 3] === \"i\" &&\r\n                  value[j + 4] === \"n\" &&\r\n                  value[j + 5] === \"k\" &&\r\n                  value[j + 6] === \">\" &&\r\n                  selectionEnd >= selectFound + 1 &&\r\n                  selectionEnd <= j + 7) ||\r\n                (value[j] === \"<\" &&\r\n                  value[j + 1] === \"/\" &&\r\n                  value[j + 2] === \"l\" &&\r\n                  value[j + 3] === \"i\" &&\r\n                  value[j + 4] === \"n\" &&\r\n                  value[j + 5] === \"k\" &&\r\n                  value[j + 6] === \">\" &&\r\n                  selectionStart < selectFound &&\r\n                  selectionEnd > j + 7)\r\n              ) {\r\n                return \"notAllowed\";\r\n              }\r\n            }\r\n            return \"betweenTagsSelect\";\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"s\" &&\r\n              value[i + 5] === \"t\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart >= start &&\r\n              selectionStart <= i + 6) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"s\" &&\r\n              value[i + 5] === \"t\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 7) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"s\" &&\r\n              value[i + 5] === \"t\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 7)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"embed\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"e\" &&\r\n              value[i + 3] === \"m\" &&\r\n              value[i + 4] === \"b\" &&\r\n              selectionStart >= start + 1 &&\r\n              selectionStart <= i + 7) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"e\" &&\r\n              value[i + 3] === \"m\" &&\r\n              value[i + 4] === \"b\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 8) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"e\" &&\r\n              value[i + 3] === \"m\" &&\r\n              value[i + 4] === \"b\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 8)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n      case \"link\":\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (\r\n            value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\"\r\n          ) {\r\n            start = i;\r\n          } else if (\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"n\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart >= start + 1 &&\r\n              selectionStart <= i + 6) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"n\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionEnd >= start + 1 &&\r\n              selectionEnd <= i + 7) ||\r\n            (value[i] === \"<\" &&\r\n              value[i + 1] === \"/\" &&\r\n              value[i + 2] === \"l\" &&\r\n              value[i + 3] === \"i\" &&\r\n              value[i + 4] === \"n\" &&\r\n              value[i + 6] === \">\" &&\r\n              selectionStart < start &&\r\n              selectionEnd > i + 7)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleBold = (e) => {\r\n    // e = e || window.event;\r\n    // e.preventDefault();\r\n    // const str = textareaRef.current.getSelection().toString();\r\n    // alert(typeof str);\r\n    // const result = str.bold();\r\n    // textareaRef.current.value = result;\r\n    e.preventDefault(); //fixes glitchy movement behaviour in the textarea when u click on any insert tag btn\r\n    console.log(textareaRef.current.selectionStart);\r\n    console.log(textareaRef.current.selectionEnd);\r\n    console.log(textareaRef.current.focus);\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleInsert(\"bold\");\r\n      const check2 = handleInsert(\"embed\");\r\n      const check3 = handleInsert(\"link\");\r\n      const check4 = handleInsert(\"list\");\r\n      console.log(check1);\r\n      console.log(check2);\r\n      console.log(check3);\r\n      console.log(check4);\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTags\"\r\n      ) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<b></b>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 3;\r\n      }\r\n    } else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTagsSelect\"\r\n      ) {\r\n        const selectionStart = textareaRef.current.selectionStart;\r\n        const selectionEnd = textareaRef.current.selectionEnd;\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = selectedText.bold();\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 3;\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (lists && lists.length > 0) {\r\n      console.log(lists);\r\n    }\r\n  }, [lists]);\r\n\r\n  const handleList = (e) => {\r\n    e.preventDefault();\r\n    let curClickedList = \"\";\r\n    if (e.target.tagName === \"I\") {\r\n      if (e.target.className.includes(\"ul\")) {\r\n        curClickedList = \"ul\";\r\n      } else {\r\n        curClickedList = \"ol\";\r\n      }\r\n    } else if (e.target.id.includes(\"listOl\")) {\r\n      if (e.target.children[0].className.includes(\"ul\")) {\r\n        curClickedList = \"ul\";\r\n      } else {\r\n        curClickedList = \"ol\";\r\n      }\r\n    } else if (e.target.tagName === \"LI\") {\r\n      if (e.target.children[0].className.includes(\"ul\")) {\r\n        curClickedList = \"ul\";\r\n      } else {\r\n        curClickedList = \"ol\";\r\n      }\r\n    }\r\n    const posOfInsertion = seeWhichList(\r\n      textareaRef.current.value,\r\n      \"adding\",\r\n      textareaRef.current.selectionStart\r\n    );\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      // alert(posOfInsertion);\r\n      const check1 = handleInsert(\"bold\");\r\n      const check2 = handleInsert(\"embed\");\r\n      const check3 = handleInsert(\"link\");\r\n      const check4 = handleInsert(\"list\");\r\n      if (!check1 && !check2 && !check3 && !check4) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<list></list>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 6;\r\n        setLists((old) => {\r\n          console.log(e.target);\r\n          // if (e.target.tagName === \"I\") {\r\n          //   alert(e.target.className);\r\n          // } else if (e.target.id.includes(\"listOl\")) {\r\n          //   alert(e.target.children[0].className);\r\n          // }\r\n          let oldArr = [...old];\r\n          // alert(currentList);\r\n          // alert(typeof currentList);\r\n          // oldArr.push(curClickedList);\r\n          console.log(oldArr);\r\n          oldArr.splice(posOfInsertion, 0, curClickedList);\r\n          console.log(oldArr);\r\n          return oldArr;\r\n        });\r\n      }\r\n    } else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (!check1 && !check2 && !check3 && !check4) {\r\n        const selectionStart = textareaRef.current.selectionStart;\r\n        const selectionEnd = textareaRef.current.selectionEnd;\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = `<list>${selectedText}</list>`;\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 6;\r\n        setLists((old) => {\r\n          console.log(e.target);\r\n          let oldArr = [...old];\r\n          oldArr.splice(posOfInsertion, 0, curClickedList);\r\n          return oldArr;\r\n        });\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEmbed = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      const check = handleInsert(\"bold\");\r\n      const check1 = handleInsert(\"embed\");\r\n      const check2 = handleInsert(\"link\");\r\n      const check3 = handleInsert(\"list\");\r\n      if (!check && !check1 && !check2 && !check3) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<embed></embed>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 7;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check || check1 || check2 || check3) {\r\n        alert(\"hey\");\r\n        // alert(`check1${check1}`);\r\n        // alert(`check2${check2}`);\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n        }, 1);\r\n      }\r\n    } //NOW SELECTING\r\n    else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const selectionStart = textareaRef.current.selectionStart;\r\n      const selectionEnd = textareaRef.current.selectionEnd;\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (!check1 && !check2 && !check3 && !check4) {\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = `<embed>${selectedText}</embed>`;\r\n        console.log(selectedText);\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 7;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = selectionStart;\r\n        }, 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLink = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart === textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleInsert(\"bold\");\r\n      const check2 = handleInsert(\"embed\");\r\n      const check3 = handleInsert(\"link\");\r\n      const check4 = handleInsert(\"list\");\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTags\"\r\n      ) {\r\n        const selStart = textareaRef.current.selectionStart;\r\n        let firstPart = textareaRef.current.value.slice(\r\n          0,\r\n          textareaRef.current.selectionStart\r\n        );\r\n        console.log(firstPart);\r\n        firstPart = firstPart.concat(\"<link></link>\");\r\n        const secondPart = textareaRef.current.value.slice(\r\n          textareaRef.current.selectionStart\r\n        );\r\n        firstPart = firstPart.concat(secondPart);\r\n        textareaRef.current.value = firstPart;\r\n        textareaRef.current.selectionEnd = selStart + 6;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n        }, 1);\r\n      }\r\n    } else if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      const check1 = handleSelect(\"bold\");\r\n      const check2 = handleSelect(\"embed\");\r\n      const check3 = handleSelect(\"link\");\r\n      const check4 = handleSelect(\"list\");\r\n      if (\r\n        (!check1 && !check2 && !check3 && !check4) ||\r\n        check4 === \"betweenTagsSelect\"\r\n      ) {\r\n        const selectionStart = textareaRef.current.selectionStart;\r\n        const selectionEnd = textareaRef.current.selectionEnd;\r\n        let textareaText = textareaRef.current.value;\r\n        let selectedText = textareaText.substring(selectionStart, selectionEnd);\r\n        selectedText = `<link>${selectedText}</link>`;\r\n        textareaText =\r\n          textareaText.slice(0, selectionStart) +\r\n          selectedText +\r\n          textareaText.slice(selectionEnd);\r\n        textareaRef.current.value = textareaText;\r\n        textareaRef.current.selectionEnd = selectionEnd + 6;\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n        }, 1);\r\n      } else if (check1 || check2 || check3 || check4) {\r\n        setTimeout(() => {\r\n          textareaRef.current.focus();\r\n          textareaRef.current.selectionEnd = textareaRef.current.selectionStart;\r\n        }, 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEnter = (e) => {\r\n    // console.log(e.target.value);\r\n    // console.log(e.target.value.split(''));\r\n    const { value } = textareaRef.current;\r\n    const slStart = textareaRef.current.selectionStart;\r\n    const slEnd = textareaRef.current.selectionEnd;\r\n    let enterPosFind = null;\r\n    let insideList = false;\r\n    let enterPos = 0;\r\n    if (e.keyCode === 13) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          !insideList\r\n        ) {\r\n          enterPosFind = i;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\"\r\n        ) {\r\n          if (slStart <= i + 3 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n        }\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\"\r\n        ) {\r\n          enterPosFind = i;\r\n          insideList = true;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\"\r\n        ) {\r\n          if (slStart <= i + 6 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n          insideList = false;\r\n        }\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\"\r\n        ) {\r\n          enterPosFind = i;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\"\r\n        ) {\r\n          if (slStart <= i + 7 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n        }\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          !insideList\r\n          //handle link/b tags inside list\r\n        ) {\r\n          enterPosFind = i;\r\n          insideList = true;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\"\r\n        ) {\r\n          if (slStart <= i + 6 && slStart > enterPosFind) {\r\n            textareaRef.current.readOnly = true;\r\n            setTimeout(() => {\r\n              textareaRef.current.readOnly = false;\r\n            }, 100);\r\n            enterPosFind = 0;\r\n            return;\r\n          }\r\n          insideList = false;\r\n        }\r\n      }\r\n    }\r\n    if (\r\n      e.keyCode !== 46 &&\r\n      e.keyCode !== 37 &&\r\n      e.keyCode !== 38 &&\r\n      e.keyCode !== 39 &&\r\n      e.keyCode !== 40 &&\r\n      e.keyCode !== 35 &&\r\n      e.keyCode !== 36\r\n    ) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\" &&\r\n            slStart < [i + 3] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            value[i + 3] === \">\" &&\r\n            slStart < [i + 4] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart < [i + 6] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart < [i + 7] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\" &&\r\n            value[i + 4] === \"e\" &&\r\n            value[i + 5] === \"d\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart < [i + 7] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            value[i + 3] === \"m\" &&\r\n            value[i + 4] === \"b\" &&\r\n            value[i + 5] === \"e\" &&\r\n            value[i + 6] === \"d\" &&\r\n            value[i + 7] === \">\" &&\r\n            slStart < [i + 8] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart < [i + 6] &&\r\n            slStart >= [i + 1]) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart < [i + 7] &&\r\n            slStart >= [i + 1])\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        }\r\n      }\r\n    } else if (e.keyCode === 46) {\r\n      let startStart = 0;\r\n      let startEnd = 0;\r\n      let listCount = 0;\r\n      let num = undefined;\r\n      let endStart = 0;\r\n      let endEnd = 0;\r\n      const ret = seeWhichList(value, \"deleting\", slStart);\r\n      console.log(ret);\r\n      alert(ret);\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            value[i + 3] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\" &&\r\n            value[i + 4] === \"e\" &&\r\n            value[i + 5] === \"d\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            value[i + 3] === \"m\" &&\r\n            value[i + 4] === \"b\" &&\r\n            value[i + 5] === \"e\" &&\r\n            value[i + 6] === \"d\" &&\r\n            value[i + 7] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i &&\r\n            slEnd === i)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slStart < [i + 3] &&\r\n          slStart >= [i]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"b\" &&\r\n              value[j + 3] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 4);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slStart < [i + 4] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"b\" &&\r\n              value[j + 2] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 3, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 4);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart < [i + 7] &&\r\n          slStart >= [i]\r\n          // (value[i] === '<' &&\r\n          //   value[i + 1] === '/' &&\r\n          //   value[i + 2] === 'e' &&\r\n          //   value[i + 3] === 'm' &&\r\n          //   value[i + 4] === 'b' &&\r\n          //   value[i + 5] === 'e' &&\r\n          //   value[i + 6] === 'd' &&\r\n          //   value[i + 7] === '>' &&\r\n          //   slStart < [i + 8] &&\r\n          //   slStart >= [i + 1])\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 7;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"e\" &&\r\n              value[j + 3] === \"m\" &&\r\n              value[j + 4] === \"b\" &&\r\n              value[j + 5] === \"e\" &&\r\n              value[j + 6] === \"d\" &&\r\n              value[j + 7] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 8);\r\n              // console.log(slice);\r\n              // console.log(slice2);\r\n              // console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slStart < [i + 8] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"e\" &&\r\n              value[j + 2] === \"m\" &&\r\n              value[j + 3] === \"b\" &&\r\n              value[j + 4] === \"e\" &&\r\n              value[j + 5] === \"d\" &&\r\n              value[j + 6] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 7, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 8);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart < [i + 6] &&\r\n          slStart >= [i]\r\n          // (value[i] === '<' &&\r\n          //   value[i + 1] === '/' &&\r\n          //   value[i + 2] === 'l' &&\r\n          //   value[i + 3] === 'i' &&\r\n          //   value[i + 4] === 'n' &&\r\n          //   value[i + 5] === 'k' &&\r\n          //   value[i + 6] === '>' &&\r\n          //   slStart < [i + 7] &&\r\n          //   slStart >= [i + 1])\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 6;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"l\" &&\r\n              value[j + 3] === \"i\" &&\r\n              value[j + 4] === \"n\" &&\r\n              value[j + 5] === \"k\" &&\r\n              value[j + 6] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 7);\r\n              // console.log(slice);\r\n              // console.log(slice2);\r\n              // console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart < [i + 7] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"l\" &&\r\n              value[j + 2] === \"i\" &&\r\n              value[j + 3] === \"n\" &&\r\n              value[j + 4] === \"k\" &&\r\n              value[j + 5] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 6, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 7);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart < [i + 6] &&\r\n          slStart >= [i]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 6;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let k = 0; k < i; k++) {\r\n            if (\r\n              value[k] === \"<\" &&\r\n              value[k + 1] === \"l\" &&\r\n              value[k + 2] === \"i\" &&\r\n              value[k + 3] === \"s\" &&\r\n              value[k + 4] === \"t\" &&\r\n              value[k + 5] === \">\"\r\n            ) {\r\n              listCount++;\r\n            }\r\n          }\r\n          for (let j = i; j < value.length; j++) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"/\" &&\r\n              value[j + 2] === \"l\" &&\r\n              value[j + 3] === \"i\" &&\r\n              value[j + 4] === \"s\" &&\r\n              value[j + 5] === \"t\" &&\r\n              value[j + 6] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, startStart);\r\n              const slice2 = copyTxt2.slice(startEnd, j);\r\n              const slice3 = copyTxt3.splice(j + 7);\r\n              // console.log(slice);\r\n              // console.log(slice2);\r\n              // console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // alert(listCount);\r\n              setTimeout(() => {\r\n                setLists((old) => {\r\n                  let oldArr = [...old];\r\n                  oldArr.splice(listCount, 1);\r\n                  return oldArr;\r\n                });\r\n                listCount = 0;\r\n              }, 10);\r\n              // console.log(newStr);\r\n              textareaRef.current.value = newStr;\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart < [i + 7] &&\r\n          slStart >= [i + 1]\r\n        ) {\r\n          startStart = i;\r\n          startEnd = i + 3;\r\n          const copyTxt1 = textareaRef.current.value.split(\"\");\r\n          const copyTxt2 = textareaRef.current.value.split(\"\");\r\n          const copyTxt3 = textareaRef.current.value.split(\"\");\r\n          for (let k = 0; k < i; k++) {\r\n            if (\r\n              value[k] === \"<\" &&\r\n              value[k + 1] === \"/\" &&\r\n              value[k + 2] === \"l\" &&\r\n              value[k + 3] === \"i\" &&\r\n              value[k + 4] === \"s\" &&\r\n              value[k + 5] === \"t\" &&\r\n              value[k + 6] === \">\"\r\n            ) {\r\n              listCount++;\r\n            }\r\n          }\r\n          for (let j = i; j >= 0; j--) {\r\n            if (\r\n              value[j] === \"<\" &&\r\n              value[j + 1] === \"l\" &&\r\n              value[j + 2] === \"i\" &&\r\n              value[j + 3] === \"s\" &&\r\n              value[j + 4] === \"t\" &&\r\n              value[j + 5] === \">\"\r\n            ) {\r\n              const slice = copyTxt1.splice(0, j);\r\n              const slice2 = copyTxt2.slice(j + 6, startStart);\r\n              const slice3 = copyTxt3.splice(startStart + 7);\r\n              console.log(slice);\r\n              console.log(slice2);\r\n              console.log(slice3);\r\n              let newStr = [slice.join(\"\"), slice2.join(\"\"), slice3.join(\"\")];\r\n              newStr = newStr.join(\"\");\r\n              // console.log(newStr);\r\n              alert(listCount);\r\n              setTimeout(() => {\r\n                setLists((old) => {\r\n                  let oldArr = [...old];\r\n                  oldArr.splice(listCount, 1);\r\n                  return oldArr;\r\n                });\r\n                listCount = 0;\r\n              }, 10);\r\n              textareaRef.current.value = newStr;\r\n\r\n              break;\r\n            }\r\n          }\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n        }\r\n      }\r\n    }\r\n    if (e.keyCode === 8) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"b\" &&\r\n            value[i + 2] === \">\" &&\r\n            slStart === i + 3 &&\r\n            slEnd === i + 3) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"b\" &&\r\n            value[i + 3] === \">\" &&\r\n            slStart === i + 4 &&\r\n            slEnd === i + 4)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"e\" &&\r\n            value[i + 2] === \"m\" &&\r\n            value[i + 3] === \"b\" &&\r\n            value[i + 4] === \"e\" &&\r\n            value[i + 5] === \"d\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i + 7 &&\r\n            slEnd === i + 7) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"e\" &&\r\n            value[i + 3] === \"m\" &&\r\n            value[i + 4] === \"b\" &&\r\n            value[i + 5] === \"e\" &&\r\n            value[i + 6] === \"d\" &&\r\n            value[i + 7] === \">\" &&\r\n            slStart === i + 8 &&\r\n            slEnd === i + 8)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"n\" &&\r\n            value[i + 4] === \"k\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i + 6 &&\r\n            slEnd === i + 6) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"n\" &&\r\n            value[i + 5] === \"k\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i + 7 &&\r\n            slEnd === i + 7)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        } else if (\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"l\" &&\r\n            value[i + 2] === \"i\" &&\r\n            value[i + 3] === \"s\" &&\r\n            value[i + 4] === \"t\" &&\r\n            value[i + 5] === \">\" &&\r\n            slStart === i + 6 &&\r\n            slEnd === i + 6) ||\r\n          (value[i] === \"<\" &&\r\n            value[i + 1] === \"/\" &&\r\n            value[i + 2] === \"l\" &&\r\n            value[i + 3] === \"i\" &&\r\n            value[i + 4] === \"s\" &&\r\n            value[i + 5] === \"t\" &&\r\n            value[i + 6] === \">\" &&\r\n            slStart === i + 7 &&\r\n            slEnd === i + 7)\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n          }, 100);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (\r\n      document.activeElement === textareaRef.current &&\r\n      textareaRef.current.selectionStart !== textareaRef.current.selectionEnd\r\n    ) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 2\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 3\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"b\" &&\r\n          value[i + 2] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 3\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 3\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 4\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"b\" &&\r\n          value[i + 3] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 4\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"e\" &&\r\n          value[i + 2] === \"m\" &&\r\n          value[i + 3] === \"b\" &&\r\n          value[i + 4] === \"e\" &&\r\n          value[i + 5] === \"d\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 8\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"e\" &&\r\n          value[i + 3] === \"m\" &&\r\n          value[i + 4] === \"b\" &&\r\n          value[i + 5] === \"e\" &&\r\n          value[i + 6] === \"d\" &&\r\n          value[i + 7] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 8\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 5\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"n\" &&\r\n          value[i + 4] === \"k\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"n\" &&\r\n          value[i + 5] === \"k\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart > i &&\r\n          slStart <= i + 5\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"l\" &&\r\n          value[i + 2] === \"i\" &&\r\n          value[i + 3] === \"s\" &&\r\n          value[i + 4] === \"t\" &&\r\n          value[i + 5] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart >= i &&\r\n          slStart <= i + 6\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slEnd > i &&\r\n          slEnd <= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        } else if (\r\n          value[i] === \"<\" &&\r\n          value[i + 1] === \"/\" &&\r\n          value[i + 2] === \"l\" &&\r\n          value[i + 3] === \"i\" &&\r\n          value[i + 4] === \"s\" &&\r\n          value[i + 5] === \"t\" &&\r\n          value[i + 6] === \">\" &&\r\n          slStart <= i &&\r\n          slEnd >= i + 7\r\n        ) {\r\n          textareaRef.current.readOnly = true;\r\n          setTimeout(() => {\r\n            textareaRef.current.readOnly = false;\r\n            textareaRef.current.selectionEnd = slStart;\r\n            textareaRef.current.selectionStart = slStart;\r\n          }, 100);\r\n        }\r\n      }\r\n    }\r\n    console.log(textareaRef.current.value[textareaRef.current.selectionStart]);\r\n    // if (\r\n    //   textareaRef.current.value[textareaRef.current.selectionStart + 1] !==\r\n    //   '\\n'\r\n    // ) {\r\n    //   alert('d');\r\n    // }\r\n    // setSelStart({ num: textareaRef.current.selectionStart, enter: true });\r\n  };\r\n\r\n  const handlePaste = (e) => {\r\n    setPaste(true);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const strArr = e.target.value.split(\"\");\r\n    const selStartx = textareaRef.current.selectionStart;\r\n    const copyArr = [...strArr];\r\n    console.log(textareaRef.current.value[textareaRef.current.selectionStart]);\r\n    if (paste) {\r\n      // if (e.target.value.includes('instagram')) {\r\n      //   const str = parse(e.target.value);\r\n      //   console.log(str);\r\n      // }\r\n      for (let i = 0; i < strArr.length; i++) {\r\n        if (\r\n          strArr[i] === \"\\n\" &&\r\n          strArr[i + 1] !== \"\\n\" &&\r\n          strArr[i - 1] !== \"\\n\"\r\n        ) {\r\n          copyArr.splice(i, 0, \"\\n\");\r\n        }\r\n      }\r\n    }\r\n    console.log(copyArr);\r\n    textareaRef.current.value = copyArr.join(\"\");\r\n    console.log(textareaRef.current.value[textareaRef.current.selectionStart]);\r\n    // if (selStart.num < textareaRef.current.value.length && selStart.enter) {\r\n    //   textareaRef.current.selectionEnd = selStart.num;\r\n    // }\r\n    if (paste) {\r\n      setPaste(false);\r\n    }\r\n    // setSelStart({ num: 0, enter: false });\r\n    // } else if (!paste) {\r\n    //   const strArr = e.target.value.split('');\r\n    //   const copyArr = [...strArr];\r\n    //   for (let i = 0; i < strArr.length; i++) {\r\n    //     if (\r\n    //       strArr[i] === '\\n' &&\r\n    //       strArr[i + 1] !== '\\n' &&\r\n    //       strArr[i - 1] !== '\\n'\r\n    //     ) {\r\n    //       copyArr.splice(i, 0, '\\n');\r\n    //     }\r\n    //   }\r\n    //   console.log(copyArr);\r\n    //   textareaRef.current.value = copyArr.join('');\r\n    // }\r\n  };\r\n\r\n  const handleImages = (e) => {\r\n    let { files } = e.target;\r\n    console.log(files);\r\n    console.log(imageArray);\r\n    if (files.length > 0) {\r\n      let count = 0;\r\n      const fileList = Array.from(files);\r\n      let previewArray = [];\r\n      console.log(fileList);\r\n      fileList.forEach((file, i) => {\r\n        if (!file.type.includes(\"image\")) {\r\n          fileList.splice(i, 1);\r\n        }\r\n      });\r\n      let copyArr = [];\r\n      let passFilter = [];\r\n      if (imageArray.length > 0) {\r\n        copyArr = [...imageArray];\r\n        let check = false;\r\n        fileList.forEach((file) => {\r\n          imageArray.forEach((imgObj, i) => {\r\n            if (file.name === imgObj.name) {\r\n              check = true;\r\n            }\r\n            if (!check && i === imageArray.length - 1) {\r\n              copyArr.push(file);\r\n              check = false;\r\n            }\r\n            if (check && i === imageArray.length - 1) {\r\n              check = false;\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        copyArr = [...fileList];\r\n      }\r\n      copyArr.forEach((copy) => {\r\n        previewArray.push({\r\n          url: URL.createObjectURL(copy),\r\n          checked: \"false\",\r\n          name: copy.name,\r\n        });\r\n      });\r\n      console.log(previewArray);\r\n      console.log(copyArr);\r\n      setImagePreview([...previewArray]);\r\n      setImageArray(copyArr);\r\n      e.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(imagePreview);\r\n  }, [imagePreview]);\r\n  useEffect(() => {\r\n    console.log(imageArray);\r\n  }, [imageArray]);\r\n\r\n  const handleDeleteMode = () => {\r\n    let check = false;\r\n    for (let i = 0; i < imgCnt.current.children.length; i++) {\r\n      if (imgCnt.current.children[i].children[1].className) {\r\n        check = true;\r\n      }\r\n    }\r\n    if (!ctx.overlay && check) {\r\n      setDeleteMode(true);\r\n      ctx.handleOverlay();\r\n    }\r\n  };\r\n\r\n  const handleDeleteImg = (e) => {\r\n    for (let i = 0; i < imgCnt.current.children.length; i++) {\r\n      if (\r\n        imgCnt.current.children[i].children[0].contains(e.target) &&\r\n        !imgCnt.current.children[i].children[1].className\r\n      ) {\r\n        setImagePreview((old) => {\r\n          let oldCopy = [...old];\r\n          old.forEach((oldArr, ind) => {\r\n            if (ind === i) {\r\n              oldCopy[i].checked = \"true\";\r\n            }\r\n          });\r\n          return oldCopy;\r\n        });\r\n      } else if (\r\n        imgCnt.current.children[i].children[1].contains(e.target) &&\r\n        imgCnt.current.children[i].children[1].className\r\n      ) {\r\n        setImagePreview((old) => {\r\n          let oldCopy = [...old];\r\n          old.forEach((oldArr, ind) => {\r\n            if (ind === i) {\r\n              oldCopy[i].checked = \"false\";\r\n            }\r\n          });\r\n          return oldCopy;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleConfirmDeletion = () => {\r\n    const saveName = [];\r\n    setImagePreview((old) => {\r\n      let oldCopy = [];\r\n      old.forEach((oldObj, i) => {\r\n        if (oldObj.checked !== \"true\") {\r\n          oldCopy.push(oldObj);\r\n        } else if (oldObj.checked === \"true\") {\r\n          saveName.push(oldObj.name);\r\n        }\r\n      });\r\n      // console.log(oldCopy);\r\n      // console.log(imageArray);\r\n      // console.log(saveName);\r\n      if (saveName.length > 0) {\r\n        setSavedNames(saveName);\r\n      }\r\n      return oldCopy;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (savedNames.length > 0) {\r\n      setImageArray((old) => {\r\n        let oldCopy = [];\r\n        let check = false;\r\n        old.forEach((oldObj) => {\r\n          savedNames.forEach((nameI, i) => {\r\n            if (nameI === oldObj.name) {\r\n              check = true;\r\n            }\r\n            if (i === savedNames.length - 1 && !check) {\r\n              oldCopy.push(oldObj);\r\n              check = false;\r\n            }\r\n            if (i === savedNames.length - 1 && check) {\r\n              check = false;\r\n            }\r\n          });\r\n        });\r\n        console.log(savedNames);\r\n        console.log(oldCopy);\r\n        return oldCopy;\r\n      });\r\n    }\r\n  }, [savedNames]);\r\n\r\n  const handleAddTags = (e) => {\r\n    if (e.keyCode === 13) {\r\n      let { value } = e.target;\r\n      if (value) {\r\n        // value = value.split(\"\");\r\n        // value[0] = value[0].toUpperCase();\r\n        // value = value.join(\"\");\r\n        e.target.value = \"\";\r\n        if (value.includes(\".\")) {\r\n          value = value.split(\".\");\r\n          value = value.join(\"_\");\r\n        }\r\n        setTags((old) => {\r\n          const oldCopy = [...old];\r\n          oldCopy.push(value);\r\n          console.log(oldCopy);\r\n          return oldCopy;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRemoveTag = (e) => {\r\n    for (let i = 0; i < tagContainer.current.children.length; i++) {\r\n      if (tagContainer.current.children[i].contains(e.target)) {\r\n        setTags((old) => {\r\n          const oldCopy = [...old];\r\n          oldCopy.splice(i, 1);\r\n\r\n          return oldCopy;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const checkTextBeforeSubmit = (e) => {\r\n    if (e.keyCode === 13) {\r\n      alert(\"d\");\r\n    }\r\n    // textareaRef.current.readOnly = true\r\n  };\r\n\r\n  const checkIfContainsPromo = (string) => {\r\n    const str = string.toLowerCase();\r\n    if (str.trim() === \"promo\" || str.trim().includes(\"promo \")) {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  const seeWhichList = (str, mode, selStart) => {\r\n    let occurence = 0;\r\n    let start;\r\n    console.log(str.length);\r\n    console.log(selStart);\r\n    if (mode === \"deleting\") {\r\n      for (let i = 0; i < str.length; i++) {\r\n        if (\r\n          str[i] === \"<\" &&\r\n          str[i + 1] === \"l\" &&\r\n          str[i + 2] === \"i\" &&\r\n          str[i + 3] === \"s\" &&\r\n          str[i + 4] === \"t\" &&\r\n          str[i + 5] === \">\"\r\n        ) {\r\n          start = i;\r\n          occurence++;\r\n        } else if (\r\n          str[i] === \"<\" &&\r\n          str[i + 1] === \"/\" &&\r\n          str[i + 2] === \"l\" &&\r\n          str[i + 3] === \"i\" &&\r\n          str[i + 4] === \"s\" &&\r\n          str[i + 5] === \"t\" &&\r\n          str[i + 6] === \">\"\r\n        ) {\r\n          if (selStart > start && selStart <= i + 6) {\r\n            return occurence;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < str.length; i++) {\r\n        if (\r\n          str[i] === \"<\" &&\r\n          str[i + 1] === \"l\" &&\r\n          str[i + 2] === \"i\" &&\r\n          str[i + 3] === \"s\" &&\r\n          str[i + 4] === \"t\" &&\r\n          str[i + 5] === \">\"\r\n        ) {\r\n          occurence++;\r\n        }\r\n        if (i === selStart) {\r\n          return occurence;\r\n        } else if (i === str.length - 1 && selStart === str.length) {\r\n          return occurence;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUpload = () => {\r\n    const title = titles.current.children[0].value;\r\n    const subTitle = titles.current.children[1].value.toUpperCase();\r\n    console.log(title);\r\n    console.log(subTitle);\r\n    const articleText = textareaRef.current.value.trim();\r\n    const captionTxt = captionText.current.value.trim();\r\n    let catSel = categorySelect.current.value;\r\n    let subcatSel = subcategorySelect.current.value;\r\n    const checkIfPromo = checkIfContainsPromo(subTitle);\r\n    let promoSubTitle;\r\n    if (checkIfPromo && subTitle.trim().length > 5) {\r\n      promoSubTitle = subTitle.trim().split(\"PROMO \");\r\n      promoSubTitle.splice(0, 1);\r\n      promoSubTitle = promoSubTitle.join(\"\").trim();\r\n      console.log(promoSubTitle);\r\n    }\r\n    const commentChoice =\r\n      commentsRadio.current.children[0].children[1].checked &&\r\n      !commentsRadio.current.children[0].children[1].disabled\r\n        ? \"Da\"\r\n        : \"Ne\";\r\n    console.log(imageArray);\r\n    console.log(location.state);\r\n    console.log(tags);\r\n    let deletedTags = [];\r\n    if (location.state && location.state.articleData.tags) {\r\n      deletedTags = location.state.articleData.tags.reduce((acc, cur) => {\r\n        if (\r\n          !tags.some((el) =>\r\n            el.value ? el.value === cur.value : el === cur.value\r\n          )\r\n        ) {\r\n          return [...acc, cur];\r\n        }\r\n        return acc;\r\n      }, []);\r\n      console.log(deletedTags);\r\n    }\r\n    // alert(commentChoice);\r\n    // console.log(lists);\r\n    // console.log(location.state.articleData.listOrder);\r\n    if (title && subTitle && articleText) {\r\n      if (imageArray.length > 0 && captionTxt) {\r\n        const articleFinished = {\r\n          author: ctx.user.displayName,\r\n          title: title,\r\n          subTitle: promoSubTitle ? promoSubTitle : subTitle,\r\n          articleText: articleText,\r\n          category: catSel,\r\n          subCategory: subcatSel,\r\n          images: imageArray,\r\n          imageText: imageCaptionTextAttach(),\r\n          tags: tags,\r\n          commentsAllowed: commentChoice,\r\n          shares: [\"\"],\r\n          visited: (location.state && location.state.articleData.visited) || 0,\r\n        };\r\n        let captTxt = [];\r\n        if (lists.length > 0) {\r\n          articleFinished.listOrder = [...lists];\r\n        }\r\n        if (checkIfPromo) {\r\n          articleFinished.sponsored = true;\r\n        }\r\n        if (\r\n          location.state &&\r\n          checkIfPromo &&\r\n          location.state.articleData.promoId\r\n        ) {\r\n          //means that we wanna edit an already existing promo article and we did not change the promo status of it so we can keep the previous promoid\r\n          articleFinished.promoId = location.state.articleData.promoId;\r\n        }\r\n        console.log(articleFinished.tags);\r\n        console.log(articleFinished);\r\n        setSending(true);\r\n        let length = !checkIfPromo ? 1 : 2;\r\n        console.log(length);\r\n        // alert(length);\r\n        auth.onAuthStateChanged((user) => {\r\n          if (user) {\r\n            user.getIdToken(true).then((idToken) => {\r\n              const categoriesNoChange =\r\n                location.state &&\r\n                catSel === location.state.articleData.category &&\r\n                subcatSel === location.state.articleData.subCategory;\r\n              fetch(\r\n                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${catSel}/${subcatSel}${\r\n                  categoriesNoChange ? \"/-\" + location.state.articleData.id : \"\"\r\n                }.json?auth=${idToken}`,\r\n                {\r\n                  method: `${\r\n                    !location.state\r\n                      ? \"POST\"\r\n                      : !categoriesNoChange\r\n                      ? \"POST\"\r\n                      : \"PATCH\"\r\n                  }`,\r\n                  body: JSON.stringify(articleFinished),\r\n                  headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                  },\r\n                }\r\n              )\r\n                .then((response) => response.json())\r\n                .then((data) => {\r\n                  console.log(data);\r\n                  let id;\r\n                  const imgUrls = [];\r\n                  if (!location.state) {\r\n                    id = data.name.slice(1);\r\n                    //add art to dates in the db, for newest art, most visited, most popular\r\n                    const d = new Date();\r\n                    const year = d.getFullYear();\r\n                    const month = d.getMonth() + 1;\r\n                    const day = d.getDate();\r\n                    fetch(\r\n                      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/dates/${year}/${month}/${day}.json?auth=${idToken}`,\r\n                      {\r\n                        method: \"POST\",\r\n                        headers: {\r\n                          \"Content-Type\": \"application/json\",\r\n                        },\r\n                        body: JSON.stringify({\r\n                          id: data.name,\r\n                          path: `${articleFinished.category}/${articleFinished.subCategory}`,\r\n                        }),\r\n                      }\r\n                    );\r\n                  } else {\r\n                    if (categoriesNoChange) {\r\n                      //patch\r\n                      id = location.state.articleData.id;\r\n                    } else {\r\n                      //cats changed so we have a new id\r\n                      id = data.name.slice(1);\r\n                    }\r\n                  }\r\n                  // id.split('');\r\n                  // console.log(id);\r\n                  // id.join('');\r\n                  console.log(id);\r\n                  if (!articleFinished.id) {\r\n                    //always happens, we do not init the id where we declare the var, but we do it here\r\n                    articleFinished.id = id;\r\n                  }\r\n                  console.log(articleFinished);\r\n                  let progressArray = [];\r\n                  // console.log(image);\r\n                  imageArray.forEach((img, i) => {\r\n                    progressArray.push({\r\n                      imageName: img.name,\r\n                      percent: \"\",\r\n                    });\r\n                    console.log(\r\n                      `images/${catSel}/${subcatSel}/-${id}/${img.name}`\r\n                    );\r\n                    const uploadTask = storage\r\n                      .ref(`images/${catSel}/${subcatSel}/-${id}/${img.name}`)\r\n                      .put(img);\r\n                    uploadTask.on(\r\n                      \"state_changed\",\r\n                      (snapshot) => {\r\n                        console.log(snapshot);\r\n                        console.log(\r\n                          `bytesTransfered: ${\r\n                            snapshot.bytesTransferred\r\n                          }, percent: ${Math.floor(\r\n                            (snapshot.bytesTransferred / snapshot.totalBytes) *\r\n                              100\r\n                          )}% fileName: ${img.name}`\r\n                        );\r\n\r\n                        progressArray.forEach((arr, i) => {\r\n                          if (arr.imageName === img.name) {\r\n                            if (progressRef.current.children[0]) {\r\n                              console.log(\r\n                                progressRef.current.children[i].children[1]\r\n                                  .children[0]\r\n                              );\r\n                              progressRef.current.children[\r\n                                i\r\n                              ].children[1].children[0].style.width = `${Math.floor(\r\n                                (snapshot.bytesTransferred /\r\n                                  snapshot.totalBytes) *\r\n                                  100\r\n                              )}%`;\r\n                              if (\r\n                                Math.floor(\r\n                                  (snapshot.bytesTransferred /\r\n                                    snapshot.totalBytes) *\r\n                                    100\r\n                                ) !== 0\r\n                              ) {\r\n                                progressRef.current.children[\r\n                                  i\r\n                                ].children[1].children[0].textContent = `${Math.floor(\r\n                                  (snapshot.bytesTransferred /\r\n                                    snapshot.totalBytes) *\r\n                                    100\r\n                                )}%`;\r\n                              }\r\n\r\n                              if (\r\n                                Math.floor(\r\n                                  (snapshot.bytesTransferred /\r\n                                    snapshot.totalBytes) *\r\n                                    100\r\n                                ) === 100\r\n                              ) {\r\n                                setTimeout(() => {\r\n                                  progressRef.current.children[\r\n                                    i\r\n                                  ].children[2].children[0].style.display =\r\n                                    \"inline-block\";\r\n                                }, 200);\r\n                              }\r\n                              // progressRef.current.children[i].children[1]\r\n                              // .children[0]\r\n                            }\r\n                          }\r\n                        });\r\n                        setCurProgress(progressArray);\r\n                        console.log(snapshot.totalBytes);\r\n                        console.log(`images/${catSel}/${subcatSel}/-${id}`);\r\n                      },\r\n                      (error) => {\r\n                        console.log(error);\r\n                      },\r\n                      () => {\r\n                        storage\r\n                          .ref(`images/${catSel}/${subcatSel}/-${id}`)\r\n                          .child(img.name)\r\n                          .getDownloadURL()\r\n                          .then((url) => {\r\n                            console.log(url);\r\n                            imgUrls.push(url);\r\n                            // let imgNames = [];\r\n                            // imgNames.push([img.name, url]);\r\n                            articleFinished.imageText.forEach(\r\n                              (imgTxt, indx) => {\r\n                                if (imgTxt.name === img.name) {\r\n                                  captTxt[indx] = [\r\n                                    url,\r\n                                    imgTxt.captionText,\r\n                                    img.name,\r\n                                  ];\r\n                                }\r\n                              }\r\n                            );\r\n                            if (imgUrls.length === imageArray.length) {\r\n                              articleFinished.images = [...imgUrls];\r\n                              articleFinished.imageText = [...captTxt];\r\n                              if (!location.state) {\r\n                                const date = new Date();\r\n                                const time = `${date.getFullYear()}-${\r\n                                  date.getMonth() + 1\r\n                                }-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\r\n                                articleFinished.date = time;\r\n                                console.log(articleFinished);\r\n                              } else {\r\n                                articleFinished.date =\r\n                                  location.state.articleData.date;\r\n                              }\r\n                              captTxt = [];\r\n                              const dbRef = db.ref(\r\n                                `articles/${catSel}/${subcatSel}/-${id}`\r\n                              );\r\n                              const promises = [];\r\n                              if (!location.state) {\r\n                                //POST\r\n                                if (articleFinished.tags.length) {\r\n                                  for (\r\n                                    let i = 0;\r\n                                    i < articleFinished.tags.length;\r\n                                    i++\r\n                                  ) {\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${articleFinished.tags[i]}.json`,\r\n                                        {\r\n                                          method: \"POST\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                          body: JSON.stringify({\r\n                                            articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                            thumbnail:\r\n                                              articleFinished.imageText[0][0],\r\n                                            title: articleFinished.title,\r\n                                            subTitle: articleFinished.subTitle,\r\n                                            date: articleFinished.date,\r\n                                          }),\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                  const promisedData = Promise.all(promises);\r\n                                  promisedData.then((data) => {\r\n                                    console.log(data);\r\n                                    const patchPromises = [];\r\n                                    const reformattedTags = []; //tag obj with val and db id\r\n                                    for (\r\n                                      let i = 0;\r\n                                      i < articleFinished.tags.length;\r\n                                      i++\r\n                                    ) {\r\n                                      patchPromises.push(\r\n                                        fetch(\r\n                                          `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${articleFinished.tags[i]}/${data[i].name}.json`,\r\n                                          {\r\n                                            method: \"PATCH\",\r\n                                            headers: {\r\n                                              \"Content-Type\":\r\n                                                \"application/json\",\r\n                                            },\r\n                                            body: JSON.stringify({\r\n                                              articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                              thumbnail:\r\n                                                articleFinished.imageText[0][0],\r\n                                              title: articleFinished.title,\r\n                                              subTitle:\r\n                                                articleFinished.subTitle,\r\n                                              date: articleFinished.date,\r\n                                              id: data[i].name,\r\n                                            }),\r\n                                          }\r\n                                        ).then((res) => res.json())\r\n                                      );\r\n                                      reformattedTags.push({\r\n                                        id: data[i].name,\r\n                                        value: articleFinished.tags[i],\r\n                                      });\r\n                                    }\r\n                                    articleFinished.tags = [...reformattedTags];\r\n                                    const promisedPatch =\r\n                                      Promise.all(patchPromises);\r\n                                    promisedPatch.then((data) => {\r\n                                      if (length === 1) {\r\n                                        dbRef\r\n                                          .update(articleFinished)\r\n                                          .then((res) => {\r\n                                            dbRef\r\n                                              .once(\"value\")\r\n                                              .then((snapshot) => {\r\n                                                setArticleAdded(true);\r\n                                              });\r\n                                          });\r\n                                      } else {\r\n                                        fetch(\r\n                                          `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                          {\r\n                                            method: \"POST\",\r\n                                            body: JSON.stringify(\r\n                                              articleFinished\r\n                                            ),\r\n                                            headers: {\r\n                                              \"Content-Type\":\r\n                                                \"application/json\",\r\n                                            },\r\n                                          }\r\n                                        )\r\n                                          .then((res) => res.json())\r\n                                          .then((data) => {\r\n                                            articleFinished.promoId = data.name;\r\n                                            dbRef\r\n                                              .update(articleFinished)\r\n                                              .then((res) => {\r\n                                                dbRef\r\n                                                  .once(\"value\")\r\n                                                  .then((snapshot) => {\r\n                                                    setArticleAdded(true);\r\n                                                  });\r\n                                              });\r\n                                          });\r\n                                      }\r\n                                    });\r\n                                  });\r\n                                } else {\r\n                                  // no tags post art\r\n                                  if (length === 1) {\r\n                                    dbRef\r\n                                      .update(articleFinished)\r\n                                      .then((res) => {\r\n                                        dbRef.once(\"value\").then((snapshot) => {\r\n                                          setArticleAdded(true);\r\n                                        });\r\n                                      });\r\n                                  } else {\r\n                                    fetch(\r\n                                      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                      {\r\n                                        method: \"POST\",\r\n                                        body: JSON.stringify(articleFinished),\r\n                                        headers: {\r\n                                          \"Content-Type\": \"application/json\",\r\n                                        },\r\n                                      }\r\n                                    )\r\n                                      .then((res) => res.json())\r\n                                      .then((data) => {\r\n                                        articleFinished.promoId = data.name;\r\n                                        dbRef\r\n                                          .update(articleFinished)\r\n                                          .then((res) => {\r\n                                            dbRef\r\n                                              .once(\"value\")\r\n                                              .then((snapshot) => {\r\n                                                setArticleAdded(true);\r\n                                              });\r\n                                          });\r\n                                      });\r\n                                  }\r\n                                }\r\n                              } else {\r\n                                //PATCH\r\n                                //newly added tag\r\n                                const newlyAdded = [];\r\n                                const oldTags = [];\r\n                                if (\r\n                                  location.state.articleData.tags &&\r\n                                  articleFinished.tags.length\r\n                                ) {\r\n                                  for (\r\n                                    let i = 0;\r\n                                    i < articleFinished.tags.length;\r\n                                    i++\r\n                                  ) {\r\n                                    if (\r\n                                      //arr.includes, arr.some stops after 1 el is found and returns bool, filter returns arr and empty arr can still be truthy so use.length on the arr\r\n                                      // !location.state.articleData.tags.includes(\r\n                                      //   articleFinished.tags[i]\r\n                                      // )\r\n                                      !location.state.articleData.tags.some(\r\n                                        (el) =>\r\n                                          el.value ===\r\n                                          (articleFinished.tags[i].value\r\n                                            ? articleFinished.tags[i].value\r\n                                            : articleFinished.tags[i])\r\n                                      )\r\n                                    ) {\r\n                                      newlyAdded.push(articleFinished.tags[i]);\r\n                                    } else {\r\n                                      oldTags.push(\r\n                                        location.state.articleData.tags.find(\r\n                                          (el) =>\r\n                                            el.value ===\r\n                                            articleFinished.tags[i].value\r\n                                        ) //find returns the first val that matches so it's faster than filter\r\n                                      );\r\n                                    }\r\n                                  }\r\n                                } else if (articleFinished.tags.length) {\r\n                                  //zero tags before so we spread the new existing ones\r\n                                  newlyAdded.push(\r\n                                    ...articleFinished.tags //no need to do [...tags] that would create an array as the first value of newlyadded\r\n                                  );\r\n                                }\r\n\r\n                                let changedCat;\r\n                                if (\r\n                                  articleFinished.category !==\r\n                                  location.state.articleData.category\r\n                                ) {\r\n                                  changedCat = true;\r\n                                }\r\n                                let changedSubCat;\r\n                                if (\r\n                                  articleFinished.subCategory !==\r\n                                  location.state.articleData.subCategory\r\n                                ) {\r\n                                  changedSubCat = true;\r\n                                }\r\n\r\n                                //find out if title,subtitle,first img(thumbnail) changed if yes add the previous tags as well and patch them\r\n                                let checker = false;\r\n                                if (\r\n                                  articleFinished.title !==\r\n                                  location.state.articleData.title\r\n                                ) {\r\n                                  checker = true;\r\n                                } else if (\r\n                                  articleFinished.subTitle !==\r\n                                  location.state.articleData.subTitle\r\n                                ) {\r\n                                  checker = true;\r\n                                } else if (\r\n                                  articleFinished.imageText[0][0] ===\r\n                                  location.state.articleData.imageText[0][0]\r\n                                ) {\r\n                                  checker = true;\r\n                                } else if (changedCat) {\r\n                                  checker = true;\r\n                                } else if (changedSubCat) {\r\n                                  checker = true;\r\n                                }\r\n                                if (newlyAdded.length) {\r\n                                  console.log(\"butwhyman\");\r\n                                  console.log(newlyAdded);\r\n                                  console.log(oldTags);\r\n                                  for (let i = 0; i < newlyAdded.length; i++) {\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${newlyAdded[i]}.json`,\r\n                                        {\r\n                                          method: \"POST\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                          body: JSON.stringify({\r\n                                            articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                            thumbnail:\r\n                                              articleFinished.imageText[0][0],\r\n                                            title: articleFinished.title,\r\n                                            subTitle: articleFinished.subTitle,\r\n                                            date: articleFinished.date,\r\n                                          }),\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                }\r\n                                if (checker && oldTags.length) {\r\n                                  console.log(\"does this run\");\r\n                                  console.log(oldTags);\r\n                                  for (let i = 0; i < oldTags.length; i++) {\r\n                                    if (changedCat) {\r\n                                      deletedTags.push({\r\n                                        id: oldTags[i].id,\r\n                                        value: oldTags[i].value,\r\n                                      });\r\n                                    }\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${\r\n                                          articleFinished.category\r\n                                        }/${oldTags[i].value}${\r\n                                          !changedCat ? \"/\" + oldTags[i].id : \"\"\r\n                                        }.json`,\r\n                                        {\r\n                                          method: `${\r\n                                            changedCat ? \"POST\" : \"PATCH\"\r\n                                          }`,\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                          body: JSON.stringify({\r\n                                            articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                            thumbnail:\r\n                                              articleFinished.imageText[0][0],\r\n                                            title: articleFinished.title,\r\n                                            subTitle: articleFinished.subTitle,\r\n                                            date: articleFinished.date,\r\n                                            id: oldTags[i].id,\r\n                                          }),\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                }\r\n                                if (deletedTags.length) {\r\n                                  for (let i = 0; i < deletedTags.length; i++) {\r\n                                    promises.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${\r\n                                          !changedCat\r\n                                            ? articleFinished.category\r\n                                            : location.state.articleData\r\n                                                .category\r\n                                        }/${deletedTags[i].value}/${\r\n                                          deletedTags[i].id\r\n                                        }.json`,\r\n                                        {\r\n                                          method: \"DELETE\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                }\r\n                                const promisedData = Promise.all(promises);\r\n                                promisedData.then((data) => {\r\n                                  let reformattedTags = []; //tag obj with val and db id\r\n                                  const promisesPatch = [];\r\n                                  if (newlyAdded.length) {\r\n                                    for (\r\n                                      let i = 0;\r\n                                      i < newlyAdded.length;\r\n                                      i++\r\n                                    ) {\r\n                                      reformattedTags.push({\r\n                                        id: data[i].name,\r\n                                        value: newlyAdded[i],\r\n                                      });\r\n                                      promisesPatch.push(\r\n                                        fetch(\r\n                                          `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${newlyAdded[i]}/${data[i].name}.json`,\r\n                                          {\r\n                                            method: \"PATCH\",\r\n                                            headers: {\r\n                                              \"Content-Type\":\r\n                                                \"application/json\",\r\n                                            },\r\n                                            body: JSON.stringify({\r\n                                              articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                              thumbnail:\r\n                                                articleFinished.imageText[0][0],\r\n                                              title: articleFinished.title,\r\n                                              subTitle:\r\n                                                articleFinished.subTitle,\r\n                                              date: articleFinished.date,\r\n                                              id: data[i].name,\r\n                                            }),\r\n                                          }\r\n                                        ).then((res) => res.json())\r\n                                      );\r\n                                    }\r\n                                  }\r\n                                  if (oldTags.length) {\r\n                                    if (!changedCat) {\r\n                                      reformattedTags = [\r\n                                        ...reformattedTags,\r\n                                        ...oldTags,\r\n                                      ];\r\n                                    } else {\r\n                                      let pos = newlyAdded.length;\r\n                                      let incr = 0;\r\n                                      for (\r\n                                        let i = pos;\r\n                                        i < pos + oldTags.length;\r\n                                        i++\r\n                                      ) {\r\n                                        reformattedTags.push({\r\n                                          id: data[i].name,\r\n                                          value: oldTags[incr].value,\r\n                                        });\r\n                                        promisesPatch.push(\r\n                                          fetch(\r\n                                            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/related/${articleFinished.category}/${oldTags[incr].value}/${data[i].name}.json`,\r\n                                            {\r\n                                              method: \"PATCH\",\r\n                                              headers: {\r\n                                                \"Content-Type\":\r\n                                                  \"application/json\",\r\n                                              },\r\n                                              body: JSON.stringify({\r\n                                                articlePath: `${articleFinished.category}/${articleFinished.subCategory}/-${id}`,\r\n                                                thumbnail:\r\n                                                  articleFinished\r\n                                                    .imageText[0][0],\r\n                                                title: articleFinished.title,\r\n                                                subTitle:\r\n                                                  articleFinished.subTitle,\r\n                                                date: articleFinished.date,\r\n                                                id: data[i].name,\r\n                                              }),\r\n                                            }\r\n                                          ).then((res) => res.json())\r\n                                        );\r\n                                        incr++;\r\n                                      }\r\n                                    }\r\n                                  }\r\n                                  //delete old article if we have changed either cat or subcat\r\n                                  if (changedCat || changedSubCat) {\r\n                                    console.log(\"zasto\");\r\n                                    promisesPatch.push(\r\n                                      fetch(\r\n                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}.json`,\r\n                                        {\r\n                                          method: \"DELETE\",\r\n                                          headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                          },\r\n                                        }\r\n                                      ).then((res) => res.json())\r\n                                    );\r\n                                  }\r\n                                  if (\r\n                                    deletedTags.length &&\r\n                                    !newlyAdded.length &&\r\n                                    !oldTags.length\r\n                                  ) {\r\n                                    delete articleFinished.tags;\r\n                                  } else {\r\n                                    articleFinished.tags = [...reformattedTags];\r\n                                  }\r\n                                  if (promisesPatch.length) {\r\n                                    const promised = Promise.all(promisesPatch);\r\n                                    promised.then((data) => {\r\n                                      dbRef\r\n                                        .update(articleFinished)\r\n                                        .then((res) => {\r\n                                          dbRef\r\n                                            .once(\"value\")\r\n                                            .then((snapshot) => {\r\n                                              if (length === 1) {\r\n                                                if (\r\n                                                  location.state.articleData\r\n                                                    .sponsored &&\r\n                                                  !articleFinished.sponsored\r\n                                                ) {\r\n                                                  //WAS PROMO, no longer is\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"DELETE\",\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  )\r\n                                                    .then((res) => res.json())\r\n                                                    .then((data) => {\r\n                                                      delete articleFinished.promoId;\r\n                                                      delete articleFinished.sponsored;\r\n                                                      dbRef\r\n                                                        .set(articleFinished)\r\n                                                        .then((res) => {\r\n                                                          dbRef\r\n                                                            .once(\"value\")\r\n                                                            .then(\r\n                                                              (snapshot) => {\r\n                                                                setArticleAdded(\r\n                                                                  true\r\n                                                                );\r\n                                                              }\r\n                                                            );\r\n                                                        });\r\n                                                    });\r\n                                                } else {\r\n                                                  setArticleAdded(true);\r\n                                                }\r\n                                              } else {\r\n                                                if (\r\n                                                  !location.state.articleData\r\n                                                    .sponsored &&\r\n                                                  articleFinished.sponsored\r\n                                                ) {\r\n                                                  //WAS NOT PROMO, NOW IS\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"POST\",\r\n                                                      body: JSON.stringify(\r\n                                                        articleFinished\r\n                                                      ),\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  )\r\n                                                    .then((res) => res.json())\r\n                                                    .then((data) => {\r\n                                                      articleFinished.promoId =\r\n                                                        data.name;\r\n                                                      dbRef\r\n                                                        .update(articleFinished)\r\n                                                        .then((res) => {\r\n                                                          dbRef\r\n                                                            .once(\"value\")\r\n                                                            .then(\r\n                                                              (snapshot) => {\r\n                                                                setArticleAdded(\r\n                                                                  true\r\n                                                                );\r\n                                                              }\r\n                                                            );\r\n                                                        });\r\n                                                    });\r\n                                                } else {\r\n                                                  //WAS PROMO, IS PROMO NOW AS WELL\r\n                                                  //if cat changed delete old one post new one otherwise update(put) old one\r\n                                                  if (!changedCat) {\r\n                                                    fetch(\r\n                                                      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                      {\r\n                                                        method: \"PUT\",\r\n                                                        body: JSON.stringify(\r\n                                                          articleFinished\r\n                                                        ),\r\n                                                        headers: {\r\n                                                          \"Content-Type\":\r\n                                                            \"application/json\",\r\n                                                        },\r\n                                                      }\r\n                                                    )\r\n                                                      .then((res) => res.json())\r\n                                                      .then((data) =>\r\n                                                        setArticleAdded(true)\r\n                                                      );\r\n                                                  } else {\r\n                                                    //if only subcat changed put/update is enough as demonstrated above, if cat changed then post\r\n                                                    const finalizePromo = [];\r\n                                                    finalizePromo.push(\r\n                                                      fetch(\r\n                                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                        {\r\n                                                          method: \"POST\",\r\n                                                          body: JSON.stringify(\r\n                                                            articleFinished\r\n                                                          ),\r\n                                                          headers: {\r\n                                                            \"Content-Type\":\r\n                                                              \"application/json\",\r\n                                                          },\r\n                                                        }\r\n                                                      ).then((res) =>\r\n                                                        res.json()\r\n                                                      ),\r\n                                                      fetch(\r\n                                                        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                        {\r\n                                                          method: \"DELETE\",\r\n                                                          headers: {\r\n                                                            \"Content-Type\":\r\n                                                              \"application/json\",\r\n                                                          },\r\n                                                        }\r\n                                                      ).then((res) =>\r\n                                                        res.json()\r\n                                                      )\r\n                                                    );\r\n                                                    const promisedFinalize =\r\n                                                      Promise.all(\r\n                                                        finalizePromo\r\n                                                      );\r\n                                                    promisedFinalize.then(\r\n                                                      (data) => {\r\n                                                        articleFinished.promoId =\r\n                                                          data[0].name;\r\n                                                        dbRef\r\n                                                          .update(\r\n                                                            articleFinished\r\n                                                          )\r\n                                                          .then((res) => {\r\n                                                            dbRef\r\n                                                              .once(\"value\")\r\n                                                              .then(\r\n                                                                (snapshot) => {\r\n                                                                  setArticleAdded(\r\n                                                                    true\r\n                                                                  );\r\n                                                                }\r\n                                                              );\r\n                                                          });\r\n                                                      }\r\n                                                    );\r\n                                                  }\r\n                                                }\r\n                                              }\r\n                                            });\r\n                                        });\r\n                                    });\r\n                                  } else {\r\n                                    dbRef\r\n                                      .update(articleFinished)\r\n                                      .then((res) => {\r\n                                        dbRef.once(\"value\").then((snapshot) => {\r\n                                          if (length === 1) {\r\n                                            if (\r\n                                              location.state.articleData\r\n                                                .sponsored &&\r\n                                              !articleFinished.sponsored\r\n                                            ) {\r\n                                              //WAS PROMO, no longer is\r\n                                              fetch(\r\n                                                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                {\r\n                                                  method: \"DELETE\",\r\n                                                  headers: {\r\n                                                    \"Content-Type\":\r\n                                                      \"application/json\",\r\n                                                  },\r\n                                                }\r\n                                              )\r\n                                                .then((res) => res.json())\r\n                                                .then((data) => {\r\n                                                  delete articleFinished.promoId;\r\n                                                  delete articleFinished.sponsored;\r\n                                                  dbRef\r\n                                                    .set(articleFinished)\r\n                                                    .then((res) => {\r\n                                                      dbRef\r\n                                                        .once(\"value\")\r\n                                                        .then((snapshot) => {\r\n                                                          setArticleAdded(true);\r\n                                                        });\r\n                                                    });\r\n                                                });\r\n                                            } else {\r\n                                              setArticleAdded(true);\r\n                                            }\r\n                                          } else {\r\n                                            console.log(articleFinished);\r\n                                            if (\r\n                                              !location.state.articleData\r\n                                                .sponsored &&\r\n                                              articleFinished.sponsored\r\n                                            ) {\r\n                                              //WAS NOT PROMO, NOW IS\r\n                                              fetch(\r\n                                                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                {\r\n                                                  method: \"POST\",\r\n                                                  body: JSON.stringify(\r\n                                                    articleFinished\r\n                                                  ),\r\n                                                  headers: {\r\n                                                    \"Content-Type\":\r\n                                                      \"application/json\",\r\n                                                  },\r\n                                                }\r\n                                              )\r\n                                                .then((res) => res.json())\r\n                                                .then((data) => {\r\n                                                  articleFinished.promoId =\r\n                                                    data.name;\r\n                                                  dbRef\r\n                                                    .update(articleFinished)\r\n                                                    .then((res) => {\r\n                                                      dbRef\r\n                                                        .once(\"value\")\r\n                                                        .then((snapshot) => {\r\n                                                          setArticleAdded(true);\r\n                                                        });\r\n                                                    });\r\n                                                });\r\n                                            } else {\r\n                                              //WAS PROMO, IS PROMO NOW AS WELL\r\n                                              //if cat changed delete old one post new one otherwise update(put) old one\r\n                                              if (!changedCat) {\r\n                                                fetch(\r\n                                                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                  {\r\n                                                    method: \"PUT\",\r\n                                                    body: JSON.stringify(\r\n                                                      articleFinished\r\n                                                    ),\r\n                                                    headers: {\r\n                                                      \"Content-Type\":\r\n                                                        \"application/json\",\r\n                                                    },\r\n                                                  }\r\n                                                )\r\n                                                  .then((res) => res.json())\r\n                                                  .then((data) =>\r\n                                                    setArticleAdded(true)\r\n                                                  );\r\n                                              } else {\r\n                                                //if only subcat changed put/update is enough if cat changed then post\r\n                                                const finalizePromo = [];\r\n                                                finalizePromo.push(\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${catSel}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"POST\",\r\n                                                      body: JSON.stringify(\r\n                                                        articleFinished\r\n                                                      ),\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  ).then((res) => res.json()),\r\n                                                  fetch(\r\n                                                    `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Promo/${location.state.articleData.category}/${location.state.articleData.promoId}.json?auth=${idToken}`,\r\n                                                    {\r\n                                                      method: \"DELETE\",\r\n                                                      headers: {\r\n                                                        \"Content-Type\":\r\n                                                          \"application/json\",\r\n                                                      },\r\n                                                    }\r\n                                                  ).then((res) => res.json())\r\n                                                );\r\n                                                const promisedFinalize =\r\n                                                  Promise.all(finalizePromo);\r\n                                                promisedFinalize.then(\r\n                                                  (data) => {\r\n                                                    articleFinished.promoId =\r\n                                                      data[0].name;\r\n                                                    dbRef\r\n                                                      .update(articleFinished)\r\n                                                      .then((res) => {\r\n                                                        dbRef\r\n                                                          .once(\"value\")\r\n                                                          .then((snapshot) => {\r\n                                                            setArticleAdded(\r\n                                                              true\r\n                                                            );\r\n                                                          });\r\n                                                      });\r\n                                                  }\r\n                                                );\r\n                                              }\r\n                                            }\r\n                                          }\r\n                                        });\r\n                                      });\r\n                                  }\r\n                                });\r\n                                // else if (\r\n                                //   location.state.articleData.tags &&\r\n                                //   !articleFinished.tags.length\r\n                                // ) {\r\n\r\n                                // }\r\n                              }\r\n                            }\r\n                          })\r\n                          .catch((error) => console.log(error));\r\n                      }\r\n                    );\r\n                  });\r\n                });\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const emptyFields = () => {\r\n    console.log(\"starting\");\r\n    titles.current.children[0].value = \"\";\r\n    titles.current.children[1].value = \"\";\r\n    textareaRef.current.value = \"\";\r\n    captionText.current.value = \"\";\r\n    categorySelect.current.value = \"Vijesti\";\r\n    tagContainer.current.previousSibling.value = \"\";\r\n    commentsRadio.current.children[0].children[1].disabled = false;\r\n    commentsRadio.current.children[1].children[1].disabled = false;\r\n    commentsRadio.current.children[0].children[1].checked = true;\r\n    setSubcategoriesMap(subcategories.vijesti);\r\n    setImageArray([]);\r\n    setImagePreview([]);\r\n    setTags([]);\r\n    setArticleAdded(false);\r\n    setCurProgress([]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (didMountRef.current) {\r\n      if (!sending) {\r\n        emptyFields();\r\n      }\r\n    } else {\r\n      didMountRef.current = true;\r\n      if (!location.state) {\r\n        setSubcategoriesMap([...subcategories.vijesti]);\r\n      }\r\n    }\r\n  }, [sending]);\r\n\r\n  const handleCloseOverlay = (e) => {\r\n    if (\r\n      (sendArticleOverlay.current.contains(e.target) &&\r\n        !progressRef.current.contains(e.target) &&\r\n        articleAdded) ||\r\n      (progressRef.current.children[0] &&\r\n        progressRef.current.children[0].children[1].contains(e.target) &&\r\n        articleAdded)\r\n    ) {\r\n      setSending(false);\r\n      if (location.state) {\r\n        window.history.replaceState(null, \"\");\r\n        history.replace(\"/editarticles\");\r\n      }\r\n      // emptyFields();\r\n    }\r\n  };\r\n\r\n  const handleIfPromo = (e) => {\r\n    const { value } = e.target;\r\n    if (value.length === 0) {\r\n      commentsRadio.current.children[0].children[1].disabled = false;\r\n      commentsRadio.current.children[1].children[1].disabled = false;\r\n      commentsRadio.current.children[0].children[1].checked = true;\r\n    }\r\n    if (value) {\r\n      const contains = checkIfContainsPromo(value);\r\n      if (contains) {\r\n        commentsRadio.current.children[0].children[1].disabled = true;\r\n        commentsRadio.current.children[1].children[1].disabled = true;\r\n      } else {\r\n        commentsRadio.current.children[0].children[1].disabled = false;\r\n        commentsRadio.current.children[1].children[1].disabled = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    const { value } = e.target;\r\n    switch (value) {\r\n      case \"Vijesti\":\r\n        setSubcategoriesMap([...subcategories.vijesti]);\r\n        break;\r\n      case \"Biznis\":\r\n        setSubcategoriesMap([...subcategories.biznis]);\r\n        break;\r\n      case \"Sport\":\r\n        setSubcategoriesMap([...subcategories.sport]);\r\n        break;\r\n      case \"Magazin\":\r\n        setSubcategoriesMap([...subcategories.magazin]);\r\n        break;\r\n      case \"Lifestyle\":\r\n        setSubcategoriesMap([...subcategories.lifestyle]);\r\n        break;\r\n      case \"Scitech\":\r\n        setSubcategoriesMap([...subcategories.scitech]);\r\n        break;\r\n      case \"Auto\":\r\n        setSubcategoriesMap([...subcategories.auto]);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const saveSubcategory = (e) => {\r\n    setSaveSubcat(e.target.value);\r\n  };\r\n\r\n  const dragStart = (e, ind) => {\r\n    e.dataTransfer.setData(\"text\", ind);\r\n    console.log(e.target.src);\r\n  };\r\n\r\n  const drop = (e, dropInd) => {\r\n    e.preventDefault();\r\n    let data = e.dataTransfer.getData(\"text\");\r\n    let drgIdx = 0;\r\n    let replacedIdx = 0;\r\n    if (+data === dropInd) {\r\n      return;\r\n    }\r\n    setDragIndex(+data);\r\n    drgIdx = +data;\r\n    replacedIdx = dropInd;\r\n    setReplacedIdx(dropInd);\r\n    console.log(imagePreview);\r\n    setImagePreview((old) => {\r\n      let oldArr = [...old];\r\n      oldArr[drgIdx] = { ...old[replacedIdx] };\r\n      oldArr[replacedIdx] = { ...old[drgIdx] };\r\n      console.log(oldArr);\r\n      return oldArr;\r\n    });\r\n  };\r\n\r\n  const allowDrop = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const imageCaptionTextAttach = () => {\r\n    let strValue = captionText.current.value;\r\n    if (strValue.trim() === \"blank\") {\r\n      //skip typing blank for every time if we have all blank imgs\r\n      strValue = [];\r\n      imagePreview.forEach((img, i) => {\r\n        strValue.push(\"blank\");\r\n      });\r\n    } else {\r\n      strValue = strValue.split(\" || \");\r\n    }\r\n    const finalValue = [];\r\n    if (imagePreview.length !== strValue.length) {\r\n      return;\r\n    }\r\n    imagePreview.forEach((img, i) => {\r\n      if (captionText.current.value.trim() !== \"\") {\r\n        finalValue.push({ name: img.name, captionText: strValue[i] });\r\n      } else {\r\n        finalValue.push({ name: img.name, captionText: \"\" });\r\n      }\r\n    });\r\n    console.log(finalValue);\r\n    return finalValue;\r\n  };\r\n\r\n  const showSecondListFn = () => {\r\n    setShowSecondList(true);\r\n  };\r\n\r\n  const hideSecondList = () => {\r\n    setShowSecondList(false);\r\n  };\r\n\r\n  const handleUlSwitch = () => {\r\n    setCurrentList((old) => {\r\n      if (old === \"ul\") {\r\n        return \"ol\";\r\n      } else {\r\n        return \"ul\";\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* {parse(\r\n        '<blockquote class=\"instagram-media\" data-instgrm-captioned data-instgrm-permalink=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" data-instgrm-version=\"13\" style=\" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);\"><div style=\"padding:16px;\"> <a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;\" target=\"_blank\"> <div style=\" display: flex; flex-direction: row; align-items: center;\"> <div style=\"background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;\"></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;\"></div></div></div><div style=\"padding: 19% 0;\"></div> <div style=\"display:block; height:50px; margin:0 auto 12px; width:50px;\"><svg width=\"50px\" height=\"50px\" viewBox=\"0 0 60 60\" version=\"1.1\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\"><g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(-511.000000, -20.000000)\" fill=\"#000000\"><g><path d=\"M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631\"></path></g></g></g></svg></div><div style=\"padding-top: 8px;\"> <div style=\" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;\"> View this post on Instagram</div></div><div style=\"padding: 12.5% 0;\"></div> <div style=\"display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;\"><div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);\"></div> <div style=\"background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;\"></div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);\"></div></div><div style=\"margin-left: 8px;\"> <div style=\" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;\"></div> <div style=\" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)\"></div></div><div style=\"margin-left: auto;\"> <div style=\" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);\"></div> <div style=\" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);\"></div> <div style=\" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);\"></div></div></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;\"></div></div></a><p style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;\"><a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;\" target=\"_blank\">A post shared by Chloe Ventura (@chloe.ventura)</a></p></div></blockquote>  <script async src=\"//www.instagram.com/embed.js\"></script>'\r\n      )}\r\n      {parse(\r\n        '<iframe src=\"https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2FKlix.ba%2Fposts%2F10158031303966821&show_text=true&width=500\" width=\"500\" height=\"487\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowfullscreen=\"true\" allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"></iframe>'\r\n      )} */}\r\n      {ctx.overlay && (\r\n        <Overlay handleConfirm={handleConfirmDeletion}>\r\n          <Modal />\r\n        </Overlay>\r\n      )}\r\n\r\n      {sending && (\r\n        <Overlay\r\n          ref={sendArticleOverlay}\r\n          handleCloseOverlay={handleCloseOverlay}\r\n        >\r\n          <ProgressBar\r\n            progress={progress}\r\n            ref={progressRef}\r\n            articleAdded={articleAdded}\r\n            location={location.state ? location.state : null}\r\n          />\r\n        </Overlay>\r\n      )}\r\n\r\n      <div id={s.addArticle}>\r\n        <div id={s.addArticleBody}>\r\n          <div id={s.addArticleContent}>\r\n            <div id={s.addTitle} ref={titles}>\r\n              <input type=\"text\" placeholder=\"Naslov ƒçlanka\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Podnaslov ƒçlanka\"\r\n                onChange={handleIfPromo}\r\n              />\r\n            </div>\r\n            <div id={s.addText}>\r\n              <div id={s.addTextHeader}>\r\n                <i class=\"fas fa-chevron-down\"></i>\r\n                Tekst\r\n              </div>\r\n              <div id={s.addTextBody}>\r\n                <div id={s.addTextBodyHeader}>\r\n                  <ul>\r\n                    <li title=\"bold\" onMouseDown={handleBold}>\r\n                      B\r\n                    </li>\r\n                    <li\r\n                      title=\"list\"\r\n                      onMouseDown={handleList}\r\n                      onMouseEnter={showSecondListFn}\r\n                      onMouseLeave={hideSecondList}\r\n                    >\r\n                      {currentList === \"ul\" ? (\r\n                        <i class=\"fas fa-list-ul\"></i>\r\n                      ) : (\r\n                        <i class=\"fas fa-list-ol\"></i>\r\n                      )}\r\n                      {showSecondList && (\r\n                        <div id={s.listOl} onMouseDown={handleUlSwitch}>\r\n                          {currentList === \"ul\" ? (\r\n                            <i class=\"fas fa-list-ol\"></i>\r\n                          ) : (\r\n                            <i class=\"fas fa-list-ul\"></i>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </li>\r\n                    <li title=\"embed\" onMouseDown={handleEmbed}>\r\n                      &lt;&gt;\r\n                    </li>\r\n                    <li title=\"link\" onMouseDown={handleLink}>\r\n                      <i class=\"fas fa-link\"></i>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n                <div id={s.addTextBodyBody}>\r\n                  <textarea\r\n                    ref={textareaRef}\r\n                    onKeyDown={handleEnter}\r\n                    onPaste={handlePaste}\r\n                    onChange={handleChange}\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div id={s.addImages}>\r\n              <div id={s.addImagesHeader}>\r\n                <div id={s.addImagesBundleLeft}>\r\n                  <i class=\"fas fa-chevron-down\"></i>\r\n                  Slike\r\n                </div>\r\n                <div id={s.addImagesBundleRight}>\r\n                  <i onClick={handleDeleteMode} class=\"far fa-trash-alt\"></i>\r\n                </div>\r\n              </div>\r\n              <div id={s.addImagesBody}>\r\n                <div className={s.uploadImageContainer}>\r\n                  <div id={s.uploadImageText}>Postavi slike</div>\r\n                  <div id={s.uploadImage} ref={postaviSlikeBorder}>\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"file\"\r\n                      accept=\"image/*\"\r\n                      multiple={true}\r\n                      onChange={handleImages}\r\n                    />\r\n                    <label\r\n                      htmlFor=\"file\"\r\n                      onMouseEnter={handleHoverEnter}\r\n                      onMouseLeave={handleHoverLeave}\r\n                    >\r\n                      <i class=\"fas fa-images\"></i>\r\n                      <span ref={postaviSlikeText}>Postavi slike</span>\r\n                    </label>\r\n                    <div id={s.imageContainer} ref={imgCnt}>\r\n                      {imagePreview &&\r\n                        imagePreview.length > 0 &&\r\n                        imagePreview.map((img, i) => (\r\n                          <div\r\n                            key={uuid()}\r\n                            className={s.imageWrapper}\r\n                            onClick={handleDeleteImg}\r\n                            draggable={true}\r\n                            onDragStart={(e) => dragStart(e, i)}\r\n                            onDrop={(e) => drop(e, i)}\r\n                            onDragOver={allowDrop}\r\n                          >\r\n                            <img className={s.previewImage} src={img.url} />\r\n                            <div\r\n                              className={\r\n                                img.checked === \"true\" ? s.deletable : null\r\n                              }\r\n                            />\r\n                          </div>\r\n                        ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className={s.imageCaptionContainer}>\r\n                  <div id={s.imageCaptionText}>Natpis</div>\r\n                  <div id={s.imageCaption}>\r\n                    <textarea ref={captionText} type=\"text\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id={s.addArticleInfo}>\r\n            <div id={s.author}>\r\n              <h3>Autor</h3>\r\n              <div id={s.authorCnt}>\r\n                <div id={s.authorInfo}>\r\n                  <i class=\"fas fa-user\"></i>{\" \"}\r\n                  <span style={{ textTransform: \"capitalize\" }}>\r\n                    {ctx.user.displayName}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={handleUpload}\r\n                  disabled={sending ? true : false}\r\n                >\r\n                  Spasi\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div id={s.category}>\r\n              <label htmlFor=\"category\">Kategorija</label>\r\n              <select\r\n                id=\"category\"\r\n                ref={categorySelect}\r\n                onChange={handleCategoryChange}\r\n              >\r\n                <option>Vijesti</option>\r\n                <option>Biznis</option>\r\n                <option>Sport</option>\r\n                <option>Magazin</option>\r\n                <option>Lifestyle</option>\r\n                <option>Scitech</option>\r\n                <option>Auto</option>\r\n              </select>\r\n              <label id={s.subcategory}>Podkategorija</label>\r\n              <select\r\n                ref={subcategorySelect}\r\n                value={saveSubcat}\r\n                onChange={saveSubcategory}\r\n              >\r\n                {subcategoriesMap.map((item) => {\r\n                  return <option key={uuid()}>{item}</option>;\r\n                })}\r\n              </select>\r\n            </div>\r\n            <div id={s.tag}>\r\n              <h4>Tagovi</h4>\r\n              <input type=\"text\" onKeyDown={handleAddTags} />\r\n              <div id={s.tagContainer} ref={tagContainer}>\r\n                {tags.map((tag) => (\r\n                  <div className={s.tagItem} key={uuid()}>\r\n                    <span>{tag.value ? tag.value : tag}</span>\r\n                    <i onClick={handleRemoveTag} class=\"fas fa-times\"></i>\r\n                  </div>\r\n                ))}\r\n                {/* <div className={s.tagItem}>\r\n                  <span>Hello</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Hello</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={s.tagItem}>\r\n                  <span>Helloasdasd</span>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n            <div id={s.commentsAllowed}>\r\n              <div>\r\n                <h3>Dozvoli komentare:</h3>\r\n              </div>\r\n              <div id={s.commentBundle} ref={commentsRadio}>\r\n                <div className={s.commentItem}>\r\n                  <label htmlFor=\"komentda\">Da</label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    id=\"komentda\"\r\n                    name=\"koment\"\r\n                    defaultChecked\r\n                  />\r\n                </div>\r\n                <div className={s.commentItem}>\r\n                  <label htmlFor=\"komentne\">Ne</label>\r\n                  <input type=\"radio\" id=\"komentne\" name=\"koment\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddArticle;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nimport s from \"./ArticleLink.module.css\";\r\n\r\nexport const clrs = {\r\n  vijesti: \"#d33d3d\",\r\n  biznis: \"#ef6f3e\",\r\n  sport: \"#55ac53\",\r\n  magazin: \"#a45091\",\r\n  lifestyle: \"#e2a600\",\r\n  scitech: \"#40afee\",\r\n  auto: \"#487baf\",\r\n};\r\n\r\nconst ArticleLink = (props) => {\r\n  useEffect(() => {\r\n    console.log(props);\r\n  }, []);\r\n  return (\r\n    <div id={s.articleLink}>\r\n      <Link\r\n        to={{\r\n          pathname: encodeURI(\r\n            `/${props.category}/${props.subCategory}/${splitTitle(\r\n              props.title\r\n            )}/${props.id}`\r\n          ),\r\n          state: undefined,\r\n        }}\r\n      >\r\n        <div id={s.articleLinkImage}>\r\n          <img src={props.imageUrl} />\r\n        </div>\r\n        <div id={s.articleLinkText}>\r\n          <h3 style={{ color: clrs[props.category.toLowerCase()] }}>\r\n            {props.subTitle}\r\n          </h3>\r\n          <h3>{props.title}</h3>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ArticleLink;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport s from \"./EditArticle.module.css\";\r\nimport { subcategories } from \"../AddArticle\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport Overlay from \"../../Overlay/Overlay\";\r\n\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { db } from \"../../../firebase\";\r\nimport Modal from \"../../Modal/Modal\";\r\nimport { clrs } from \"../../ArticleLink/ArticleLink\";\r\n\r\nexport const articleColors = {\r\n  vijesti: \"#d33d3d\",\r\n  biznis: \"#ef6f3e\",\r\n  sport: \"#55ac53\",\r\n  magazin: \"#a45091\",\r\n  lifestyle: \"#e2a600\",\r\n  scitech: \"#40afee\",\r\n  auto: \"#487baf\",\r\n};\r\n\r\nfunction daysInMonth(month, year) {\r\n  return new Date(year, month, 0).getDate();\r\n}\r\n\r\nexport const timeDifference = (time) => {\r\n  const date = new Date();\r\n  const curTime = [\r\n    date.getFullYear(),\r\n    date.getMonth() + 1,\r\n    date.getDate(),\r\n    date.getHours(),\r\n    date.getMinutes(),\r\n    date.getSeconds(),\r\n  ];\r\n  let difference;\r\n  let transformedDate;\r\n  if (time) {\r\n    transformedDate = time.split(/-|:| /);\r\n  } else {\r\n    return;\r\n  }\r\n  for (let i = 0; i < transformedDate.length; i++) {\r\n    transformedDate[i] = +transformedDate[i];\r\n  }\r\n  let year;\r\n  let month;\r\n  let dateDiff;\r\n  let hour;\r\n  let minute;\r\n  let second;\r\n  year = curTime[0] - transformedDate[0];\r\n  month = curTime[1] - transformedDate[1];\r\n  // console.log(month);\r\n  dateDiff = curTime[2] - transformedDate[2];\r\n  // console.log(dateDiff);\r\n  hour = curTime[3] - transformedDate[3];\r\n  // console.log(hour);\r\n  minute = curTime[4] - transformedDate[4];\r\n  second = curTime[5] - transformedDate[5];\r\n  // console.log(transformedDate);\r\n  let monthLower = false;\r\n  let dateLower = false;\r\n  let hourLower = false;\r\n  let minuteLower = false;\r\n  let secondLower = false;\r\n  // console.log(second);\r\n  if (month < 0) {\r\n    monthLower = true;\r\n  }\r\n  if (dateDiff < 0) {\r\n    dateLower = true;\r\n  }\r\n  if (hour < 0) {\r\n    hourLower = true;\r\n  }\r\n  if (minute < 0) {\r\n    minuteLower = true;\r\n  }\r\n  if (second < 0) {\r\n    secondLower = true;\r\n  }\r\n\r\n  // console.log(curTime[4]);\r\n  // console.log(transformedDate[4]);\r\n  difference = `${\r\n    monthLower && year > 0\r\n      ? year - 1\r\n      : month === 0 && dateLower && year > 0\r\n      ? year - 1\r\n      : month >= 0 && year > 0 //we checked above if date is a problem when month is zero, we care about this when are switching from false to true('prelamanja') later we dont as we se here\r\n      ? year\r\n      : year - 1\r\n  } ${\r\n    dateLower && month > 0\r\n      ? month - 1\r\n      : dateLower && month < 0\r\n      ? 12 - Math.abs(month - 1) //-1 cuz date is lower\r\n      : dateDiff === 0 && hourLower && month < 0\r\n      ? 12 - Math.abs(month - 1) //then it's again -1 cuz month is not there yet, it's few hours away\r\n      : dateDiff === 0 && hourLower && month > 0\r\n      ? 12 - Math.abs(month - 1 === 0 ? -12 : month - 1)\r\n      : !dateLower && month < 0\r\n      ? 12 - Math.abs(month)\r\n      : month\r\n  } ${\r\n    // hourLower && dateDiff > 0\r\n    //   ? dateDiff - 1\r\n    //   : hourLower && dateDiff < 0\r\n    //   ? daysInMonth(date.getMonth + 1, curTime[0]) - Math.abs(dateDiff - 1)\r\n    //   : !hourLower && dateDiff < 0\r\n    //   ? daysInMonth(date.getMonth() + 1, curTime[0]) - Math.abs(dateDiff)\r\n    //   : dateDiff\r\n    hourLower && dateDiff > 0\r\n      ? dateDiff - 1\r\n      : hour >= 0 && hour <= 1 && minuteLower && dateDiff < 0\r\n      ? daysInMonth(date.getMonth() + 1, date.getFullYear()) -\r\n        Math.abs(\r\n          dateDiff -\r\n            (daysInMonth(transformedDate[2], transformedDate[0]) >\r\n              daysInMonth(date.getMonth() + 1, date.getFullYear()) &&\r\n            date.getMonth() + 1 === 2 &&\r\n            daysInMonth(2, date.getFullYear()) === 28 //when feb got 28days and below then it's 29\r\n              ? -1\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) >\r\n                  daysInMonth(date.getMonth() + 1, date.getFullYear()) &&\r\n                date.getMonth() + 1 === 2 &&\r\n                daysInMonth(2, date.getFullYear()) === 29\r\n              ? 0\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) >\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? 0\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) <\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? 2 // -2 cuz this month the num of days is greater than the prev month\r\n              : 1) //-1 day cuz of minute lower, not quite there yet, so when it's 30v30 so the first nor the sec option are true so this is true\r\n        )\r\n      : hourLower && dateDiff < 0 //above we have the case where we care about the exact time, so we look at the minutes to update the hours here, if that is not the case we take this one\r\n      ? daysInMonth(date.getMonth() + 1, curTime[0]) -\r\n        Math.abs(\r\n          dateDiff -\r\n            (daysInMonth(transformedDate[2], transformedDate[0]) >\r\n            daysInMonth(date.getMonth() + 1, curTime[0])\r\n              ? 0\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) <\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? 2\r\n              : 1) //same logic as below just that its hourlower so u do -1 day\r\n        )\r\n      : !hourLower && dateDiff < 0\r\n      ? daysInMonth(date.getMonth() + 1, curTime[0]) -\r\n        Math.abs(\r\n          dateDiff +\r\n            (daysInMonth(transformedDate[2], transformedDate[0]) >\r\n            daysInMonth(date.getMonth() + 1, curTime[0])\r\n              ? 1\r\n              : daysInMonth(transformedDate[2], transformedDate[0]) <\r\n                daysInMonth(date.getMonth() + 1, date.getFullYear())\r\n              ? -1\r\n              : 0) //if past month has more days than this month then add +1 to the datediff so if  it was posted 31 last month this month its the 30th then its 30-31 = -1 -> 30(days in this month) - 1(math.abs -1 = 1) -> prije 29 dana nego prije 30\r\n        )\r\n      : hourLower && dateDiff === 0 && month - 1 === 0\r\n      ? curTime[2] - 1\r\n      : dateDiff\r\n  } ${\r\n    minuteLower && hour > 0\r\n      ? hour - 1\r\n      : minuteLower && hour < 0\r\n      ? 24 - Math.abs(hour - 1)\r\n      : minute >= 0 && minute <= 1 && secondLower && hour < 0\r\n      ? 24 - Math.abs(hour - 1)\r\n      : dateDiff === 0 && month - 1 === 0 && minuteLower && hour < 0\r\n      ? hour - 1\r\n      : dateDiff === 0 && month - 1 === 0 && !minuteLower && hour < 0\r\n      ? hour\r\n      : !minuteLower && hour < 0\r\n      ? 24 - Math.abs(hour)\r\n      : minute >= 0 && minute <= 1 && secondLower && hour > 0\r\n      ? hour - 1\r\n      : hour\r\n  } ${\r\n    secondLower && minute > 0\r\n      ? minute - 1\r\n      : secondLower && minute < 0\r\n      ? 60 - Math.abs(minute - 1)\r\n      : !secondLower && minute < 0\r\n      ? 60 - Math.abs(minute)\r\n      : minute\r\n  } ${secondLower ? 60 - Math.abs(second) : second}`;\r\n  // console.log(difference);\r\n  difference = difference.split(\" \");\r\n\r\n  let check = false;\r\n  let returnVal = \"\";\r\n  difference.forEach((diff, i) => {\r\n    if (+diff !== 0 && diff > 0 && !check) {\r\n      check = true;\r\n      switch (i) {\r\n        case 0:\r\n          returnVal = `${diff} god`;\r\n          break;\r\n        case 1:\r\n          returnVal = `${diff} mje`;\r\n          break;\r\n        case 2:\r\n          if (diff[diff.length - 1] == 1 && diff != 11) {\r\n            returnVal = `${diff} dan`;\r\n            break;\r\n          } else {\r\n            returnVal = `${diff} dana`;\r\n            break;\r\n          }\r\n        case 3:\r\n          let xform = diff;\r\n          xform = xform.split(\"\");\r\n          xform.forEach((item, i) => {\r\n            if (i === xform.length - 1) {\r\n              if (item == 1 && diff != 11) {\r\n                returnVal = `${diff} sat`;\r\n              } else if (\r\n                (item == 2 || item == 3 || item == 4) &&\r\n                (diff <= 4 || diff >= 22)\r\n              ) {\r\n                returnVal = `${diff} sata`;\r\n              } else if (\r\n                item == 0 ||\r\n                item == 5 ||\r\n                item == 6 ||\r\n                item == 7 ||\r\n                item == 8 ||\r\n                item == 9 ||\r\n                diff == 11 ||\r\n                diff == 12 ||\r\n                diff == 13 ||\r\n                diff == 14\r\n              ) {\r\n                returnVal = `${diff} sati`;\r\n              }\r\n            }\r\n          });\r\n          // console.log(xform);\r\n          break;\r\n        case 4:\r\n          returnVal = `${diff} min`;\r\n          break;\r\n        case 5:\r\n          returnVal = `${diff} sek`;\r\n          break;\r\n      }\r\n    }\r\n    // else if (!check && i === difference.length - 1) {\r\n    //   alert(`${diff} sekundi`);\r\n    // }\r\n  });\r\n  // console.log(transformedDate);\r\n  // console.log(curTime);\r\n  return returnVal;\r\n};\r\n\r\nconst EditArticles = () => {\r\n  const [select, setSelect] = useState([...subcategories.vijesti]);\r\n  const [curSelect, setCurSelect] = useState(\"BiH\");\r\n  const [selectTwo, setSelectTwo] = useState([...subcategories.poƒçetna]);\r\n  const [curSelectTwo, setCurSelectTwo] = useState(\"Vijesti\");\r\n  const [glavni, setGlavni] = useState(true);\r\n  const [adding, setAdding] = useState(false);\r\n  const [addingModus, setAddingModus] = useState(false);\r\n  const [switchingModus, setSwitchingModus] = useState(false);\r\n  const [showSubCat, setShowSubCat] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [switching, setSwitching] = useState(false);\r\n  const [editing, setEditing] = useState(false);\r\n  const [articles, setArticles] = useState([{}, {}, {}, {}, {}, {}, {}]);\r\n  const [clickedPos, setClickedPos] = useState(null);\r\n  const [fetchPos, setFetchPos] = useState(null);\r\n  const [showAddingItem, setShowAddingItem] = useState(false);\r\n  const [switchMode, setSwitchMode] = useState(false);\r\n\r\n  const switchSelect = useRef();\r\n  const selectMainVal = useRef();\r\n  const articleFetchCnt = useRef();\r\n  const mainContentCnt = useRef();\r\n  const subConentCntLeft = useRef();\r\n  const subConentCntRight = useRef();\r\n  const modalRef = useRef();\r\n  const addArticleBox = useRef();\r\n  const switchArticleBox = useRef();\r\n  const editArticleBox = useRef();\r\n  const switchSelect2 = useRef();\r\n  const history = useHistory();\r\n\r\n  const [articleFetch, setArticleFetch] = useState([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(subcategories);\r\n    if (articles) {\r\n      console.log(articles[0]);\r\n    }\r\n    console.log(articles);\r\n  });\r\n\r\n  useEffect(() => {\r\n    console.log(switchSelect.current.value);\r\n    // window.addEventListener('popstate', () => {\r\n    //   alert('popped');\r\n    // });\r\n    fetchArticles(\"init\");\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (articleFetch) {\r\n      console.log(articleFetch);\r\n    }\r\n  }, [articleFetch]);\r\n\r\n  const handleSelectChange = (e, mode) => {\r\n    if (mode === \"dva\") {\r\n      setCurSelectTwo(e.target.value);\r\n      if (\r\n        switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n        switchSelect2.current.value === \"Poƒçetna\"\r\n      ) {\r\n        console.log(e.target.value);\r\n        setSelect([...subcategories[e.target.value.toLowerCase()]]);\r\n        setCurSelect(subcategories[e.target.value.toLowerCase()][0]);\r\n      }\r\n    } else if (mode === \"jedan\") {\r\n      setCurSelect(e.target.value);\r\n    }\r\n  };\r\n\r\n  const handleSelectMain = (e, mode) => {\r\n    //mode = jedan (editing and adding in overlay), two = main select box\r\n    setArticleFetch([]);\r\n    const { value } = (e && e.target) || switchSelect2.current;\r\n    if (\r\n      mode === \"two\" &&\r\n      switchSelect2.current.value === \"Poƒçetna\" &&\r\n      switchSelect.current.value === \"Glavni sadr≈æaj\"\r\n    ) {\r\n      setShowSubCat(false);\r\n    } else {\r\n      setShowSubCat(true);\r\n    }\r\n    if (mode === \"two\" && switchSelect2.current.value !== \"Poƒçetna\") {\r\n      //when adding, if we do not change the subcat(so it's automatically the first subcat) and we press fetch cnt it wont work because curselect didnt change, this way we fix it\r\n      setCurSelect(subcategories[value.toLowerCase()][0]);\r\n    }\r\n    if (\r\n      switchSelect.current.value !== \"Sporedni sadr≈æaj\" &&\r\n      switchSelect2.current.value !== \"Poƒçetna\"\r\n    ) {\r\n      setSelect([...subcategories[value.toLowerCase()]]);\r\n    } else {\r\n      console.log(curSelectTwo);\r\n      if (\r\n        switchSelect2.current.value === \"Poƒçetna\" &&\r\n        subcategories[curSelectTwo.toLowerCase()]\r\n      ) {\r\n        setSelect([...subcategories[curSelectTwo.toLowerCase()]]);\r\n        setCurSelect(subcategories[curSelectTwo.toLowerCase()][0]);\r\n      } else {\r\n        if (\r\n          !subcategories[curSelectTwo.toLowerCase()] &&\r\n          switchSelect2.current.value === \"Poƒçetna\"\r\n        ) {\r\n          setSelect([...subcategories.vijesti]);\r\n          setCurSelect(subcategories.vijesti[0]);\r\n        } else {\r\n          setSelect([\r\n            ...subcategories[switchSelect2.current.value.toLowerCase()],\r\n          ]);\r\n          setCurSelect(\r\n            subcategories[switchSelect2.current.value.toLowerCase()][0]\r\n          );\r\n        }\r\n      }\r\n    }\r\n    switch (value) {\r\n      case \"Poƒçetna\":\r\n        if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.poƒçetna]);\r\n          setCurSelectTwo(subcategories.poƒçetna[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Vijesti\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.vijesti]);\r\n          setCurSelect(subcategories.vijesti[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.vijesti]);\r\n          setCurSelectTwo(subcategories.vijesti[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Biznis\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.biznis]);\r\n          setCurSelect(subcategories.biznis[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.biznis]);\r\n          setCurSelectTwo(subcategories.biznis[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Sport\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.sport]);\r\n          setCurSelect(subcategories.sport[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.sport]);\r\n          setCurSelectTwo(subcategories.sport[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Magazin\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.magazin]);\r\n          setCurSelect(subcategories.magazin[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.magazin]);\r\n          setCurSelectTwo(subcategories.magazin[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Lifestyle\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.lifestyle]);\r\n          setCurSelect(subcategories.lifestyle[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.lifestyle]);\r\n          setCurSelectTwo(subcategories.lifestyle[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Scitech\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.scitech]);\r\n          setCurSelect(subcategories.scitech[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.scitech]);\r\n          setCurSelectTwo(subcategories.scitech[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n      case \"Auto\":\r\n        if (mode === \"jedan\") {\r\n          setSelect([...subcategories.auto]);\r\n          setCurSelect(subcategories.auto[0]);\r\n          break;\r\n        } else if (mode === \"two\") {\r\n          setSelectTwo([...subcategories.auto]);\r\n          setCurSelectTwo(subcategories.auto[0]);\r\n          if (glavni) {\r\n            fetchArticles(\"init\");\r\n          }\r\n          break;\r\n        }\r\n    }\r\n  };\r\n\r\n  const handleGlavni = (e) => {\r\n    if (e.target.value === \"Glavni sadr≈æaj\") {\r\n      setGlavni(true);\r\n      switchSelect2.current.value = \"Poƒçetna\";\r\n      setSwitchMode(true);\r\n    } else {\r\n      setGlavni(false);\r\n      switchSelect2.current.value = \"Poƒçetna\";\r\n      setSelectTwo([...subcategories[\"poƒçetna\"]]);\r\n      setCurSelectTwo(\"Vijesti\");\r\n      setSwitchMode(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!glavni && curSelectTwo && switchMode) {\r\n      handleSelectMain(null, \"two\");\r\n      setSwitchMode(false);\r\n    } else if (!glavni && curSelectTwo) {\r\n      fetchArticles(\"init\");\r\n    } else if (glavni && switchMode) {\r\n      handleSelectMain(null, \"two\");\r\n      setSwitchMode(false);\r\n    }\r\n  }, [glavni, curSelectTwo, switchMode]);\r\n\r\n  const handleCloseOverlay = (e) => {\r\n    const { id } = e.target;\r\n    if (id.includes(\"overlay\") && !showModal) {\r\n      setAdding(false);\r\n      if (\r\n        switchSelect2.current.value === \"Poƒçetna\" &&\r\n        switchSelect.current.value === \"Glavni sadr≈æaj\"\r\n      ) {\r\n        setShowSubCat(false);\r\n      }\r\n      setArticleFetch([]);\r\n      setClickedPos(null);\r\n      if (editing) {\r\n        setEditing(false);\r\n        handleSelectMain(null, \"two\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const fetchArticles = (mode) => {\r\n    setLoading(true);\r\n    let dbRef = undefined;\r\n    console.log(mode);\r\n    if (mode === \"init\") {\r\n      if (switchSelect.current.value === \"Glavni sadr≈æaj\") {\r\n        dbRef = db.ref(\r\n          `viewContent/${switchSelect.current.value}/${switchSelect2.current.value}`\r\n        );\r\n      } else if (switchSelect.current.value === \"Sporedni sadr≈æaj\") {\r\n        dbRef = db.ref(\r\n          `viewContent/${switchSelect.current.value}/${switchSelect2.current.value}/${curSelectTwo}`\r\n        );\r\n        console.log(\r\n          `viewContent/${switchSelect.current.value}/${switchSelect2.current.value}/${curSelectTwo}`\r\n        );\r\n      }\r\n      dbRef.get().then((snapshot) => {\r\n        if (snapshot.exists) {\r\n          const data = snapshot.val();\r\n          console.log(data);\r\n          if (!data) {\r\n            if (\r\n              switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n              (curSelectTwo !== \"Auto\" || curSelectTwo !== \"Scitech\")\r\n            ) {\r\n              setArticles([{}, {}, {}, {}, {}, {}]);\r\n            } else if (\r\n              (switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n                switchSelect2.current.value ===\r\n                  \"Poƒçetna\"(\r\n                    curSelectTwo === \"Auto\" || curSelectTwo === \"Scitech\"\r\n                  )) ||\r\n              (switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n                switchSelect2.current.value !== \"Poƒçetna\")\r\n            ) {\r\n              setArticles([{}, {}, {}, {}]);\r\n            } else {\r\n              setArticles([{}, {}, {}, {}, {}, {}, {}]);\r\n            }\r\n            return;\r\n          }\r\n          let realData = [];\r\n          const dataReady = [];\r\n          let incr = 0;\r\n          for (let key in data) {\r\n            realData.push(data[key]);\r\n            console.log(data[key]);\r\n            // if (realData[incr]) {\r\n            //   realData[incr].timeDiff = timeDifference(realData[incr].date);\r\n            //   incr++;\r\n            // }\r\n          }\r\n          console.log(realData[0]);\r\n          const promises = [];\r\n          realData[0].forEach((art, i) => {\r\n            console.log(art[1]);\r\n            console.log(art[0]);\r\n            // if (i < 6) {\r\n            if (Array.isArray(art)) {\r\n              promises.push(\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${art[1]}/-${art[0]}.json`\r\n                ).then((response) => response.json())\r\n              );\r\n            }\r\n            // }\r\n          });\r\n\r\n          const promisedData = Promise.all(promises);\r\n          promisedData.then((data) => {\r\n            console.log(data);\r\n            let cpy = [];\r\n            // dataReady.push(data);\r\n            // if (dataReady[incr]) {\r\n            //   dataReady[incr].timeDiff = timeDifference(dataReady[incr].date);\r\n            //   incr++;\r\n            // }\r\n            for (let i = 0; i < data.length; i++) {\r\n              data[i].timeDiff = timeDifference(data[i].date);\r\n            }\r\n            if (data.length < 7) {\r\n              //if what we have fetched has empty str fields, so some places have an art some do not\r\n              let inc = 0;\r\n              realData[0].forEach((art) => {\r\n                if (!art) {\r\n                  cpy.push({});\r\n                } else {\r\n                  cpy.push(data[inc]);\r\n                  inc++;\r\n                }\r\n              });\r\n              console.log(cpy);\r\n              cpy.forEach((cp) => {\r\n                console.log(Object.keys(cp).length);\r\n              });\r\n              setArticles(cpy);\r\n            } else {\r\n              setArticles(data);\r\n            }\r\n            // if (i === realData[0].length - 1) {\r\n            //   if (dataReady.length < 7) {\r\n            //     const diff = 7 - dataReady.length;\r\n            //     for (let i = 0; i < diff; i++) {\r\n            //       dataReady.push({});\r\n            //     }\r\n            //   }\r\n            //   setArticles(dataReady);\r\n            // }\r\n          });\r\n          // setArticles(realData);\r\n        }\r\n      });\r\n    } else {\r\n      //fetchdata in adding/editing overlay box\r\n      const mainVal = selectMainVal.current.value;\r\n      dbRef = db.ref(`articles/${mainVal}/${curSelect}`);\r\n      console.log(curSelect);\r\n      dbRef.get().then((snapshot) => {\r\n        if (snapshot.exists) {\r\n          const data = snapshot.val();\r\n          let realData = [];\r\n          let incr = 0;\r\n          for (let key in data) {\r\n            realData.push(data[key]);\r\n            realData[incr].timeDiff = timeDifference(realData[incr].date);\r\n            incr++;\r\n          }\r\n          realData.reverse();\r\n          setArticleFetch(realData);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddFetchedArticle = (e) => {\r\n    if (articleFetchCnt.current) {\r\n      for (let i = 0; i < articleFetchCnt.current.children.length; i++) {\r\n        if (articleFetchCnt.current.children[i].contains(e.target)) {\r\n          console.log(articleFetch[i]);\r\n          setFetchPos(i);\r\n          setShowModal(true);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditFetchedArticle = (e, artItem) => {\r\n    console.log(artItem);\r\n    if (e.button == 1 || e.buttons == 4) {\r\n      // e.preventDefault();\r\n      alert(\"ne moze se koristiti srednji klik\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {}, []);\r\n\r\n  const handleSetPos = (e) => {};\r\n\r\n  const showAdding = (ind) => {\r\n    if (!switching) {\r\n      setClickedPos(ind);\r\n      console.log(ind);\r\n    }\r\n  };\r\n  const hideAdding = () => {\r\n    setClickedPos(null);\r\n  };\r\n\r\n  const handleConfirmation = (e) => {\r\n    if (e.target.textContent === \"Da\") {\r\n      // alert(clickedPos);\r\n      // alert(fetchPos);\r\n      setArticles((old) => {\r\n        let newArr = [...old];\r\n        newArr[clickedPos] = articleFetch[fetchPos];\r\n        return newArr;\r\n      });\r\n      setShowModal(false);\r\n      setAdding(false);\r\n      // setShowSubCat(false);\r\n      setArticleFetch([]);\r\n      setClickedPos(null);\r\n      setFetchPos(null);\r\n    } else if (e.target.textContent === \"Ne\") {\r\n      setShowModal(false);\r\n      setFetchPos(null);\r\n    }\r\n  };\r\n\r\n  const handleModeSwitch = (e, input) => {\r\n    const { value } = e.target;\r\n    if (input === \"dodaj\") {\r\n      if (!addingModus) {\r\n        setAddingModus(true);\r\n      } else {\r\n        setAddingModus(false);\r\n      }\r\n      if (editing) {\r\n        setEditing(false);\r\n      } else if (switchingModus) {\r\n        setSwitchingModus(false);\r\n      }\r\n    } else if (input === \"zamjeni\") {\r\n      if (!switchingModus) {\r\n        setSwitchingModus(true);\r\n      } else {\r\n        setSwitchingModus(false);\r\n      }\r\n      if (addingModus) {\r\n        setAddingModus(false);\r\n      } else if (editing) {\r\n        setEditing(false);\r\n      }\r\n    } else if (input === \"edituj\") {\r\n      setEditing(true);\r\n      setShowSubCat(false);\r\n      if (addingModus) {\r\n        setAddingModus(false);\r\n      } else if (switchingModus) {\r\n        setSwitchingModus(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const dragStart = (e) => {\r\n    let dragNum;\r\n    if (switchingModus) {\r\n      if (!glavni) {\r\n        if (\r\n          subConentCntRight.current &&\r\n          subConentCntRight.current.contains(e.target)\r\n        ) {\r\n          for (let i = 0; i < subConentCntRight.current.children.length; i++) {\r\n            if (subConentCntRight.current.children[i].contains(e.target)) {\r\n              if (i === 0) {\r\n                dragNum = 4;\r\n              } else {\r\n                dragNum = 5;\r\n              }\r\n            }\r\n          }\r\n          const xferObj = { dragPos: +dragNum, place: \"right\" };\r\n          e.dataTransfer.setData(\"text\", JSON.stringify(xferObj));\r\n        } else if (subConentCntLeft.current.contains(e.target)) {\r\n          for (let i = 0; i < subConentCntLeft.current.children.length; i++) {\r\n            if (subConentCntLeft.current.children[i].contains(e.target)) {\r\n              dragNum = i;\r\n              const xferObj = { dragPos: +dragNum, place: \"left\" };\r\n              e.dataTransfer.setData(\"text\", JSON.stringify(xferObj));\r\n            }\r\n          }\r\n        }\r\n      } else if (glavni) {\r\n        if (mainContentCnt.current.contains(e.target)) {\r\n          for (let i = 0; i < mainContentCnt.current.children.length; i++) {\r\n            if (mainContentCnt.current.children[i].contains(e.target)) {\r\n              dragNum = i;\r\n              const xferObj = { dragPos: +dragNum };\r\n              e.dataTransfer.setData(\"text\", JSON.stringify(xferObj));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const allowDrop = (e) => {\r\n    if (switchingModus) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const drop = (e) => {\r\n    e.preventDefault();\r\n    let droppedPos = 0;\r\n    if (switchingModus) {\r\n      if (!glavni) {\r\n        if (\r\n          subConentCntRight.current &&\r\n          subConentCntRight.current.contains(e.target)\r\n        ) {\r\n          for (let i = 0; i < subConentCntRight.current.children.length; i++) {\r\n            if (subConentCntRight.current.children[i].contains(e.target)) {\r\n              if (i === 0) {\r\n                droppedPos = 4;\r\n              } else if (i === 1) {\r\n                droppedPos = 5;\r\n              }\r\n              let dragData = e.dataTransfer.getData(\"text\");\r\n              dragData = JSON.parse(dragData);\r\n              setArticles((old) => {\r\n                let newArr = [...old];\r\n                let extra = [...old];\r\n                newArr[dragData.dragPos] = { ...extra[droppedPos] };\r\n                newArr[droppedPos] = { ...extra[dragData.dragPos] };\r\n                return newArr;\r\n              });\r\n            }\r\n          }\r\n        }\r\n        if (subConentCntLeft.current.contains(e.target)) {\r\n          for (let i = 0; i < subConentCntLeft.current.children.length; i++) {\r\n            if (subConentCntLeft.current.children[i].contains(e.target)) {\r\n              droppedPos = i;\r\n            }\r\n          }\r\n          let dragData = e.dataTransfer.getData(\"text\");\r\n          dragData = JSON.parse(dragData);\r\n          console.log(dragData);\r\n          if (dragData.place === \"right\") {\r\n            setArticles((old) => {\r\n              let newArr = [...old];\r\n              let extra = [...old];\r\n              newArr[dragData.dragPos] = { ...extra[droppedPos] };\r\n              newArr[droppedPos] = { ...extra[dragData.dragPos] };\r\n              return newArr;\r\n            });\r\n          } else if (dragData.place === \"left\") {\r\n            setArticles((old) => {\r\n              let newArr = [...old];\r\n              let extra = [...old];\r\n              newArr[clickedPos] = { ...extra[droppedPos] };\r\n              newArr[droppedPos] = { ...extra[clickedPos] };\r\n              return newArr;\r\n            });\r\n          }\r\n        }\r\n      } else if (glavni) {\r\n        if (mainContentCnt.current.contains(e.target)) {\r\n          for (let i = 0; i < mainContentCnt.current.children.length; i++) {\r\n            if (mainContentCnt.current.children[i].contains(e.target)) {\r\n              droppedPos = i;\r\n              let dragData = e.dataTransfer.getData(\"text\");\r\n              dragData = JSON.parse(dragData);\r\n              setArticles((old) => {\r\n                let newArr = [...old];\r\n                let extra = [...old];\r\n                newArr[dragData.dragPos] = { ...extra[droppedPos] };\r\n                newArr[droppedPos] = { ...extra[dragData.dragPos] };\r\n                return newArr;\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveChanges = () => {\r\n    // const dbRef = db.ref(`articles/`)\r\n\r\n    const val1 = switchSelect.current.value;\r\n    const val2 = switchSelect.current.nextSibling.value;\r\n    const dbRef = db.ref(\r\n      `viewContent/${val1}/${val2}${\r\n        val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n      }`\r\n    );\r\n    console.log(curSelectTwo);\r\n    console.log(\r\n      `viewContent/${val1}/${val2}${\r\n        val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n      }`\r\n    );\r\n    // const dbRef = db.ref(`articles/auto/Testovi`);\r\n    console.log(articles);\r\n    const articleIds = {};\r\n    let incr = 0;\r\n    let notBiggerThanFour;\r\n    if (!subConentCntRight.current && !glavni) {\r\n      notBiggerThanFour = true;\r\n    }\r\n    articles.forEach((art, i) => {\r\n      if (!notBiggerThanFour) {\r\n        if (art.id) {\r\n          articleIds[incr] = [];\r\n          articleIds[incr][0] = art.id;\r\n          articleIds[incr][1] = `${art.category}/${art.subCategory}`;\r\n          incr++;\r\n        } else {\r\n          articleIds[incr] = \"\";\r\n          incr++;\r\n        }\r\n      } else {\r\n        if (i < 4) {\r\n          if (art.id) {\r\n            articleIds[incr] = [];\r\n            articleIds[incr][0] = art.id;\r\n            articleIds[incr][1] = `${art.category}/${art.subCategory}`;\r\n            incr++;\r\n          } else {\r\n            articleIds[incr] = \"\";\r\n            incr++;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    console.log(articleIds);\r\n    dbRef.get().then((snapshot) => {\r\n      if (snapshot.exists) {\r\n        const data = snapshot.val();\r\n        console.log(data);\r\n        // console.log(Object.keys(data));\r\n        if (data) {\r\n          const objKey = Object.keys(data);\r\n          console.log(objKey);\r\n          alert(\"does exist\");\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/viewContent/${val1}/${val2}${\r\n              val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n            }/${objKey[0]}.json`,\r\n            {\r\n              method: \"PATCH\",\r\n              body: JSON.stringify(articleIds),\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n            });\r\n        } else {\r\n          alert(\"does not exist\");\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/viewContent/${val1}/${val2}${\r\n              val1 === \"Sporedni sadr≈æaj\" ? \"/\" + curSelectTwo : \"\"\r\n            }.json`,\r\n            {\r\n              method: \"POST\",\r\n              body: JSON.stringify(articleIds),\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n            });\r\n        }\r\n        // let realData = [];\r\n        // let incr = 0;\r\n        // for (let key in data) {\r\n        //   realData.push(data[key]);\r\n        //   realData[incr].timeDiff = timeDifference(realData[incr].date);\r\n        //   incr++;\r\n        // }\r\n        // setArticleFetch(realData);\r\n      }\r\n    });\r\n    if (!glavni) {\r\n      const val3 = switchSelect.current.nextSibling.nextSibling.value;\r\n    }\r\n    // alert(selectMainVal);\r\n    // alert(selectTwo);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(articleFetch);\r\n  }, [articleFetch]);\r\n\r\n  return (\r\n    <>\r\n      {/* <iframe\r\n        id=\"sofa-standings-embed-1-37036\"\r\n        width=\"100%\"\r\n        height={717}\r\n        src=\"https://www.sofascore.com/tournament/1/37036/standings/tables/embed\"\r\n        frameBorder={0}\r\n        scrolling=\"no\"\r\n        style={{ height: '717px!important' }}\r\n      >\r\n        {'{'}' '{'}'}\r\n      </iframe>{' '}\r\n      <div>\r\n        Standings provided by{' '}\r\n        <a target=\"_blank\" href=\"https://www.sofascore.com/\">\r\n          SofaScore LiveScore\r\n        </a>\r\n      </div> */}\r\n      {adding && (\r\n        <Overlay handleCloseOverlay={handleCloseOverlay}>\r\n          <div id={s.allArticlesHeader}>\r\n            <select\r\n              onChange={(e) => handleSelectMain(e, \"jedan\")}\r\n              defaultValue={\"\"}\r\n              ref={selectMainVal}\r\n              disabled={\r\n                showSubCat && switchSelect2.current.value !== \"Poƒçetna\"\r\n                  ? true\r\n                  : showSubCat &&\r\n                    switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n                    switchSelect2.current.value === \"Poƒçetna\"\r\n                  ? true\r\n                  : false\r\n              }\r\n              value={\r\n                showSubCat && switchSelect2.current.value !== \"Poƒçetna\"\r\n                  ? switchSelect2.current.value\r\n                  : showSubCat &&\r\n                    switchSelect.current.value === \"Sporedni sadr≈æaj\" &&\r\n                    switchSelect2.current.value === \"Poƒçetna\"\r\n                  ? curSelectTwo\r\n                  : null\r\n              }\r\n            >\r\n              <option disabled={true} label={\" -- Izaberi opciju -- \"}></option>\r\n              <option>Vijesti</option>\r\n              <option>Biznis</option>\r\n              <option>Sport</option>\r\n              <option>Magazin</option>\r\n              <option>Lifestyle</option>\r\n              <option>Scitech</option>\r\n              <option>Auto</option>\r\n            </select>\r\n            {showSubCat && (\r\n              <>\r\n                <select\r\n                  value={curSelect}\r\n                  onChange={(e) => handleSelectChange(e, \"jedan\")}\r\n                >\r\n                  {select.map((item) => (\r\n                    <option key={uuid()}>{item}</option>\r\n                  ))}\r\n                </select>\r\n                <button id={s.fetchBtn} onClick={fetchArticles}>\r\n                  Prika≈æi sadr≈æaj\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            <div id={s.allArticlesItems} ref={articleFetchCnt}>\r\n              {articleFetch &&\r\n                articleFetch.map((articleItem) => {\r\n                  return (\r\n                    <div\r\n                      className={s.articleFetchItem}\r\n                      onClick={handleAddFetchedArticle}\r\n                      key={uuid()}\r\n                      style={{ flexDirection: \"column\" }}\r\n                    >\r\n                      <div className={s.addingBundler}>\r\n                        <div className={s.articleFetchItemImgCnt}>\r\n                          {/* <img src={articleItem.url[0]} /> */}\r\n                          <img src={articleItem.images[0]} />\r\n                        </div>\r\n                        <div className={s.articleItemFetchTitles}>\r\n                          <h3\r\n                            style={{\r\n                              color: `${\r\n                                clrs[articleItem.category.toLowerCase()]\r\n                              }`,\r\n                            }}\r\n                          >\r\n                            {articleItem.subTitle}\r\n                          </h3>\r\n                          <h3>{articleItem.title}</h3>\r\n                        </div>\r\n                      </div>\r\n                      <div className={s.articleItemFetchFooter}>\r\n                        <span>{articleItem.timeDiff}</span>\r\n                        <div className={s.articleItemFetchBundle}>\r\n                          <span>\r\n                            <i class=\"fas fa-comment\"></i>{\" \"}\r\n                            {!articleItem.comments\r\n                              ? 0\r\n                              : Object.keys(articleItem.comments).length}\r\n                          </span>\r\n                          <span>\r\n                            <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                            {articleItem.shares.constructor !== Object\r\n                              ? 0\r\n                              : Object.keys(articleItem.shares).length}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n          {showModal && (\r\n            <Modal ref={modalRef} handleClick={handleConfirmation} />\r\n          )}\r\n        </Overlay>\r\n      )}\r\n      {editing && (\r\n        <Overlay handleCloseOverlay={handleCloseOverlay}>\r\n          <div id={s.allArticlesHeader}>\r\n            <select\r\n              onChange={(e) => handleSelectMain(e, \"jedan\")}\r\n              defaultValue={\"\"}\r\n              ref={selectMainVal}\r\n            >\r\n              <option disabled={true} label={\" -- Izaberi opciju -- \"}></option>\r\n              <option>Vijesti</option>\r\n              <option>Biznis</option>\r\n              <option>Sport</option>\r\n              <option>Magazin</option>\r\n              <option>Lifestyle</option>\r\n              <option>Scitech</option>\r\n              <option>Auto</option>\r\n            </select>\r\n            {showSubCat && (\r\n              <>\r\n                <select\r\n                  value={curSelect}\r\n                  onChange={(e) => handleSelectChange(e, \"jedan\")}\r\n                >\r\n                  {select.map((item) => (\r\n                    <option key={uuid()}>{item}</option>\r\n                  ))}\r\n                </select>\r\n                <button id={s.fetchBtn} onClick={fetchArticles}>\r\n                  Prika≈æi sadr≈æaj\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            <div id={s.allArticlesItems} ref={articleFetchCnt}>\r\n              {articleFetch &&\r\n                articleFetch.map((articleItem) => {\r\n                  return (\r\n                    <div\r\n                      className={s.articleFetchItem}\r\n                      onMouseDown={(e) =>\r\n                        handleEditFetchedArticle(e, articleItem)\r\n                      }\r\n                      key={uuid()}\r\n                    >\r\n                      <Link\r\n                        to={{\r\n                          pathname: \"/adminpanel\",\r\n                          state: { articleData: articleItem },\r\n                        }}\r\n                      >\r\n                        <div className={s.editBundler}>\r\n                          <div className={s.articleFetchItemImgCnt}>\r\n                            {/* <img src={articleItem.url[0]} /> */}\r\n                            <img src={articleItem.images[0]} />\r\n                          </div>\r\n                          <div className={s.articleItemFetchTitles}>\r\n                            <h3\r\n                              style={{\r\n                                color: `${\r\n                                  clrs[articleItem.category.toLowerCase()]\r\n                                }`,\r\n                              }}\r\n                            >\r\n                              {articleItem.subTitle}\r\n                            </h3>\r\n                            <h3>{articleItem.title}</h3>\r\n                          </div>\r\n                        </div>\r\n                        <div className={s.articleItemFetchFooter}>\r\n                          <span>{articleItem.timeDiff}</span>\r\n                          <div className={s.articleItemFetchBundle}>\r\n                            <span>\r\n                              <i class=\"fas fa-comment\"></i>{\" \"}\r\n                              {!articleItem.comments\r\n                                ? 0\r\n                                : Object.keys(articleItem.comments).length}\r\n                            </span>\r\n                            <span>\r\n                              <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                              {articleItem.shares.constructor !== Object\r\n                                ? 0\r\n                                : Object.keys(articleItem.shares).length}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </Link>\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n          {showModal && (\r\n            <Modal ref={modalRef} handleClick={handleConfirmation} />\r\n          )}\r\n        </Overlay>\r\n      )}\r\n      <div id={s.editArticles}>\r\n        <div id={s.allArticles}></div>\r\n        <div id={s.allArticlesMain}>\r\n          <div id={s.allArticlesMainBody}>\r\n            <div id={s.allArticlesMainBodyHeader}>\r\n              <select\r\n                onChange={handleGlavni}\r\n                ref={switchSelect}\r\n                value={glavni ? \"Glavni sadr≈æaj\" : \"Sporedni sadr≈æaj\"}\r\n              >\r\n                <option>Glavni sadr≈æaj</option>\r\n                <option>Sporedni sadr≈æaj</option>\r\n              </select>\r\n              <select\r\n                onChange={(e) => handleSelectMain(e, \"two\")}\r\n                defaultValue={\"Poƒçetna\"}\r\n                ref={switchSelect2}\r\n              >\r\n                <option>Poƒçetna</option>\r\n                <option>Vijesti</option>\r\n                <option>Biznis</option>\r\n                <option>Sport</option>\r\n                <option>Magazin</option>\r\n                <option>Lifestyle</option>\r\n                <option>Scitech</option>\r\n                <option>Auto</option>\r\n              </select>\r\n              {!glavni && (\r\n                <select\r\n                  onChange={(e) => handleSelectChange(e, \"dva\")}\r\n                  value={curSelectTwo}\r\n                  defaultValue={\"Vijesti\"}\r\n                >\r\n                  {selectTwo.map((item) => (\r\n                    <option key={uuid()}>{item}</option>\r\n                  ))}\r\n                </select>\r\n              )}\r\n              <div id={s.chooseModeCnt}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"adding\"\r\n                  name=\"dodajswitch\"\r\n                  value=\"Dodaj clanak\"\r\n                  onClick={(e) => {\r\n                    handleModeSwitch(e, \"dodaj\");\r\n                  }}\r\n                  disabled={articles.length ? false : true}\r\n                  checked={addingModus}\r\n                  ref={addArticleBox}\r\n                />\r\n                <label htmlFor=\"adding\">Dodaj ƒçlanak</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"switching\"\r\n                  name=\"dodajswitch\"\r\n                  value=\"Zamjeni clanak\"\r\n                  onClick={(e) => {\r\n                    handleModeSwitch(e, \"zamjeni\");\r\n                  }}\r\n                  disabled={articles.length ? false : true}\r\n                  checked={switchingModus}\r\n                  ref={switchArticleBox}\r\n                />\r\n                <label htmlFor=\"switching\">Zamjeni poziciju</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"editing\"\r\n                  name=\"dodajswitch\"\r\n                  value=\"Edituj clanak\"\r\n                  onClick={(e) => {\r\n                    handleModeSwitch(e, \"edituj\");\r\n                  }}\r\n                  disabled={articles.length ? false : true}\r\n                  checked={editing}\r\n                  ref={editArticleBox}\r\n                />\r\n                <label htmlFor=\"editing\">Edituj ƒçlanak</label>\r\n              </div>\r\n              <div id={s.saveChanges}>\r\n                <button onClick={saveChanges}>Spasi izmjene</button>\r\n              </div>\r\n            </div>\r\n            {!glavni && (\r\n              <div\r\n                className={s.articleSubCnt}\r\n                style={\r\n                  (switchSelect2.current.value !== \"Poƒçetna\" &&\r\n                    curSelectTwo !== \"Scitech\") ||\r\n                  (switchSelect2.current.value !== \"Poƒçetna\" &&\r\n                    curSelectTwo !== \"Auto\") ||\r\n                  (switchSelect2.current.value === \"Poƒçetna\" &&\r\n                    (curSelectTwo === \"Auto\" || curSelectTwo === \"Scitech\"))\r\n                    ? {\r\n                        gridTemplateColumns: \"1fr\",\r\n                      }\r\n                    : null\r\n                }\r\n              >\r\n                <div className={s.subLeft} ref={subConentCntLeft}>\r\n                  {articles.map((article, i) => {\r\n                    if (Object.keys(article).length !== 0 && i < 4) {\r\n                      if (addingModus) {\r\n                        return (\r\n                          <div\r\n                            className={s.subLeftItem}\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            onMouseLeave={hideAdding}\r\n                            key={uuid()}\r\n                          >\r\n                            {clickedPos !== i && (\r\n                              <>\r\n                                <div className={s.subLeftItemImg}>\r\n                                  <img src={article.images[0]} />\r\n                                </div>\r\n                                <div className={s.subLeftItemText}>\r\n                                  <h3>{article.subTitle}</h3>\r\n                                  <h3>{article.title}</h3>\r\n                                </div>\r\n                                <div className={s.subLeftItemBundle}>\r\n                                  <span>{article.timeDiff}</span>\r\n                                  <div className={s.subLeftBundleRight}>\r\n                                    <span>\r\n                                      <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                      {!article.comments\r\n                                        ? 0\r\n                                        : Object.keys(article.comments).length}\r\n                                    </span>\r\n                                    <span>\r\n                                      <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                      {article.shares.constructor !== Object\r\n                                        ? 0\r\n                                        : Object.keys(article.shares).length}\r\n                                    </span>\r\n                                  </div>\r\n                                </div>\r\n                              </>\r\n                            )}{\" \"}\r\n                            {clickedPos === i && (\r\n                              <div className={s.addArticleLeft}>\r\n                                <i\r\n                                  class=\"fas fa-plus\"\r\n                                  onClick={() => setAdding(true)}\r\n                                ></i>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        );\r\n                      } else {\r\n                        return (\r\n                          <div\r\n                            className={s.subLeftItem}\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            onMouseLeave={hideAdding}\r\n                            key={uuid()}\r\n                            draggable={true}\r\n                            onDragStart={(e) => dragStart(e)}\r\n                            onDrop={(e) => drop(e)}\r\n                            onDragOver={(e) => allowDrop(e)}\r\n                          >\r\n                            <>\r\n                              <div className={s.subLeftItemImg}>\r\n                                <img src={article.images[0]} />\r\n                              </div>\r\n                              <div className={s.subLeftItemText}>\r\n                                <h3>{article.subTitle}</h3>\r\n                                <h3>{article.title}</h3>\r\n                              </div>\r\n                              <div className={s.subLeftItemBundle}>\r\n                                <span>{article.timeDiff}</span>\r\n                                <div className={s.subLeftBundleRight}>\r\n                                  <span>\r\n                                    <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                    {!article.comments\r\n                                      ? 0\r\n                                      : Object.keys(article.comments).length}\r\n                                  </span>\r\n                                  <span>\r\n                                    <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                    {article.shares.constructor !== Object\r\n                                      ? 0\r\n                                      : Object.keys(article.shares).length}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            </>\r\n                          </div>\r\n                        );\r\n                      }\r\n                    } else {\r\n                      if (i <= 3 && addingModus) {\r\n                        return (\r\n                          <div\r\n                            className={\r\n                              i !== 1 ? s.addArticle : `${s.addArticle}`\r\n                            }\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            key={uuid()}\r\n                          >\r\n                            <i\r\n                              class=\"fas fa-plus\"\r\n                              onClick={() => setAdding(true)}\r\n                            ></i>\r\n                          </div>\r\n                        );\r\n                      } else if (i <= 3 && !addingModus) {\r\n                        return <div className={s.emptySub} key={uuid()}></div>;\r\n                      }\r\n                    }\r\n                  })}\r\n                </div>\r\n                {switchSelect2.current.value === \"Poƒçetna\" &&\r\n                  curSelectTwo !== \"Scitech\" &&\r\n                  curSelectTwo !== \"Auto\" && (\r\n                    <div className={s.subRight} ref={subConentCntRight}>\r\n                      {articles.map((article, i) => {\r\n                        if (Object.keys(article).length !== 0) {\r\n                          if (i >= 4 && i <= 5) {\r\n                            if (addingModus) {\r\n                              return (\r\n                                <div\r\n                                  className={s.subRightItem}\r\n                                  key={uuid()}\r\n                                  onMouseEnter={() => showAdding(i)}\r\n                                  onMouseLeave={hideAdding}\r\n                                >\r\n                                  {clickedPos !== i && (\r\n                                    <>\r\n                                      <div className={s.subRightText}>\r\n                                        <h3>{article.subTitle}</h3>\r\n                                        <h3>{article.title}</h3>\r\n                                      </div>\r\n                                      <div className={s.subRightBundle}>\r\n                                        <span>{article.timeDiff}</span>\r\n                                        <div className={s.subRightBundleRight}>\r\n                                          <span>\r\n                                            <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                            {!article.comments\r\n                                              ? 0\r\n                                              : Object.keys(article.comments)\r\n                                                  .length}\r\n                                          </span>\r\n                                          <span>\r\n                                            <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                            {article.shares.constructor !==\r\n                                            Object\r\n                                              ? 0\r\n                                              : Object.keys(article.shares)\r\n                                                  .length}\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    </>\r\n                                  )}\r\n                                  {clickedPos === i && (\r\n                                    <div\r\n                                      className={s.addArticle}\r\n                                      onMouseEnter={() => showAdding(i)}\r\n                                      key={uuid()}\r\n                                      style={{\r\n                                        borderTop: \"0.1rem solid #e5e7eb\",\r\n                                      }}\r\n                                    >\r\n                                      <i\r\n                                        class=\"fas fa-plus\"\r\n                                        onClick={() => setAdding(true)}\r\n                                      ></i>\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              );\r\n                            } else {\r\n                              return (\r\n                                <div\r\n                                  className={s.subRightItem}\r\n                                  key={uuid()}\r\n                                  onMouseEnter={() => showAdding(i)}\r\n                                  onMouseLeave={hideAdding}\r\n                                  draggable={true}\r\n                                  onDragStart={(e) => dragStart(e)}\r\n                                  onDrop={(e) => drop(e)}\r\n                                  onDragOver={(e) => allowDrop(e)}\r\n                                >\r\n                                  <div className={s.subRightText}>\r\n                                    <h3>{article.subTitle}</h3>\r\n                                    <h3>{article.title}</h3>\r\n                                  </div>\r\n                                  <div className={s.subRightBundle}>\r\n                                    <span>{article.timeDiff}</span>\r\n                                    <div className={s.subRightBundleRight}>\r\n                                      <span>\r\n                                        <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                        {!article.comments\r\n                                          ? 0\r\n                                          : Object.keys(article.comments)\r\n                                              .length}\r\n                                      </span>\r\n                                      <span>\r\n                                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                        {article.shares.constructor !== Object\r\n                                          ? 0\r\n                                          : Object.keys(article.shares).length}\r\n                                      </span>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              );\r\n                            }\r\n                          }\r\n                        } else {\r\n                          if (i >= 4 && i < 6 && addingModus) {\r\n                            return (\r\n                              <div\r\n                                className={s.addArticle}\r\n                                onMouseEnter={() => showAdding(i)}\r\n                                key={uuid()}\r\n                              >\r\n                                <i\r\n                                  class=\"fas fa-plus\"\r\n                                  onClick={() => setAdding(true)}\r\n                                ></i>\r\n                              </div>\r\n                            );\r\n                          } else if (i >= 4 && i < 6 && !addingModus) {\r\n                            return (\r\n                              <div className={s.emptySub} key={uuid()}></div>\r\n                            );\r\n                          }\r\n                        }\r\n                      })}\r\n                    </div>\r\n                  )}\r\n              </div>\r\n            )}\r\n            {glavni && (\r\n              <div id={s.allArticlesMainBodyContent} ref={mainContentCnt}>\r\n                {articles &&\r\n                  articles.map((article, i) => {\r\n                    if (addingModus) {\r\n                      if (Object.keys(article).length !== 0) {\r\n                        if (i !== 1) {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemSm}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                            >\r\n                              {clickedPos !== i && (\r\n                                <>\r\n                                  <div className={s.articleImgCnt}>\r\n                                    <img src={article.images[0]} />\r\n                                    {article.images.length > 1 && (\r\n                                      <i class=\"far fa-images\"></i>\r\n                                    )}\r\n                                  </div>\r\n                                  <div className={s.articleTitles}>\r\n                                    <h3>{article.subTitle}</h3>\r\n                                    <h3>{article.title}</h3>\r\n                                  </div>\r\n                                  <div className={s.articleFooter}>\r\n                                    <span>{article.timeDiff}</span>\r\n                                    <span>\r\n                                      <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                      {!article.comments\r\n                                        ? 0\r\n                                        : Object.keys(article.comments).length}\r\n                                      <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                      {article.shares.constructor !== Object\r\n                                        ? 0\r\n                                        : Object.keys(article.shares).length}\r\n                                    </span>\r\n                                  </div>\r\n                                </>\r\n                              )}{\" \"}\r\n                              {clickedPos === i && (\r\n                                <div\r\n                                  className={s.addArticle}\r\n                                  style={{\r\n                                    borderTop: \"0.1rem solid #e5e7eb\",\r\n                                    borderBottom: \"0.1rem solid #e5e7eb\",\r\n                                  }}\r\n                                >\r\n                                  <i\r\n                                    class=\"fas fa-plus\"\r\n                                    onClick={() => setAdding(true)}\r\n                                  ></i>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        } else {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemBg}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                            >\r\n                              {clickedPos !== i && (\r\n                                <>\r\n                                  <div className={s.articleImageCntBg}>\r\n                                    <img src={article.images[0]} />\r\n                                  </div>\r\n                                  <div className={s.articleItemBgHeader}>\r\n                                    <h3>{article.subTitle}</h3>\r\n                                    <h3>{article.title}</h3>\r\n                                  </div>\r\n                                  <div className={s.articleItemBgFooter}>\r\n                                    <span>{article.timeDiff}</span>\r\n                                    <div\r\n                                      className={s.articleItemBgFooterBundle}\r\n                                    >\r\n                                      <span>\r\n                                        <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                        {!article.comments\r\n                                          ? 0\r\n                                          : Object.keys(article.comments)\r\n                                              .length}\r\n                                      </span>\r\n                                      <span>\r\n                                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                        {article.shares.constructor !== Object\r\n                                          ? 0\r\n                                          : Object.keys(article.shares).length}\r\n                                      </span>\r\n                                    </div>\r\n                                  </div>\r\n                                </>\r\n                              )}\r\n                              {clickedPos === i && (\r\n                                <div\r\n                                  className={s.addArticle}\r\n                                  style={{\r\n                                    borderTop: \"0.1rem solid #e5e7eb\",\r\n                                    borderBottom: \"0.1rem solid #e5e7eb\",\r\n                                  }}\r\n                                >\r\n                                  <i\r\n                                    class=\"fas fa-plus\"\r\n                                    onClick={() => setAdding(true)}\r\n                                  ></i>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        }\r\n                      } else {\r\n                        return (\r\n                          <div\r\n                            className={\r\n                              i !== 1\r\n                                ? s.addArticle\r\n                                : `${s.addArticle} ${s.addArticleBg}`\r\n                            }\r\n                            style={{\r\n                              borderTop: \"0.1rem solid #e5e7eb\",\r\n                              borderBottom: \"0.1rem solid #e5e7eb\",\r\n                            }}\r\n                            onMouseEnter={() => showAdding(i)}\r\n                            key={uuid()}\r\n                          >\r\n                            <i\r\n                              class=\"fas fa-plus\"\r\n                              onClick={() => setAdding(true)}\r\n                            ></i>\r\n                          </div>\r\n                        );\r\n                      }\r\n                    } else {\r\n                      if (Object.keys(article).length !== 0) {\r\n                        if (i !== 1) {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemSm}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                              draggable={true}\r\n                              onDragStart={(e) => dragStart(e)}\r\n                              onDrop={(e) => drop(e)}\r\n                              onDragOver={(e) => allowDrop(e)}\r\n                            >\r\n                              <div className={s.articleImgCnt}>\r\n                                <img\r\n                                  src={article.images && article.images[0]}\r\n                                />\r\n                                {article.images &&\r\n                                  article.images.length > 1 && (\r\n                                    <i class=\"far fa-images\"></i>\r\n                                  )}\r\n                              </div>\r\n                              <div className={s.articleTitles}>\r\n                                <h3>{article.subTitle}</h3>\r\n                                <h3>{article.title}</h3>\r\n                              </div>\r\n                              <div className={s.articleFooter}>\r\n                                <span>{article.timeDiff}</span>\r\n                                <span>\r\n                                  <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                  {!article.comments\r\n                                    ? 0\r\n                                    : Object.keys(article.comments).length}\r\n                                  <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                  {article.shares.constructor !== Object\r\n                                    ? 0\r\n                                    : Object.keys(article.shares).length}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        } else {\r\n                          return (\r\n                            <div\r\n                              className={s.articleItemBg}\r\n                              onMouseEnter={() => showAdding(i)}\r\n                              onMouseLeave={hideAdding}\r\n                              key={uuid()}\r\n                              draggable={true}\r\n                              onDragStart={(e) => dragStart(e)}\r\n                              onDrop={(e) => drop(e)}\r\n                              onDragOver={(e) => allowDrop(e)}\r\n                            >\r\n                              <div className={s.articleImageCntBg}>\r\n                                <img src={article.images[0]} />\r\n                              </div>\r\n                              <div className={s.articleItemBgHeader}>\r\n                                <h3>{article.subTitle}</h3>\r\n                                <h3>{article.title}</h3>\r\n                              </div>\r\n                              <div className={s.articleItemBgFooter}>\r\n                                <span>{article.timeDiff}</span>\r\n                                <div className={s.articleItemBgFooterBundle}>\r\n                                  <span>\r\n                                    <i class=\"fas fa-comment\"></i>{\" \"}\r\n                                    {!article.comments\r\n                                      ? 0\r\n                                      : article.comments.length}\r\n                                  </span>\r\n                                  <span>\r\n                                    <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                                    {article.shares.constructor !== Object\r\n                                      ? 0\r\n                                      : Object.keys(article.shares).length}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        }\r\n                      } else {\r\n                        return (\r\n                          <div\r\n                            className={i !== 1 ? s.empty : s.emptyBg}\r\n                            key={uuid()}\r\n                          ></div>\r\n                        );\r\n                      }\r\n                    }\r\n                  })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditArticles;\r\n","import React from \"react\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport s from \"./CommentType.module.css\";\r\nimport { v1 as uuid } from \"uuid\";\r\n\r\nconst CommentType = (props) => {\r\n  const textareaRef = useRef();\r\n  useEffect(() => {\r\n    console.log(props);\r\n  }, [props]);\r\n\r\n  const objaviKomentar = () => {\r\n    if (textareaRef.current.value.length > 0) {\r\n      let userObj = JSON.parse(localStorage.getItem(\"userObj\"));\r\n      const userName = userObj.displayName;\r\n      const avatarColor = userObj.avatarColor;\r\n      const date = new Date();\r\n      const time = `${date.getFullYear()}-${\r\n        date.getMonth() + 1\r\n      }-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\r\n      // const arraycom = {};\r\n      const arraycom = {\r\n        userName: userName,\r\n        avatarColor: avatarColor,\r\n        date: time,\r\n        comment: textareaRef.current.value,\r\n      };\r\n      // replies: [\r\n      //   {\r\n      //     userName: \"user13\",\r\n      //     date: \"newdate\",\r\n      //     comment: \"hello\",\r\n      //     commentLikes: 0,\r\n      //     commentDislikes: 0,\r\n      //   },\r\n      // ],\r\n      const userId = auth.currentUser.uid;\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path.category}/${props.path.subCategory}/-${props.path.id}/comments.json`,\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify(arraycom),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          textareaRef.current.value = \"\";\r\n          if (props.getComments) {\r\n            console.log(props);\r\n            console.log(props.getComments);\r\n            //to fix if we write a comment on the article page instead of its comment page\r\n            props.getComments(true);\r\n          }\r\n          console.log(data);\r\n          const commentInfo = {\r\n            articlePath: `${props.path.category}/${props.path.subCategory}/-${props.path.id}`,\r\n            commentId: data.name,\r\n          };\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              const sendData = data + 1;\r\n              console.log(sendData);\r\n              // let num = data + 10;\r\n              // num = `${num}`;\r\n              // num = num.substring(0, num.length - 1);\r\n              // num = +num.concat(\"0\");\r\n              const promises = [\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/${\r\n                    data === null ? 0 : data\r\n                  }/${commentInfo.commentId}.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify(commentInfo),\r\n                  }\r\n                ).then((res) => res.json()),\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: sendData,\r\n                  }\r\n                ).then((res) => res.json()),\r\n              ];\r\n              const promiseData = Promise.all(promises);\r\n              promiseData.then((data) => {\r\n                console.log(data);\r\n              });\r\n            });\r\n        });\r\n\r\n      // fetch(\r\n      //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path.category}/${props.path.subCategory}/-${props.path.id}/comments.json`\r\n      // )\r\n      //   .then((response) => response.json())\r\n      //   .then((data) => {\r\n      //     let previousComments = {};\r\n      //     let previousComments1 = {};\r\n      //     console.log(data);\r\n      //     console.log(data[1]);\r\n      //     let incr = 1;\r\n      // if (data[0] !== \"\") {\r\n      //   for (let i = 0; i < data.length; i++) {\r\n      //     previousComments[incr] = { ...data[i] };\r\n      //     incr++;\r\n      //     if (i === data.length - 1) {\r\n      //       previousComments[0] = { ...arraycom[0] };\r\n      //     }\r\n      //   }\r\n      // } else {\r\n      //   previousComments = { ...arraycom[0] };\r\n      // }\r\n      // if (data[0] === undefined) {\r\n      //   for (let i = 0; i < data.length; i++) {\r\n      //     previousComments[data[i].commentId] = { ...data[i] };\r\n      //     if (i === data.length - 1) {\r\n      //       const keyValue = Object.entries(previousComments);\r\n      //       console.log(keyValue);\r\n      //       keyValue.splice(0, 0, [`${commentId}`, arraycom[commentId]]);\r\n      //       console.log(keyValue);\r\n      //       previousComments1 = Object.fromEntries(keyValue);\r\n      //     }\r\n      //   }\r\n      // } else {\r\n      //   previousComments1 = { ...arraycom };\r\n      // }\r\n      // console.log(previousComments1);\r\n      // fetch(\r\n      //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path.category}/${props.path.subCategory}/-${props.path.id}/comments.json`,\r\n      //   {\r\n      //     method: \"PATCH\",\r\n      //     body: JSON.stringify(arraycom),\r\n      //     headers: {\r\n      //       \"Content-Type\": \"application/json\",\r\n      //     },\r\n      //   }\r\n      // )\r\n      //   .then((response) => response.json())\r\n      //   .then((data) => console.log(data));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={s.postComment}>\r\n      <div className={s.postCommentBundle}>\r\n        <textarea\r\n          name=\"komentar\"\r\n          className={s.postCommentTextarea}\r\n          placeholder=\"upi≈°i komentar\"\r\n          ref={textareaRef}\r\n        ></textarea>\r\n        <button>\r\n          <span onClick={objaviKomentar}>\r\n            <i class=\"fas fa-pen\"></i> Objavi komentar\r\n          </span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentType;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport s from \"./CommentItem.module.css\";\r\nimport LoginContext from \"../../context\";\r\n\r\nconst CommentItem = (props) => {\r\n  const ctx = useContext(LoginContext);\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const commentLike = useRef();\r\n  const commentDislike = useRef();\r\n  // const [commentLikes, setCommentLikes] = useState(\r\n  //   props.commentLikes === 0 ? 0 : props.commentLikes\r\n  // );\r\n  // const [commentDislikes, setCommentDislikes] = useState(\r\n  //   props.commentDislikes === 0 ? 0 : props.commentDislikes\r\n  // );\r\n  const [commentLikes, setCommentLikes] = useState(\r\n    location.state.articleData\r\n      ? Array.isArray(props.commentIndex)\r\n        ? location.state.articleData.comments[props.commentIndex[0]].replies[\r\n            props.commentIndex[1]\r\n          ].commentLikes === 0\r\n          ? 0\r\n          : location.state.articleData.comments[props.commentIndex[0]].replies[\r\n              props.commentIndex[1]\r\n            ].commentLikes\r\n        : location.state.articleData.comments[props.commentIndex]\r\n            .commentLikes === 0\r\n        ? 0\r\n        : location.state.articleData.comments[props.commentIndex].commentLikes\r\n      : props.commentLikes\r\n      ? props.commentLikes\r\n      : 0\r\n  );\r\n  const [commentDislikes, setCommentDislikes] = useState(\r\n    location.state.articleData //fix when we are commenting from /comment/id and when we are doing it from the article\r\n      ? Array.isArray(props.commentIndex)\r\n        ? location.state.articleData.comments[props.commentIndex[0]].replies[\r\n            props.commentIndex[1]\r\n          ].commentDislikes === 0\r\n          ? 0\r\n          : location.state.articleData.comments[props.commentIndex[0]].replies[\r\n              props.commentIndex[1]\r\n            ].commentDislikes\r\n        : location.state.articleData.comments[props.commentIndex]\r\n            .commentDislikes === 0\r\n        ? 0\r\n        : location.state.articleData.comments[props.commentIndex]\r\n            .commentDislikes\r\n      : props.commentDislikes\r\n      ? props.commentDislikes\r\n      : 0\r\n  );\r\n  const [updateLikeDislike, setUpdateLikeDislike] = useState(null);\r\n  const [fetching, setFetching] = useState(false);\r\n  const [updateLocation, setUpdateLocation] = useState(false);\r\n  useEffect(() => {\r\n    console.log(props.commentIndex);\r\n    console.log(props.topComment, props.commentIndex);\r\n    console.log(props.negativeComment, props.commentIndex);\r\n    console.log(props);\r\n  }, []);\r\n\r\n  const checkOppositeFn = (data, userIp) => {\r\n    //mode = comlikes || comdislikes\r\n    console.log(data);\r\n    if (data) {\r\n      for (let key in data) {\r\n        if (userIp === data[key]) {\r\n          return key.split(\"-\").join(\".\");\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLikeDislike = (opinion) => {\r\n    setFetching(true);\r\n    if (!fetching) {\r\n      //to prevent the user from clicking btn again when fetching is still ongoing\r\n      const userIp = localStorage.getItem(\"userIp\");\r\n      const path = location.state.articleData\r\n        ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n            location.state.articleData.category\r\n          }/${location.state.articleData.subCategory}/-${\r\n            location.state.articleData.id\r\n          }/comments/${\r\n            Array.isArray(props.commentIndex)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB\r\n          }${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? \"/replies/\" + props.commentIndexDB[1]\r\n              : \"\"\r\n          }.json`\r\n        : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}.json`;\r\n      console.log(path);\r\n      fetch(path)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          console.log(props.commentIndex);\r\n          // if (Array.isArray(props.commentIndexDB)) {\r\n          //   data = { ...data[props.commentIndexDB[1]] };\r\n          //   console.log(data);\r\n          //   //find out if we are working with the main comment or with one of it's replies\r\n          // }\r\n          let check = false;\r\n          let checkOpposite = false; //check for like/dislike, if there -1, +1 other side\r\n          let key = undefined;\r\n          if (opinion === \"like\") {\r\n            if (data.commentDislikes) {\r\n              key = checkOppositeFn(data.commentDislikes, userIp);\r\n            }\r\n            console.log(key);\r\n            if (data.commentLikes) {\r\n              for (let key in data.commentLikes) {\r\n                if (userIp === data.commentLikes[key]) {\r\n                  check = true;\r\n                }\r\n              }\r\n            }\r\n            if (!key && !check) {\r\n              //zero can be falsy, like at first pos returns ind zero\r\n              setCommentLikes((old) => {\r\n                console.log(data.commentLikes);\r\n                if (data.commentLikes) {\r\n                  let cpyObj = { ...data.commentLikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n            } else if (key && !check) {\r\n              setCommentLikes((old) => {\r\n                if (data.commentLikes) {\r\n                  let cpyObj = { ...data.commentLikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n              setCommentDislikes((old) => {\r\n                if (data.commentDislikes) {\r\n                  let cpyObj = { ...data.commentDislikes };\r\n                  const ind = Object.keys(cpyObj).find(\r\n                    (el) => el === key.split(\".\").join(\"-\")\r\n                  );\r\n                  if (ind !== undefined) {\r\n                    delete cpyObj[key.split(\".\").join(\"-\")];\r\n                  }\r\n                  if (Object.keys(cpyObj).length === 0) {\r\n                    return 0;\r\n                  }\r\n                  return cpyObj;\r\n                }\r\n              });\r\n            } else {\r\n              setFetching(false);\r\n              return;\r\n            }\r\n          } else {\r\n            if (data.commentLikes) {\r\n              key = checkOppositeFn(data.commentLikes, userIp);\r\n            }\r\n            if (data.commentDislikes) {\r\n              for (let key in data.commentDislikes) {\r\n                if (userIp === data.commentDislikes[key]) {\r\n                  check = true;\r\n                }\r\n              }\r\n            }\r\n            if (!key && !check) {\r\n              setCommentDislikes((old) => {\r\n                if (data.commentDislikes) {\r\n                  const cpyObj = { ...data.commentDislikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n            } else if (key && !check) {\r\n              setCommentDislikes((old) => {\r\n                if (data.commentDislikes) {\r\n                  const cpyObj = { ...data.commentDislikes };\r\n                  cpyObj[userIp.split(\".\").join(\"-\")] = userIp;\r\n                  return cpyObj;\r\n                } else {\r\n                  return { [userIp.split(\".\").join(\"-\")]: userIp };\r\n                }\r\n              });\r\n              setCommentLikes((old) => {\r\n                if (data.commentLikes) {\r\n                  const cpyObj = { ...data.commentLikes };\r\n                  const ind = Object.keys(cpyObj).find(\r\n                    (el) => el === key.split(\".\").join(\"-\")\r\n                  );\r\n                  if (ind !== undefined) {\r\n                    delete cpyObj[key.split(\".\").join(\"-\")];\r\n                  }\r\n                  console.log(cpyObj);\r\n                  if (Object.keys(cpyObj).length === 0) {\r\n                    return 0;\r\n                  }\r\n                  return cpyObj;\r\n                }\r\n              });\r\n            } else {\r\n              setFetching(false);\r\n              return;\r\n            }\r\n          }\r\n          console.log(checkOpposite);\r\n          console.log(Object.keys(data).length);\r\n          console.log(data);\r\n          // setUpdateLikeDislike((old) => {\r\n          //   if (Array.isArray(data)) {\r\n          //     console.log(data[props.commentIndexDB[1]]);\r\n          //     return data[props.commentIndexDB[1]];\r\n          //   } else {\r\n          //     return data;\r\n          //   }\r\n          // });\r\n          setUpdateLikeDislike((old) => {\r\n            if (opinion === \"like\" && !check) {\r\n              // console.log(data[props.commentIndexDB[1]]);\r\n              if (!key) {\r\n                return [\"/commentLikes/\", userIp];\r\n              } else {\r\n                return [\"/commentLikes/\", userIp, \"/commentDislikes/\"];\r\n              }\r\n            } else if (opinion === \"dislike\" && !check) {\r\n              if (!key) {\r\n                return [\"/commentDislikes/\", userIp];\r\n              } else {\r\n                return [\"/commentDislikes/\", userIp, \"/commentLikes/\"];\r\n              }\r\n            }\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (updateLikeDislike) {\r\n      console.log(commentLikes);\r\n      console.log(commentDislikes);\r\n      updateLikeDislike.commentLikes = commentLikes;\r\n      updateLikeDislike.commentDislikes = commentDislikes;\r\n      console.log(updateLikeDislike);\r\n      let userIpNoDot = updateLikeDislike[1].split(\".\").join(\"-\");\r\n      const path = location.state.articleData\r\n        ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n            location.state.articleData.category\r\n          }/${location.state.articleData.subCategory}/-${\r\n            location.state.articleData.id\r\n          }/comments/${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB + updateLikeDislike[0] + userIpNoDot\r\n          }${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? \"/replies/\" +\r\n                props.commentIndexDB[1] +\r\n                updateLikeDislike[0] +\r\n                userIpNoDot\r\n              : \"\"\r\n          }.json`\r\n        : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}${updateLikeDislike[0]}${userIpNoDot}.json`;\r\n      console.log(path);\r\n      if (updateLikeDislike.length === 2) {\r\n        fetch(`${path}`, {\r\n          method: \"PUT\",\r\n          body: JSON.stringify(updateLikeDislike[1]),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            console.log(data);\r\n            if (location.state.articleData) {\r\n              let cpyObj = [\r\n                ...JSON.parse(\r\n                  JSON.stringify(location.state.articleData.comments)\r\n                ),\r\n              ];\r\n              console.log(location.state.articleData.comments);\r\n              console.log(cpyObj);\r\n              console.log(props.commentIndex);\r\n              if (!Array.isArray(props.commentIndex)) {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  // cpyObj[props.commentIndex].commentLikes = commentLikes[\r\n                  //   props.commentIndex\r\n                  // ].commentLikes\r\n                  //   ? {\r\n                  //       ...commentLikes[props.commentIndex].commentLikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  // cpyObj[props.commentIndex].commentDislikes = cpyObj[\r\n                  //   props.commentIndex\r\n                  // ].commentDislikes\r\n                  //   ? {\r\n                  //       ...cpyObj[props.commentIndex].commentDislikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex].commentDislikes = {\r\n                    ...commentDislikes,\r\n                  };\r\n                }\r\n              } else {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  // cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentLikes = cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentLikes\r\n                  //   ? {\r\n                  //       ...cpyObj[props.commentIndex[0]].replies[\r\n                  //         props.commentIndex[1]\r\n                  //       ].commentLikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  // cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentDislikes = cpyObj[props.commentIndex[0]].replies[\r\n                  //   props.commentIndex[1]\r\n                  // ].commentDislikes\r\n                  //   ? {\r\n                  //       ...cpyObj[props.commentIndex[0]].replies[\r\n                  //         props.commentIndex[1]\r\n                  //       ].commentDislikes,\r\n                  //       [data.split(\".\").join(\"-\")]: data,\r\n                  //     }\r\n                  //   : { [data.split(\".\").join(\"-\")]: data };\r\n                  cpyObj[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentDislikes = { ...commentDislikes };\r\n                }\r\n              }\r\n              console.log(cpyObj);\r\n              console.log(cpyObj[props.commentIndex]);\r\n              console.log(props);\r\n              history.replace({\r\n                state: {\r\n                  articleData: {\r\n                    ...location.state.articleData,\r\n                    comments: [...cpyObj],\r\n                  },\r\n                },\r\n              });\r\n              setFetching(false);\r\n            } else {\r\n              let cpyArr = JSON.parse(JSON.stringify(props.commentData));\r\n              if (!Array.isArray(props.commentIndex)) {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  cpyArr[props.commentIndex].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  cpyArr[props.commentIndex].commentDislikes = {\r\n                    ...commentDislikes,\r\n                  };\r\n                }\r\n              } else {\r\n                if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                  cpyArr[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentLikes = { ...commentLikes };\r\n                } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                  cpyArr[props.commentIndex[0]].replies[\r\n                    props.commentIndex[1]\r\n                  ].commentDislikes = { ...commentDislikes };\r\n                }\r\n              }\r\n              props.setCommentData([...cpyArr]);\r\n              setFetching(false);\r\n            }\r\n          });\r\n        setUpdateLikeDislike(null);\r\n      } else {\r\n        // const configOptions = {\r\n        //   method: `${updateLikeDislike.length === 4 ? \"PUT\" : \"DELETE\"}`,\r\n        //   headers: {\r\n        //     \"Content-Type\": \"application/json\",\r\n        //   },\r\n        // };\r\n        // if (updateLikeDislike.length === 4) {\r\n        //   configOptions.body = 0;\r\n        // }\r\n        const deletePath = location.state.articleData\r\n          ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n              location.state.articleData.category\r\n            }/${location.state.articleData.subCategory}/-${\r\n              location.state.articleData.id\r\n            }/comments/${\r\n              Array.isArray(props.commentIndexDB)\r\n                ? props.commentIndexDB[0]\r\n                : props.commentIndexDB + updateLikeDislike[2] + userIpNoDot\r\n            }${\r\n              Array.isArray(props.commentIndexDB)\r\n                ? \"/replies/\" +\r\n                  props.commentIndexDB[1] +\r\n                  updateLikeDislike[2] +\r\n                  userIpNoDot\r\n                : \"\"\r\n            }.json`\r\n          : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}${updateLikeDislike[2]}${userIpNoDot}.json`;\r\n        const promises = [\r\n          fetch(`${path}`, {\r\n            method: \"PUT\",\r\n            body: JSON.stringify(updateLikeDislike[1]),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }).then((res) => res.json()),\r\n          fetch(`${deletePath}`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }).then((res) => res.json()),\r\n        ];\r\n        const promisedData = Promise.all(promises);\r\n        promisedData.then((data) => {\r\n          console.log(data);\r\n          if (location.state.articleData) {\r\n            let cpyObj = [\r\n              ...JSON.parse(\r\n                JSON.stringify(location.state.articleData.comments)\r\n              ),\r\n            ];\r\n            console.log(cpyObj);\r\n            console.log(props.commentIndex);\r\n            if (!Array.isArray(props.commentIndex)) {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                // cpyObj[props.commentIndex].commentLikes = Object.keys(\r\n                //   cpyObj[props.commentIndex].commentLikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex].commentLikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex].commentLikes = { ...commentLikes };\r\n                cpyObj[props.commentIndex].commentDislikes = commentDislikes\r\n                  ? {\r\n                      ...commentDislikes,\r\n                    }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                // cpyObj[props.commentIndex].commentDislikes = Object.keys(\r\n                //   cpyObj[props.commentIndex].commentDislikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex].commentDislikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex].commentLikes = commentLikes\r\n                  ? { ...commentLikes }\r\n                  : 0;\r\n                cpyObj[props.commentIndex].commentDislikes = {\r\n                  ...commentDislikes,\r\n                };\r\n              }\r\n            } else {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                // cpyObj[props.commentIndex[0]].replies[\r\n                //   props.commentIndex[1]\r\n                // ].commentLikes = Object.keys(\r\n                //   cpyObj[props.commentIndex[0]].replies[props.commentIndex[1]]\r\n                //     .commentLikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex[0]].replies[\r\n                //         props.commentIndex[1]\r\n                //       ].commentLikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = { ...commentLikes };\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = commentDislikes\r\n                  ? { ...commentDislikes }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                // cpyObj[props.commentIndex[0]].replies[\r\n                //   props.commentIndex[1]\r\n                // ].commentDislikes = Object.keys(\r\n                //   cpyObj[props.commentIndex[0]].replies[props.commentIndex[1]]\r\n                //     .commentDislikes\r\n                // ).length\r\n                //   ? {\r\n                //       ...cpyObj[props.commentIndex[0]].replies[\r\n                //         props.commentIndex[1]\r\n                //       ].commentDislikes,\r\n                //       [data.split(\".\").join(\"-\")]: data,\r\n                //     }\r\n                //   : { [data.split(\".\").join(\"-\")]: data };\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = commentLikes ? { ...commentLikes } : 0;\r\n                cpyObj[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = { ...commentDislikes };\r\n              }\r\n            }\r\n            console.log(cpyObj);\r\n            console.log(cpyObj[props.commentIndex]);\r\n            console.log(props);\r\n            history.replace({\r\n              state: {\r\n                articleData: {\r\n                  ...location.state.articleData,\r\n                  comments: [...cpyObj],\r\n                },\r\n              },\r\n            });\r\n            setFetching(false);\r\n          } else {\r\n            let cpyArr = JSON.parse(JSON.stringify(props.commentData));\r\n            if (!Array.isArray(props.commentIndex)) {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                cpyArr[props.commentIndex].commentLikes = { ...commentLikes };\r\n                cpyArr[props.commentIndex].commentDislikes = commentDislikes\r\n                  ? {\r\n                      ...commentDislikes,\r\n                    }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                cpyArr[props.commentIndex].commentLikes = commentLikes\r\n                  ? { ...commentLikes }\r\n                  : 0;\r\n                cpyArr[props.commentIndex].commentDislikes = {\r\n                  ...commentDislikes,\r\n                };\r\n              }\r\n            } else {\r\n              if (updateLikeDislike[0] === \"/commentLikes/\") {\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = { ...commentLikes };\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = commentDislikes\r\n                  ? { ...commentDislikes }\r\n                  : 0;\r\n              } else if (updateLikeDislike[0] === \"/commentDislikes/\") {\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentLikes = commentLikes ? { ...commentLikes } : 0;\r\n                cpyArr[props.commentIndex[0]].replies[\r\n                  props.commentIndex[1]\r\n                ].commentDislikes = { ...commentDislikes };\r\n              }\r\n            }\r\n            props.setCommentData([...cpyArr]);\r\n            setFetching(false);\r\n          }\r\n        });\r\n        setUpdateLikeDislike(null);\r\n      }\r\n    }\r\n  }, [updateLikeDislike, commentLikes, commentDislikes]);\r\n\r\n  useEffect(() => {\r\n    console.log(commentLikes);\r\n    const userIp = localStorage.getItem(\"userIp\");\r\n    if (commentLikes && Object.keys(commentLikes).length && userIp) {\r\n      if (\r\n        Object.keys(commentLikes).find(\r\n          (ip) => ip === userIp.split(\".\").join(\"-\")\r\n        )\r\n      ) {\r\n        commentLike.current.style.opacity = \"0.5\";\r\n      } else {\r\n        commentLike.current.style.opacity = \"1\";\r\n      }\r\n    } else {\r\n      commentLike.current.style.opacity = \"1\";\r\n    }\r\n  }, [commentLikes]);\r\n  useEffect(() => {\r\n    console.log(commentDislikes);\r\n    if (commentDislikes && Object.keys(commentDislikes).length) {\r\n      const userIp = localStorage.getItem(\"userIp\");\r\n      if (\r\n        Object.keys(commentDislikes).find(\r\n          (ip) => ip === userIp.split(\".\").join(\"-\")\r\n        )\r\n      ) {\r\n        commentDislike.current.style.opacity = \"0.5\";\r\n      } else {\r\n        commentDislike.current.style.opacity = \"1\";\r\n      }\r\n    } else {\r\n      commentDislike.current.style.opacity = \"1\";\r\n    }\r\n  }, [commentDislikes]);\r\n\r\n  useEffect(() => {\r\n    if (location) {\r\n      // console.log(\"locationchanged\");\r\n      console.log(location.state.articleData);\r\n    }\r\n  }, [location]);\r\n\r\n  const handleLike = () => {\r\n    handleLikeDislike(\"like\");\r\n  };\r\n  const handeDislike = () => {\r\n    handleLikeDislike(\"dislike\");\r\n  };\r\n\r\n  const testsmthng = () => {\r\n    // fetch(\r\n    //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/Vijesti/BiH/-MpkjdqpHcSS6cQ0K_gx/comments/-MupKKYniZP1H1JYinS0/commentDislikes/12-55-444-664.json`,\r\n    //   {\r\n    //     method: \"PUT\",\r\n    //     body: JSON.stringify(\"12.23.222.222\"),\r\n    //     headers: {\r\n    //       \"Content-Type\": \"application/json\",\r\n    //     },\r\n    //   }\r\n    // )\r\n    //   .then((res) => res.json())\r\n    //   .then((data) => console.log(data));\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        props.commentIndex.constructor.name === \"Array\"\r\n          ? `${s.commentContainerReply}${\r\n              props.negativeComment ? \" \" + s.negativeComment : \"\"\r\n            }`\r\n          : `${s.commentContainer}${\r\n              props.topComment ? \" \" + s.topComment : \"\"\r\n            }${props.negativeComment ? \" \" + s.negativeComment : \"\"}`\r\n      }\r\n      onClick={testsmthng}\r\n    >\r\n      <div className={s.commentHeader}>\r\n        <div className={s.commentHeaderFirst}>\r\n          <i\r\n            class=\"fas fa-user\"\r\n            style={{\r\n              backgroundColor: `#${props.avatarColor}`,\r\n              color: \"rgb(255, 255, 255)\",\r\n              padding: \"1.5rem\",\r\n              borderRadius: \"0.3rem\",\r\n            }}\r\n          ></i>\r\n        </div>\r\n        <div className={s.commentHeaderSecond}>\r\n          <h4>\r\n            <Link to={`/profil/${props.displayName}`}>{props.displayName}</Link>\r\n          </h4>\r\n          <p>\r\n            {!props.path ? (\r\n              <Link\r\n                to={\r\n                  location.state.articleData && {\r\n                    pathname: `/komentar/${\r\n                      Array.isArray(props.commentIndexDB)\r\n                        ? props.commentIndexDB[1]\r\n                        : props.commentIndexDB\r\n                    }`,\r\n                    search: `?${JSON.stringify({\r\n                      articleLink: `${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}`,\r\n                      commentId: Array.isArray(props.commentIndexDB)\r\n                        ? props.commentIndexDB[1]\r\n                        : props.commentIndexDB,\r\n                      parentCommentId: Array.isArray(props.commentIndexDB)\r\n                        ? props.commentIndexDB[0]\r\n                        : undefined,\r\n                    })}`,\r\n                  }\r\n                }\r\n              >\r\n                {`prije ${props.date ? props.date : \"1 sekund\"}`}\r\n              </Link>\r\n            ) : (\r\n              `prije ${props.date ? props.date : \"1 sekund\"}`\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className={s.commentBody}>\r\n        <p>{props.comment}</p>\r\n      </div>\r\n      <div className={s.commentFooter}>\r\n        <div>\r\n          <span className={s.like} onClick={handleLike} ref={commentLike}>\r\n            <i class=\"fas fa-long-arrow-alt-up\"></i>{\" \"}\r\n            {commentLikes && Object.keys(commentLikes).length\r\n              ? Object.keys(commentLikes).length\r\n              : 0}\r\n          </span>\r\n          <span\r\n            className={s.dislike}\r\n            onClick={handeDislike}\r\n            ref={commentDislike}\r\n          >\r\n            <i class=\"fas fa-long-arrow-alt-down\"></i>{\" \"}\r\n            {commentDislikes && Object.keys(commentDislikes).length\r\n              ? Object.keys(commentDislikes).length\r\n              : 0}\r\n          </span>\r\n        </div>\r\n        <div className={s.reportLikeParent}>\r\n          <span\r\n            className={s.report}\r\n            style={\r\n              !ctx.isLoggedIn\r\n                ? {\r\n                    marginRight: \"0rem\",\r\n                  }\r\n                : null\r\n            }\r\n            onClick={() =>\r\n              props.handleReport({\r\n                commentId: Array.isArray(props.commentIndexDB)\r\n                  ? props.commentIndexDB[1]\r\n                  : props.commentIndexDB,\r\n                user: props.displayName,\r\n                comment: props.comment,\r\n                search: `?${JSON.stringify({\r\n                  comLink: props.path,\r\n                  commentId: Array.isArray(props.commentIndexDB)\r\n                    ? props.commentIndexDB[1]\r\n                    : props.commentIndexDB,\r\n                  parentCommentId: Array.isArray(props.commentIndexDB)\r\n                    ? props.commentIndexDB[0]\r\n                    : undefined,\r\n                })}`,\r\n              })\r\n            }\r\n          >\r\n            <i class=\"far fa-flag\"></i> <p>Prijavi</p>\r\n          </span>\r\n          {ctx.isLoggedIn && (\r\n            <>\r\n              <span className={s.divide} />\r\n              <span\r\n                className={s.reply}\r\n                onClick={() => props.handleReply(props.commentIndex)}\r\n              >\r\n                <i class=\"fas fa-pen\"></i>\r\n                <p>Odgovori</p>\r\n              </span>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentItem;\r\n","import React, { forwardRef, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useRef } from \"react\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { auth } from \"../../firebase\";\r\nimport s from \"./CommentReply.module.css\";\r\n\r\nconst CommentReply = forwardRef((props, ref) => {\r\n  const location = useLocation();\r\n  const textareaRef = useRef();\r\n  const handleReply = () => {\r\n    console.log(location.state);\r\n    let userObj = JSON.parse(localStorage.getItem(\"userObj\"));\r\n    if (userObj && textareaRef.current.value.length > 2) {\r\n      // const arrStr = `${props.commentIndex[0] / props.commentIndex[1]}`;\r\n      // fetch(\r\n      //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n      //     location.state.articleData.category\r\n      //   }/${location.state.articleData.subCategory}/-${\r\n      //     location.state.articleData.id\r\n      //   }/comments/${\r\n      //     Array.isArray(props.commentIndexDB)\r\n      //       ? props.commentIndexDB[0]\r\n      //       : props.commentIndexDB\r\n      //   }.json`\r\n      // )\r\n      //   .then((response) => response.json())\r\n      //   .then((data) => {\r\n      //     console.log(data);\r\n      const userName = userObj.displayName;\r\n      const avatarColor = userObj.avatarColor;\r\n      const date = new Date();\r\n      const time = `${date.getFullYear()}-${\r\n        date.getMonth() + 1\r\n      }-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\r\n      // const replyArray = { ...data };\r\n      // if (data.replies) {\r\n      //   replyArray.replies = [...data.replies];\r\n      // } else {\r\n      //   replyArray.replies = [];\r\n      // }\r\n      let replyObj = {\r\n        userName: userName,\r\n        avatarColor: avatarColor,\r\n        date: time,\r\n        comment: textareaRef.current.value,\r\n      };\r\n      const userId = auth.currentUser.uid;\r\n      // const pathx = !Array.isArray(props.commentIndexDB) ? props.path : \"\";\r\n      let articlePath =\r\n        props && props.path\r\n          ? props.path.split(\"/\")\r\n          : location.state.articleData.linkPath.split(\"/\");\r\n      articlePath.splice(3);\r\n      articlePath = articlePath.join(\"/\");\r\n      console.log(props.path);\r\n      // console.log(pathx);\r\n      const path = !props.path\r\n        ? `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n            location.state.articleData.category\r\n          }/${location.state.articleData.subCategory}/-${\r\n            location.state.articleData.id\r\n          }/comments/${\r\n            Array.isArray(props.commentIndexDB)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB\r\n          }/replies.json`\r\n        : `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${props.path}/replies.json`;\r\n      fetch(`${path}`, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(replyObj),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          textareaRef.current.value = \"\";\r\n          if (props.getComments) {\r\n            props.getComments(true);\r\n          } else {\r\n            ref.current = ref.current + 1;\r\n            props.setCommentData((old) => {\r\n              let oldArr = [...JSON.parse(JSON.stringify(old))];\r\n              let ind = Array.isArray(props.commentIndex)\r\n                ? props.commentIndex[0]\r\n                : props.commentIndex;\r\n\r\n              replyObj.id = data.name;\r\n              replyObj.path = `${props.path}/replies/${data.name}`;\r\n              oldArr[ind].replies = oldArr[ind].replies\r\n                ? [...oldArr[ind].replies, { ...replyObj }]\r\n                : [{ ...replyObj }];\r\n              console.log(oldArr);\r\n              return oldArr;\r\n            });\r\n            props.setReplyIndex(null);\r\n          }\r\n          const commentInfo = {\r\n            articlePath: !props.path\r\n              ? `${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}`\r\n              : articlePath,\r\n            commentId: data.name,\r\n            parentCommentId: Array.isArray(props.commentIndexDB)\r\n              ? props.commentIndexDB[0]\r\n              : props.commentIndexDB,\r\n          };\r\n          console.log(props.commentIndexDB);\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              const sendData = data + 1;\r\n              console.log(sendData);\r\n              // let num = data + 10;\r\n              // num = `${num}`;\r\n              // num = num.substring(0, num.length - 1);\r\n              // num = +num.concat(\"0\");\r\n              const promises = [\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/${data}/${commentInfo.commentId}.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify(commentInfo),\r\n                  }\r\n                ).then((res) => res.json()),\r\n                fetch(\r\n                  `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments/comLength.json`,\r\n                  {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: sendData,\r\n                  }\r\n                ).then((res) => res.json()),\r\n              ];\r\n              const promiseData = Promise.all(promises);\r\n              promiseData.then((data) => {\r\n                console.log(data);\r\n              });\r\n            });\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      id={\r\n        Array.isArray(props.commentIndex)\r\n          ? s.commentReplyReplies\r\n          : s.commentReply\r\n      }\r\n    >\r\n      <textarea ref={textareaRef} placeholder=\"upi≈°i odgovor\"></textarea>\r\n      <div id={s.commentReplyFooter}>\r\n        <span onClick={handleReply}>\r\n          <i class=\"fas fa-pen\"></i>&nbsp; Odgovori\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default CommentReply;\r\n","import React from \"react\";\r\nimport s from \"./CommentShow.module.css\";\r\n\r\nconst CommentShow = (props) => {\r\n  return (\r\n    <div\r\n      className={`${s.showCommentReplies}${\r\n        props.showAll\r\n          ? \" \" + s.showAll\r\n          : !props.showReply\r\n          ? \" \" + s.showCommentMore\r\n          : \"\"\r\n      }`}\r\n      onClick={props.onClick}\r\n    >\r\n      {props.showAll\r\n        ? `PRIKA≈ΩI SVE KOMENTARE (${props.showAll})`\r\n        : props.showReply\r\n        ? `PRIKA≈ΩI ODGOVORE (${props.showReply})`\r\n        : props.loading\r\n        ? \"Uƒçitavam...\"\r\n        : !props.loading && \"PRIKA≈ΩI JO≈† KOMENTARA\"}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentShow;\r\n","import React, { useRef } from \"react\";\r\nimport s from \"./ReportComment.module.css\";\r\n\r\nconst ReportComment = (props) => {\r\n  const choiceRef = useRef();\r\n  const closeModal = () => {\r\n    props.closeModal(null);\r\n  };\r\n\r\n  const sendReport = () => {\r\n    const d = new Date();\r\n    const year = d.getFullYear();\r\n    const month = d.getMonth() + 1;\r\n    const day = d.getDate();\r\n    console.log(month);\r\n    console.log(day);\r\n    console.log(props.reportData);\r\n    console.log(choiceRef.current.style);\r\n    let inputs = [];\r\n    let commentData = props.reportData;\r\n    for (let i = 0; i < choiceRef.current.children.length; i++) {\r\n      if (choiceRef.current.children[i].children[0].checked) {\r\n        inputs.push(choiceRef.current.children[i].children[0]);\r\n      }\r\n    }\r\n    if (!inputs.length) {\r\n      alert(\"Molimo, odaberite razlog prijave.\");\r\n    } else {\r\n      commentData.reason = inputs[0].value;\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/reports/${year}/${month}/${day}.json`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(commentData),\r\n        }\r\n      );\r\n      props.closeModal(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id={s.reportContainer}>\r\n      <div id={s.reportHeader}>\r\n        <h3>Navedite razlog zbog kojeg ≈æelite prijaviti ovaj komentar?</h3>\r\n      </div>\r\n      <div id={s.reportBody}>\r\n        <div id={s.reportRadioBtns} ref={choiceRef}>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice1\"\r\n              name=\"report\"\r\n              value=\"govor mr≈ænje\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice1\">Govor mr≈ænje</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice2\"\r\n              name=\"report\"\r\n              value=\"negiranje genocida\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice2\">Negiranje genocida</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice3\"\r\n              name=\"report\"\r\n              value=\"neprikladan rjeƒçnik\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice3\">Neprikladan rjeƒçnik</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice4\"\r\n              name=\"report\"\r\n              value=\"off topic\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice4\">Off topic</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice5\"\r\n              name=\"report\"\r\n              value=\"vrijeƒëanje\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice5\">Vrijeƒëanje</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input type=\"radio\" id=\"reportChoice6\" name=\"report\" value=\"spam\" />\r\n            <label htmlFor=\"reportChoice6\">Spam</label>\r\n          </div>\r\n          <div className={s.bundleRadios}>\r\n            <input\r\n              type=\"radio\"\r\n              id=\"reportChoice7\"\r\n              name=\"report\"\r\n              value=\"reklama\"\r\n              readonly=\"readonly\"\r\n            />\r\n            <label htmlFor=\"reportChoice7\">Reklama</label>\r\n          </div>\r\n        </div>\r\n        <div id={s.confirm}>\r\n          <button onClick={closeModal}>Odustani</button>\r\n          <button onClick={sendReport}>Prijavi komentar</button>\r\n        </div>\r\n        <p id={s.footerNote}>\r\n          Ukoliko ≈æelite dopuniti va≈°u prijavu ili prijaviti odreƒëenog korisnika\r\n          molimo da nas kontaktirate na poseban e-mail: komentari@klix.ba.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportComment;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport s from \"./LinkedArticles.module.css\";\r\n\r\nconst LinkedArticles = ({ data, indL }) => {\r\n  useState(() => {\r\n    console.log(data);\r\n    console.log(indL);\r\n    console.log(indL[1] === 3 && indL[0] === 1);\r\n  }, []);\r\n  return (\r\n    <div\r\n      className={`${s.linkedArticle}${\r\n        indL[1] === 1 ? ` ${s.linkedArticleSolo}` : \"\"\r\n      }`}\r\n      style={indL[1] === 2 && indL[0] === 1 ? { position: \"static\" } : null} //hide right border of second item when we have length of 2, aesthetic purpose\r\n    >\r\n      <div className={s.imageContainer}>\r\n        <Link\r\n          to={{\r\n            pathname: encodeURI(`/${data.articlePath}`),\r\n            state: undefined,\r\n          }}\r\n        >\r\n          <img\r\n            src={data.thumbnail.replace(\r\n              \"https://firebasestorage.googleapis.com\",\r\n              \"https://ik.imagekit.io/1cryg5xvxsq/tr:w-300\"\r\n            )}\r\n          />\r\n        </Link>\r\n      </div>\r\n      <div className={s.titles}>\r\n        <h3\r\n          style={{\r\n            color: `${clrs[data.articlePath.split(\"/\")[0].toLowerCase()]}`,\r\n          }}\r\n        >\r\n          {data.subTitle}\r\n        </h3>\r\n        <h3>\r\n          <Link\r\n            to={{\r\n              pathname: encodeURI(`/${data.articlePath}`),\r\n              state: undefined,\r\n            }}\r\n          >\r\n            {data.title}\r\n          </Link>\r\n        </h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LinkedArticles;\r\n","import React from \"react\";\r\nimport s from \"./LinkedPromo.module.css\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { articleColors } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nconst LinkedPromo = ({ data }) => {\r\n  return (\r\n    <div className={s.promoItem}>\r\n      <div className={s.promoImageCnt}>\r\n        <Link\r\n          to={{\r\n            pathname: encodeURI(\r\n              `/${data.category}/${data.subCategory}/${splitTitle(\r\n                data.title\r\n              )}/${data.id}`\r\n            ),\r\n            state: { articleData: data },\r\n          }}\r\n        >\r\n          <img src={data.imageText[0][0]} />\r\n        </Link>\r\n      </div>\r\n      <div className={s.promoBody}>\r\n        <div className={s.promoTitles}>\r\n          <h3\r\n            style={{\r\n              color: articleColors[data.category.toLowerCase()],\r\n            }}\r\n          >\r\n            {data.subTitle}\r\n          </h3>\r\n          <h3>\r\n            <Link\r\n              to={{\r\n                pathname: encodeURI(\r\n                  `/${data.category}/${data.subCategory}/${splitTitle(\r\n                    data.title\r\n                  )}/${data.id}`\r\n                ),\r\n                state: { articleData: data },\r\n              }}\r\n            >\r\n              {data.title}\r\n            </Link>\r\n          </h3>\r\n        </div>\r\n        <div className={s.promoFooter}>\r\n          <span>{data.date ? timeDifference(data.date) : \"\"}</span>\r\n          <span>\r\n            <i class=\"fas fa-comments\"></i> 0<i class=\"fas fa-share-alt\"></i> 0\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LinkedPromo;\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport s from \"./Popular.module.css\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\n\r\nexport const getLen = (comObj) => {\r\n  console.log(comObj);\r\n  let comRepLen = 0;\r\n  if (comObj.comments) {\r\n    for (let j = 0; j < Object.keys(comObj.comments).length; j++) {\r\n      if (comObj.comments[Object.keys(comObj.comments)[j]].replies) {\r\n        comRepLen += Object.keys(\r\n          comObj.comments[Object.keys(comObj.comments)[j]].replies\r\n        ).length;\r\n      }\r\n    }\r\n    return comRepLen + Object.keys(comObj.comments).length;\r\n  } else {\r\n    return 0;\r\n  }\r\n};\r\n\r\nconst Popular = () => {\r\n  const [popularArts, setPopularArts] = useState(null);\r\n  useEffect(() => {\r\n    const dbRef = db.ref(`dates/2022/3/8`);\r\n    dbRef.once(\"value\", async (snap) => {\r\n      let currArts = [];\r\n      const firstData = snap.val();\r\n      console.log(firstData);\r\n      if (Object.keys(firstData).length) {\r\n        currArts = getDateData(firstData);\r\n        await currArts.then((data) => (currArts = [...data]));\r\n        currArts.sort((a, b) => {\r\n          if (a.len - b.len > 0) {\r\n            return -1;\r\n          } else if (a.len - b.len < 0) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        currArts.splice(2); //if it's curr morning and we do not have enough arts to work with so we imitate it by splicing what we have and getting arts from the prev day\r\n        if (currArts.length >= 5) {\r\n          currArts.splice(5);\r\n          setPopularArts([...currArts]);\r\n        } else {\r\n          const dbRef2 = db.ref(`dates/2022/3/7`);\r\n          dbRef2.once(\"value\", async (snap) => {\r\n            const data2 = snap.val();\r\n            console.log(data2);\r\n            let currArts2 = getDateData(data2);\r\n            await currArts2.then((data) => (currArts2 = [...data]));\r\n            currArts2.sort((a, b) => {\r\n              if (a.len - b.len > 0) {\r\n                return -1;\r\n              } else if (a.len - b.len < 0) {\r\n                return 1;\r\n              } else {\r\n                return 0;\r\n              }\r\n            });\r\n            currArts2.splice(5 - currArts.length);\r\n            currArts2 = currArts2.concat(currArts);\r\n            currArts2.sort((a, b) => {\r\n              if (a.len - b.len > 0) {\r\n                return -1;\r\n              } else if (a.len - b.len < 0) {\r\n                return 1;\r\n              } else {\r\n                return 0;\r\n              }\r\n            });\r\n            setPopularArts([...currArts2]);\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const getDateData = (initData) => {\r\n    return new Promise((resolve) => {\r\n      const currArts = [];\r\n      const promises = [];\r\n      for (let i = 0; i < Object.keys(initData).length; i++) {\r\n        promises.push(\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n              Object.values(initData)[i].path\r\n            }/${Object.values(initData)[i].id}.json`\r\n          ).then((res) => res.json())\r\n        );\r\n      }\r\n      const promisedData = Promise.all(promises);\r\n      promisedData.then((data) => {\r\n        console.log(data);\r\n        for (let i = 0; i < data.length; i++) {\r\n          if (data[i].comments) {\r\n            let comRepLen = getLen(data[i]);\r\n            if (comRepLen) {\r\n              if (\r\n                comRepLen +\r\n                  Object.keys(data[i].comments).length +\r\n                  (data[i].shares.constructor === Object\r\n                    ? Object.keys(data[i].shares).length\r\n                    : 0) >=\r\n                10\r\n              ) {\r\n                data[i].len =\r\n                  comRepLen +\r\n                  Object.keys(data[i].comments).length +\r\n                  (data[i].shares.constructor === Object\r\n                    ? Object.keys(data[i].shares).length\r\n                    : 0);\r\n                currArts.push(data[i]);\r\n              }\r\n            } else if (\r\n              Object.keys(data[i].comments).length +\r\n                (data[i].shares.constructor === Object\r\n                  ? Object.keys(data[i].shares).length\r\n                  : 0) >=\r\n              10\r\n            ) {\r\n              data[i].len =\r\n                Object.keys(data[i].comments).length +\r\n                (data[i].shares.constructor === Object\r\n                  ? Object.keys(data[i].shares).length\r\n                  : 0);\r\n              currArts.push(data[i]);\r\n            }\r\n          } else if (\r\n            data[i].shares.constructor === Object &&\r\n            Object.keys(data[i].shares).length >= 10\r\n          ) {\r\n            data[i].len = Object.keys(data[i].shares).length;\r\n            currArts.push(data[i]);\r\n          }\r\n        }\r\n        console.log(currArts);\r\n        return resolve(currArts);\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div id={s.popularCnt}>\r\n      <div id={s.popularHeader}>\r\n        <h3>Popularno</h3>\r\n        <span>\r\n          <svg\r\n            class=\"h-5 w-5\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"\r\n            ></path>\r\n          </svg>\r\n        </span>\r\n      </div>\r\n      <div id={s.popularBody}>\r\n        {popularArts &&\r\n          popularArts.map((popArt) => (\r\n            <div className={s.popularItem} key={uuid()}>\r\n              <div className={s.popularItemHeader}>\r\n                <h3\r\n                  style={{\r\n                    color: `${clrs[popArt.category.toLowerCase()]}`,\r\n                  }}\r\n                >\r\n                  {popArt.subTitle}\r\n                </h3>\r\n              </div>\r\n              <div className={s.popularItemBody}>\r\n                <p>\r\n                  <Link\r\n                    to={{\r\n                      pathname: encodeURI(\r\n                        `/${popArt.category}/${popArt.subCategory}/${splitTitle(\r\n                          popArt.title\r\n                        )}/${popArt.id}`\r\n                      ),\r\n                      state: {\r\n                        articleData: {\r\n                          ...popArt,\r\n                          linkPath: `/${popArt.category}/${\r\n                            popArt.subCategory\r\n                          }/${splitTitle(popArt.title)}/${popArt.id}`,\r\n                        },\r\n                      },\r\n                    }}\r\n                  >\r\n                    {popArt.title}\r\n                  </Link>\r\n                </p>\r\n              </div>\r\n              <div className={s.popularItemFooter}>\r\n                <span className={s.itemTime}>\r\n                  {timeDifference(popArt.date)}\r\n                </span>\r\n                <span className={s.spanComShare}>\r\n                  <span className={s.spanComment}>\r\n                    <svg\r\n                      class=\"inline h-3 w-3\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                    >\r\n                      <path d=\"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z\"></path>\r\n                      <path d=\"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z\"></path>\r\n                    </svg>\r\n                    {getLen(popArt)}\r\n                  </span>\r\n                  <span className={s.spanShare}>\r\n                    <svg\r\n                      class=\"ml-1 inline h-3 w-3\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      fill=\"currentColor\"\r\n                    >\r\n                      <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\"></path>\r\n                    </svg>{\" \"}\r\n                    {popArt.shares.constructor === Object\r\n                      ? Object.keys(popArt.shares).length\r\n                      : 0}\r\n                  </span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Popular;\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport parse from \"html-react-parser\";\r\nimport Nav from \"../Nav/Nav\";\r\nimport s from \"./Article.module.css\";\r\nimport ArticleLink from \"../ArticleLink/ArticleLink\";\r\nimport LinkedArticles from \"./LinkedArticles\";\r\nimport LinkedPromo from \"./LinkedPromo\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport CommentType from \"../comment/CommentType\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { getComLength } from \"../comment/Comment\";\r\nimport LoginContext from \"../../context\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { db } from \"../../firebase\";\r\nimport Popular from \"./Popular\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\n\r\nconst catSubCat = {\r\n  Vijesti: [\r\n    \"BiH\",\r\n    \"Regija\",\r\n    \"Svijet\",\r\n    \"Dijaspora\",\r\n    \"Crna hronika\",\r\n    \"Humanitarne akcije\",\r\n  ],\r\n  Biznis: [\r\n    \"Privreda\",\r\n    \"Finansije\",\r\n    \"Investicije\",\r\n    \"Smart Cash\",\r\n    \"Berza\",\r\n    \"Startupi\",\r\n    \"Posao\",\r\n  ],\r\n  Sport: [\r\n    \"Nogomet\",\r\n    \"Ko≈°arka\",\r\n    \"Tenis\",\r\n    \"Rukomet\",\r\n    \"Formula 1\",\r\n    \"Skijanje\",\r\n    \"Atletika\",\r\n    \"Borilaƒçki sportovi\",\r\n    \"Plivanje\",\r\n  ],\r\n  Magazin: [\"Kultura\", \"Muzika\", \"Film/TV\", \"Showbiz\", \"Zanimljivosti\"],\r\n  Lifestyle: [\r\n    \"Moda i ljepota\",\r\n    \"Zdravlje\",\r\n    \"Veze i seks\",\r\n    \"Gastro\",\r\n    \"Kuƒáa i ured\",\r\n    \"Putovanja\",\r\n    \"Bebe\",\r\n    \"Fitness\",\r\n    \"Ljubimci\",\r\n  ],\r\n  Scitech: [\"Nauka\", \"Tehnologija\"],\r\n  Auto: [\"Testovi\", \"Noviteti\", \"Koncepti\", \"Tuning\"],\r\n};\r\n\r\nexport const scrollFnSticky = (ref) => {\r\n  // console.log(navHeight);\r\n  if (ref.current) {\r\n    console.log(document.getElementsByTagName(\"header\")[0]);\r\n    const navStyles = window.getComputedStyle(\r\n      document.getElementsByTagName(\"header\")[0]\r\n    );\r\n    const navHeight = +navStyles.getPropertyValue(\"height\").split(\"px\")[0];\r\n    const sideBarParent = window.getComputedStyle(ref.current.parentElement);\r\n\r\n    const sideBarParentMagin = +sideBarParent\r\n      .getPropertyValue(\"margin-top\")\r\n      .split(\"px\")[0];\r\n    // console.log(\r\n    //   ref.current &&\r\n    //     ref.current.parentElement.getBoundingClientRect().top -\r\n    //       navHeight -\r\n    //       sideBarParentMagin\r\n    // );\r\n    if (\r\n      ref.current &&\r\n      ref.current.parentElement.getBoundingClientRect().top -\r\n        navHeight -\r\n        sideBarParentMagin <=\r\n        0\r\n    ) {\r\n      // ref.current.style.height = \"inherit\";\r\n      ref.current.children[0].style.position = \"sticky\";\r\n      ref.current.children[0].style.top = `${navHeight + sideBarParentMagin}px`;\r\n    }\r\n  }\r\n};\r\n\r\nconst ArticleComp = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [articleData, setArticleData] = useState(null);\r\n  const [text, setText] = useState([]);\r\n  const [linkData, setLinkData] = useState({});\r\n  const [internalLinks, setInternalLinks] = useState([]);\r\n  const [clickedSlider, setClickedSlider] = useState(false);\r\n  const [zoomedIn, setZoomedIn] = useState(false);\r\n  const [moving, setMoving] = useState(false);\r\n  const [posOfSlider, setPosOfSlider] = useState(null);\r\n  const [grabXPrev, setGrabXPrev] = useState(null);\r\n  const [grabYPrev, setGrabYPrev] = useState(null);\r\n  const [zoomPos, setZoomPos] = useState(\"\");\r\n  const [counter, setCounter] = useState(0);\r\n\r\n  const [relatedArticles, setRelatedArticles] = useState([]);\r\n  const [promoArticles, setPromoArticles] = useState([]);\r\n\r\n  const imageSliderRef = useRef();\r\n  const sliderFooterBar = useRef();\r\n  const timer = useRef(null);\r\n  const stickLeftSideBar = useRef();\r\n  const stickRightSideBar = useRef();\r\n  const fullComLength = useRef(0);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    function handlerFn() {\r\n      scrollFnSticky(stickLeftSideBar);\r\n      scrollFnSticky(stickRightSideBar);\r\n    }\r\n    //add +1 to visited\r\n    console.log(articleData);\r\n\r\n    if (window.twttr) {\r\n      window.twttr.widgets.load();\r\n    }\r\n    console.log(window);\r\n    // window.instgrm.Embeds.process();\r\n    if (window.instgrm) {\r\n      console.log(window.instgrm);\r\n      // setTimeout(() => {\r\n      window.instgrm.Embeds.process();\r\n      // }, 2000);\r\n    }\r\n    window.addEventListener(\"scroll\", handlerFn);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handlerFn);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n      window.scrollTo(0, 0);\r\n      console.log(location.state);\r\n      console.log(location.pathname);\r\n      setArticleData({ ...location.state.articleData });\r\n      if (location.state.articleData.tags) {\r\n        findRelatedTags(\r\n          location.state.articleData.tags,\r\n          location.state.articleData.category,\r\n          `-${location.state.articleData.id}`\r\n        );\r\n      }\r\n\r\n      //add +1 to visited\r\n      console.log(location.state.articleData);\r\n      fetch(\"https://api.ipify.org/?format=json\")\r\n        .then((response) => response.json())\r\n        .then((ip) => {\r\n          const dbRef = db.ref(\r\n            `articles/${location.state.articleData.category}/${\r\n              location.state.articleData.subCategory\r\n            }/-${location.state.articleData.id}/visited/${ip.ip\r\n              .split(\".\")\r\n              .join(\"_\")}`\r\n          );\r\n          dbRef.once(\"value\", (snap) => {\r\n            const data = snap.val();\r\n            console.log(data);\r\n            // if (!data) {\r\n            console.log(\"s\");\r\n            console.log(\r\n              `articles/${location.state.articleData.category}/${\r\n                location.state.articleData.subCategory\r\n              }/-${location.state.articleData.id}/visited/${ip.ip\r\n                .split(\".\")\r\n                .join(\"_\")}`\r\n            );\r\n            dbRef.set(ip.ip);\r\n            // const len = Math.floor(Math.random() * 100);\r\n            // const temp = [];\r\n            // for (let i = 0; i < len; i++) {\r\n            //   temp.push(\r\n            //     `${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}.${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}`\r\n            //   );\r\n            // }\r\n            // console.log(temp);\r\n\r\n            // for (let i = 0; i < temp.length; i++) {\r\n            //   ((ind) => {\r\n            //     db.ref(\r\n            //       `articles/${location.state.articleData.category}/${\r\n            //         location.state.articleData.subCategory\r\n            //       }/-${location.state.articleData.id}/visited/${temp[ind]\r\n            //         .split(\".\")\r\n            //         .join(\"_\")}`\r\n            //     ).set(temp[ind]);\r\n            //   })(i);\r\n            // }\r\n            // }\r\n          });\r\n        });\r\n\r\n      // get promos, recursion\r\n      const dbRef = db.ref(\r\n        `articles/Promo/${location.state.articleData.category}`\r\n      );\r\n      dbRef\r\n        .orderByKey()\r\n        .limitToLast(9)\r\n        .once(\"value\", (snap) => {\r\n          console.log(snap.val());\r\n          const data = snap.val();\r\n          const indeces = [];\r\n          const fn = (arr, num, length) => {\r\n            console.log(arr);\r\n            console.log(num);\r\n            console.log(length);\r\n            if (arr.length < 3) {\r\n              if (arr.some((val) => val === num)) {\r\n                fn(arr, Math.floor(Math.random() * length), length);\r\n              } else {\r\n                arr.push(num);\r\n                fn(arr, Math.floor(Math.random() * length), length);\r\n              }\r\n            }\r\n          };\r\n          if (!data || Object.keys(data).length < 9) {\r\n            return;\r\n          }\r\n          fn(\r\n            indeces,\r\n            Math.floor(Math.random() * Object.keys(data).length),\r\n            Object.keys(data).length\r\n          );\r\n          console.log(indeces);\r\n          const promoArr = [];\r\n          for (let i = 0; i < indeces.length; i++) {\r\n            promoArr.push(data[Object.keys(data)[indeces[i]]]);\r\n          }\r\n          console.log(promoArr);\r\n          setPromoArticles([...promoArr]);\r\n        });\r\n\r\n      let replyLength = 0;\r\n      // for (let i = 0; i < location.state.articleData.comments.length; i++) {\r\n      //   if (location.state.articleData.comments[i].replies) {\r\n      //     replyLength += location.state.articleData.comments[i].replies.length;\r\n      //   }\r\n      // }\r\n      if (location.state.articleData.comments) {\r\n        for (let key in location.state.articleData.comments) {\r\n          if (location.state.articleData.comments[key].replies) {\r\n            replyLength += Object.keys(\r\n              location.state.articleData.comments[key].replies\r\n            ).length;\r\n          }\r\n        }\r\n        fullComLength.current =\r\n          replyLength + Object.keys(location.state.articleData.comments).length;\r\n      }\r\n      const txt = location.state.articleData.articleText;\r\n      const paragraphs = [];\r\n      let temp = \"\";\r\n      const finalParagraphs = [];\r\n      let pos = 0;\r\n      for (let i = 0; i < txt.length; i++) {\r\n        if (txt[i] === \"\\n\" && txt[i + 1] === \"\\n\") {\r\n          paragraphs.push({ text: txt.slice(pos, i) });\r\n          pos = i;\r\n        }\r\n        if (i === txt.length - 1) {\r\n          paragraphs.push({ text: txt.slice(pos) });\r\n        }\r\n      }\r\n      console.log(paragraphs);\r\n\r\n      const inbetweenArray = [];\r\n      let check = null;\r\n      let checkBool = false;\r\n      let ind = 0;\r\n      let testArr = [];\r\n      let linkStart = 0;\r\n      paragraphs.forEach((paragraph) => {\r\n        console.log(paragraph);\r\n        for (let i = 0; i < paragraph.text.length; i++) {\r\n          if (\r\n            paragraph.text[i] === \"<\" &&\r\n            paragraph.text[i + 1] === \"b\" &&\r\n            paragraph.text[i + 2] === \">\" &&\r\n            !paragraph.text.includes(\"<list>\") &&\r\n            !paragraph.text.includes(\"</list>\")\r\n          ) {\r\n            check = i;\r\n            checkBool = true;\r\n            if (temp) {\r\n              // inbetweenArray[ind].push({ text: temp });\r\n              testArr.push({ text: temp });\r\n              temp = \"\";\r\n            }\r\n          } else if (\r\n            paragraph.text[i] === \"<\" &&\r\n            paragraph.text[i + 1] === \"/\" &&\r\n            paragraph.text[i + 2] === \"b\" &&\r\n            paragraph.text[i + 3] === \">\" &&\r\n            !paragraph.text.includes(\"<list>\") &&\r\n            !paragraph.text.includes(\"</list>\")\r\n          ) {\r\n            // inbetweenArray[ind].push({\r\n            //   bold: paragraph.text.slice(check + 3, i),\r\n            // });\r\n            testArr.push({\r\n              bold: paragraph.text.slice(check + 3, i),\r\n            });\r\n            i = i + 3;\r\n            check = null;\r\n            checkBool = false;\r\n          } else if (paragraph.text[i] !== \"\\n\" && !checkBool) {\r\n            temp = temp.concat(paragraph.text[i]);\r\n          }\r\n          if (i === paragraph.text.length - 1 || i >= paragraph.text.length) {\r\n            console.log(ind);\r\n            let listChecker = false;\r\n            if (temp !== \"\") {\r\n              for (let j = 0; j < temp.length; j++) {\r\n                if (\r\n                  temp[j] === \"<\" &&\r\n                  temp[j + 1] === \"l\" &&\r\n                  temp[j + 2] === \"i\" &&\r\n                  temp[j + 3] === \"s\" &&\r\n                  temp[j + 4] === \"t\" &&\r\n                  temp[j + 5] === \">\"\r\n                ) {\r\n                  listChecker = j + 6;\r\n                } else if (\r\n                  temp[j] === \"<\" &&\r\n                  temp[j + 1] === \"/\" &&\r\n                  temp[j + 2] === \"l\" &&\r\n                  temp[j + 3] === \"i\" &&\r\n                  temp[j + 4] === \"s\" &&\r\n                  temp[j + 5] === \"t\" &&\r\n                  temp[j + 6] === \">\"\r\n                ) {\r\n                  let configListArr = temp.slice(listChecker, j);\r\n                  testArr.push({ list: configListArr });\r\n                }\r\n              }\r\n              if (!listChecker) {\r\n                testArr.push({ text: temp });\r\n              }\r\n            }\r\n            // inbetweenArray[ind].push({ texts: temp });\r\n            inbetweenArray.push([...testArr]);\r\n            ind++;\r\n            finalParagraphs.push({ text: temp });\r\n            temp = \"\";\r\n            testArr = [];\r\n          }\r\n        }\r\n      });\r\n      console.log(paragraphs);\r\n      console.log(finalParagraphs);\r\n      console.log(inbetweenArray);\r\n      let start = undefined;\r\n      const linkEmbedArr = [];\r\n      const linksArr = [];\r\n      let tempArr = [];\r\n      let tempLink = \"\";\r\n      let linkThere = false;\r\n      let linkPos = 0;\r\n      let linkPosEnd = 0;\r\n      let embedLink = \"\";\r\n      let embedThere = false;\r\n      let embedPos = 0;\r\n      let embedPosEnd = 0;\r\n      let incr = 0;\r\n      let listSkipLink = false;\r\n      inbetweenArray.forEach((items, ind) => {\r\n        console.log(items);\r\n        items.forEach((item) => {\r\n          console.log(ind);\r\n          for (let key in item) {\r\n            if (key === \"list\") {\r\n              listSkipLink = true;\r\n            }\r\n            console.log(item[key]);\r\n            for (let i = 0; i < item[key].length; i++) {\r\n              if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"l\" &&\r\n                item[key][i + 2] === \"i\" &&\r\n                item[key][i + 3] === \"n\" &&\r\n                item[key][i + 4] === \"k\" &&\r\n                item[key][i + 5] === \">\" &&\r\n                !listSkipLink\r\n              ) {\r\n                if (tempLink) {\r\n                  //text inbetween links\r\n                  for (let j = i + 6; j < item[key].length; j++) {\r\n                    if (\r\n                      item[key][j] === \"<\" &&\r\n                      item[key][j + 1] === \"/\" &&\r\n                      item[key][j + 2] === \"l\" &&\r\n                      item[key][j + 3] === \"i\" &&\r\n                      item[key][j + 4] === \"n\" &&\r\n                      item[key][j + 5] === \"k\" &&\r\n                      item[key][j + 6] === \">\"\r\n                    ) {\r\n                      if (item[key].slice(i, j + 7).includes(\" external\")) {\r\n                        //push text inbetween links but if next link is externallink dont make new line link like usually but just add it together with the text\r\n                        tempArr.push({ text: item[key].slice(linkPosEnd, i) });\r\n                        linkPosEnd = 0;\r\n                        break;\r\n                      } else {\r\n                        linkEmbedArr[incr] = [item[key].slice(0, i)]; //in case it's image or internal link\r\n                        incr++;\r\n                      }\r\n                    }\r\n                  }\r\n                  // linkEmbedArr[incr] = [item[key].slice(linkPosEnd, i)];\r\n                  // linkPosEnd = 0;\r\n                  // incr++;\r\n                } else if (!tempLink && !embedThere && i - 2 > 0) {\r\n                  //text before link\r\n                  for (let j = i + 6; j < item[key].length; j++) {\r\n                    if (\r\n                      item[key][j] === \"<\" &&\r\n                      item[key][j + 1] === \"/\" &&\r\n                      item[key][j + 2] === \"l\" &&\r\n                      item[key][j + 3] === \"i\" &&\r\n                      item[key][j + 4] === \"n\" &&\r\n                      item[key][j + 5] === \"k\" &&\r\n                      item[key][j + 6] === \">\"\r\n                    ) {\r\n                      if (item[key].slice(i, j + 7).includes(\" external\")) {\r\n                        //push text before link but if next link is externallink dont push new line since next link is part of the text\r\n                        tempArr.push({ text: item[key].slice(0, i) });\r\n                        console.log(JSON.parse(JSON.stringify(tempArr)));\r\n                        break; //in case we have more ext links in the same paragraph we wanna stop once we get what we need here\r\n                      } else {\r\n                        linkEmbedArr[incr] = [item[key].slice(0, i)]; //in case it's image or internal link\r\n                        incr++;\r\n                      }\r\n                    }\r\n                  }\r\n                  // linkEmbedArr[incr] = [item[key].slice(0, i)];\r\n                  // incr++;\r\n                }\r\n                linkThere = true;\r\n                linkPos = i;\r\n              } else if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"/\" &&\r\n                item[key][i + 2] === \"l\" &&\r\n                item[key][i + 3] === \"i\" &&\r\n                item[key][i + 4] === \"n\" &&\r\n                item[key][i + 5] === \"k\" &&\r\n                item[key][i + 6] === \">\" &&\r\n                !listSkipLink\r\n              ) {\r\n                tempLink = item[key].slice(linkPos, i + 7);\r\n                linkPosEnd = i + 7;\r\n                linksArr.push(tempLink);\r\n                console.log(\"s\");\r\n                if (tempLink.includes(\" external\")) {\r\n                  tempArr.push({ externalLink: tempLink });\r\n                  console.log(tempArr);\r\n                } else {\r\n                  //if not extlink make new line for image or innerlink to article\r\n                  linkEmbedArr[incr] = [{ link: tempLink }];\r\n                  incr++;\r\n                }\r\n              }\r\n              if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"e\" &&\r\n                item[key][i + 2] === \"m\" &&\r\n                item[key][i + 3] === \"b\" &&\r\n                item[key][i + 4] === \"e\" &&\r\n                item[key][i + 5] === \"d\" &&\r\n                item[key][i + 6] === \">\"\r\n              ) {\r\n                if (embedLink) {\r\n                  linkEmbedArr[incr] = [item[key].slice(embedPosEnd, i)];\r\n                  linkPosEnd = 0;\r\n                }\r\n                embedThere = true;\r\n                embedPos = i;\r\n              } else if (\r\n                item[key][i] === \"<\" &&\r\n                item[key][i + 1] === \"/\" &&\r\n                item[key][i + 2] === \"e\" &&\r\n                item[key][i + 3] === \"m\" &&\r\n                item[key][i + 4] === \"b\" &&\r\n                item[key][i + 5] === \"e\" &&\r\n                item[key][i + 6] === \"d\" &&\r\n                item[key][i + 7] === \">\"\r\n              ) {\r\n                embedLink = item[key].slice(embedPos, i + 8);\r\n                embedPosEnd = i + 8;\r\n                linkEmbedArr[incr] = [{ embed: embedLink }];\r\n                incr++;\r\n              }\r\n              if (i === item[key].length - 1 && !linkThere && !embedThere) {\r\n                tempArr.push({ [key]: item[key] });\r\n              } else if (\r\n                i === item[key].length - 1 &&\r\n                linkThere &&\r\n                !embedThere\r\n              ) {\r\n                if (i > linkPosEnd) {\r\n                  tempArr.push({ text: item[key].slice(linkPosEnd) });\r\n                }\r\n                linkThere = false;\r\n              } else if (\r\n                i === item[key].length - 1 &&\r\n                !linkThere &&\r\n                embedThere\r\n              ) {\r\n                tempArr.push({ text: item[key].slice(embedPosEnd) });\r\n                embedThere = false;\r\n              }\r\n            }\r\n            if (key === \"list\") {\r\n              listSkipLink = false;\r\n            }\r\n            tempLink = \"\"; //so that if we have a link in a new p we empty out everything so it can func normally\r\n          }\r\n        });\r\n        linkEmbedArr[incr] = [...tempArr];\r\n        incr++;\r\n        tempArr = [];\r\n      });\r\n      console.log(linkEmbedArr);\r\n      console.log(finalParagraphs);\r\n      console.log(linksArr);\r\n      const finishedLinks = [];\r\n      const internalLinks = [];\r\n      let checker = false;\r\n      linksArr.forEach((linkInd, ind) => {\r\n        console.log(linkInd);\r\n        if (linkInd.includes(\" external\")) {\r\n          linkInd = linkInd.slice(6, linkInd.length - 7);\r\n          console.log(linkInd);\r\n          const splitArr = linkInd.split(\" \");\r\n          console.log(splitArr);\r\n          finishedLinks.push({\r\n            external: { url: splitArr[0], text: splitArr[1] },\r\n          });\r\n        } else if (linkInd.includes(\" image\")) {\r\n          let splitArr = linkInd.slice(6, linkInd.length - 7);\r\n          let imageText = \"\";\r\n          console.log(splitArr);\r\n          for (let i = 0; i < splitArr.length; i++) {\r\n            if (\r\n              splitArr[i] === \" \" &&\r\n              splitArr[i - 1] === \"e\" &&\r\n              splitArr[i - 2] === \"g\" &&\r\n              splitArr[i - 3] === \"a\" &&\r\n              splitArr[i - 4] === \"m\" &&\r\n              splitArr[i - 5] === \"i\" &&\r\n              splitArr[i - 6] === \" \"\r\n            ) {\r\n              imageText = splitArr.slice(i + 1);\r\n              splitArr = splitArr.slice(0, i);\r\n              splitArr = splitArr.split(\" \");\r\n              console.log(splitArr);\r\n              splitArr.push(imageText);\r\n            }\r\n          }\r\n          // splitArr = splitArr.split(\" \");\r\n          console.log(splitArr);\r\n          finishedLinks.push({\r\n            image: { url: splitArr[0], text: splitArr[2] },\r\n          });\r\n        } else {\r\n          //internal\r\n          let linkText = linkInd.slice(6, linkInd.length - 7);\r\n          console.log(linkText);\r\n          linkText = linkText.split(\" \");\r\n          linkText.splice(linkText.length - 1);\r\n          //handle space in cat or sub cat like crna hronika\r\n          let path = `${\r\n            linkText.length > 2\r\n              ? linkText\r\n                  .map((item, i) => {\r\n                    if (i !== 0) {\r\n                      return item;\r\n                    }\r\n                  })\r\n                  .join(\" \")\r\n                  .slice(1)\r\n              : linkText[1]\r\n          }/-${linkText[0]}`;\r\n          console.log(path);\r\n          const path2 = linkText[1].split(\"/\");\r\n          for (let key in catSubCat) {\r\n            // if (key === path2[0]) {\r\n            //   alert(\"d\");\r\n            // }\r\n            if (key.toLowerCase().includes(path2[0])) {\r\n              for (let i = 0; i < catSubCat[key].length; i++) {\r\n                if (catSubCat[key][i].toLowerCase().includes(path2[1])) {\r\n                  path = `${key}/${catSubCat[key][i]}`;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${path}.json`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              const titleSplit = data.title.split(\" \");\r\n              let titleSplit2 = [];\r\n              let titleSplit3;\r\n              titleSplit.forEach((split) => {\r\n                titleSplit2.push(split.toLowerCase());\r\n              });\r\n              titleSplit3 = titleSplit2.join(\"-\");\r\n              titleSplit3 = titleSplit3\r\n                .split(\",\")\r\n                .join(\"\")\r\n                .split(\" \")\r\n                .join(\"-\");\r\n              setInternalLinks((old) => {\r\n                const oldArr = [...old];\r\n                oldArr.push({\r\n                  title: data.title,\r\n                  subTitle: data.subTitle,\r\n                  imageUrl: data.images[0],\r\n                  linkPath: `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`,\r\n                  category: data.category,\r\n                  subCategory: data.subCategory,\r\n                  id: data.id,\r\n                });\r\n                return oldArr;\r\n              });\r\n              // internalLinks.push({\r\n              //   internal: {\r\n              //     title: data.title,\r\n              //     subTitle: data.subTitle,\r\n              //     imageUrl: data.images[0],\r\n              //     linkPath: `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`,\r\n              //   },\r\n              // });\r\n            });\r\n        }\r\n        if (ind === linksArr.length - 1) {\r\n          console.log(internalLinks);\r\n          console.log(finishedLinks);\r\n          setLinkData([...finishedLinks]);\r\n        }\r\n      });\r\n      // setText(finalParagraphs);\r\n      setText(linkEmbedArr);\r\n    } else {\r\n      console.log(history.location.pathname);\r\n      let deconstructPathName = history.location.pathname.split(\"/\");\r\n      console.log(deconstructPathName);\r\n      const path = {\r\n        category: deconstructPathName[1],\r\n        subCategory: deconstructPathName[2],\r\n        id: deconstructPathName[4],\r\n      };\r\n      if (\r\n        deconstructPathName[1] === \"Magazin\" &&\r\n        deconstructPathName[2] === \"Film\"\r\n      ) {\r\n        path.subCategory = `Film/TV`;\r\n        path.id = deconstructPathName[5];\r\n      }\r\n      console.log(JSON.parse(JSON.stringify(path)));\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${path.category}/${path.subCategory}/-${path.id}.json`\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setInternalLinks([]);\r\n          console.log(data);\r\n          let commentData = [];\r\n          let replies = [];\r\n          let linkPath = \"\";\r\n          if (data.comments) {\r\n            for (let key in data.comments) {\r\n              if (data.comments[key].replies) {\r\n                for (let keyRep in data.comments[key].replies) {\r\n                  replies.push(data.comments[key].replies[keyRep]);\r\n                }\r\n                commentData.push(data.comments[key]);\r\n                commentData[commentData.length - 1].replies = [...replies];\r\n                replies = [];\r\n              } else {\r\n                commentData.push(data.comments[key]);\r\n              }\r\n            }\r\n            data.comments = [...commentData];\r\n          }\r\n          const titleSplit = data.title.split(\" \");\r\n          let titleSplit2 = [];\r\n          let titleSplit3;\r\n          titleSplit.forEach((split) => {\r\n            titleSplit2.push(split.toLowerCase());\r\n          });\r\n          titleSplit3 = titleSplit2.join(\"-\");\r\n          titleSplit3 = titleSplit3.split(\",\").join(\"\").split(\" \").join(\"-\");\r\n          data.timeDiff = timeDifference(data.date);\r\n          data.linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n          history.replace({\r\n            state: {\r\n              articleData: {\r\n                ...JSON.parse(JSON.stringify(data)),\r\n              },\r\n            },\r\n          });\r\n        });\r\n    }\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    if (articleData) {\r\n      console.log(articleData.shares);\r\n      // console.log(Object.keys(articleData.comments[0]).length);\r\n      console.log(articleData.images[0]);\r\n      // if (typeof articleData.comments[0] == 'undefined') {\r\n      //   alert('x');\r\n      // }\r\n      // console.log(articleData.comments[0]);\r\n      console.log(typeof articleData.images);\r\n      console.log(articleData.comments);\r\n      console.log(Array.isArray(articleData.comments));\r\n\r\n      // console.log(articleData.comments.length);\r\n      // console.log(articleData.comments[0]);\r\n    }\r\n  }, [articleData]);\r\n\r\n  useEffect(() => {\r\n    console.log(linkData);\r\n  }, [linkData]);\r\n  const itemsarr = [];\r\n  const [itemsarrtxt, setitemsarrtxt] = useState([]);\r\n  useEffect(() => {\r\n    console.log(itemsarrtxt);\r\n  }, [itemsarrtxt]);\r\n  let intLinkThere = false;\r\n  let imageThere = false;\r\n  let embedThere = false;\r\n  let intLinkIncr = 0;\r\n  let extLinkIncr = 0;\r\n  let arrTemp = [];\r\n  let listIncr = 0;\r\n  let removeBrAfterInt = false;\r\n  console.log(text);\r\n  text.map((textInd, l) => {\r\n    console.log(window.twttr);\r\n    console.log(textInd);\r\n    textInd.map((it) => {\r\n      for (let key in it) {\r\n        if (key === \"bold\" && textInd.length === 1) {\r\n          itemsarr.push(\r\n            <React.Fragment key={uuid()}>\r\n              <b key={uuid()}>{it[key]}</b>\r\n              <br></br>\r\n            </React.Fragment>\r\n          );\r\n        } else if (key === \"link\") {\r\n          if (it[key].includes(\" external\")) {\r\n            //never runs?\r\n            console.log(it[key]);\r\n            console.log(linkData[0].url);\r\n            console.log(linkData[0].text);\r\n            itemsarr.push(\r\n              <a\r\n                key={uuid()}\r\n                href={linkData[0].external.url}\r\n                target=\"_blank\"\r\n                rel=\"noreferrer noopener\"\r\n              >\r\n                {linkData[0].external.text}\r\n              </a>\r\n            );\r\n          } else if (it[key].includes(\" image\")) {\r\n            console.log(linkData);\r\n            console.log(linkData[extLinkIncr].image.url);\r\n            itemsarr.push(\r\n              <>\r\n                <img\r\n                  style={{ width: \"100%\", height: \"initial\" }}\r\n                  key={uuid()}\r\n                  src={linkData[extLinkIncr].image.url}\r\n                />\r\n                {linkData[extLinkIncr].image.text !== \"blank\" ? (\r\n                  <p className={s.textBelowImage}>\r\n                    {linkData[extLinkIncr].image.text}\r\n                  </p>\r\n                ) : (\r\n                  <br />\r\n                )}\r\n              </>\r\n            );\r\n            imageThere = true;\r\n            extLinkIncr++;\r\n          } else {\r\n            if (internalLinks.length > 0) {\r\n              //async req\r\n              console.log(internalLinks);\r\n              console.log(intLinkIncr);\r\n              intLinkThere = true;\r\n              itemsarr.push(\r\n                <ArticleLink\r\n                  key={uuid()}\r\n                  subTitle={internalLinks[intLinkIncr].subTitle}\r\n                  title={internalLinks[intLinkIncr].title}\r\n                  imageUrl={internalLinks[intLinkIncr].imageUrl}\r\n                  linkPath={internalLinks[intLinkIncr].linkPath}\r\n                  category={internalLinks[intLinkIncr].category}\r\n                  subCategory={internalLinks[intLinkIncr].subCategory}\r\n                  id={internalLinks[intLinkIncr].id}\r\n                />\r\n              );\r\n              if (internalLinks.length - 1 > intLinkIncr) {\r\n                //fix case where we add ++ but where we havent reached the other intlinks, so when we get to a new line it all rerenders and we get intlink[1].random = undefined\r\n                intLinkIncr++;\r\n              }\r\n            }\r\n          }\r\n        } else if (key === \"embed\") {\r\n          console.log(it[key]);\r\n          if (!it[key].includes(\"YouTube video player\")) {\r\n            itemsarr.push(\r\n              // <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n              //   {parse(it[key])}\r\n              // </div>\r\n              <div style={{ maxWidth: \"70%\", margin: \"auto\" }}>\r\n                {parse(it[key])}\r\n              </div>\r\n            );\r\n          } else {\r\n            itemsarr.push(<div className={s.ytConfig}>{parse(it[key])}</div>);\r\n          }\r\n          embedThere = true;\r\n        } else if (key === \"list\") {\r\n          const listArr = it[key].split(\" || \");\r\n          console.log(listArr);\r\n          let foundLinkVar = 0;\r\n          let foundBoldVar = 0;\r\n          const tempListArr = [];\r\n          let tempListLinkArr = [];\r\n          let tempListText = \"\";\r\n          for (let i = 0; i < listArr.length; i++) {\r\n            if (\r\n              (listArr[i].includes(\"<link>\") &&\r\n                listArr[i].includes(\"</link>\")) ||\r\n              (listArr[i].includes(\"<b>\") && listArr[i].includes(\"</b>\"))\r\n            ) {\r\n              for (let j = 0; j < listArr[i].length; j++) {\r\n                if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"b\" &&\r\n                  listArr[i][j + 2] === \">\"\r\n                ) {\r\n                  foundBoldVar = j + 3;\r\n                  j = j + 2;\r\n                } else if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"/\" &&\r\n                  listArr[i][j + 2] === \"b\" &&\r\n                  listArr[i][j + 3] === \">\"\r\n                ) {\r\n                  if (tempListText) {\r\n                    tempListLinkArr.push(\r\n                      <span key={uuid()}>{tempListText}</span>\r\n                    );\r\n                    tempListText = \"\";\r\n                  }\r\n                  tempListLinkArr.push(\r\n                    <b key={uuid()}>{listArr[i].slice(foundBoldVar, j)}</b>\r\n                  );\r\n                  foundBoldVar = 0;\r\n                  j = j + 3;\r\n                } else if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"l\" &&\r\n                  listArr[i][j + 2] === \"i\" &&\r\n                  listArr[i][j + 3] === \"n\" &&\r\n                  listArr[i][j + 4] === \"k\" &&\r\n                  listArr[i][j + 5] === \">\"\r\n                ) {\r\n                  foundLinkVar = j + 6;\r\n                  j = j + 5;\r\n                } else if (\r\n                  listArr[i][j] === \"<\" &&\r\n                  listArr[i][j + 1] === \"/\" &&\r\n                  listArr[i][j + 2] === \"l\" &&\r\n                  listArr[i][j + 3] === \"i\" &&\r\n                  listArr[i][j + 4] === \"n\" &&\r\n                  listArr[i][j + 5] === \"k\" &&\r\n                  listArr[i][j + 6] === \">\"\r\n                ) {\r\n                  let listLink = listArr[i].slice(foundLinkVar, j);\r\n                  const listLinkFirstIndex = listLink.split(\" \")[0];\r\n                  listLink = listLink.replace(listLinkFirstIndex + \" \", \"\");\r\n                  if (tempListText) {\r\n                    tempListLinkArr.push(\r\n                      <span key={uuid()}>{tempListText}</span>\r\n                    );\r\n                    tempListText = \"\";\r\n                  }\r\n                  tempListLinkArr.push(\r\n                    <a\r\n                      key={uuid()}\r\n                      href={listLinkFirstIndex}\r\n                      target=\"_blank\"\r\n                      rel=\"noreferrer noopener\"\r\n                    >\r\n                      {listLink}\r\n                    </a>\r\n                  );\r\n                  console.log(listLink);\r\n                  console.log(listLinkFirstIndex);\r\n                  foundLinkVar = 0;\r\n                  j = j + 6;\r\n                } else {\r\n                  if (!foundLinkVar && !foundBoldVar) {\r\n                    tempListText = tempListText.concat(listArr[i][j]);\r\n                  }\r\n                }\r\n                if (j === listArr[i].length - 1) {\r\n                  if (tempListText) {\r\n                    tempListLinkArr.push(\r\n                      <span key={uuid()}>{tempListText}</span>\r\n                    );\r\n                  }\r\n                  tempListArr.push(<li key={uuid()}>{tempListLinkArr}</li>);\r\n                  console.log(tempListLinkArr);\r\n                  console.log(tempListArr);\r\n                  tempListLinkArr = [];\r\n                  tempListText = [];\r\n                }\r\n              }\r\n            } else {\r\n              tempListArr.push(<li key={uuid()}>{listArr[i]}</li>);\r\n            }\r\n          }\r\n          console.log(articleData.listOrder);\r\n          console.log(articleData);\r\n          if (articleData.listOrder[listIncr] === \"ol\") {\r\n            itemsarr.push(<ol key={uuid()}>{tempListArr}</ol>);\r\n          } else if (articleData.listOrder[listIncr] === \"ul\") {\r\n            itemsarr.push(<ul key={uuid()}>{tempListArr}</ul>);\r\n          }\r\n          listIncr++;\r\n          console.log(tempListText);\r\n        } else {\r\n          if (textInd.length > 1) {\r\n            if (key === \"bold\") {\r\n              arrTemp.push(<b key={uuid()}>{it[key]}</b>);\r\n            } else if (key === \"externalLink\") {\r\n              let separate = it[key];\r\n              console.log(separate);\r\n              console.log(it);\r\n              console.log(key);\r\n              separate = separate.slice(6, separate.length - 8);\r\n              separate = separate.split(\" \");\r\n              let separateurl = separate[0];\r\n              separate.splice(0, 1);\r\n              separate.splice(separate.length - 1, 1);\r\n              let separatetxt = separate.join(\" \");\r\n              console.log(separatetxt);\r\n              arrTemp.push(\r\n                <a\r\n                  key={uuid()}\r\n                  href={separateurl}\r\n                  target=\"_blank\"\r\n                  rel=\"noreferrer noopener\"\r\n                >\r\n                  {separatetxt}\r\n                </a>\r\n              );\r\n              extLinkIncr++;\r\n            } else {\r\n              arrTemp.push(<span key={uuid()}>{it[key]}</span>);\r\n            }\r\n            if (arrTemp.length === textInd.length) {\r\n              console.log(arrTemp);\r\n              itemsarr.push(\r\n                <React.Fragment key={uuid()}>\r\n                  <p key={uuid()}>{arrTemp}</p>\r\n                </React.Fragment>\r\n              );\r\n              arrTemp = [];\r\n            }\r\n          } else {\r\n            console.log(it[key]);\r\n            if (textInd.length === 1 && key === \"externalLink\") {\r\n              //ext link takes up the whole p tag, no txt before or after the ext link\r\n              console.log(it[key]);\r\n              let separate = it[key];\r\n              separate = separate.slice(6, separate.length - 8);\r\n              separate = separate.split(\" \");\r\n              let separateurl = separate[0];\r\n              separate.splice(0, 1);\r\n              separate.splice(separate.length - 1, 1);\r\n              let separatetxt = separate.join(\" \");\r\n              console.log(separatetxt);\r\n              itemsarr.push(\r\n                <a\r\n                  key={uuid()}\r\n                  href={separateurl}\r\n                  target=\"_blank\"\r\n                  rel=\"noreferrer noopener\"\r\n                  style={{ display: \"block\" }}\r\n                >\r\n                  {separatetxt}\r\n                </a>\r\n              );\r\n              extLinkIncr++;\r\n            } else {\r\n              itemsarr.push(\r\n                <React.Fragment key={uuid()}>\r\n                  <p key={uuid()}>{it[key]}</p>\r\n                </React.Fragment>\r\n              );\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    if (intLinkThere) {\r\n      //remove brs\r\n      itemsarr.splice(itemsarr.length - 2, 1);\r\n      intLinkThere = false;\r\n      removeBrAfterInt = true;\r\n    } else if (imageThere) {\r\n      imageThere = false;\r\n    } else if (embedThere) {\r\n      embedThere = false;\r\n      if (window.instgrm) {\r\n        //we do it like this because this fn needs to run when the blockquote is in the dom, so it gets transformed to an iframe\r\n        //at useeff[] the text is not there yet cuz we have to build it first\r\n        // setTimeout(() => {\r\n        window.instgrm.Embeds.process();\r\n        // }, 2000);\r\n      }\r\n    } else {\r\n      if (removeBrAfterInt) {\r\n        removeBrAfterInt = false;\r\n      } else {\r\n        itemsarr.push(<br key={uuid()}></br>);\r\n      }\r\n    }\r\n    console.log(text.length);\r\n    if (l === text.length - 1) {\r\n      // setitemsarrtxt(itemsarr);\r\n    }\r\n    console.log(itemsarr);\r\n  });\r\n\r\n  const handleSliderOverlay = () => {\r\n    setClickedSlider((old) => !old);\r\n    setCounter(0);\r\n  };\r\n\r\n  const addRemoveOverlay = () => {\r\n    if (!zoomedIn) {\r\n      setClickedSlider(false);\r\n    }\r\n  };\r\n\r\n  const addRemoveOverlayClick = (e) => {\r\n    const { id } = e.target;\r\n    if (id.includes(\"clickedSlider\")) {\r\n      setClickedSlider(false);\r\n      if (zoomedIn) {\r\n        setZoomedIn(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (clickedSlider) {\r\n      if (!posOfSlider) {\r\n        setPosOfSlider(imageSliderRef.current.getBoundingClientRect().top);\r\n      }\r\n    }\r\n  }, [clickedSlider]);\r\n\r\n  const zoomOut = () => {\r\n    imageSliderRef.current.style.width = \"62.5%\";\r\n    imageSliderRef.current.style.height = \"85vh\";\r\n    imageSliderRef.current.style.top = \"7vh\";\r\n    // imageSliderRef.current.style.transform = \"translateY(0%)\";\r\n    imageSliderRef.current.style.transform = \"translateX(-50%)\";\r\n    sliderFooterBar.current.style.color = \"#c4c4c4\";\r\n  };\r\n\r\n  const zoomIn = (mode) => {\r\n    imageSliderRef.current.style.width = \"90%\";\r\n    // imageSliderRef.current.style.height = \"fit-content\";\r\n    imageSliderRef.current.style.height = \"150vh\";\r\n    sliderFooterBar.current.style.color = \"#fff\";\r\n    imageSliderRef.current.style.transform = \"translateX(-50%)\";\r\n    switch (mode) {\r\n      case \"normal\":\r\n        imageSliderRef.current.style.top = \"0vh\"; //-20bot -10 mid 0 top\r\n        break;\r\n      case \"upper\":\r\n        // imageSliderRef.current.style.top = \"-10%\"; //-20bot -10 mid 0 top\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -10%)\";\r\n        break;\r\n      case \"middle\":\r\n        // imageSliderRef.current.style.top = \"-15%\"; //-20bot -10 mid 0 top\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -20%)\";\r\n        break;\r\n      case \"lower\":\r\n        // imageSliderRef.current.style.top = \"-40vh\"; //-20bot -10 mid 0 top\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -30%)\";\r\n        break;\r\n    }\r\n  };\r\n\r\n  const zoomInPerBtn = () => {\r\n    if (zoomedIn) {\r\n      setZoomedIn(false);\r\n      zoomOut();\r\n    } else {\r\n      setZoomedIn(true);\r\n      // imageSliderRef.current.style.width = \"90%\";\r\n      // // imageSliderRef.current.style.transform = \"translateY(-30%)\"; //zoom down\r\n\r\n      // imageSliderRef.current.style.height = \"150vh\";\r\n\r\n      // // imageSliderRef.current.style.transform = \"translateY(-10%)\"; //center zoom\r\n      // // imageSliderRef.current.style.transform = \"translateY(0%)\"; //top zoom\r\n      // imageSliderRef.current.style.marginTop = \"0%\"; //-20bot -10 mid 0 top\r\n      // sliderFooterBar.current.style.color = \"#fff\";\r\n      zoomIn(\"middle\");\r\n    }\r\n  };\r\n\r\n  const mouseDownMove = () => {\r\n    if (zoomedIn) {\r\n      console.log(\"mousedown\");\r\n      imageSliderRef.current.style.cursor = \"grabbing\";\r\n      timer.current = setTimeout(() => {\r\n        setMoving(true);\r\n      }, 250);\r\n    }\r\n  };\r\n\r\n  const mouseUpMove = (e) => {\r\n    clearTimeout(timer.current);\r\n    timer.current = null;\r\n\r\n    if (zoomedIn) {\r\n      imageSliderRef.current.style.cursor = \"grab\";\r\n      imageSliderRef.current.style.transform = \"none\";\r\n      imageSliderRef.current.style.top = `7vh`;\r\n\r\n      if (zoomPos === \"upper\") {\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -10%)\";\r\n      } else if (zoomPos === \"middle\") {\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -20%)\";\r\n      } else if (zoomPos === \"lower\") {\r\n        imageSliderRef.current.style.transform = \"translate(-50%, -30%)\";\r\n      } else {\r\n        imageSliderRef.current.style.top = `0`;\r\n      }\r\n      imageSliderRef.current.style.left = `50%`;\r\n      setGrabXPrev(null);\r\n      setGrabYPrev(null);\r\n    }\r\n    if (!moving) {\r\n      const oneThird = imageSliderRef.current.offsetHeight / 3;\r\n      const positionOnElement =\r\n        e.clientY - imageSliderRef.current.getBoundingClientRect().top;\r\n      if (positionOnElement < oneThird) {\r\n        if (zoomedIn) {\r\n          setZoomedIn(false);\r\n          zoomOut();\r\n        } else {\r\n          setZoomedIn(true);\r\n          zoomIn(\"upper\");\r\n          setZoomPos(\"upper\");\r\n        }\r\n      } else if (\r\n        positionOnElement >= oneThird &&\r\n        positionOnElement <= oneThird * 2\r\n      ) {\r\n        if (zoomedIn) {\r\n          setZoomedIn(false);\r\n          zoomOut();\r\n        } else {\r\n          setZoomedIn(true);\r\n          zoomIn(\"middle\");\r\n          setZoomPos(\"middle\");\r\n        }\r\n      } else {\r\n        if (zoomedIn) {\r\n          setZoomedIn(false);\r\n          zoomOut();\r\n        } else {\r\n          setZoomedIn(true);\r\n          zoomIn(\"lower\");\r\n          setZoomPos(\"lower\");\r\n        }\r\n      }\r\n    }\r\n    if (moving) {\r\n      setMoving(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (imageSliderRef.current) {\r\n      console.log(imageSliderRef.current.style.top);\r\n      console.log(imageSliderRef.current.style.left);\r\n    }\r\n  }, [imageSliderRef]);\r\n\r\n  const mouseMove = (e) => {\r\n    console.log(\"mousemove\");\r\n    if (zoomedIn && moving) {\r\n      if (imageSliderRef.current.style) {\r\n        const widthX = imageSliderRef.current.width;\r\n        const heightY = imageSliderRef.current.height;\r\n        let tst1 = imageSliderRef.current.style.left;\r\n        let tst2 = imageSliderRef.current.style.top;\r\n        setGrabXPrev(e.clientX);\r\n        setGrabYPrev(e.clientY);\r\n        console.log(grabXPrev);\r\n        console.log(grabYPrev);\r\n        let addX = 1;\r\n        let addY = 5;\r\n        console.log(imageSliderRef.current.style);\r\n        console.log(Object.assign({}, imageSliderRef.current.style));\r\n        console.log(tst1);\r\n        console.log(tst2);\r\n        console.log(tst1.replace(/\\D/g, \"\"));\r\n        console.log(typeof +tst2.replace(/\\D/g, \"\"));\r\n        tst1 = +tst1.replace(/\\D/g, \"\");\r\n        tst2 = +tst2.replace(/\\D/g, \"\");\r\n        console.log(e.clientX);\r\n        console.log(e.clientY);\r\n        console.log(widthX);\r\n        console.log(heightY);\r\n        console.log(imageSliderRef.current.offsetLeft);\r\n        console.log(imageSliderRef.current.offsetTop);\r\n        console.log(imageSliderRef.current.offsetTop - e.clientY);\r\n        console.log(imageSliderRef.current.offsetLeft - e.clientX);\r\n        // const offset = [imageSliderRef.current.offsetLeft - e.clientX, imageSliderRef.current.offsetTop - e.clientY]\r\n        // imageSliderRef.current.style.left = e.clientX + offset[0] + 'px'\r\n        // imageSliderRef.current.style.top = e.clientY + offset[1] + 'px'\r\n        if (grabXPrev && grabYPrev) {\r\n          const pos1 = grabXPrev - e.clientX;\r\n          const pos2 = grabYPrev - e.clientY;\r\n          console.log(grabXPrev);\r\n          console.log(e.clientX);\r\n          console.log(e.clientY);\r\n          console.log(grabYPrev);\r\n          console.log(pos2);\r\n          console.log(imageSliderRef.current.offsetTop);\r\n          console.log(imageSliderRef.current.offsetTop - pos2);\r\n          const offsetArr = [\r\n            imageSliderRef.current.offsetLeft - pos1,\r\n            imageSliderRef.current.offsetTop - pos2,\r\n          ];\r\n\r\n          imageSliderRef.current.style.top = offsetArr[1] + \"px\";\r\n\r\n          imageSliderRef.current.style.left = offsetArr[0] + \"px\";\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {}, [moving]);\r\n\r\n  useEffect(() => {\r\n    if (zoomedIn) {\r\n      if (imageSliderRef.current) {\r\n        imageSliderRef.current.style.cursor = \"grab\";\r\n      }\r\n      // document.body.style.position = \"fixed\";\r\n      // document.body.style.overflowY = \"scroll\";\r\n    } else {\r\n      if (imageSliderRef.current) {\r\n        imageSliderRef.current.style.cursor = \"zoom-in\";\r\n      }\r\n      // document.body.style.position = \"static\";\r\n    }\r\n  }, [zoomedIn]);\r\n\r\n  const handleSliderControls = (e, mode) => {\r\n    // setArticleData((old) => {\r\n    // let oldArr = [...old.images];\r\n    // console.log(old);\r\n    // const takeAndAdd = oldArr[0];\r\n    // oldArr.splice(0, 1);\r\n    // oldArr.push(takeAndAdd);\r\n    // console.log(oldArr);\r\n    // old.images = [...oldArr];\r\n    // console.log(old);\r\n    // imageSliderRef.current.src = oldArr[0];\r\n    // return old;\r\n    // });\r\n    if (mode === \"right\") {\r\n      if (counter < articleData.images.length - 1) {\r\n        setCounter((old) => old + 1);\r\n        imageSliderRef.current.src = articleData.imageText[counter + 1][0];\r\n      } else if (counter === articleData.images.length - 1) {\r\n        setCounter(0);\r\n        imageSliderRef.current.src = articleData.imageText[0][0];\r\n      }\r\n    } else if (mode === \"left\") {\r\n      if (counter === 0) {\r\n        setCounter(articleData.images.length - 1);\r\n        imageSliderRef.current.src = articleData.imageText[counter][0];\r\n      } else {\r\n        setCounter((old) => old - 1);\r\n        imageSliderRef.current.src = articleData.imageText[counter - 1][0];\r\n      }\r\n    }\r\n  };\r\n\r\n  const openSliderFromThumbnail = (index) => {\r\n    setClickedSlider(true);\r\n    setCounter(index);\r\n    // setTimeout(() => {\r\n    //   if (imageSliderRef.current) {\r\n    //     imageSliderRef.current.src = articleData.images[index];\r\n    //   }\r\n    // }, 10);\r\n  };\r\n\r\n  const toggleFullscren = (e) => {\r\n    imageSliderRef.current.parentElement.requestFullscreen();\r\n    e.target.className = \"fas fa-compress\";\r\n    if (document.fullscreenElement) {\r\n      document.exitFullscreen();\r\n      e.target.className = \"fas fa-expand\";\r\n    }\r\n  };\r\n\r\n  const findRelatedTags = (tags, cat, artId) => {\r\n    const dbRef = db.ref(`related/${cat}`);\r\n    // dbRef.once(\"value\", (snap) => {\r\n    //   console.log(snap.val());\r\n    // });\r\n    const findLatestThree = [];\r\n    const dates = [];\r\n    for (let ind of tags) {\r\n      const newRef = dbRef.child(ind.constructor === Object ? ind.value : ind);\r\n      newRef\r\n        .orderByKey()\r\n        .limitToLast(4) //4because, same id as cur art now we have 3 useful, same id(not cur art) but it reoccurs in other tags\r\n        .once(\"value\", (snap) => {\r\n          console.log(snap.val());\r\n          const data = snap.val();\r\n          //we want to not include the existing article in the retailed articles and we want to not have any duplicat articles in related(same art added in many tag branches)\r\n          for (let key in data) {\r\n            console.log(data[key].articlePath);\r\n            const id =\r\n              data[key].articlePath.split(\"/\")[\r\n                data[key].articlePath.split(\"/\").length - 1\r\n              ];\r\n            if (\r\n              id !== artId &&\r\n              findLatestThree.filter((el) => el.id !== id).length ===\r\n                findLatestThree.length\r\n            ) {\r\n              let artPath = data[key].articlePath.split(\"/\");\r\n              if (artPath[1] === \"Film\" && artPath[2] === \"TV\") {\r\n                artPath[1] = \"Film/TV\";\r\n                artPath[2] = artPath[3].slice(1);\r\n              } else {\r\n                artPath[2] = artPath[2].slice(1);\r\n              }\r\n              artPath.splice(2, 0, splitTitle(data[key].title));\r\n              delete data[key].articlePath;\r\n              console.log(artPath.join(\"/\"));\r\n              data[key].articlePath = artPath.join(\"/\");\r\n              console.log(data[key]);\r\n              findLatestThree.push({\r\n                ...data[key],\r\n                id,\r\n              });\r\n              dates.push(new Date(data[key].date));\r\n            }\r\n          }\r\n          console.log(findLatestThree);\r\n          console.log(dates);\r\n          // console.log(+dates[2] == +dates[3]); //this is how u compare dates with +\r\n          const findThree = [];\r\n          let cur;\r\n          //sort array of objects by date in an descending order\r\n          cur = findLatestThree.sort((x, y) => {\r\n            // console.log(a.date);\r\n            // console.log(b.date);\r\n            // if (new Date(a.date) > new Date(b.bdate)) {\r\n            //   return -1; //place in descending, imagine -1 as taking it out of it's normal index and pulling it to the left, 1 is putting it to the right, zero keep pos'\r\n            // } else if (new Date(a.date) < new Date(b.date)) {\r\n            //   return 1;\r\n            // }\r\n            // return 0;\r\n            let a = new Date(x.date),\r\n              b = new Date(y.date);\r\n            return b - a;\r\n          });\r\n          console.log(cur);\r\n          if (cur.length > 3) {\r\n            cur.splice(3);\r\n          }\r\n          setRelatedArticles([...cur]);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleTagUnderscore = () => {\r\n    const tgs = [];\r\n    location.state.articleData.tags.forEach((tag) => {\r\n      if (tag.value) {\r\n        if (tag.value.includes(\"_\")) {\r\n          let valObj = { id: tag.id };\r\n          let val = tag.value.split(\"_\");\r\n          valObj.value = val.join(\".\");\r\n          tgs.push(valObj);\r\n        } else {\r\n          tgs.push(tag);\r\n        }\r\n      } else {\r\n        if (tag.includes(\"_\")) {\r\n          let val = tag.split(\"_\");\r\n          val = val.join(\".\");\r\n          tgs.push(val);\r\n        } else {\r\n          tgs.push(tag);\r\n        }\r\n      }\r\n    });\r\n    return tgs;\r\n  };\r\n\r\n  const handleFbShare = () => {\r\n    const url = window.location.href;\r\n    const shareUrl = `https://www.facebook.com/sharer/sharer.phpu=${url}`;\r\n    const params = \"menubar=no,toolbar=no,status=no,width=570,height=570\";\r\n    window.open(shareUrl, \"NewWindow\", params);\r\n  };\r\n\r\n  const handleTwitterShare = () => {\r\n    const text = encodeURIComponent(articleData.title);\r\n    const url = window.location.href;\r\n    const user_id = ctx.isLoggedIn ? ctx.isLoggedIn : \"anonymous\";\r\n    const hash_tags = articleData.tags.length\r\n      ? articleData.tags[0].constructor === Object\r\n        ? articleData.tags.map((item) => item.value).join(\", \")\r\n        : articleData.tags.join(\", \")\r\n      : \"\";\r\n    const params = \"menubar=no,toolbar=no,status=no,width=570,height=570\";\r\n    const shareurl = `https://twitter.com/intent/tweet?url=${url}&text=${text}&via=${user_id}&hashtags=${hash_tags}`;\r\n    window.open(shareurl, \"NewWindow\", params);\r\n    handleShareFirebase();\r\n  };\r\n\r\n  const handleShareFirebase = () => {\r\n    const dbRef = db.ref(\r\n      `articles/${articleData.category}/${articleData.subCategory}/-${articleData.id}`\r\n    );\r\n    dbRef.child(\"shares\").once(\"value\", (snap) => {\r\n      console.log(snap.val());\r\n      const data = snap.val();\r\n      fetch(\"https://api.ipify.org/?format=json\")\r\n        .then((response) => response.json())\r\n        .then((ip) => {\r\n          if (data.length === 1 && data[0] === \"\") {\r\n            db.ref(\r\n              `articles/${articleData.category}/${articleData.subCategory}/-${articleData.id}/shares`\r\n            ).set({ [ip.ip.split(\".\").join(\"_\")]: ip.ip });\r\n            setArticleData((old) => {\r\n              const oldArr = { ...old };\r\n              delete oldArr.shares;\r\n              oldArr.shares = {};\r\n              oldArr.shares[ip.ip.split(\".\").join(\"_\")] = ip.ip;\r\n              return oldArr;\r\n            });\r\n            // const len = Math.floor(Math.random() * 100 + 1);\r\n            // const temp = [];\r\n            // for (let i = 0; i < len; i++) {\r\n            //   temp.push(\r\n            //     `${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}.${Math.floor(Math.random() * 100)}.${Math.floor(\r\n            //       Math.random() * 100\r\n            //     )}`\r\n            //   );\r\n            // }\r\n\r\n            // for (let i = 0; i < temp.length; i++) {\r\n            //   ((ind) => {\r\n            //     db.ref(\r\n            //       `articles/${articleData.category}/${\r\n            //         articleData.subCategory\r\n            //       }/-${articleData.id}/shares/${temp[ind].split(\".\").join(\"_\")}`\r\n            //     ).set(temp[ind]);\r\n            //   })(i);\r\n            // }\r\n          } else {\r\n            if (\r\n              !Object.values(articleData.shares).some((val) => val === ip.ip)\r\n            ) {\r\n              db.ref(\r\n                `articles/${articleData.category}/${articleData.subCategory}/-${\r\n                  articleData.id\r\n                }/shares/${[ip.ip.split(\".\").join(\"_\")]}`\r\n              ).set(ip.ip);\r\n              setArticleData((old) => {\r\n                const oldArr = { ...old };\r\n                oldArr.shares[ip.ip.split(\".\").join(\"_\")] = ip.ip;\r\n                return oldArr;\r\n              });\r\n              // const ips = {\r\n              //   11_22_333_321: \"11.22.333.321\",\r\n              //   11_22_333_422: \"11.22.333.422\",\r\n              //   11_22_333_523: \"11.22.333.523\",\r\n              //   11_22_333_624: \"11.22.333.624\",\r\n              //   11_22_333_725: \"11.22.333.725\",\r\n              //   11_22_333_826: \"11.22.333.826\",\r\n              //   11_22_333_927: \"11.22.333.927\",\r\n              //   11_22_331_228: \"11.22.331.228\",\r\n              //   11_22_332_229: \"11.22.332.229\",\r\n              //   11_22_333_220: \"11.22.333.220\",\r\n              //   11_22_334_231: \"11.22.334.231\",\r\n              //   11_22_335_232: \"11.22.335.232\",\r\n              //   11_22_336_233: \"11.22.336.233\",\r\n              //   11_22_337_234: \"11.22.337.234\",\r\n              //   11_22_338_235: \"11.22.338.235\",\r\n              // };\r\n              // for (let i = 0; i < Object.keys(ips).length; i++) {\r\n              //   ((ind) => {\r\n              //     db.ref(\r\n              //       `articles/${articleData.category}/${\r\n              //         articleData.subCategory\r\n              //       }/-${articleData.id}/shares/${Object.values(ips)\r\n              //         [ind].split(\".\")\r\n              //         .join(\"_\")}`\r\n              //     ).set(Object.values(ips)[ind]);\r\n              //   })(i);\r\n              // }\r\n            }\r\n          }\r\n        });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div id={s.articleParent}>\r\n      {clickedSlider && (\r\n        <div\r\n          onClick={addRemoveOverlayClick}\r\n          onWheel={addRemoveOverlay}\r\n          id={s.clickedSlider}\r\n        >\r\n          <div id={s.sliderMainImgContainer}>\r\n            <div id={s.sliderHeaderBar}>\r\n              <span id={s.slideNumbers}>{`${counter + 1} / ${\r\n                articleData.images.length\r\n              }`}</span>\r\n              <span id={s.slideZoomExpand}>\r\n                {!zoomedIn && (\r\n                  <i class=\"fas fa-search-plus\" onClick={zoomInPerBtn}></i>\r\n                )}\r\n                {zoomedIn && (\r\n                  <i class=\"fas fa-search-minus\" onClick={zoomInPerBtn}></i>\r\n                )}\r\n                <i class=\"fas fa-expand\" onClick={toggleFullscren}></i>\r\n              </span>\r\n            </div>\r\n            <img\r\n              ref={imageSliderRef}\r\n              src={articleData && articleData.imageText[counter][0]}\r\n              onMouseDown={mouseDownMove}\r\n              onMouseUp={mouseUpMove}\r\n              onMouseMove={mouseMove}\r\n            />\r\n            <div\r\n              id={s.sliderRight}\r\n              onClick={(e) => handleSliderControls(e, \"right\")}\r\n            >\r\n              <i class=\"fas fa-long-arrow-alt-right\"></i>\r\n            </div>\r\n            <div\r\n              id={s.sliderLeft}\r\n              onClick={(e) => handleSliderControls(e, \"left\")}\r\n            >\r\n              <i class=\"fas fa-long-arrow-alt-left\"></i>\r\n            </div>\r\n            <div id={s.sliderFooterBar} ref={sliderFooterBar}>\r\n              {/* (Foto: D. S./Klix.ba) */}\r\n              {articleData.imageText[counter][1] === \"blank\"\r\n                ? \"\"\r\n                : articleData.imageText[counter][1]}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div id={s.articleHeader}>\r\n        <h3\r\n          style={{\r\n            color: articleData && `${clrs[articleData.category.toLowerCase()]}`,\r\n          }}\r\n        >\r\n          {articleData && articleData.subTitle}\r\n        </h3>\r\n        <h1>{articleData && articleData.title}</h1>\r\n      </div>\r\n      <div id={s.articleBody}>\r\n        <div id={s.articleSidebarLeft} ref={stickLeftSideBar}>\r\n          <div id={s.bundleDiv}>\r\n            <div id={s.postedData}>\r\n              <div id={s.postedDataOne}>\r\n                <i\r\n                  class=\"fas fa-user\"\r\n                  style={{\r\n                    backgroundColor: `rgb(209,213,219)`,\r\n                    color: \"#fff\",\r\n                    padding: \"1.2rem\",\r\n                    borderRadius: \".3rem\",\r\n                    fontSize: \"1.6rem\",\r\n                  }}\r\n                ></i>\r\n              </div>\r\n              <div id={s.postedDataTwo}>\r\n                <h3>\r\n                  {(articleData &&\r\n                    (articleData.sponsored\r\n                      ? \"Sponzorirani ƒçlanak\"\r\n                      : articleData.author)) ||\r\n                    \"R. D.\"}\r\n                </h3>\r\n                <p>{timeDifference(articleData && articleData.date)}</p>\r\n              </div>\r\n            </div>\r\n            <div id={s.commentsShare}>\r\n              <div id={s.comments}>\r\n                <h2>\r\n                  {articleData && articleData.commentsAllowed === \"Ne\" ? (\r\n                    // <i\r\n                    //   style={{\r\n                    //     color: \"rgb(75,85,99)\",\r\n                    //     transform: \"scale(0.9)\",\r\n                    //   }}\r\n                    //   class=\"fas fa-comment-slash\"\r\n                    // ></i>\r\n                    <svg\r\n                      class=\"h-5 w-5 inline my-1\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      stroke=\"currentColor\"\r\n                      style={{ width: \"2rem\" }}\r\n                    >\r\n                      <path\r\n                        style={{ color: \"rgb(75,85,99)\", fontSize: \"1rem\" }}\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                        stroke-width=\"2\"\r\n                        d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\"\r\n                      ></path>\r\n                    </svg>\r\n                  ) : articleData && !articleData.comments ? (\r\n                    0\r\n                  ) : articleData && articleData.comments ? (\r\n                    fullComLength.current\r\n                  ) : (\r\n                    0\r\n                  )}\r\n                </h2>\r\n                <p>\r\n                  {articleData && articleData.commentsAllowed === \"Ne\"\r\n                    ? \"komentari\"\r\n                    : articleData &&\r\n                      articleData.comments &&\r\n                      Object.values(articleData.comments).length === 1\r\n                    ? \"komentar\"\r\n                    : \"komentara\"}\r\n                </p>\r\n              </div>\r\n              <div id={s.shares}>\r\n                <h2>\r\n                  {articleData\r\n                    ? articleData.shares.constructor === Object\r\n                      ? Object.keys(articleData.shares).length\r\n                      : 0\r\n                    : \"\"}\r\n                </h2>\r\n                <p>dijeljenja</p>\r\n              </div>\r\n            </div>\r\n            <div id={s.shareArticle}>\r\n              <ul>\r\n                <li onClick={handleFbShare}>\r\n                  <i class=\"fab fa-facebook\"></i>\r\n                </li>\r\n                <li onClick={handleTwitterShare}>\r\n                  <i class=\"fab fa-twitter\"></i>\r\n                </li>\r\n                <li>\r\n                  <i class=\"far fa-envelope\"></i>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id={s.articleBodyContent}>\r\n          {articleData && articleData.images.length > 1 ? (\r\n            <div id={s.imageSliderContainer}>\r\n              <div id={s.mainSliderImage}>\r\n                <img\r\n                  onClick={handleSliderOverlay}\r\n                  src={articleData.imageText[0][0]}\r\n                />\r\n              </div>\r\n              <div id={s.sliderImages}>\r\n                {articleData.imageText.map((img, i) =>\r\n                  i < 4 && i !== 0 ? (\r\n                    <img\r\n                      key={uuid()}\r\n                      src={img[0]}\r\n                      onClick={() => openSliderFromThumbnail(i)}\r\n                    />\r\n                  ) : i === 4 && articleData.imageText.length - 5 > 0 ? (\r\n                    <div id={s.clickForMore} key={uuid()}>\r\n                      <span onClick={() => openSliderFromThumbnail(i)}>\r\n                        +{articleData.imageText.length - 5}\r\n                      </span>\r\n                      <img\r\n                        src={img[0]}\r\n                        onClick={() => openSliderFromThumbnail(i)}\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    i === 4 && (\r\n                      <img\r\n                        key={uuid()}\r\n                        src={img[0]}\r\n                        onClick={() => openSliderFromThumbnail(i)}\r\n                      />\r\n                    )\r\n                  )\r\n                )}\r\n              </div>\r\n              <p>\r\n                {articleData &&\r\n                  (articleData.imageText[0][1] === \"blank\"\r\n                    ? \"\"\r\n                    : articleData.imageText[0][1])}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div id={s.imageContainer}>\r\n              <img src={articleData && articleData.imageText[0][0]} />\r\n              <div id={s.captionTxt}>\r\n                <p>\r\n                  {articleData &&\r\n                    (articleData.imageText[0][1] === \"blank\"\r\n                      ? \"\"\r\n                      : articleData.imageText[0][1])}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div id={s.articleText}>\r\n            {/* {text.map((textInd) => {\r\n              console.log(textInd);\r\n              textInd.map((it) => {\r\n                for (let key in it) {\r\n                  key === \"bold\"\r\n                    ? itemsarr.push(\r\n                        <React.Fragment key={uuid()}>\r\n                          <b key={uuid()}>{it[key]}</b>\r\n                          <br></br>\r\n                        </React.Fragment>\r\n                      )\r\n                    : itemsarr.push(\r\n                        <React.Fragment key={uuid()}>\r\n                          <p key={uuid()}>{it[key]}</p>\r\n                        </React.Fragment>\r\n                      );\r\n                }\r\n              });\r\n              itemsarr.push(<br key={uuid()}></br>);\r\n            })} */}\r\n            {itemsarr}\r\n            {/* {articleData && articleData.articleText} */}\r\n            {/* Vijest da WizzAir uvodi letove sa Aerodroma Sarajevo i Aerodroma\r\n            Banja Luka odjeknula je u bh. dijaspori, a i meƒëu svima koji su\r\n            tokom pandemije po≈æeljeli putovanja. Od juna 2021. godine WizzAir iz */}\r\n            {/* {parse(\r\n              '<iframe src=\"https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2FKlix.ba%2Fposts%2F10158031303966821&show_text=true&width=500\" width=\"500\" height=\"487\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowfullscreen=\"true\" allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share\"></iframe>'\r\n            )} */}\r\n            {/* {parse(\r\n              '<blockquote class=\"instagram-media\" data-instgrm-captioned data-instgrm-permalink=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" data-instgrm-version=\"13\" style=\" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);\"><div style=\"padding:16px;\"> <a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;\" target=\"_blank\"> <div style=\" display: flex; flex-direction: row; align-items: center;\"> <div style=\"background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;\"></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;\"></div></div></div><div style=\"padding: 19% 0;\"></div> <div style=\"display:block; height:50px; margin:0 auto 12px; width:50px;\"><svg width=\"50px\" height=\"50px\" viewBox=\"0 0 60 60\" version=\"1.1\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\"><g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(-511.000000, -20.000000)\" fill=\"#000000\"><g><path d=\"M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631\"></path></g></g></g></svg></div><div style=\"padding-top: 8px;\"> <div style=\" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;\"> View this post on Instagram</div></div><div style=\"padding: 12.5% 0;\"></div> <div style=\"display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;\"><div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);\"></div> <div style=\"background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;\"></div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);\"></div></div><div style=\"margin-left: 8px;\"> <div style=\" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;\"></div> <div style=\" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)\"></div></div><div style=\"margin-left: auto;\"> <div style=\" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);\"></div> <div style=\" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);\"></div> <div style=\" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);\"></div></div></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;\"></div></div></a><p style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;\"><a href=\"https://www.instagram.com/p/CRk85dWjuov/?utm_source=ig_embed&amp;utm_campaign=loading\" style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;\" target=\"_blank\">A post shared by Chloe Ventura (@chloe.ventura)</a></p></div></blockquote>  <script async src=\"//www.instagram.com/embed.js\"></script>'\r\n            )} */}\r\n            {/* Sarajeva leti za ƒçak devet destinacija: Basel, Brussels, Dortmund,\r\n            Memmingen, Eindhoven, Copenhagen, Gothenburg, Stockholm i Paris. Iz\r\n            Banja Luke WizzAir leti za Basel, Dortmund, Eindhoven, Malmo i\r\n            Stockholm, te se pridru≈æuje RyanAiru koji iz Banja Luke leti za\r\n            Memmingen i Gothenburg. */}\r\n          </div>\r\n          <div id={s.tags}>\r\n            {articleData &&\r\n              articleData.tags &&\r\n              location.state &&\r\n              location.state.articleData &&\r\n              handleTagUnderscore(articleData.tags).map((tag) => (\r\n                <span key={uuid()}>\r\n                  <Link\r\n                    to={`/tagovi/${articleData && articleData.category}/${\r\n                      tag.constructor === Object ? tag.value : tag\r\n                    }`}\r\n                  >\r\n                    {tag.constructor === Object ? tag.value : tag}\r\n                  </Link>\r\n                </span>\r\n              ))}\r\n          </div>\r\n          {articleData && articleData.commentsAllowed === \"Da\" && (\r\n            <div id={s.addComment}>\r\n              <h3>Komentari</h3>\r\n              {ctx.isLoggedIn && (\r\n                <CommentType\r\n                  path={{\r\n                    category:\r\n                      location.state && location.state.articleData.category,\r\n                    subCategory:\r\n                      location.state && location.state.articleData.subCategory,\r\n                    id: location.state && location.state.articleData.id,\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              <button className={s.showComments}>\r\n                <Link\r\n                  to={\r\n                    articleData && {\r\n                      pathname: `${\r\n                        articleData.linkPath\r\n                          ? articleData.linkPath\r\n                          : `/${articleData.category}/${\r\n                              articleData.subCategory\r\n                            }/${splitTitle(articleData.title)}/${\r\n                              articleData.id\r\n                            }`\r\n                      }/komentari`,\r\n                      state: {\r\n                        articleData,\r\n                      },\r\n                    }\r\n                  }\r\n                >\r\n                  PRIKA≈ΩI SVE KOMENTARE (\r\n                  {articleData && !articleData.comments\r\n                    ? 0\r\n                    : articleData && articleData.comments\r\n                    ? fullComLength.current\r\n                    : 0}\r\n                  )\r\n                </Link>\r\n              </button>\r\n            </div>\r\n          )}\r\n          <div id={s.linkedArticles}>\r\n            {relatedArticles.length > 0 && (\r\n              <>\r\n                <div id={s.linkedArticlesHeader}>\r\n                  <h3>Vezani ƒçlanci</h3>\r\n                  <i class=\"fas fa-link\"></i>\r\n                </div>\r\n                <div\r\n                  id={s.linkedArticlesBody}\r\n                  style={\r\n                    relatedArticles.length === 1\r\n                      ? {\r\n                          gridTemplateColumns: \"33%\",\r\n                          justifyContent: \"center\",\r\n                        }\r\n                      : relatedArticles.length === 2\r\n                      ? {\r\n                          gridTemplateColumns: \"repeat(2, minmax(30%, 1fr))\",\r\n                        }\r\n                      : null\r\n                  }\r\n                >\r\n                  {relatedArticles.map((relArt, i) => (\r\n                    <LinkedArticles\r\n                      key={uuid()}\r\n                      data={relArt}\r\n                      indL={[i, relatedArticles.length]}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n            <div id={s.linkedPromo}>\r\n              <div id={s.linkedPromoHeader}>\r\n                <h3>Promo</h3>\r\n                <i class=\"fas fa-mouse-pointer\"></i>\r\n              </div>\r\n              <div id={s.linkedPromoBody}>\r\n                {promoArticles.map((prom, i) => (\r\n                  <LinkedPromo data={prom} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id={s.articleSidebarRight} ref={stickRightSideBar}>\r\n          <Popular />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ArticleComp;\r\n","import React, { useContext } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport LoginContext from \"../../context\";\r\nimport s from \"./Comment.module.css\";\r\nimport CommentType from \"./CommentType\";\r\nimport CommentItem from \"./CommentItem\";\r\nimport CommentReply from \"./CommentReply\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport CommentShow from \"./CommentShow\";\r\nimport ReportComment from \"./reportComment/ReportComment\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport { scrollFnSticky } from \"../Article/Article\";\r\nimport Popular from \"../Article/Popular\";\r\n\r\nexport const getComLength = (data) => {\r\n  let fullCommentsLength = 0;\r\n  console.log(data);\r\n  for (let i = 0; i < data.length; i++) {\r\n    if (data[i].replies) {\r\n      fullCommentsLength += data[i].replies.length;\r\n    }\r\n    if (i === data.length - 1) {\r\n      fullCommentsLength += data.length;\r\n      console.log(fullCommentsLength);\r\n      return fullCommentsLength;\r\n    }\r\n  }\r\n};\r\n\r\nexport const getComLengthIfObject = (data) => {\r\n  let fullComLength = 0;\r\n  let replyLength = 0;\r\n  for (let key in data) {\r\n    if (data[key].replies) {\r\n      replyLength += Object.keys(data[key].replies).length;\r\n    }\r\n  }\r\n  fullComLength = Object.keys(data).length + replyLength;\r\n  return fullComLength;\r\n};\r\n\r\nexport const handleReplyHide = (data) => {\r\n  const replyHideArray = [];\r\n  console.log(data);\r\n  for (let i = 0; i < data.length; i++) {\r\n    if (data[i].replies && data[i].replies.length > 2) {\r\n      replyHideArray.push(i);\r\n    }\r\n  }\r\n\r\n  if (replyHideArray.length) {\r\n    return [...replyHideArray];\r\n    // setRepliesToHide([...replyHideArray]);\r\n  }\r\n  console.log(replyHideArray);\r\n};\r\n\r\nconst Comment = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [comments, setComments] = useState([]);\r\n  const [replyIndex, setReplyIndex] = useState(null);\r\n  const [getComments, setGetComments] = useState(true);\r\n  const [safeToProceed, setSafeToProceed] = useState(false);\r\n  const [repliesToHide, setRepliesToHide] = useState([]);\r\n  const [showMore, setShowMore] = useState([]);\r\n  const [reportComment, setReportComment] = useState(null);\r\n  const initRef = useRef(null);\r\n  const pushFinal = useRef(undefined);\r\n  const pushFinal2 = useRef(undefined);\r\n  const fullCommentsLengthRef = useRef(0);\r\n  const stickLeftSidebar = useRef();\r\n  const stickRightSideBar = useRef();\r\n  // useEffect(() => {\r\n  //   window.onbeforeunload = function () {\r\n  //     return true;\r\n  //   };\r\n\r\n  //   return () => {\r\n  //     window.onbeforeunload = null;\r\n  //   };\r\n  // }, []);\r\n  // useEffect(() => {\r\n  //   if (getComments) {\r\n  //     alert(\"its true\");\r\n  //   }\r\n  // }, [getComments]);\r\n  useEffect(() => {\r\n    console.log(\"\");\r\n    function handlerFn() {\r\n      scrollFnSticky(stickLeftSidebar);\r\n      scrollFnSticky(stickRightSideBar);\r\n    }\r\n    window.addEventListener(\"scroll\", handlerFn);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handlerFn);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // if (getComments) {\r\n    //   alert(\"its true\");\r\n    // }\r\n    if (!location.state) {\r\n      console.log(location);\r\n    }\r\n    if (location.state && getComments) {\r\n      console.log(location.state);\r\n      // alert(initRef.current);\r\n      if (!initRef.current) {\r\n        console.log(location.state.articleData.comments);\r\n        if (location.state.articleData.comments) {\r\n          const reverseArr = [\r\n            ...Object.values(location.state.articleData.comments),\r\n          ];\r\n          reverseArr.reverse();\r\n          setComments([...reverseArr]);\r\n        }\r\n        initRef.current = \"initialized\";\r\n      }\r\n      if (location.state.articleData.comments) {\r\n        // setFullCommentsLength(\r\n        //   getComLength(location.state.articleData.comments)\r\n        // );\r\n        fullCommentsLengthRef.current = getComLength(\r\n          location.state.articleData.comments\r\n        );\r\n      } else {\r\n        setGetComments(false);\r\n      }\r\n      fetch(\"https://api.ipify.org/?format=json\")\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          localStorage.setItem(\"userIp\", data.ip);\r\n          console.log(data);\r\n        });\r\n      // alert(\"gettingComments\");\r\n      if (typeof replyIndex === \"number\" || Array.isArray(replyIndex)) {\r\n        setReplyIndex(null);\r\n      }\r\n      window.scrollTo(0, 0);\r\n      console.log(location.state);\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${location.state.articleData.category}/${location.state.articleData.subCategory}/-${location.state.articleData.id}/comments.json`\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          let modifyData = [];\r\n          if (data) {\r\n            let replies = [];\r\n            for (let key in data) {\r\n              console.log(key);\r\n              modifyData.push(data[key]);\r\n              modifyData[modifyData.length - 1].id = key;\r\n              if (data[key].replies) {\r\n                for (let keyRep in data[key].replies) {\r\n                  replies.push(data[key].replies[keyRep]);\r\n                  replies[replies.length - 1].id = [key, keyRep];\r\n                }\r\n                modifyData[modifyData.length - 1].replies = [...replies];\r\n                replies = [];\r\n              }\r\n            }\r\n            console.log(modifyData);\r\n            modifyData.reverse();\r\n            const check = checkForTopComments([...modifyData]);\r\n            const replyHideArray = handleReplyHide(check);\r\n            if (replyHideArray) {\r\n              setRepliesToHide(replyHideArray);\r\n            }\r\n            console.log(check);\r\n            setComments([...check]);\r\n            showMoreFn(check.length);\r\n            // alert(\"test\");\r\n            // location.state.articleData.comments = [...data];\r\n            setGetComments(false);\r\n            // setFullCommentsLength(getComLength(check));\r\n            fullCommentsLengthRef.current = getComLength(check);\r\n            history.replace({\r\n              state: {\r\n                articleData: {\r\n                  ...JSON.parse(JSON.stringify(location.state.articleData)),\r\n                  comments: [...JSON.parse(JSON.stringify(check))],\r\n                },\r\n              },\r\n            });\r\n            setSafeToProceed(true);\r\n          }\r\n        });\r\n    } else if (!location.state) {\r\n      console.log(history.location.pathname);\r\n      let deconstructPathName = history.location.pathname.split(\"/\");\r\n      console.log(deconstructPathName);\r\n      const path = {\r\n        category: deconstructPathName[1],\r\n        subCategory: deconstructPathName[2],\r\n        id: deconstructPathName[4],\r\n      };\r\n      console.log(path);\r\n      fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${path.category}/${path.subCategory}/-${path.id}.json`\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(data);\r\n          let commentData = [];\r\n          let replies = [];\r\n          let linkPath = \"\";\r\n          if (data.comments) {\r\n            for (let key in data.comments) {\r\n              if (data.comments[key].replies) {\r\n                for (let keyRep in data.comments[key].replies) {\r\n                  replies.push(data.comments[key].replies[keyRep]);\r\n                }\r\n                commentData.push(data.comments[key]);\r\n                commentData[commentData.length - 1].replies = [...replies];\r\n                replies = [];\r\n              } else {\r\n                commentData.push(data.comments[key]);\r\n              }\r\n            }\r\n            data.comments = [...commentData];\r\n          }\r\n          const titleSplit = data.title.split(\" \");\r\n          let titleSplit2 = [];\r\n          let titleSplit3;\r\n          titleSplit.forEach((split) => {\r\n            titleSplit2.push(split.toLowerCase());\r\n          });\r\n          titleSplit3 = titleSplit2.join(\"-\");\r\n          titleSplit3 = titleSplit3.split(\",\").join(\"\").split(\" \").join(\"-\");\r\n          data.timeDiff = timeDifference(data.date);\r\n          data.linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n          history.replace({\r\n            state: {\r\n              articleData: {\r\n                ...JSON.parse(JSON.stringify(data)),\r\n              },\r\n            },\r\n          });\r\n        });\r\n    }\r\n  }, [location, getComments]);\r\n\r\n  const spliceRepliesHide = (ind, mode) => {\r\n    if (mode === \"replies\") {\r\n      const testingFn = (el) => el === ind;\r\n      console.log(repliesToHide.findIndex(testingFn));\r\n      setRepliesToHide((old) => {\r\n        let oldArr = [...old];\r\n        const index = repliesToHide.findIndex(testingFn);\r\n        oldArr.splice(index, 1);\r\n        console.log(oldArr);\r\n        if (oldArr.length) {\r\n          return oldArr;\r\n        }\r\n        return [];\r\n      });\r\n    } else {\r\n      console.log(\"check\");\r\n      setShowMore((old) => {\r\n        const oldArr = [...old];\r\n        oldArr.splice(0, 1);\r\n        console.log(oldArr);\r\n        if (oldArr.length > 0) {\r\n          return oldArr;\r\n        } else {\r\n          return [];\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const showMoreFn = (dataLength) => {\r\n    let numberOfShows = dataLength / 3;\r\n    let arr = [];\r\n    let val = 0;\r\n    if (numberOfShows > 1) {\r\n      if (numberOfShows % 1 === 0) {\r\n        numberOfShows--;\r\n      } else {\r\n        numberOfShows.toFixed();\r\n      }\r\n      for (let i = 0; i < numberOfShows; i++) {\r\n        val += 3;\r\n        arr.push(val);\r\n      }\r\n      setShowMore([...arr]);\r\n      console.log(arr);\r\n    }\r\n    // alert(numberOfShows);\r\n  };\r\n\r\n  // const sortCommentsByOrder = (comments) => {\r\n  //   let sortComments = [];\r\n  //   for (let i = 0; i < comments.length; i++) {\r\n  //     sortComments[i] = [];\r\n  //     sortComments[i][0] = comments[i].commentId.split(\"_\");\r\n  //     sortComments[i][1] = i;\r\n  //   }\r\n  //   let sortArr = [];\r\n  //   for (let i = 0; i < sortComments.length; i++) {\r\n  //     for (let j = 0; j < sortComments.length; j++) {\r\n  //       if (+sortComments[j][0][0] === i) {\r\n  //         sortArr[i] = sortComments[j];\r\n  //       }\r\n  //     }\r\n  //   }\r\n  //   let finalComments = [];\r\n  //   let incr = 0;\r\n  //   for (let i = sortArr.length - 1; i >= 0; i--) {\r\n  //     finalComments[incr] = { ...comments[sortArr[i][1]] };\r\n  //     incr++;\r\n  //   }\r\n  //   console.log(comments);\r\n  //   console.log(sortArr);\r\n  //   console.log(sortComments);\r\n  //   console.log(finalComments);\r\n  //   return finalComments;\r\n  // };\r\n\r\n  const handleReply = (ind) => {\r\n    setReplyIndex(ind);\r\n  };\r\n  const handleNavigateTitle = () => {\r\n    console.log(location.state.articleData);\r\n    // alert(location.state.articleData.linkPath);\r\n    // history.push(location.state.articleData.linkPath);\r\n  };\r\n\r\n  const checkForTopComments = (comments) => {\r\n    let storeTopCommentsIndx = [];\r\n    for (let i = 0; i < comments.length; i++) {\r\n      if (\r\n        comments[i].commentLikes &&\r\n        Object.keys(comments[i].commentLikes).length >= 5\r\n      ) {\r\n        if (\r\n          comments[i].commentDislikes &&\r\n          Object.keys(comments[i].commentLikes).length >=\r\n            Object.keys(comments[i].commentDislikes).length + 5\r\n        ) {\r\n          storeTopCommentsIndx.push([\r\n            i,\r\n            Object.keys(comments[i].commentLikes).length,\r\n          ]);\r\n        } else if (\r\n          !comments[i].commentDislikes &&\r\n          Object.keys(comments[i].commentLikes).length >= 5\r\n        ) {\r\n          storeTopCommentsIndx.push([\r\n            i,\r\n            Object.keys(comments[i].commentLikes).length,\r\n          ]);\r\n        }\r\n      }\r\n    }\r\n    console.log(storeTopCommentsIndx);\r\n    if (storeTopCommentsIndx.length > 0) {\r\n      // let pushFinal = [storeTopCommentsIndx[0]];\r\n      // let pushFinal2 = [];\r\n      pushFinal.current = [storeTopCommentsIndx[0]];\r\n      pushFinal2.current = [];\r\n      let spliceInd = 0;\r\n      const secondLoopArray = [...storeTopCommentsIndx];\r\n      for (let i = 0; i < storeTopCommentsIndx.length; i++) {\r\n        if (storeTopCommentsIndx.length >= 2) {\r\n          if (pushFinal.current[0][1] < storeTopCommentsIndx[i][1]) {\r\n            pushFinal.current = [storeTopCommentsIndx[i]];\r\n            spliceInd = i;\r\n          }\r\n          if (i === storeTopCommentsIndx.length - 1) {\r\n            secondLoopArray.splice(spliceInd, 1);\r\n            console.log(secondLoopArray);\r\n            if (secondLoopArray.length) {\r\n              for (let j = 0; j < secondLoopArray.length; j++) {\r\n                if (j === 0) {\r\n                  pushFinal2.current = [secondLoopArray[0]];\r\n                }\r\n                if (pushFinal2.current[0][1] < secondLoopArray[j][1]) {\r\n                  pushFinal2.current = [secondLoopArray[j]];\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      console.log(pushFinal.current);\r\n      console.log(pushFinal2.current);\r\n      let cpyCom = [...JSON.parse(JSON.stringify(comments))];\r\n      let firstTopCom = {\r\n        ...cpyCom.slice(pushFinal.current[0][0], pushFinal.current[0][0] + 1),\r\n      };\r\n      let secondTopCom = undefined;\r\n      cpyCom.splice(pushFinal.current[0][0], 1);\r\n      cpyCom.splice(0, 0, firstTopCom[0]);\r\n      if (pushFinal2.current.length) {\r\n        if (pushFinal2.current[0][0] > pushFinal.current[0][0]) {\r\n          secondTopCom = cpyCom.slice(\r\n            pushFinal2.current[0][0],\r\n            pushFinal2.current[0][0] + 1\r\n          );\r\n        } else {\r\n          secondTopCom = cpyCom.slice(\r\n            pushFinal2.current[0][0] + 1,\r\n            pushFinal2.current[0][0] + 2\r\n          );\r\n        }\r\n        console.log(secondTopCom);\r\n        cpyCom.splice(1, 0, secondTopCom[0]);\r\n        if (pushFinal2.current[0][0] > pushFinal.current[0][0]) {\r\n          cpyCom.splice(pushFinal2.current[0][0] + 1, 1);\r\n        } else {\r\n          cpyCom.splice(pushFinal2.current[0][0] + 2, 1);\r\n        }\r\n      }\r\n      console.log(cpyCom);\r\n      return cpyCom;\r\n      // let finalComArray =\r\n    } else {\r\n      return comments;\r\n    }\r\n  };\r\n\r\n  const handleReport = (commentData) => {\r\n    setReportComment(commentData);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {reportComment && (\r\n        <Overlay navZ={true}>\r\n          <ReportComment\r\n            closeModal={setReportComment}\r\n            reportData={reportComment}\r\n          />\r\n        </Overlay>\r\n      )}\r\n      <div id={s.commentPageContainer}>\r\n        <div id={s.commentPageContainerHeader}>\r\n          <div id={s.headerBundle}>\r\n            <h3\r\n              style={{\r\n                color:\r\n                  location.state &&\r\n                  location.state.articleData &&\r\n                  `${clrs[location.state.articleData.category.toLowerCase()]}`,\r\n              }}\r\n            >\r\n              {location.state && location.state.articleData.subTitle}\r\n            </h3>\r\n            <h1 onClick={handleNavigateTitle}>\r\n              <Link\r\n                to={\r\n                  location.state && {\r\n                    pathname: location.state.articleData.linkPath,\r\n                    state: {\r\n                      articleData: location.state.articleData,\r\n                    },\r\n                  }\r\n                }\r\n              >\r\n                {location.state && location.state.articleData.title}\r\n              </Link>\r\n            </h1>\r\n          </div>\r\n          <div id={s.headerShares}>\r\n            <i class={\"fas fa-share-alt\"}></i>{\" \"}\r\n            {location.state &&\r\n            location.state.articleData.shares.constructor === Object\r\n              ? Object.keys(location.state.articleData.shares).length\r\n              : 0}\r\n          </div>\r\n        </div>\r\n        <div id={s.commentPageContainerBody}>\r\n          <div id={s.commentSidebarLeft} ref={stickLeftSidebar}>\r\n            <div id={s.bundleDiv}>\r\n              <div id={s.postedData}>\r\n                <div>\r\n                  <i\r\n                    class=\"fas fa-user\"\r\n                    style={{\r\n                      backgroundColor: `rgb(209,213,219)`,\r\n                      color: \"#fff\",\r\n                      padding: \"1.2rem\",\r\n                      borderRadius: \".3rem\",\r\n                      fontSize: \"1.6rem\",\r\n                    }}\r\n                  ></i>\r\n                </div>\r\n                <div id={s.postedDataTwo}>\r\n                  <h3>\r\n                    {(location.state && location.state.articleData.author) ||\r\n                      \"R. D.\"}\r\n                  </h3>\r\n                  <p>\r\n                    {timeDifference(\r\n                      location.state && location.state.articleData.date\r\n                    )}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div id={s.commentsShare}>\r\n                <div id={s.comments}>\r\n                  <h2>{fullCommentsLengthRef.current}</h2>\r\n                  <p>komentara</p>\r\n                </div>\r\n                <div>\r\n                  <h2>\r\n                    {location.state &&\r\n                    location.state.articleData.shares.constructor === Object\r\n                      ? Object.keys(location.state.articleData.shares).length\r\n                      : 0}\r\n                  </h2>\r\n                  <p>dijeljenja</p>\r\n                </div>\r\n              </div>\r\n              <div id={s.shareArticle}>\r\n                <ul>\r\n                  <li>\r\n                    <i class=\"fab fa-facebook\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"fab fa-twitter\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"far fa-envelope\"></i>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id={s.commentBodyContent}>\r\n            <div id={s.commentBodyHeader}>\r\n              <div id={s.commentBodyHeaderInfo}>\r\n                <h3>Komentari ({fullCommentsLengthRef.current})</h3>\r\n                <div id={s.povratakNaClanak}>\r\n                  <Link\r\n                    to={\r\n                      location.state && {\r\n                        pathname: location.state.articleData.linkPath,\r\n                        state: {\r\n                          articleData: location.state.articleData,\r\n                        },\r\n                      }\r\n                    }\r\n                  >\r\n                    <i class=\"far fa-arrow-alt-circle-left\"></i> Povratak na\r\n                    ƒçlanak\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n              <div id={s.commentBodyHeaderTypeSignIn}>\r\n                {!ctx.isLoggedIn ? (\r\n                  <Link to=\"/login\">\r\n                    <div id={s.prijavaKorisnika}>Prijava korisnika</div>\r\n                  </Link>\r\n                ) : (\r\n                  <CommentType\r\n                    path={\r\n                      location.state && {\r\n                        category: location.state.articleData.category,\r\n                        subCategory: location.state.articleData.subCategory,\r\n                        id: location.state.articleData.id,\r\n                      }\r\n                    }\r\n                    getComments={setGetComments}\r\n                  />\r\n                )}\r\n              </div>\r\n              <div id={s.commentBodyHeaderAlert}>\r\n                <span>NAPOMENA:</span> &nbsp;\r\n                <span>\r\n                  Komentarisanje ƒçlanaka na portalu Klix.ba dozvoljeno je samo\r\n                  registrovanim korisnicima. Molimo korisnike da se suzdr≈æe od\r\n                  vrijeƒëanja, psovanja i vulgarnog izra≈æavanja. Komentari\r\n                  odra≈æavaju stavove iskljuƒçivo njihovih autora, koji zbog\r\n                  govora mr≈ænje mogu biti i kriviƒçno gonjeni. Kao ƒçitatelj\r\n                  prihvatate moguƒánost da meƒëu komentarima mogu biti pronaƒëeni\r\n                  sadr≈æaji koji mogu biti u suprotnosti sa va≈°im vjerskim,\r\n                  moralnim i drugim naƒçelima i uvjerenjima. Svaki korisnik prije\r\n                  pisanja komentara mora se upoznati sa\r\n                </span>\r\n                &nbsp;\r\n                <Link\r\n                  to={{ pathname: \"/komentari\" }}\r\n                  target=\"_blank\"\r\n                  style={\r\n                    location.state && {\r\n                      color:\r\n                        location.state.articleData &&\r\n                        `${\r\n                          clrs[\r\n                            location.state.articleData.category.toLowerCase()\r\n                          ]\r\n                        }`,\r\n                    }\r\n                  }\r\n                >\r\n                  Pravilima i uslovima kori≈°tenja komentara.\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            <div id={s.commentBody}>\r\n              {safeToProceed &&\r\n                getComLength(comments) ===\r\n                  getComLength(location.state.articleData.comments) &&\r\n                comments.map((comment, i) => {\r\n                  if (i === replyIndex) {\r\n                    if (!comment.replies) {\r\n                      return (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          <CommentReply\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            getComments={setGetComments}\r\n                          />\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      );\r\n                    } else if (comment.replies) {\r\n                      return (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          <CommentReply\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            getComments={setGetComments}\r\n                          />\r\n                          {comment.replies.map((comRep, ind) => {\r\n                            return (\r\n                              <>\r\n                                {repliesToHide.length > 0 &&\r\n                                repliesToHide.find((el) => el === i) !==\r\n                                  undefined &&\r\n                                ind < 2 ? (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                ) : null}\r\n                                {((repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i)) ===\r\n                                  undefined ||\r\n                                  !repliesToHide.length) && (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                )}\r\n                                {repliesToHide.length > 0 ? (\r\n                                  repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i) !==\r\n                                    undefined &&\r\n                                  ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() =>\r\n                                        spliceRepliesHide(i, \"replies\")\r\n                                      }\r\n                                      showReply={comment.replies.length - 2}\r\n                                    />\r\n                                  ) : null\r\n                                ) : null}\r\n                              </>\r\n                            );\r\n                          })}\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      );\r\n                    }\r\n                  } else if (Array.isArray(replyIndex)) {\r\n                    return (\r\n                      ((showMore.length > 0 && i < showMore[0]) ||\r\n                        showMore.length === 0) && (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          {comment.replies &&\r\n                            comment.replies.map((comRep, ind) => {\r\n                              return (\r\n                                <React.Fragment key={uuid()}>\r\n                                  {repliesToHide.length > 0 &&\r\n                                    repliesToHide.find((el) => el === i) !==\r\n                                      undefined &&\r\n                                    ind < 2 && (\r\n                                      <>\r\n                                        <CommentItem\r\n                                          commentIndex={[i, ind]}\r\n                                          commentIndexDB={comRep.id}\r\n                                          comment={comRep.comment}\r\n                                          displayName={comRep.userName}\r\n                                          commentLikes={comRep.commentLikes}\r\n                                          commentDislikes={\r\n                                            comRep.commentDislikes\r\n                                          }\r\n                                          avatarColor={comRep.avatarColor}\r\n                                          negativeComment={\r\n                                            comRep.commentDislikes &&\r\n                                            Object.keys(comRep.commentDislikes)\r\n                                              .length >=\r\n                                              (comRep.commentLikes\r\n                                                ? Object.keys(\r\n                                                    comRep.commentLikes\r\n                                                  ).length + 5\r\n                                                : 5)\r\n                                          }\r\n                                          date={timeDifference(comRep.date)}\r\n                                          handleReply={handleReply}\r\n                                          handleReport={handleReport}\r\n                                        />\r\n                                        {replyIndex[1] === ind &&\r\n                                        replyIndex[0] === i ? (\r\n                                          <CommentReply\r\n                                            commentIndex={[i, ind]}\r\n                                            commentIndexDB={comRep.id}\r\n                                            getComments={setGetComments}\r\n                                          />\r\n                                        ) : null}\r\n                                      </>\r\n                                    )}\r\n                                  {((repliesToHide.length &&\r\n                                    repliesToHide.find((el) => el === i) ===\r\n                                      undefined) ||\r\n                                    !repliesToHide.length) && (\r\n                                    <>\r\n                                      <CommentItem\r\n                                        commentIndex={[i, ind]}\r\n                                        commentIndexDB={comRep.id}\r\n                                        comment={comRep.comment}\r\n                                        displayName={comRep.userName}\r\n                                        commentLikes={comRep.commentLikes}\r\n                                        commentDislikes={comRep.commentDislikes}\r\n                                        avatarColor={comRep.avatarColor}\r\n                                        negativeComment={\r\n                                          comRep.commentDislikes &&\r\n                                          Object.keys(comRep.commentDislikes)\r\n                                            .length >=\r\n                                            (comRep.commentLikes\r\n                                              ? Object.keys(comRep.commentLikes)\r\n                                                  .length + 5\r\n                                              : 5)\r\n                                        }\r\n                                        date={timeDifference(comRep.date)}\r\n                                        handleReply={handleReply}\r\n                                        handleReport={handleReport}\r\n                                      />\r\n                                      {replyIndex[1] === ind &&\r\n                                      replyIndex[0] === i ? (\r\n                                        <CommentReply\r\n                                          commentIndex={[i, ind]}\r\n                                          commentIndexDB={comRep.id}\r\n                                          getComments={setGetComments}\r\n                                        />\r\n                                      ) : null}\r\n                                    </>\r\n                                  )}\r\n                                  {repliesToHide.length > 0 ? (\r\n                                    repliesToHide.length &&\r\n                                    repliesToHide.find((el) => el === i) !==\r\n                                      undefined &&\r\n                                    ind === 1 ? (\r\n                                      <CommentShow\r\n                                        onClick={() =>\r\n                                          spliceRepliesHide(i, \"replies\")\r\n                                        }\r\n                                        showReply={comment.replies.length - 2}\r\n                                      />\r\n                                    ) : null\r\n                                  ) : null}\r\n                                </React.Fragment>\r\n                              );\r\n                            })}\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      )\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      ((showMore.length > 0 && i < showMore[0]) ||\r\n                        showMore.length === 0) &&\r\n                      (!comment.replies ? (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            key={uuid()}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      ) : (\r\n                        <React.Fragment key={uuid()}>\r\n                          <CommentItem\r\n                            commentIndex={i}\r\n                            commentIndexDB={comment.id}\r\n                            comment={comment.comment}\r\n                            displayName={comment.userName}\r\n                            commentLikes={comment.commentLikes}\r\n                            commentDislikes={comment.commentDislikes}\r\n                            avatarColor={comment.avatarColor}\r\n                            topComment={\r\n                              (pushFinal.current &&\r\n                                pushFinal.current.length &&\r\n                                i === 0 &&\r\n                                \"topComment\") ||\r\n                              (pushFinal2.current &&\r\n                                pushFinal2.current.length &&\r\n                                i === 1 &&\r\n                                \"topComment\")\r\n                            }\r\n                            negativeComment={\r\n                              comment.commentDislikes &&\r\n                              Object.keys(comment.commentDislikes).length >=\r\n                                (comment.commentLikes\r\n                                  ? Object.keys(comment.commentLikes).length + 5\r\n                                  : 5)\r\n                            }\r\n                            date={timeDifference(comment.date)}\r\n                            handleReply={handleReply}\r\n                            handleReport={handleReport}\r\n                          />\r\n                          {comment.replies.map((comRep, ind) => {\r\n                            return (\r\n                              <React.Fragment key={uuid()}>\r\n                                {repliesToHide.length > 0 &&\r\n                                repliesToHide.find((el) => el === i) !==\r\n                                  undefined &&\r\n                                ind < 2 ? (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                ) : null}\r\n                                {(repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i)) ===\r\n                                  undefined || !repliesToHide.length ? (\r\n                                  <CommentItem\r\n                                    key={uuid()}\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    negativeComment={\r\n                                      comRep.commentDislikes &&\r\n                                      Object.keys(comRep.commentDislikes)\r\n                                        .length >=\r\n                                        (comRep.commentLikes\r\n                                          ? Object.keys(comRep.commentLikes)\r\n                                              .length + 5\r\n                                          : 5)\r\n                                    }\r\n                                    date={timeDifference(comRep.date)}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                ) : null}\r\n                                {repliesToHide.length > 0 ? (\r\n                                  repliesToHide.length &&\r\n                                  repliesToHide.find((el) => el === i) !==\r\n                                    undefined &&\r\n                                  ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() =>\r\n                                        spliceRepliesHide(i, \"replies\")\r\n                                      }\r\n                                      showReply={comment.replies.length - 2}\r\n                                    />\r\n                                  ) : null\r\n                                ) : null}\r\n                              </React.Fragment>\r\n                            );\r\n                          })}\r\n                          {showMore.length > 0 && i === showMore[0] - 1 && (\r\n                            <CommentShow\r\n                              onClick={() => spliceRepliesHide(i, \"showMore\")}\r\n                            />\r\n                          )}\r\n                        </React.Fragment>\r\n                      ))\r\n                    );\r\n                  }\r\n                })}\r\n              <div\r\n                id={s.povratakNaClanak}\r\n                style={{\r\n                  justifyContent: \"right\",\r\n                  marginTop: \"1rem\",\r\n                  marginBottom: \"1rem\",\r\n                }}\r\n              >\r\n                <Link\r\n                  to={\r\n                    location.state && {\r\n                      pathname: location.state.articleData.linkPath,\r\n                      state: {\r\n                        articleData: location.state.articleData,\r\n                      },\r\n                    }\r\n                  }\r\n                >\r\n                  <i class=\"far fa-arrow-alt-circle-left\"></i> Povratak na\r\n                  ƒçlanak\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id={s.commentSidebarRight} ref={stickRightSideBar}>\r\n            <Popular />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n    // <div className={s.postComment}>\r\n    //   <div className={s.postCommentBundle}>\r\n    //     <textarea\r\n    //       name=\"komentar\"\r\n    //       className={s.postCommentTextarea}\r\n    //       placeholder=\"upi≈°i komentar\"\r\n    //     ></textarea>\r\n    //     <button>\r\n    //       <span>\r\n    //         <i class=\"fas fa-pen\"></i> Objavi komentar\r\n    //       </span>\r\n    //     </button>\r\n    //   </div>\r\n    // </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport s from \"./HomeMainSub.module.css\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { getLen } from \"../Article/Popular\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { subcategories } from \"../AdminPanel/AddArticle\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { splitTitle } from \"./HomeMain\";\r\n\r\nconst getVisitShare = (mode, data) => {\r\n  const dbRef2 = db.ref(`dates/2022/3/7`);\r\n  return new Promise((resolve) => {\r\n    dbRef2.once(\"value\", (snap) => {\r\n      const promises2 = [];\r\n      let dataVisitPath = snap.val();\r\n      for (let key in dataVisitPath) {\r\n        promises2.push(\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${dataVisitPath[key].path}/${dataVisitPath[key].id}.json`\r\n          ).then((res) => res.json())\r\n        );\r\n      }\r\n      const promisedData2 = Promise.all(promises2);\r\n      promisedData2.then((data2) => {\r\n        data2.sort((a, b) => {\r\n          if (\r\n            (a[mode].constructor === Object ? Object.keys(a[mode]).length : 0) -\r\n              (b[mode].constructor === Object\r\n                ? Object.keys(b[mode]).length\r\n                : 0) >\r\n            0\r\n          ) {\r\n            return -1;\r\n          } else if (\r\n            (a[mode].constructor === Object ? Object.keys(a[mode]).length : 0) -\r\n              (b[mode].constructor === Object\r\n                ? Object.keys(b[mode]).length\r\n                : 0) <\r\n            0\r\n          ) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        data2.splice(15 - data.length);\r\n        data = data.concat(data2);\r\n        data.sort((a, b) => {\r\n          if (Object.keys(a[mode]).length - Object.keys(b[mode]).length > 0) {\r\n            return -1;\r\n          } else if (\r\n            Object.keys(a[mode]).length - Object.keys(b[mode]).length <\r\n            0\r\n          ) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        console.log(data);\r\n        return resolve(data);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nconst getPrevDateData = (data, route) => {\r\n  return new Promise(async (resolve) => {\r\n    console.log(data);\r\n    const dbRef2 = db.ref(`dates/2022/3/7`);\r\n    let dataVisit;\r\n    let dataShares;\r\n    const promises3 = [];\r\n    let listOfUnder15 = \"\";\r\n    if (data[1].length < 15) {\r\n      dataVisit = getVisitShare(\"visited\", data[1]);\r\n      promises3.push(dataVisit);\r\n      listOfUnder15 = \"visited\";\r\n    }\r\n    if (data[2].length < 15) {\r\n      dataShares = getVisitShare(\"shares\", data[2]);\r\n      promises3.push(dataShares);\r\n      listOfUnder15 = listOfUnder15.concat(\"shares\");\r\n    }\r\n\r\n    if (route === \"poƒçetna\" && data[0].length < 15) {\r\n      await dbRef2.once(\"value\", (snap) => {\r\n        const dataPaths2 = snap.val();\r\n        let promises1 = [];\r\n        const keys = Object.keys(dataPaths2).reverse();\r\n        keys.splice(15 - data[0].length);\r\n        console.log(keys);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          promises1.push(\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n                dataPaths2[keys[i]].path\r\n              }/${dataPaths2[keys[i]].id}.json`\r\n            ).then((res) => res.json())\r\n          );\r\n        }\r\n        promises3.unshift(...promises1);\r\n        console.log(promises3);\r\n      });\r\n    }\r\n\r\n    const promisedData2 = Promise.all(promises3);\r\n    promisedData2.then((data2) => {\r\n      console.log(data2);\r\n      let final = [];\r\n      if (\r\n        (listOfUnder15.includes(\"visited\") &&\r\n          !listOfUnder15.includes(\"shares\")) ||\r\n        (!listOfUnder15.includes(\"visited\") && listOfUnder15.includes(\"shares\"))\r\n      ) {\r\n        final.push(...data2.slice(data2.length - 1));\r\n        data2.splice(data2.length - 1);\r\n      } else if (\r\n        listOfUnder15.includes(\"visited\") &&\r\n        listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.push(...data2.slice(data2.length - 2, data.length - 1));\r\n        final.push(...data2.slice(data2.length - 1));\r\n        data2.splice(data2.length - 2);\r\n      }\r\n      console.log(data2);\r\n      if (data[0].length < 15) {\r\n        final.unshift([...data[0].concat(data2)]);\r\n      } else {\r\n        final.unshift(data[0]);\r\n      }\r\n      if (\r\n        !listOfUnder15.includes(\"visited\") &&\r\n        listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.splice(1, 0, data[1]);\r\n      } else if (\r\n        listOfUnder15.includes(\"visited\") &&\r\n        !listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.push(data[2]);\r\n      } else if (\r\n        !listOfUnder15.includes(\"visited\") &&\r\n        !listOfUnder15.includes(\"shares\")\r\n      ) {\r\n        final.push(data[1]);\r\n        final.push(data[2]);\r\n      }\r\n      console.log(final);\r\n      return resolve(final);\r\n    });\r\n  });\r\n  //make below a func and reuse it for shares\r\n  // const dataVisit = await getVisitShare(\"visited\", data).then((data) => data);\r\n  // console.log(dataVisit);\r\n  // const dataShares = await getVisitShare(\"shares\", data).then((data) => data);\r\n  // console.log(dataShares);\r\n  // dataVisit.forEach((it) => console.log(Object.keys(it.visited).length));\r\n  // dataShares.forEach((it) => console.log(Object.keys(it.shares).length));\r\n};\r\n\r\nexport const getSidebarData = (route) => {\r\n  return new Promise(async (resolve) => {\r\n    console.log(route);\r\n    let finalData = [];\r\n    const dbRef = db.ref(`dates/2022/3/8`);\r\n    const promisesCat = [];\r\n    let xd1 = [];\r\n    console.log(subcategories[\"vijesti\"]);\r\n    if (route !== \"Poƒçetna\") {\r\n      for (let i = 0; i < subcategories[route.toLowerCase()].length; i++) {\r\n        ((incr) => {\r\n          const dbRef2 = db\r\n            .ref(\r\n              `articles/${route}/${subcategories[route.toLowerCase()][incr]}`\r\n            )\r\n            .orderByKey()\r\n            .limitToLast(15);\r\n\r\n          xd1.push(dbRef2.once(\"value\", (snap) => {}));\r\n        })(i);\r\n      }\r\n    }\r\n\r\n    // promisesCat.sort((a, b) => {\r\n    //   if (new Date(a.date) - new Date(b.date) > 0) {\r\n    //     return -1;\r\n    //   } else if (new Date(a.date) - new Date(b.date) < 0) {\r\n    //     return 1;\r\n    //   } else {\r\n    //     return 0;\r\n    //   }\r\n    // });\r\n    // console.log(promisesCat);\r\n\r\n    const dataPaths = dbRef.once(\"value\", (snap) => {});\r\n\r\n    console.log(dataPaths);\r\n    console.log(xd1);\r\n    let dataEdit = [];\r\n    const promises = [];\r\n    await dataPaths.then((data) => (dataEdit[0] = data.val()));\r\n    if (Object.keys(dataEdit[0]).length) {\r\n      for (let key in dataEdit[0]) {\r\n        promises.push(\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${dataEdit[0][key].path}/${dataEdit[0][key].id}.json`\r\n          ).then((res) => res.json())\r\n        );\r\n      }\r\n    }\r\n    if (route === \"Poƒçetna\") {\r\n      // const xy = Promise.all(dataPaths);\r\n      await dataPaths.then((data) => (dataEdit = data.val()));\r\n      dataEdit = await Promise.all(promises);\r\n      console.log(dataEdit);\r\n      // xy.then((data) => console.log(data));\r\n    } else {\r\n      const promisedData = await Promise.all([...promises, ...xd1]);\r\n      // dataEdit.push(promisedData[0].val());\r\n      dataEdit[0] = promisedData.slice(0, promises.length);\r\n      promisedData.splice(0, promises.length);\r\n      const acc = promisedData.reduce((acc, curr, i) => {\r\n        let data = [];\r\n        for (let key in curr.val()) {\r\n          data.push(curr.val()[key]);\r\n        }\r\n        return [...acc, ...data];\r\n      }, []);\r\n      dataEdit.push([...acc]);\r\n    }\r\n    dataEdit.reverse();\r\n    console.log(dataEdit);\r\n\r\n    let buildingFinalData = [];\r\n    if (route === \"Poƒçetna\") {\r\n      buildingFinalData.push(dataEdit);\r\n    } else if (route !== \"Poƒçetna\") {\r\n      dataEdit[0].sort((a, b) => {\r\n        if (new Date(a.date) - new Date(b.date) > 0) {\r\n          return -1;\r\n        } else if (new Date(a.date) - b.date < 0) {\r\n          return 1;\r\n        } else {\r\n          return 0;\r\n        }\r\n      });\r\n      if (dataEdit[0].length > 15) {\r\n        dataEdit[0].splice(15);\r\n      }\r\n      buildingFinalData.push(dataEdit[0]);\r\n      buildingFinalData.push(dataEdit[1]);\r\n      console.log(buildingFinalData);\r\n    }\r\n    console.log(buildingFinalData);\r\n    let dataJson = JSON.parse(\r\n      JSON.stringify(route === \"Poƒçetna\" ? dataEdit : dataEdit[1])\r\n    );\r\n    let visitedDataSort = [];\r\n    let sharedDataSort = [];\r\n    //remove art with share equal to zero\r\n    console.log(dataJson);\r\n    dataJson.forEach((item) => {\r\n      if (\r\n        item.visited &&\r\n        item.visited.constructor === Object &&\r\n        Object.keys(item.visited).length >= 10\r\n      ) {\r\n        visitedDataSort.push(item);\r\n      }\r\n      if (\r\n        item.shares.constructor === Object &&\r\n        Object.keys(item.shares).length >= 10\r\n      ) {\r\n        sharedDataSort.push(item);\r\n      }\r\n    });\r\n\r\n    visitedDataSort.sort((a, b) => {\r\n      if (Object.keys(a.visited).length - Object.keys(b.visited).length > 0) {\r\n        return -1;\r\n      } else if (\r\n        Object.keys(a.visited).length - Object.keys(b.visited).length <\r\n        0\r\n      ) {\r\n        return 1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n\r\n    sharedDataSort.sort((a, b) => {\r\n      if (\r\n        (a.shares.constructor === Object ? Object.keys(a.shares).length : 0) -\r\n          (b.shares.constructor === Object ? Object.keys(b.shares).length : 0) >\r\n        0\r\n      ) {\r\n        return -1;\r\n      } else if (\r\n        (a.shares.constructor === Object ? Object.keys(a.shares).length : 0) -\r\n          (b.shares.constructor === Object ? Object.keys(b.shares).length : 0) <\r\n        0\r\n      ) {\r\n        return 1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    if (route !== \"Poƒçetna\") {\r\n      buildingFinalData.pop();\r\n    }\r\n    buildingFinalData.push(visitedDataSort);\r\n    buildingFinalData.push(sharedDataSort);\r\n    console.log(buildingFinalData);\r\n    // buildingFinalData[0].splice(2);\r\n    if (buildingFinalData[0].length > 15) {\r\n      buildingFinalData[0].splice(15);\r\n    }\r\n    if (buildingFinalData[1].length > 15) {\r\n      buildingFinalData[1].splice(15);\r\n    }\r\n    if (buildingFinalData[2].length > 15) {\r\n      buildingFinalData[2].splice(15);\r\n    }\r\n    buildingFinalData[1].splice(2);\r\n    if (\r\n      buildingFinalData[0].length === 15 &&\r\n      buildingFinalData[1].length === 15 &&\r\n      buildingFinalData[2].length === 15\r\n    ) {\r\n      resolve(buildingFinalData);\r\n    } else {\r\n      const retData = await getPrevDateData(\r\n        buildingFinalData,\r\n        route === \"Poƒçetna\" ? \"Poƒçetna\" : \"other\"\r\n      ).then((data) => data);\r\n      console.log(retData);\r\n      resolve(retData);\r\n    }\r\n  });\r\n};\r\n\r\nconst HomeMainSub = ({ route }) => {\r\n  const [sideBarData, setSidebarData] = useState([\r\n    {\r\n      first: [],\r\n      second: [],\r\n      third: [],\r\n      current: \"first\",\r\n    },\r\n  ]);\r\n  useEffect(async () => {\r\n    let retData = getSidebarData(route);\r\n    retData = await retData.then((data) => data);\r\n    console.log(retData);\r\n    setSidebarData([\r\n      {\r\n        first: [...retData[0]],\r\n        second: [...retData[1]],\r\n        third: [...retData[2]],\r\n        current: \"first\",\r\n      },\r\n    ]);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (sideBarData[0].first.length) {\r\n      console.log(sideBarData);\r\n    }\r\n    console.log(sideBarData);\r\n  }, [sideBarData]);\r\n\r\n  const handleFilterSidebar = (e) => {\r\n    const { textContent } = e.target;\r\n    switch (textContent) {\r\n      case \"Najnovije\":\r\n        setSidebarData((old) => [{ ...old[0], current: \"first\" }]);\r\n        break;\r\n      case \"Najƒçitanije\":\r\n        setSidebarData((old) => [{ ...old[0], current: \"second\" }]);\r\n        break;\r\n      case \"Preporuke\":\r\n        setSidebarData((old) => [{ ...old[0], current: \"third\" }]);\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id={s.sideBar}>\r\n      <div id={s.sideBarControls}>\r\n        <div\r\n          className={`${s.sideBarControlItem}${\r\n            sideBarData[0].current === \"first\" ? \" \" + s.itemActive : \"\"\r\n          }`}\r\n          onClick={handleFilterSidebar}\r\n        >\r\n          Najnovije\r\n        </div>\r\n        <div\r\n          className={`${s.sideBarControlItem}${\r\n            sideBarData[0].current === \"second\" ? \" \" + s.itemActive : \"\"\r\n          }`}\r\n          onClick={handleFilterSidebar}\r\n        >\r\n          Najƒçitanije\r\n        </div>\r\n        <div\r\n          className={`${s.sideBarControlItem}${\r\n            sideBarData[0].current === \"third\" ? \" \" + s.itemActive : \"\"\r\n          }`}\r\n          onClick={handleFilterSidebar}\r\n        >\r\n          Preporuke\r\n        </div>\r\n      </div>\r\n      <div id={s.sideBarContent}>\r\n        {sideBarData[0][sideBarData[0].current].length\r\n          ? sideBarData[0][sideBarData[0].current].map((item) => (\r\n              <div className={s.sideBarItem} key={uuid()}>\r\n                <h3 style={{ color: `${clrs[item.category.toLowerCase()]}` }}>\r\n                  {item.subTitle}\r\n                </h3>\r\n                <p>\r\n                  <Link\r\n                    to={{\r\n                      pathname: encodeURI(\r\n                        `/${item.category}/${item.subCategory}/${splitTitle(\r\n                          item.title\r\n                        )}/${item.id}`\r\n                      ),\r\n                      state: { articleData: item },\r\n                    }}\r\n                  >\r\n                    {item.title}\r\n                  </Link>\r\n                </p>\r\n                <div className={s.sideBarItemBundle}>\r\n                  <span>{timeDifference(item.date)}</span>\r\n                  <div className={s.sideBarItemBundleRight}>\r\n                    <span>\r\n                      <i class=\"fas fa-comments\"></i>\r\n                      {getLen(item)}\r\n                    </span>\r\n                    <span>\r\n                      <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                      {item.shares.constructor === Object\r\n                        ? Object.keys(item.shares).length\r\n                        : 0}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomeMainSub;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport s from \"./HomeMain.module.css\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { articleColors } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getComLength } from \"../comment/Comment\";\r\nimport HomeMainSub from \"./HomeMainSub\";\r\n\r\nexport const splitTitle = (title) => {\r\n  const titleSplit = title.split(\" \");\r\n  let titleSplit2 = [];\r\n  let titleSplit3;\r\n  console.log(titleSplit);\r\n  titleSplit.forEach((split) => {\r\n    titleSplit2.push(split.toLowerCase());\r\n  });\r\n  titleSplit3 = titleSplit2.join(\"-\");\r\n  titleSplit3 = titleSplit3.split(\",\").join(\"\").split(\" \").join(\"-\");\r\n  console.log(titleSplit2);\r\n  return titleSplit3;\r\n};\r\n\r\nconst HomeMain = ({ route }) => {\r\n  const [articlesMain, setArticlesMain] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const dbRef = db.ref(`viewContent/Glavni sadr≈æaj/${route}`);\r\n    dbRef.once(\"value\", (snapshot) => {\r\n      if (snapshot.exists()) {\r\n        const data = snapshot.val();\r\n        console.log(data);\r\n        const articlePaths = [];\r\n        for (let key in data) {\r\n          data[key].forEach((item) => {\r\n            articlePaths.push(`${item[1]}/-${item[0]}`);\r\n          });\r\n        }\r\n        console.log(articlePaths);\r\n        const placeHolderArray = [];\r\n        const promises = [];\r\n        for (let i = 0; i < articlePaths.length; i++) {\r\n          promises.push(\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${articlePaths[i]}.json`\r\n            ).then((res) => res.json())\r\n          );\r\n        }\r\n        const promisedData = Promise.all(promises);\r\n        promisedData.then((data) => {\r\n          console.log(data);\r\n          for (let i = 0; i < data.length; i++) {\r\n            placeHolderArray.push(JSON.parse(JSON.stringify(data[i])));\r\n            for (let key in articleColors) {\r\n              if (\r\n                key === data[i].category.toLowerCase() &&\r\n                placeHolderArray[i]\r\n              ) {\r\n                placeHolderArray[i].subTitleClr = articleColors[key];\r\n                const titleSplit = splitTitle(data[i].title);\r\n                placeHolderArray[\r\n                  i\r\n                ].linkPath = `/${data[i].category}/${data[i].subCategory}/${titleSplit}/${data[i].id}`;\r\n              }\r\n            }\r\n            if (placeHolderArray[i]) {\r\n              placeHolderArray[i].timeDiff = timeDifference(data[i].date);\r\n              if (\r\n                placeHolderArray[i].comments &&\r\n                placeHolderArray[i].comments.constructor === Object\r\n              ) {\r\n                const comArr = [];\r\n                let replies = [];\r\n                for (let key in placeHolderArray[i].comments) {\r\n                  if (placeHolderArray[i].comments[key].replies) {\r\n                    for (let keyRep in placeHolderArray[i].comments[key]\r\n                      .replies) {\r\n                      replies.push(\r\n                        placeHolderArray[i].comments[key].replies[keyRep]\r\n                      );\r\n                    }\r\n                    comArr.push(placeHolderArray[i].comments[key]);\r\n                    comArr[comArr.length - 1].replies = [...replies];\r\n                    replies = [];\r\n                  } else {\r\n                    comArr.push(placeHolderArray[i].comments[key]);\r\n                  }\r\n                }\r\n                placeHolderArray[i].comments = [...comArr];\r\n                console.log(comArr);\r\n              }\r\n            }\r\n            console.log(placeHolderArray[i]);\r\n            if (i === articlePaths.length - 1) {\r\n              console.log(placeHolderArray);\r\n              setArticlesMain([...placeHolderArray]);\r\n            }\r\n          }\r\n        });\r\n        // fetch(\r\n        //   `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${articlePaths[i]}.json`\r\n        // )\r\n        //   .then((response) => response.json())\r\n        //   .then((data) => {\r\n        //     console.log(data);\r\n        //     placeHolderArray.push(JSON.parse(JSON.stringify(data)));\r\n        //     const objEntries = Object.entries(articleColors);\r\n        //     // for (let j = 0; j < objEntries.length; j++) {\r\n        //     //   if (\r\n        //     //     objEntries[j][0] === data.category.toLowerCase() &&\r\n        //     //     placeHolderArray[i]\r\n        //     //   ) {\r\n        //     //     placeHolderArray[i].subTitleClr = objEntries[j][1];\r\n        //     //     const titleSplit = data.title.split(\" \");\r\n        //     //     let titleSplit2 = [];\r\n        //     //     let titleSplit3;\r\n        //     //     console.log(titleSplit);\r\n        //     //     for (let k = 0; k < titleSplit.length; k++) {\r\n        //     //       titleSplit2.push(titleSplit[k].toLowerCase);\r\n        //     //     }\r\n        //     //     titleSplit3 = titleSplit2.join(\"-\");\r\n        //     //     titleSplit3 = titleSplit3\r\n        //     //       .split(\",\")\r\n        //     //       .join(\"\")\r\n        //     //       .split(\" \")\r\n        //     //       .join(\"-\");\r\n        //     //     console.log(titleSplit2);\r\n        //     //     placeHolderArray[\r\n        //     //       i\r\n        //     //     ].linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n        //     //   }\r\n        //     // }\r\n        //     // for (let key in articleColors) {\r\n        //     //   if (\r\n        //     //     key === data.category.toLowerCase() &&\r\n        //     //     placeHolderArray[i]\r\n        //     //   ) {\r\n        //     //     placeHolderArray[i].subTitleClr = articleColors[key];\r\n        //     //     const titleSplit = data.title.split(\" \");\r\n        //     //     let titleSplit2 = [];\r\n        //     //     let titleSplit3;\r\n        //     //     console.log(titleSplit);\r\n        //     //     titleSplit.forEach((split) => {\r\n        //     //       titleSplit2.push(split.toLowerCase());\r\n        //     //     });\r\n        //     //     titleSplit3 = titleSplit2.join(\"-\");\r\n        //     //     titleSplit3 = titleSplit3\r\n        //     //       .split(\",\")\r\n        //     //       .join(\"\")\r\n        //     //       .split(\" \")\r\n        //     //       .join(\"-\");\r\n        //     //     console.log(titleSplit2);\r\n        //     //     placeHolderArray[\r\n        //     //       i\r\n        //     //     ].linkPath = `/${data.category}/${data.subCategory}/${titleSplit3}/${data.id}`;\r\n        //     //   }\r\n        //     // }\r\n        //     // if (placeHolderArray[i]) {\r\n        //     //   placeHolderArray[i].timeDiff = timeDifference(data.date);\r\n        //     //   // if (\r\n        //     //   //   placeHolderArray[i].comments.length === 1 &&\r\n        //     //   //   placeHolderArray[i].comments[0] === ''\r\n        //     //   // ) {\r\n        //     //   //   placeHolderArray[i].comments[0] = 'dasdsa';\r\n        //     //   // }\r\n        //     // }\r\n        //     console.log(placeHolderArray[i]);\r\n        //     if (\r\n        //       i === articlePaths.length - 1 &&\r\n        //       placeHolderArray.length === articlePaths.length\r\n        //     ) {\r\n        //       console.log(placeHolderArray);\r\n        //       setArticlesMain([...placeHolderArray]);\r\n        //     }\r\n        //   });\r\n        // }\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(articlesMain);\r\n  }, [articlesMain]);\r\n\r\n  return (\r\n    <div id={s.homeMain}>\r\n      <div id={s.main}>\r\n        {articlesMain.length > 1 &&\r\n          articlesMain.map((article, i) => {\r\n            if (i !== 1) {\r\n              return (\r\n                <div className={s.mainBox} key={uuid()}>\r\n                  <div className={s.mainBoxImg}>\r\n                    <Link\r\n                      to={{\r\n                        pathname: encodeURI(article.linkPath), //encodeuri problem with % char\r\n                        state: { articleData: article },\r\n                      }}\r\n                    >\r\n                      <img src={article.imageText[0][0]} alt=\"\" />\r\n                      {article.images.length > 1 && (\r\n                        <i class=\"far fa-images\"></i>\r\n                      )}\r\n                    </Link>\r\n                  </div>\r\n                  <div className={s.mainBoxHeader}>\r\n                    <h3 style={{ color: article.subTitleClr }}>\r\n                      {article.subTitle}\r\n                    </h3>\r\n                    <h3>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(article.linkPath),\r\n                          state: { articleData: article },\r\n                        }}\r\n                      >\r\n                        {article.title}\r\n                      </Link>\r\n                    </h3>\r\n                  </div>\r\n                  <div className={s.mainBoxFooter}>\r\n                    <span>{article.timeDiff}</span>\r\n                    <div className={s.mainBoxFooterBundle}>\r\n                      <span>\r\n                        <i class=\"fas fa-comments\"></i>\r\n                        {article.comments ? getComLength(article.comments) : 0}\r\n                      </span>\r\n                      <span>\r\n                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                        {article.shares.length === 1 && article.shares[0] === \"\"\r\n                          ? 0\r\n                          : Object.keys(article.shares).length}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            } else {\r\n              return (\r\n                <div className={s.mainBoxBig} key={uuid()}>\r\n                  <div className={s.mainBoxImg}>\r\n                    <Link\r\n                      to={{\r\n                        pathname: encodeURI(article.linkPath),\r\n                        state: { articleData: article },\r\n                      }}\r\n                    >\r\n                      <img src={article.imageText[0][0]} alt=\"\" />\r\n                      {article.images.length > 1 && (\r\n                        <i class=\"far fa-images\"></i>\r\n                      )}\r\n                    </Link>\r\n                  </div>\r\n                  <div className={s.mainBoxHeader}>\r\n                    <h3>{article.subTitle}</h3>\r\n                    <h3>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(article.linkPath),\r\n                          state: { articleData: article },\r\n                        }}\r\n                      >\r\n                        {article.title}\r\n                      </Link>\r\n                    </h3>\r\n                  </div>\r\n                  <div className={s.mainBoxFooter}>\r\n                    <span>{article.timeDiff}</span>\r\n                    <div className={s.mainBoxFooterBundle}>\r\n                      <span>\r\n                        <i class=\"fas fa-comments\"></i>\r\n                        {article.comments ? getComLength(article.comments) : 0}\r\n                      </span>\r\n                      <span>\r\n                        <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n                        {article.shares.length === 1 && article.shares[0] === \"\"\r\n                          ? 0\r\n                          : Object.keys(article.shares).length}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n          })}\r\n      </div>\r\n      <HomeMainSub route={route} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomeMain;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"../../firebase\";\r\nimport { subcategories } from \"../AdminPanel/AddArticle\";\r\nimport {\r\n  articleColors,\r\n  timeDifference,\r\n} from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { getComLengthIfObject } from \"../comment/Comment\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport s from \"./HomeSub.module.css\";\r\n\r\nconst HomeSub = ({ route }) => {\r\n  const [articles, setArticles] = useState([]);\r\n  const [promos, setPromos] = useState([]);\r\n  useEffect(() => {\r\n    if (route === \"Poƒçetna\") {\r\n      const dbRefPromo = db.ref(\"articles/Promo\");\r\n      dbRefPromo.once(\"value\", (snap) => {\r\n        console.log(snap.val());\r\n        const data = snap.val();\r\n        let build = [];\r\n        for (let key in data) {\r\n          build = build.concat(Object.values(data[key]).reverse().slice(0, 20));\r\n        }\r\n        build.sort((a, b) => {\r\n          if (new Date(a.date) - new Date(b.date) > 0) {\r\n            return -1;\r\n          } else if (new Date(a.date) - new Date(b.date) < 0) {\r\n            return 1;\r\n          } else {\r\n            return 0;\r\n          }\r\n        });\r\n        build.splice(20);\r\n        setPromos(build);\r\n        console.log(build);\r\n      });\r\n    }\r\n    fetch(\r\n      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/viewContent/Sporedni sadr≈æaj/${route}.json`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        let newArr = [];\r\n        let newObj = {};\r\n        for (let key in data) {\r\n          if (route === \"Magazin\") {\r\n            if (key === \"Film\") {\r\n              newObj[\"Film/TV\"] = Object.values(data[key][\"TV\"])[0];\r\n            } else {\r\n              newObj[key] = Object.values(data[key])[0];\r\n            }\r\n          } else {\r\n            newObj[key] = Object.values(data[key])[0];\r\n          }\r\n        }\r\n        newArr.push({ ...newObj });\r\n        console.log(newArr);\r\n        const promises = [];\r\n        for (let key in newArr[0]) {\r\n          newArr[0][key].forEach((item) => {\r\n            promises.push(\r\n              fetch(\r\n                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${item[1]}/-${item[0]}.json`\r\n              ).then((res) => res.json())\r\n            );\r\n          });\r\n        }\r\n        const promised = Promise.all(promises);\r\n        promised.then((data) => {\r\n          console.log(data);\r\n          const final = [];\r\n          const fin2 = [];\r\n          let num = 0;\r\n          for (let key in newArr[0]) {\r\n            final.push({\r\n              category: key,\r\n              data: data.slice(num, num + newArr[0][key].length),\r\n            });\r\n            num = num + newArr[0][key].length;\r\n          }\r\n          subcategories[route.toLowerCase()].forEach((sub) => {\r\n            final.forEach((sub2) => {\r\n              if (sub2.category === sub) {\r\n                fin2.push(sub2);\r\n              }\r\n            });\r\n          });\r\n          console.log(fin2);\r\n          setArticles(fin2);\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(articles);\r\n  }, [articles]);\r\n\r\n  return (\r\n    <>\r\n      {articles.length\r\n        ? articles.map((art) => (\r\n            <div id={s.sub} key={uuid()}>\r\n              <div id={s.subBodyHeader}>\r\n                <span\r\n                  style={{\r\n                    backgroundColor: `${\r\n                      clrs[\r\n                        route !== \"Poƒçetna\"\r\n                          ? route.toLowerCase()\r\n                          : art.category.toLowerCase()\r\n                      ]\r\n                    }`,\r\n                  }}\r\n                ></span>\r\n                <h3>{art.category}</h3>\r\n              </div>\r\n              <div\r\n                id={s.subBody}\r\n                style={\r\n                  art.data.length === 4 ? { gridTemplateColumns: \"1fr\" } : null\r\n                }\r\n              >\r\n                <div id={s.subBodyLeft}>\r\n                  {art.data.map((artItem, i) => {\r\n                    if (i < 4) {\r\n                      return (\r\n                        <div className={s.subBodyItem} key={uuid()}>\r\n                          <div\r\n                            className={`${s.itemImg} ${\r\n                              art.data.length === 4 ? s.itemImgFour : null\r\n                            }`}\r\n                          >\r\n                            <Link\r\n                              to={{\r\n                                pathname: encodeURI(\r\n                                  `/${artItem.category}/${\r\n                                    artItem.subCategory\r\n                                  }/${splitTitle(artItem.title)}/${artItem.id}`\r\n                                ),\r\n                                state: { articleData: artItem },\r\n                              }}\r\n                            >\r\n                              <img src={artItem.imageText[0][0]} />\r\n                              {artItem.images.length > 1 && (\r\n                                <i class=\"far fa-images\"></i>\r\n                              )}\r\n                            </Link>\r\n                          </div>\r\n                          <div className={s.itemText}>\r\n                            <h3\r\n                              style={{\r\n                                color:\r\n                                  articleColors[\r\n                                    route !== \"Poƒçetna\"\r\n                                      ? route.toLowerCase()\r\n                                      : art.category.toLowerCase()\r\n                                  ],\r\n                              }}\r\n                            >\r\n                              {artItem.subTitle}\r\n                            </h3>\r\n                            <h3>\r\n                              <Link\r\n                                to={{\r\n                                  pathname: encodeURI(\r\n                                    `/${artItem.category}/${\r\n                                      artItem.subCategory\r\n                                    }/${splitTitle(artItem.title)}/${\r\n                                      artItem.id\r\n                                    }`\r\n                                  ),\r\n                                  state: { articleData: artItem },\r\n                                }}\r\n                              >\r\n                                {artItem.title}\r\n                              </Link>\r\n                            </h3>\r\n                          </div>\r\n                          <div className={s.itemBundle}>\r\n                            <span>{timeDifference(artItem.date)}</span>\r\n                            <div className={s.itemBundleR}>\r\n                              <span>\r\n                                <i class=\"fas fa-comments\"></i>\r\n                                {artItem.comments\r\n                                  ? getComLengthIfObject(artItem.comments)\r\n                                  : 0}\r\n                              </span>\r\n                              <span>\r\n                                <i class=\"fas fa-share-alt\"></i>\r\n                                {artItem.shares.constructor === Object\r\n                                  ? Object.keys(artItem.shares).length\r\n                                  : 0}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    }\r\n                  })}\r\n                </div>\r\n                {art.data.length > 4 ? (\r\n                  <div className={s.subBodyItemsBundle}>\r\n                    {art.data.map((artItem, i) => {\r\n                      if (i >= 4) {\r\n                        return (\r\n                          <div className={s.subBodyBundleItem} key={uuid()}>\r\n                            <div className={s.itemText}>\r\n                              <h3\r\n                                style={{\r\n                                  color:\r\n                                    articleColors[art.category.toLowerCase()],\r\n                                }}\r\n                              >\r\n                                {artItem.subTitle}\r\n                              </h3>\r\n                              <h3>\r\n                                <Link\r\n                                  to={{\r\n                                    pathname: encodeURI(\r\n                                      `/${artItem.category}/${\r\n                                        artItem.subCategory\r\n                                      }/${splitTitle(artItem.title)}/${\r\n                                        artItem.id\r\n                                      }`\r\n                                    ),\r\n                                    state: { articleData: artItem },\r\n                                  }}\r\n                                >\r\n                                  {artItem.title}\r\n                                </Link>\r\n                              </h3>\r\n                            </div>\r\n                            <div className={s.itemBundle}>\r\n                              <span>{timeDifference(artItem.date)}</span>\r\n                              <div className={s.itemBundleRight}>\r\n                                <span>\r\n                                  <i class=\"fas fa-comments\"></i>\r\n                                  {artItem.comments\r\n                                    ? getComLengthIfObject(artItem.comments)\r\n                                    : 0}\r\n                                </span>\r\n                                <span>\r\n                                  <i class=\"fas fa-share-alt\"></i>\r\n                                  {artItem.shares.constructor === Object\r\n                                    ? Object.keys(artItem.shares).length\r\n                                    : 0}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      }\r\n                    })}\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          ))\r\n        : null}\r\n      {promos.length ? (\r\n        <div id={s.promoCnt}>\r\n          <div id={s.promoHeader}>\r\n            <span></span>\r\n            <h3>Promo</h3>\r\n          </div>\r\n          <div id={s.promoBody}>\r\n            {promos.map((promo, i) => {\r\n              return (\r\n                <div className={s.subBodyItem} key={uuid()}>\r\n                  {i < 4 ? (\r\n                    <div className={`${s.itemImg} ${s.itemImgFour}`}>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(\r\n                            `/${promo.category}/${\r\n                              promo.subCategory\r\n                            }/${splitTitle(promo.title)}/${promo.id}`\r\n                          ),\r\n                          state: { articleData: promo },\r\n                        }}\r\n                      >\r\n                        <img src={promo.imageText[0][0]} />\r\n                        {promo.images.length > 1 && (\r\n                          <i class=\"far fa-images\"></i>\r\n                        )}\r\n                      </Link>\r\n                    </div>\r\n                  ) : null}\r\n                  <div className={s.itemText}>\r\n                    <h3\r\n                      style={{\r\n                        color: articleColors[promo.category.toLowerCase()],\r\n                      }}\r\n                    >\r\n                      {promo.subTitle}\r\n                    </h3>\r\n                    <h3>\r\n                      <Link\r\n                        to={{\r\n                          pathname: encodeURI(\r\n                            `/${promo.category}/${\r\n                              promo.subCategory\r\n                            }/${splitTitle(promo.title)}/${promo.id}`\r\n                          ),\r\n                          state: { articleData: promo },\r\n                        }}\r\n                      >\r\n                        {promo.title}\r\n                      </Link>\r\n                    </h3>\r\n                  </div>\r\n                  <div className={s.itemBundle}>\r\n                    <span>{timeDifference(promo.date)}</span>\r\n                    <div className={s.itemBundleR}>\r\n                      <span>\r\n                        <i class=\"fas fa-comments\"></i>\r\n                        {promo.comments\r\n                          ? getComLengthIfObject(promo.comments)\r\n                          : 0}\r\n                      </span>\r\n                      <span>\r\n                        <i class=\"fas fa-share-alt\"></i>\r\n                        {promo.shares.constructor === Object\r\n                          ? Object.keys(promo.shares).length\r\n                          : 0}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomeSub;\r\n","import React, { useEffect } from \"react\";\r\nimport HomeMain from \"../components/HomeMain/HomeMain\";\r\nimport HomeSub from \"../components/HomeSub/HomeSub\";\r\nimport { v1 as uuid } from \"uuid\";\r\n\r\nconst Home = ({ route }) => {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  });\r\n  return (\r\n    <div key={uuid()}>\r\n      <HomeMain route={route} />\r\n      <HomeSub route={route} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport s from \"./UserComment.module.css\";\r\n\r\nexport const reload = () => {\r\n  window.location.reload();\r\n};\r\n\r\nconst UserComment = (props) => {\r\n  useEffect(() => {\r\n    // console.log(props.commentData[Object.keys(props.commentData)].commentId);\r\n    console.log(props);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={s.commentContainer}>\r\n      <div className={s.commentHeader}>\r\n        <div className={s.commentHeaderFirst}>\r\n          <i\r\n            class=\"fas fa-user\"\r\n            style={{\r\n              backgroundColor: `#${props.commentData.avatarColor}`,\r\n              color: \"#fff\",\r\n              padding: \"1.5rem\",\r\n              borderRadius: \".3rem\",\r\n            }}\r\n          ></i>\r\n        </div>\r\n        <div className={s.commentHeaderSecond}>\r\n          {/* <h4>gooUser1621584554</h4> */}\r\n          {/* <h4>{props.commentData[Object.keys(props.commentData)].commentId}</h4> */}\r\n          <h4 onClick={reload}>{props.commentData.userName}</h4>\r\n          <p>\r\n            <Link\r\n              to={{\r\n                pathname: `/komentar/${props.commentData.commentId}`,\r\n                state: {\r\n                  articleLink: props.commentData.articlePath,\r\n                  commentId: props.commentData.commentId,\r\n                  parentCommentId: props.commentData.parentCommentId,\r\n                },\r\n                search: `?${JSON.stringify({\r\n                  articleLink: props.commentData.articlePath,\r\n                  commentId: props.commentData.commentId,\r\n                  parentCommentId: props.commentData.parentCommentId,\r\n                })}`,\r\n              }}\r\n            >{`prije ${timeDifference(props.commentData.date)}`}</Link>\r\n          </p>\r\n          {/* <p>{`prije ${timeDifference(props.commentData.date)}`}</p> */}\r\n        </div>\r\n      </div>\r\n      <div className={s.commentBody}>\r\n        <p>{props.commentData.comment}</p>\r\n      </div>\r\n      <div className={s.commentFooter}>\r\n        <div className={s.commentFooterF}>\r\n          <span className={s.like}>\r\n            <i class=\"fas fa-long-arrow-alt-up\"></i>{\" \"}\r\n            {props.commentData.commentLikes\r\n              ? Object.keys(props.commentData.commentLikes).length\r\n              : 0}\r\n          </span>\r\n          <span className={s.dislike}>\r\n            <i class=\"fas fa-long-arrow-alt-down\"></i>{\" \"}\r\n            {props.commentData.commentDislikes\r\n              ? Object.keys(props.commentData.commentDislikes).length\r\n              : 0}\r\n          </span>\r\n        </div>\r\n        <div>\r\n          <span\r\n            className={s.report}\r\n            onClick={() =>\r\n              props.handleReport({\r\n                commentId: props.commentData.commentId,\r\n                user: props.commentData.userName,\r\n                comment: props.commentData.comment,\r\n                search: `?${JSON.stringify({\r\n                  comLink: `${props.commentData.articlePath}/comments/${\r\n                    props.commentData.parentCommentId\r\n                      ? props.commentData.parentCommentId\r\n                      : props.commentData.commentId\r\n                  }${\r\n                    props.commentData.parentCommentId\r\n                      ? \"/replies/\" + props.commentData.commentId\r\n                      : \"\"\r\n                  }`,\r\n                  commentId: props.commentData.commentId,\r\n                  parentCommentId: props.commentData.parentCommentId\r\n                    ? props.commentData.parentCommentId\r\n                    : undefined,\r\n                })}`,\r\n              })\r\n            }\r\n          >\r\n            <i class=\"far fa-flag\"></i> <p>Prijavi</p>\r\n          </span>\r\n          <span className={s.reply}>\r\n            <i class=\"fas fa-pen\"></i>\r\n            <p>Odgovori</p>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserComment;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoginContext from \"../../context\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport CommentShow from \"../comment/CommentShow\";\r\nimport UserComment from \"../UserComment/UserComment\";\r\nimport s from \"./UserInfo.module.css\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport ReportComment from \"../comment/reportComment/ReportComment\";\r\n\r\nconst UserConfig = () => {\r\n  const [uData, setUData] = useState({});\r\n  const ctx = useContext(LoginContext);\r\n  const [showMore, setShowMore] = useState(false);\r\n  const [fetching, setFetching] = useState(true);\r\n  const [reportComment, setReportComment] = useState(false);\r\n  const { user } = ctx;\r\n  const logoutHandler = () => {\r\n    ctx.logout();\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (fetching) {\r\n      getData();\r\n    }\r\n  }, [fetching]);\r\n\r\n  useEffect(() => {\r\n    console.log(Object.assign({}, uData.comments));\r\n    if (uData.comments && fetching) {\r\n      console.log(uData.comments);\r\n      const promises = [];\r\n      const spliceArray = [];\r\n      const contentArray = {};\r\n      const currentLength =\r\n        Object.keys(Object.assign({}, uData.comments)).length - 1;\r\n      console.log(currentLength);\r\n      for (let key in uData.comments) {\r\n        const { articlePath } = Object.values(uData.comments[key])[0];\r\n        const { commentId } = Object.values(uData.comments[key])[0];\r\n        const { parentCommentId } = Object.values(uData.comments[key])[0];\r\n        if (articlePath && commentId) {\r\n          spliceArray.push(key);\r\n          contentArray[key] = Object.values(uData.comments[key])[0];\r\n          promises.push(\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${articlePath}/comments/${\r\n                parentCommentId ? \"/\" + parentCommentId : commentId\r\n              }${parentCommentId ? \"/replies/\" + commentId : \"\"}.json`\r\n            ).then((res) => res.json())\r\n          );\r\n        }\r\n      }\r\n      const promisedData = Promise.all(promises);\r\n      promisedData.then((data) => {\r\n        console.log(data);\r\n        console.log(spliceArray);\r\n        console.log(contentArray);\r\n        setFetching(false); //it must be above setData because if we put it below that then once setdata finishes the useeffect won't wait for setfetching to turn to false so it will count as true when the useeffect reruns\r\n        setUData((old) => {\r\n          let oldCpy = { ...old };\r\n          const range = [spliceArray[0], spliceArray[spliceArray.length - 1]];\r\n          console.log(range);\r\n          console.log(uData.comLength - 1 - currentLength - 2);\r\n          console.log(uData.comLength - 1 - currentLength);\r\n          let incr = 0;\r\n          for (let i = +range[0]; i <= +range[1]; i++) {\r\n            oldCpy.comments[i] = { ...data[incr] };\r\n            oldCpy.comments[i] = { ...oldCpy.comments[i], ...contentArray[i] };\r\n            incr++;\r\n          }\r\n          console.log(oldCpy.comments);\r\n          console.log(oldCpy);\r\n          return oldCpy;\r\n        });\r\n        if (uData.comLength - 1 - currentLength - 3 > 0) {\r\n          setShowMore(true);\r\n        } else {\r\n          if (uData.comLength - 1 - currentLength > 0) {\r\n            setShowMore(true);\r\n          } else {\r\n            setShowMore(false);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, [uData]);\r\n\r\n  const getData = () => {\r\n    const userObj = JSON.parse(localStorage.getItem(\"userObj\"));\r\n    if (userObj && !Object.keys(uData).length) {\r\n      setUData({ ...userObj });\r\n    }\r\n    const dbRef = db.ref(\"users\").child(`${userObj.uId}`).child(\"comments\");\r\n    dbRef.child(\"comLength\").once(\"value\", (snap) => {\r\n      const dataLength = snap.val();\r\n      const currentLength = uData.comments ? uData.comments.length - 1 : 0;\r\n      let lessThanZero = false;\r\n      if (dataLength - 1 - currentLength - 3 < 0) {\r\n        lessThanZero = true;\r\n      }\r\n      dbRef\r\n        .orderByKey()\r\n        .startAt(\r\n          `${\r\n            lessThanZero\r\n              ? 0\r\n              : currentLength\r\n              ? dataLength - 1 - currentLength - 3 // -10 so when we add + 9 we dont get the latest fetched item in the ui as the last item here, so we would only fetch 9 new ones and the last one would be a comment that is already showing\r\n              : dataLength - 1 - 2\r\n          }`\r\n        )\r\n        .endAt(\r\n          `${\r\n            currentLength ? dataLength - 1 - currentLength - 1 : dataLength - 1\r\n          }`\r\n        )\r\n        .once(\"value\", (snap) => {\r\n          console.log(snap.val());\r\n          const data = snap.val();\r\n          if (data) {\r\n            const newArr =\r\n              data.constructor === Array\r\n                ? data.filter((n) => n !== undefined && n !== null).reverse()\r\n                : Object.values(data).reverse(); // remove empty fields\r\n            console.log(newArr);\r\n            setUData((old) => {\r\n              let oldCpy = { ...JSON.parse(JSON.stringify(old)) };\r\n              if (oldCpy.comments) {\r\n                let cpy = [...oldCpy.comments];\r\n                oldCpy.comments = [...cpy, ...newArr];\r\n              } else {\r\n                oldCpy.comments = [...newArr];\r\n              }\r\n              if (!oldCpy.comLength) {\r\n                oldCpy.comLength = dataLength;\r\n              }\r\n              console.log(oldCpy);\r\n              return oldCpy;\r\n            });\r\n            // if (dataLength - 1 - currentLength - 3 > 0) {\r\n            //   setShowMore(true);\r\n            // } else {\r\n            //   setShowMore(false);\r\n            // }\r\n            // setFetching(false);\r\n          }\r\n        });\r\n    });\r\n  };\r\n\r\n  const showMoreFn = () => {\r\n    setFetching(true);\r\n    // setShowMore(false); //to hide it for a moment so the data gets pushed down, and it shouldn't be there until we know if we need it again or not\r\n    //fixed with double conditionals in jsx\r\n  };\r\n\r\n  const handleReport = (reportData) => {\r\n    console.log(reportData);\r\n    setReportComment(reportData);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {reportComment && (\r\n        <Overlay navZ={true}>\r\n          <ReportComment\r\n            closeModal={setReportComment}\r\n            reportData={reportComment}\r\n          />\r\n        </Overlay>\r\n      )}\r\n      <div id={s.userInfoContainer}>\r\n        <div id={s.userInfo}>\r\n          <div\r\n            id={s.userInfoF}\r\n            style={{ backgroundColor: `#${ctx.user.avatarColor}` }}\r\n          >\r\n            <i\r\n              class=\"fas fa-user\"\r\n              style={{\r\n                backgroundColor: \"rgba(255, 255, 255, 0.2)\",\r\n                color: \"#fff\",\r\n                padding: \"1rem\",\r\n                borderRadius: \".5rem\",\r\n                fontSize: \"1.3rem\",\r\n              }}\r\n            ></i>\r\n            <h1>{uData.displayName}</h1> (\r\n            <Link to=\"/mojprofil\">uredi profil</Link> |\r\n            <Link onClick={logoutHandler} to=\"/\">\r\n              odjavi se\r\n            </Link>\r\n            )\r\n          </div>\r\n          <div id={s.userData}>\r\n            <div className={s.userDataItem}>\r\n              <h3>Spol</h3>\r\n              <p>{uData.gender}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Boja avatara</h3>\r\n              <p>{uData.avatarColor}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Banovan</h3>\r\n              <p>{uData.banned}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Registrovan</h3>\r\n              <p>{uData.registered}</p>\r\n            </div>\r\n            <div className={s.userDataItem}>\r\n              <h3>Komentari</h3>\r\n              <p>{uData.comLength}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id={s.commentContainer}>\r\n          <div id={s.comments}>\r\n            <h3>Komentari korisnika</h3>\r\n            <div>\r\n              {uData.comments &&\r\n                !fetching &&\r\n                uData.comments.map((comment, i) => (\r\n                  <UserComment\r\n                    key={uuid()}\r\n                    commentData={comment}\r\n                    index={i}\r\n                    handleReport={handleReport}\r\n                  />\r\n                ))}\r\n              {uData.comments &&\r\n                fetching &&\r\n                uData.comments.map((comment, i) =>\r\n                  comment.avatarColor ? (\r\n                    <UserComment\r\n                      key={uuid()}\r\n                      commentData={comment}\r\n                      index={i}\r\n                      handleReport={handleReport}\r\n                    />\r\n                  ) : null\r\n                )}\r\n              {showMore && fetching ? (\r\n                <CommentShow loading={fetching} onClick={showMoreFn} />\r\n              ) : null}\r\n              {showMore && !fetching ? (\r\n                <CommentShow loading={fetching} onClick={showMoreFn} />\r\n              ) : null}\r\n              {/* for clean rendering, there is flickering otherwise and content jumps */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserConfig;\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { auth } from \"../../firebase\";\r\nimport LoginContext from \"../../context\";\r\nimport firebase from \"../../firebase\";\r\nimport s from \"./LoginForm.module.css\";\r\nconst gooProvider = new firebase.auth.GoogleAuthProvider();\r\nconst fbProvider = new firebase.auth.FacebookAuthProvider();\r\ngooProvider.addScope(\"https://www.googleapis.com/auth/contacts.readonly\");\r\nfbProvider.addScope(\"user_birthday\");\r\n\r\nconst LoginForm = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const [uId, setUid] = useState();\r\n  const [errMsg, setErrMsg] = useState(null);\r\n  const [forgotten, setForgotten] = useState(false);\r\n  const history = useHistory();\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n  const rememberMe = useRef();\r\n  const user = auth.currentUser;\r\n  const newPassword = \"jedandvatri\";\r\n  const newEmail = \"denis5396@gmail.com\";\r\n\r\n  const API_KEY = \"AIzaSyDDpLMfCuKs4jQJwf_5xsNQ5VuSBPZtIDk\";\r\n\r\n  const handleError = (err) => {\r\n    console.log(err);\r\n  };\r\n\r\n  const submitForm = async (e) => {\r\n    e.preventDefault();\r\n    let url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${API_KEY}`;\r\n    let expirationTime;\r\n    console.log(emailRef.current.value);\r\n    let userNameLoginEmail = undefined;\r\n    if (!emailRef.current.value.includes(\"@\")) {\r\n      const res = await fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${emailRef.current.value}.json`\r\n      );\r\n      userNameLoginEmail = await res.json();\r\n      console.log(userNameLoginEmail);\r\n      if (!userNameLoginEmail) {\r\n        setErrMsg(\"Korisnicko ime ne postoji.\");\r\n        return;\r\n      }\r\n    }\r\n    await fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        email: userNameLoginEmail || emailRef.current.value,\r\n        password: passwordRef.current.value,\r\n        returnSecureToken: true,\r\n      }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        if (data) {\r\n          if (rememberMe.current.checked) {\r\n            firebase\r\n              .auth()\r\n              .setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n            localStorage.setItem(\"rememberMe\", true);\r\n          } else if (!rememberMe.current.checked) {\r\n            firebase\r\n              .auth()\r\n              .setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n          }\r\n          expirationTime = new Date(\r\n            new Date().getTime() + +data.expiresIn * 1000\r\n          );\r\n          auth.onAuthStateChanged((user) => {\r\n            if (user) {\r\n              let date = new Date()\r\n                .toJSON()\r\n                .slice(0, 10)\r\n                .split(\"-\")\r\n                .reverse()\r\n                .join(\".\");\r\n              ctx.signUp(user.uid);\r\n              if (!rememberMe.current.checked) {\r\n                ctx.login(data.idToken, expirationTime.toISOString());\r\n              }\r\n              console.log(data);\r\n              history.push(\"/\");\r\n            }\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n\r\n    auth\r\n      .signInWithEmailAndPassword(\r\n        userNameLoginEmail || emailRef.current.value,\r\n        passwordRef.current.value\r\n      )\r\n      .then((userCredential) => {\r\n        const uId = userCredential.user.providerData[0].uid.slice(0, 10);\r\n        console.log(userCredential.user);\r\n        console.log(userCredential.user.refreshToken);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.code.includes(\"user-not-found\")) {\r\n          setErrMsg(\"Email adresa ne odgovara nijednom profilu.\");\r\n        } else if (err.code.includes(\"password\")) {\r\n          setErrMsg(\"Lozinka je neispravna.\");\r\n        } else if (err.code.includes(\"too-many-requests\")) {\r\n          setErrMsg(\r\n            \"Previse puta ste unijeli pogresne podatke, tako da pristup ovom profilu je privremeno zabranjen, molimo vas pokusajte kasnije, ili resetujte lozinku.\"\r\n          );\r\n        }\r\n      });\r\n\r\n    // if (user) {\r\n    //   alert('y');\r\n    //   user.updateEmail(newEmail).then(() => {\r\n    //     console.log('update successful');\r\n    //   });\r\n    // }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log(user);\r\n    }\r\n  }, [user]);\r\n\r\n  const login = (provider) => {\r\n    provider = provider === \"fb\" ? fbProvider : gooProvider;\r\n    // auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(\r\n    if (!rememberMe.current.checked) {\r\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n    } else if (rememberMe.current.checked) {\r\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\r\n      localStorage.setItem(\"rememberMe\", true);\r\n      // ctx.setRememberMe(true);\r\n    }\r\n    auth.signInWithPopup(provider).then((result) => {\r\n      let credential = result.credential;\r\n      console.log(credential);\r\n      let providerName = credential.signInMethod.includes(\"google\")\r\n        ? \"gooUser\"\r\n        : \"fbUser\";\r\n      auth.onAuthStateChanged((user) => {\r\n        if (user) {\r\n          console.log(user);\r\n          providerName = providerName.concat(\r\n            user.providerData[0].uid.slice(0, 10)\r\n          );\r\n          let date = new Date()\r\n            .toJSON()\r\n            .slice(0, 10)\r\n            .split(\"-\")\r\n            .reverse()\r\n            .join(\".\");\r\n          ctx.signUp(user.uid, providerName, date); //check if acc is created already or not if not push acc information to db, otherwise take data and put it in ls\r\n          const expirationTime = new Date(new Date().getTime() + 3600 * 1000);\r\n          if (!localStorage.getItem(\"rememberMe\")) {\r\n            ctx.login(user.refreshToken, expirationTime.toISOString()); //set ls with token and exp time\r\n          }\r\n          history.push(\"/\");\r\n        }\r\n      });\r\n\r\n      // var user = result.user;\r\n      console.log(user);\r\n      // if (user) {\r\n      //   user\r\n      //     .updatePassword('jedandvatri')\r\n      //     .then(() => {\r\n      //       // Update successful.\r\n      //       console.log('update successful');\r\n      //     })\r\n      //     .catch((error) => {\r\n      //       // An error ocurred\r\n      //       // ...\r\n      //     });\r\n      // }\r\n      // if (user) {\r\n      //   user.updateEmail(newEmail).then(() => {\r\n      //     console.log('update successful');\r\n      //   });\r\n      // }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Prijava korisnika</h1>\r\n      <p>\r\n        Na portal se mo≈æe≈° prijaviti ili registrovati putem svog Facebook <br />\r\n        ili Google raƒçuna.\r\n      </p>\r\n      <form id={s.loginForm} onSubmit={submitForm}>\r\n        {errMsg && (\r\n          <div id={s.error}>\r\n            <h3>{errMsg}</h3>\r\n          </div>\r\n        )}\r\n        <div id={s.fbgoo}>\r\n          <div id={s.fb} onClick={() => login(\"fb\")}>\r\n            <i class=\"fab fa-facebook\"></i>\r\n          </div>\r\n          <div id={s.goo} onClick={() => login(\"goo\")}>\r\n            <img src={require(\"../../assets/img/gooicon.png\").default} />\r\n          </div>\r\n        </div>\r\n        <div id={s.nastavite}>\r\n          <span></span>\r\n          ili nastavite sa\r\n          <span></span>\r\n        </div>\r\n        <div id={s.username}>\r\n          <label htmlFor=\"username\">Korisniƒçko ime ili e-mail adresa</label>\r\n          <input ref={emailRef} type=\"text\" required id=\"username\" />\r\n        </div>\r\n        <div id={s.password}>\r\n          <label htmlFor=\"password\">Lozinka</label>\r\n          <input ref={passwordRef} type=\"password\" id=\"password\" />\r\n        </div>\r\n        <div id={s.remember}>\r\n          <label>\r\n            <input type=\"checkbox\" ref={rememberMe} />\r\n            <span className={s.checkmark} />\r\n            Zapamti me\r\n          </label>\r\n          <Link to=\"/resetpass\">Zaboravljena lozinka?</Link>\r\n        </div>\r\n        <button type=\"submit\">Prijavi se</button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport LoginContext from '../../context';\r\nimport { auth } from '../../firebase';\r\nimport UserInfo from '../UserInfo/UserInfo';\r\nimport s from './Login.module.css';\r\nimport LoginForm from './LoginForm';\r\n\r\nconst LoginP = (props) => {\r\n  const ctx = useContext(LoginContext);\r\n  const user = auth.currentUser;\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    // if (ctx.user.displayName) {\r\n    //   history.replace(`/profil/${ctx.user.displayName}`);\r\n    // }\r\n  }, []);\r\n\r\n  return (\r\n    <div id={!ctx.isLoggedIn ? s.border : s.borderTwo}>\r\n      {/* {!ctx.user.displayName && <LoginForm />}\r\n      {ctx.user.displayName && <UserInfo />} */}\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginP;\r\n","import React from 'react';\r\nimport LoginP from '../components/Login/Login';\r\nimport Nav from '../components/Nav/Nav';\r\n\r\nconst Login = (props) => {\r\n  return (\r\n    <>\r\n      <Nav />\r\n      <LoginP>{props.children}</LoginP>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport s from './Footer.module.css';\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <div id={s.footer}>\r\n      <nav>\r\n        <ul>\r\n          <li>Poƒçetna</li>\r\n          <li>Impressum</li>\r\n          <li>Komentari</li>\r\n          <li>Kontakt</li>\r\n          <li>Marketing</li>\r\n          <li>O nama</li>\r\n          <li>Privatnost</li>\r\n          <li>RSS</li>\r\n        </ul>\r\n      </nav>\r\n      <div id={s.followUs}>\r\n        Pratite nas <i class=\"fab fa-facebook\"></i>\r\n        <i class=\"fab fa-twitter\"></i>\r\n        <i class=\"fab fa-instagram\"></i>\r\n        <i class=\"fab fa-youtube\"></i>\r\n        <i class=\"fab fa-linkedin\"></i>\r\n      </div>\r\n      <div id={s.cpr}>\r\n        Copyright 2000-2021 InvolSoft d.o.o. Sarajevo. ISSN 2143-3271. Sva prava\r\n        zadr≈æana. Zabranjeno preuzimanje sadr≈æaja bez dozvole izdavaƒça.\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport LoginContext from \"../../context\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport s from \"./EditProfile.module.css\";\r\n\r\nconst EditProfile = () => {\r\n  const ctx = useContext(LoginContext);\r\n  const [error, setError] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    success: \"\",\r\n  });\r\n  const username = useRef();\r\n  const avatarColor = useRef();\r\n  const password = useRef();\r\n  const repeatPassword = useRef();\r\n  const gender = useRef();\r\n\r\n  const [uData, setUData] = useState({\r\n    username: \"\",\r\n    avatarColor: \"\",\r\n    password: \"\",\r\n    gender: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    let clrUser = ctx.user.avatarColor;\r\n\r\n    for (let i = 0; i < avatarColor.current.children.length; i++) {\r\n      let temp = window\r\n        .getComputedStyle(avatarColor.current.children[i])\r\n        .getPropertyValue(\"background-color\")\r\n        .match(/(\\d+)/g);\r\n      temp = rgbToHex(+temp[0], +temp[1], +temp[2]);\r\n      if (temp === clrUser) {\r\n        avatarColor.current.children[i].children[0].click();\r\n      }\r\n    }\r\n    if (ctx.user.gender === \"≈Ωenski\") {\r\n      gender.current.children[1].children[0].click();\r\n    }\r\n  }, []);\r\n\r\n  const rgbToHex = (r, g, b) =>\r\n    [r, g, b].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\");\r\n  //  '#' + [r, g, b].map((x) => x.toString(16).padStart(2, '0')).join('');\r\n\r\n  const saveInfo = async () => {\r\n    setError((old) => {\r\n      return { ...old, success: \"\" };\r\n    });\r\n    let usernameVal =\r\n      username.current.value.trim().length >= 4 &&\r\n      username.current.value.trim().length <= 20\r\n        ? username.current.value.trim()\r\n        : \"\";\r\n    const ok =\r\n      username.current.value.trim().length >= 4 &&\r\n      username.current.value.trim().length <= 20;\r\n    console.log(ok);\r\n    console.log(usernameVal);\r\n    let passwordNum;\r\n    if (password.current.value.trim().length > 0) {\r\n      passwordNum = /\\d/.test(password.current.value.trim());\r\n    }\r\n    let check = true;\r\n    let clr;\r\n    let genderVal;\r\n    let passwordVal;\r\n    for (let i = 0; i < avatarColor.current.children.length; i++) {\r\n      if (avatarColor.current.children[i].children[0].checked) {\r\n        clr = window\r\n          .getComputedStyle(avatarColor.current.children[i])\r\n          .getPropertyValue(\"background-color\");\r\n        // console.log(rgbToHex(clr));\r\n        clr = clr.match(/(\\d+)/g);\r\n        clr = rgbToHex(+clr[0], +clr[1], +clr[2]);\r\n      }\r\n    }\r\n    for (let i = 0; i < gender.current.children.length; i++) {\r\n      if (gender.current.children[i].children[0].checked) {\r\n        genderVal = gender.current.children[i].children[1].textContent;\r\n      }\r\n    }\r\n    if (\r\n      password.current.value.trim().length >= 6 &&\r\n      repeatPassword.current.value.trim() === password.current.value.trim() &&\r\n      passwordNum\r\n    ) {\r\n      passwordVal = password.current.value;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length >= 6 &&\r\n      repeatPassword.current.value.trim() !== password.current.value.trim() &&\r\n      repeatPassword.current.value.trim().length > 0 &&\r\n      passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Lozinke se ne podudaraju.\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length >= 6 &&\r\n      repeatPassword.current.value.trim().length === 0 &&\r\n      passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Ponovite lozinku.\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length < 6 &&\r\n      password.current.value.trim().length > 0 &&\r\n      passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Lozinka mora imati minimalno 6 karaktera.\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length < 6 &&\r\n      password.current.value.trim().length > 0 &&\r\n      !passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password:\r\n            \"Lozinka mora imati minimalno 6 karaktera i barem jedan broj\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length >= 6 &&\r\n      // repeatPassword.current.value.trim() === password.current.value.trim() &&\r\n      !passwordNum\r\n    ) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"Lozinka mora imati minimalno jedan broj\",\r\n        };\r\n      });\r\n    } else if (\r\n      password.current.value.trim().length === 0 &&\r\n      repeatPassword.current.value.trim().length === 0\r\n    ) {\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          password: \"\",\r\n        };\r\n      });\r\n    }\r\n    console.log(clr);\r\n    console.log(usernameVal ? usernameVal : ctx.user.displayName);\r\n    if (usernameVal.includes(\" \") && ok) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username: \"Korisniƒçko ime ne mo≈æe imati razmak, koristite _ ili -\",\r\n        };\r\n      });\r\n    } else if (usernameVal.includes(\" \") && !ok) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username:\r\n            \"Korisniƒçko ime ne mo≈æe imati razmak, koristite _ ili -, i mora imati izmeƒëu 4 i 20 karaktera\",\r\n        };\r\n      });\r\n    } else if (!usernameVal.includes(\" \") && !ok) {\r\n      check = false;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username: \"Korisniƒçko ime mora imati izmeƒëu 4 i 20 karaktera\",\r\n        };\r\n      });\r\n    } else {\r\n      usernameVal = usernameVal ? usernameVal : ctx.user.displayName;\r\n      setError((old) => {\r\n        return {\r\n          ...old,\r\n          username: \"\",\r\n        };\r\n      });\r\n    }\r\n    passwordVal = passwordVal ? passwordVal : \"\";\r\n    genderVal = genderVal ? genderVal : \"\";\r\n    if (check) {\r\n      // setUData({\r\n      //   username: usernameVal ? usernameVal : ctx.user.displayName,\r\n      //   avatarColor: clr ? clr : ctx.user.avatarColor,\r\n      //   password: passwordVal\r\n      //     ? passwordVal\r\n      //     : ctx.user.password\r\n      //     ? ctx.user.password\r\n      //     : \"\",\r\n      //   gender: genderVal ? genderVal : \"\",\r\n      // });\r\n      let oldObjCopy;\r\n      const userNameExists = await checkIfUserNameExists(usernameVal);\r\n      console.log(userNameExists);\r\n      console.log(\"see?\");\r\n      if (userNameExists || usernameVal === ctx.user.displayName) {\r\n        setError((old) => {\r\n          return {\r\n            ...old,\r\n            success: \"Trenutno korisniƒçko ime je zauzeto.\",\r\n          };\r\n        });\r\n        return;\r\n      } else {\r\n        const promises = [\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${usernameVal}.json`,\r\n            {\r\n              method: \"PUT\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n              body: JSON.stringify(auth.currentUser.email),\r\n            }\r\n          ).then((res) => res.json()),\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${ctx.user.displayName}.json`,\r\n            {\r\n              method: \"DELETE\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n            }\r\n          ).then((res) => res.json()),\r\n        ];\r\n        const promisedData = await Promise.all(promises);\r\n        // promisedData.then((data) => console.log(data));\r\n        console.log(promisedData);\r\n      }\r\n      console.log(\"why?\");\r\n      ctx.setUserObj((oldObj) => {\r\n        oldObjCopy = {\r\n          ...oldObj,\r\n          displayName: usernameVal,\r\n          avatarColor: clr ? clr : ctx.user.avatarColor,\r\n          password: passwordVal\r\n            ? passwordVal\r\n            : ctx.user.password\r\n            ? ctx.user.password\r\n            : \"\",\r\n          gender: genderVal,\r\n        };\r\n        return oldObjCopy;\r\n      });\r\n      let keyId;\r\n      auth.onAuthStateChanged((user) => {\r\n        if (user) {\r\n          if (passwordVal) {\r\n            user\r\n              .updatePassword(passwordVal)\r\n              .then(() => {\r\n                // Update successful.\r\n                console.log(\"update successful\");\r\n              })\r\n              .catch((error) => {\r\n                // An error ocurred\r\n                // ...\r\n                console.log(error);\r\n              });\r\n          }\r\n          const dbRef = db.ref(`/users/${user.uid}/userData`);\r\n          dbRef.update({ ...oldObjCopy }).then((res) => {\r\n            setError((old) => {\r\n              return {\r\n                ...old,\r\n                success: \"Uspje≈°no ste editovali profil.\",\r\n              };\r\n            });\r\n          });\r\n          // dbRef.get().then((snapshot) => {\r\n          // if (snapshot.exists) {\r\n          //   console.log(snapshot.val());\r\n          //   const data = snapshot.val();\r\n          //   console.log(user.uid);\r\n          //   for (let key in data) {\r\n          //     console.log(data[key]);\r\n          //     if (data[key].uId === user.uid) {\r\n          //       keyId = key;\r\n          //       console.log(key);\r\n          //       dbRef\r\n          //         .child(`${key}`)\r\n          //         .update({ ...oldObjCopy })\r\n          //         .then((res) => {\r\n          //           setError((old) => {\r\n          //             return {\r\n          //               ...old,\r\n          //               success: 'Uspje≈°no ste editovali profil.',\r\n          //             };\r\n          //           });\r\n          //         });\r\n          //       break;\r\n          //     }\r\n          //   }\r\n          // }\r\n          // });\r\n        }\r\n      });\r\n    }\r\n\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  const checkIfUserNameExists = async (userName) => {\r\n    const res = await fetch(\r\n      `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${userName}.json`\r\n    );\r\n    const data = await res.json();\r\n    console.log(data);\r\n\r\n    return data;\r\n  };\r\n\r\n  useEffect(() => {\r\n    // auth.onAuthStateChanged((user) => {\r\n    //   if (user) {\r\n    //     setUData({ ...uData });\r\n    //   }\r\n    // });\r\n  }, []);\r\n\r\n  return (\r\n    <div id={s.border}>\r\n      <div id={s.editProfileContainer}>\r\n        <div id={s.possibleErrors}>\r\n          {error.success ? (\r\n            <h2>{error.success}</h2>\r\n          ) : (\r\n            <>\r\n              <h2>{error.username.length > 0 ? error.username : \"\"}</h2>\r\n              <h2>{error.password.length > 0 ? error.password : \"\"}</h2>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className={s.editProfileItem}>\r\n          <h2>Editovanje profila</h2>\r\n          <p>Uredite va≈° korisniƒçki profil</p>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Korisniƒçko ime</h3>\r\n          </div>\r\n          <div id={s.username}>\r\n            <div>www.klix.ba/profil/</div>\r\n            <input\r\n              ref={username}\r\n              type=\"text\"\r\n              defaultValue={ctx.user.displayName}\r\n              spellCheck={false}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Boja avatara</h3>\r\n          </div>\r\n          <div id={s.colors} ref={avatarColor}>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n            <div className={s.radioField}>\r\n              <input type=\"radio\" name=\"radiobutton\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Lozinka</h3>\r\n          </div>\r\n          <div>\r\n            <input id={s.password} type=\"password\" ref={password} />\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Ponovi lozinku</h3>\r\n          </div>\r\n          <div>\r\n            <input\r\n              id={s.passwordConfirm}\r\n              type=\"password\"\r\n              ref={repeatPassword}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem} ${s.bundle}`}>\r\n          <div>\r\n            <h3>Spol</h3>\r\n          </div>\r\n          <div id={s.gender} ref={gender}>\r\n            <div>\r\n              <input\r\n                className={s.xd}\r\n                id=\"spol\"\r\n                name=\"spol\"\r\n                type=\"radio\"\r\n                defaultChecked\r\n              />\r\n              <label htmlFor=\"spol\">Mu≈°ki</label>\r\n            </div>\r\n            <div>\r\n              <input\r\n                id=\"spol2\"\r\n                className={s.gender2}\r\n                name=\"spol\"\r\n                type=\"radio\"\r\n              />\r\n              <label htmlFor=\"spol\">≈Ωenski</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`${s.editProfileItem}`}>\r\n          <h2>Napomena</h2>\r\n          <p>\r\n            Na komentarima i drugim servisima portala ƒáe biti prikazano samo\r\n            Va≈°e korisniƒçko ime i spol, dok nijedan drugi podatak neƒáe biti\r\n            javno dostupan.\r\n          </p>\r\n        </div>\r\n        <div id={s.saveBtn}>\r\n          <button onClick={saveInfo}>Spasi</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n","import React from 'react';\r\nimport EditProfile from '../components/EditProfile/EditProfile';\r\n\r\nconst Profile = () => {\r\n  return (\r\n    <>\r\n      <EditProfile />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport AddArticle from './AddArticle';\r\nimport s from './AdminPanelContainer.module.css';\r\nimport Articles from './Articles';\r\n\r\nconst AdminPanelContainer = () => {\r\n  return (\r\n    <div id={s.border}>\r\n      <AddArticle />\r\n      {/* <div id={s.itemContainer}>\r\n        <div id={s.addArticle}>\r\n          <i class=\"fas fa-plus\"></i>\r\n        </div>\r\n        <div id={s.articles}>\r\n          <Articles />\r\n          <Articles /> */}\r\n      {/* <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles />\r\n          <Articles /> */}\r\n      {/* </div> */}\r\n      {/* </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanelContainer;\r\n","import React from 'react';\r\nimport AdminPanelContainer from '../components/AdminPanel/AdminPanelContainer';\r\n\r\nconst AdminPanel = () => {\r\n  return (\r\n    <>\r\n      <AdminPanelContainer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","import React from 'react';\r\nimport ArticleComp from '../components/Article/Article';\r\n\r\nconst Article = () => {\r\n  return <ArticleComp />;\r\n};\r\n\r\nexport default Article;\r\n","import React from 'react';\r\nimport EditArticles from '../components/AdminPanel/EditArticle/EditArticle';\r\n\r\nconst EditArticlesPage = () => {\r\n  return (\r\n    <>\r\n      <EditArticles />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditArticlesPage;\r\n","import React from \"react\";\r\nimport Comment from \"../components/comment/Comment\";\r\n\r\nconst Comments = () => {\r\n  return (\r\n    <div>\r\n      <Comment />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import React from \"react\";\r\nimport s from \"./CommentRules.module.css\";\r\n\r\nconst CommentRules = () => {\r\n  return (\r\n    <div id={s.commentRulesCnt}>\r\n      <div id={s.commentRulesBody}>\r\n        <h1>Pravila i uslovi kori≈°tenja komentara</h1>\r\n        <p>\r\n          Internet portal Klix.ba je najposjeƒáeniji i najrelevantniji internet\r\n          medij u Bosni i Hercegovini koji postoji vi≈°e od 20 godina, a kojeg\r\n          posjeƒáuje veliki broj korisnika iz Bosne i Hercegovine i dijaspore.\r\n          Dok veƒáina korisnika nije registrovana i ne pi≈°e komentare, jedan dio\r\n          korisnika predstavljaju <b>registrovani korisnici</b> portala Klix.ba\r\n          i oni aktivno uƒçestvuju u <b>diskusijama</b> na ƒçlancima kroz\r\n          komentare.\r\n        </p>\r\n        <p>\r\n          Klix.ba ozbiljno shvata problem govora mr≈ænje u komentarima i\r\n          poduzimamo sve mjere kako bismo onemoguƒáili objavljivanje sadr≈æaja\r\n          koji potiƒçe na nasilje ili mr≈ænju. S obzirom da dnevni broj komentara\r\n          mo≈æe biti jako veliki, trenutno je nemoguƒáe sve komentare pregledati u\r\n          stvarnom vremenu i reagovati na one koji kr≈°e pravila i uslove\r\n          kori≈°tenja, pa je moguƒáe da u pojedinim komentarima jo≈° uvijek naiƒëete\r\n          na poneki sadr≈æaj koji predstavlja govor mr≈ænje.\r\n        </p>\r\n        <p>\r\n          Stoga, molimo sve korisnike da koriste{\" \"}\r\n          <b>opciju za prijavu komentara</b>\r\n          koja se nalazi pored svakog komentara (govor mr≈ænje, neprikladan\r\n          rijeƒçnik, off topic, vrijeƒëanje, spam, reklama) i tako nam pomognu\r\n          kako bismo prijavljene komentare prioritetnije pregledali.\r\n          Neprimjerene komentare mo≈æete prijaviti i putem e-maila&nbsp;\r\n          <b>komentari@klix.ba</b>, ≈°to je i naƒçin slu≈æbene ≈æalbe.\r\n        </p>\r\n        <h3>\r\n          Svi korisnici su du≈æni da se pridr≈æavaju sljedeƒáih pravila uslova\r\n          kori≈°tenja:\r\n        </h3>\r\n        <ul>\r\n          <li>\r\n            Komentari odra≈æavaju stavove njihovih autora, a ne nu≈æno i stavove\r\n            uredni≈°tva i novinara internet portala Klix.ba.\r\n          </li>\r\n          <li>\r\n            Molimo korisnike da se suzdr≈æe od vrijeƒëanja, psovanja i vulgarnog\r\n            izra≈æavanja.\r\n          </li>\r\n          <li>\r\n            Komentari koji su agresivni, bezobrazni, uvredljivi po bilo kojoj\r\n            osnovi bit ƒáe uklonjeni. Ne pi≈°ite komentare koji podstiƒçu na\r\n            mr≈ænju. Liƒçni i necivilizirani napadi na bilo koga mogu rezultirati\r\n            potpunom zabranom komentarisanja.\r\n          </li>\r\n          <li>\r\n            Klix.ba zadr≈æava pravo da zabrani komentarisanje na pojedine ƒçlanke.\r\n          </li>\r\n          <li>\r\n            Zbog velikog broja komentara Klix.ba nije du≈æan obrisati sve\r\n            komentare koji kr≈°e pravila.\r\n          </li>\r\n          <li>\r\n            Svaki ƒçitatelj koji koristi govor mr≈ænje mo≈æe biti kriviƒçno gonjen.\r\n          </li>\r\n          <li>\r\n            Klix.ba ima pravo i obavezu na zahtjev zvaniƒçnih organa dostaviti\r\n            sve podatke o korisniku ƒçiji komentari sadr≈æe govor mr≈ænje.\r\n          </li>\r\n          <li>\r\n            Portal Klix.ba zadr≈æava pravo da obri≈°e komentar bez najave i\r\n            obja≈°njenja.\r\n          </li>\r\n          <li>\r\n            Kao ƒçitalac takoƒëer prihvatate moguƒánost da meƒëu komentarima mogu\r\n            biti pronaƒëeni sadr≈æaji koji mogu biti u suprotnosti sa va≈°im\r\n            vjerskim, moralnim i drugim naƒçelima i uvjerenjima. Na takve\r\n            komentare ne odgovarajte neprimjerenim rijeƒçima veƒá ukoliko su\r\n            uvredljivi prijavite ih po gore opisanom modelu.\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentRules;\r\n","import React from \"react\";\r\nimport CommentRules from \"../components/comment/CommentRules\";\r\n\r\nconst CommentRulesPage = () => {\r\n  return (\r\n    <>\r\n      <CommentRules />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CommentRulesPage;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { timeDifference } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { clrs } from \"../ArticleLink/ArticleLink\";\r\nimport { splitTitle } from \"../HomeMain/HomeMain\";\r\nimport { getComLengthIfObject, handleReplyHide } from \"./Comment\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport CommentItem from \"./CommentItem\";\r\nimport s from \"./LinkToComment.module.css\";\r\nimport CommentReply from \"./CommentReply\";\r\nimport CommentShow from \"./CommentShow\";\r\nimport Overlay from \"../Overlay/Overlay\";\r\nimport ReportComment from \"./reportComment/ReportComment\";\r\nimport { auth } from \"../../firebase\";\r\n\r\nconst LinkToComment = (props) => {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [commentData, setCommentData] = useState([]);\r\n  const [articleData, setArticleData] = useState({});\r\n  const [replyIndex, setReplyIndex] = useState(null);\r\n  const [repliesToHide, setRepliesToHide] = useState([]);\r\n  const [reportComment, setReportComment] = useState(false);\r\n  const fullComLength = useRef(0);\r\n  useEffect(() => {\r\n    if (location) {\r\n      console.log(location);\r\n      console.log(location.state);\r\n      if (location.state) {\r\n        if (location.search) {\r\n          history.replace({\r\n            pathname: location.pathname,\r\n            state: {\r\n              ...location.state,\r\n            },\r\n          });\r\n        } else {\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n              location.state.articleLink || location.state.articlePath\r\n            }.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              console.log(data);\r\n              setArticleData({\r\n                author: data.author,\r\n                title: data.title,\r\n                subTitle: data.subTitle,\r\n                category: data.category.toLowerCase(),\r\n                shares: data.shares ? data.shares : 0,\r\n                date: data.date,\r\n                commentsLength: getComLengthIfObject(data.comments),\r\n                linkPath: `/${data.category}/${data.subCategory}/${splitTitle(\r\n                  data.title\r\n                )}/${data.id}`,\r\n              });\r\n              fullComLength.current = getComLengthIfObject(data.comments);\r\n              let arr = undefined;\r\n              const path = `${data.category}/${data.subCategory}/-${data.id}`;\r\n              for (let key in data.comments) {\r\n                if (location.state.parentCommentId) {\r\n                  if (key === location.state.parentCommentId) {\r\n                    let replies = [];\r\n                    console.log(data.comments[key]);\r\n                    arr = [{ ...data.comments[key] }];\r\n                    arr[0].path = `${path}/comments/${key}`;\r\n                    arr[0].id = key;\r\n                    let incr = 0;\r\n                    for (let ind of Object.values(data.comments[key].replies)) {\r\n                      replies.push(ind);\r\n                      const repId = Object.keys(data.comments[key].replies)[\r\n                        incr\r\n                      ];\r\n                      replies[\r\n                        replies.length - 1\r\n                      ].path = `${path}/comments/${key}/replies/${repId}`;\r\n                      replies[replies.length - 1].id = repId;\r\n                      incr++;\r\n                    }\r\n                    arr[0].replies = [...replies];\r\n                    console.log(arr[0]);\r\n                    console.log(arr);\r\n                    setCommentData(arr);\r\n                    const replyHideArray = handleReplyHide(arr);\r\n                    console.log(replyHideArray);\r\n                    if (replyHideArray) {\r\n                      setRepliesToHide(replyHideArray);\r\n                    }\r\n                  }\r\n                } else {\r\n                  if (key === location.state.commentId) {\r\n                    console.log(data.comments[key]);\r\n                    arr = [{ ...data.comments[key] }];\r\n                    arr[0].path = `${path}/comments/${key}`;\r\n                    arr[0].id = key;\r\n                    if (arr[0].replies) {\r\n                      let replies = [];\r\n                      let incr = 0;\r\n                      for (let ind of Object.values(\r\n                        data.comments[key].replies\r\n                      )) {\r\n                        replies.push(ind);\r\n                        const repId = Object.keys(data.comments[key].replies)[\r\n                          incr\r\n                        ];\r\n                        replies[\r\n                          replies.length - 1\r\n                        ].path = `${path}/comments/${key}/replies/${repId}`;\r\n                        replies[replies.length - 1].id = repId;\r\n                        incr++;\r\n                      }\r\n                      arr[0].replies = [...replies];\r\n                    }\r\n                    console.log(arr[0]);\r\n                    setCommentData(arr);\r\n                    const replyHideArray = handleReplyHide(arr);\r\n                    console.log(replyHideArray);\r\n                    if (replyHideArray) {\r\n                      setRepliesToHide(replyHideArray);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            });\r\n        }\r\n      } else {\r\n        if (location.search) {\r\n          const urlParam = JSON.parse(\r\n            location.search.slice(1).split(\"%22\").join('\"')\r\n          );\r\n          console.log(urlParam);\r\n          history.replace({\r\n            pathname: location.pathname,\r\n            state: {\r\n              ...urlParam,\r\n            },\r\n          });\r\n        } else {\r\n          const userId =\r\n            JSON.parse(localStorage.getItem(\"userObj\")).uId ||\r\n            auth.currentUser.uid;\r\n          let idFromPath = location.pathname.split(\"/\");\r\n          idFromPath = idFromPath[idFromPath.length - 1];\r\n          console.log(idFromPath);\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/users/${userId}/comments.json`\r\n          )\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n              for (let key in data) {\r\n                if (Object.keys(data[key])[0] === idFromPath) {\r\n                  console.log(Object.values(data[key])[0]);\r\n                  const obj = Object.values(data[key])[0];\r\n                  const path = `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${\r\n                    obj.articlePath\r\n                  }/comments/${\r\n                    obj.parentCommentId ? obj.parentCommentId : obj.commentId\r\n                  }.json`;\r\n\r\n                  console.log(path);\r\n                  console.log(obj);\r\n                  history.replace({\r\n                    pathname: location.pathname,\r\n                    state: {\r\n                      ...obj,\r\n                    },\r\n                  });\r\n                }\r\n              }\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }, [location]);\r\n\r\n  const handleReply = (ind) => {\r\n    setReplyIndex(ind);\r\n  };\r\n\r\n  const removeShowMore = () => {\r\n    setRepliesToHide([]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(props);\r\n  }, []);\r\n\r\n  const handleReport = (reportData) => {\r\n    console.log(reportData);\r\n    setReportComment(reportData);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (commentData) {\r\n      console.log(commentData);\r\n    }\r\n  }, [commentData]);\r\n\r\n  return (\r\n    <>\r\n      {reportComment && (\r\n        <Overlay navZ={true}>\r\n          <ReportComment\r\n            closeModal={setReportComment}\r\n            reportData={reportComment}\r\n          />\r\n        </Overlay>\r\n      )}\r\n      <div id={s.commentLinkContainer}>\r\n        <div id={s.commentPageContainerHeader}>\r\n          <div id={s.headerBundle}>\r\n            <h3\r\n              style={{\r\n                color: `${clrs[articleData.category]}`,\r\n              }}\r\n            >\r\n              {articleData.subTitle}\r\n            </h3>\r\n            <h1>\r\n              <Link to={articleData.linkPath}>{articleData.title}</Link>\r\n            </h1>\r\n          </div>\r\n          <div id={s.headerShares}>\r\n            <i class=\"fas fa-share-alt\"></i>{\" \"}\r\n            {articleData &&\r\n            articleData.shares &&\r\n            articleData.shares.constructor === Object\r\n              ? Object.keys(articleData.shares).length\r\n              : 0}\r\n          </div>\r\n        </div>\r\n        <div id={s.commentPageContainerBody}>\r\n          <div id={s.commentSidebarLeft}>\r\n            <div id={s.bundleDiv}>\r\n              <div id={s.postedData}>\r\n                <div>\r\n                  <i\r\n                    class=\"fas fa-user\"\r\n                    style={{\r\n                      backgroundColor: `rgb(209,213,219)`,\r\n                      color: \"#fff\",\r\n                      padding: \"1.2rem\",\r\n                      borderRadius: \".3rem\",\r\n                      fontSize: \"1.6rem\",\r\n                    }}\r\n                  ></i>\r\n                </div>\r\n                <div id={s.postedDataTwo}>\r\n                  <h3>{articleData.author}</h3>\r\n                  <p>{timeDifference(articleData.date)}</p>\r\n                </div>\r\n              </div>\r\n              <div id={s.commentsShare}>\r\n                <div>\r\n                  <h2>{fullComLength.current}</h2>\r\n                  <p>komentara</p>\r\n                </div>\r\n                <div>\r\n                  <h2>\r\n                    {articleData &&\r\n                    articleData.shares &&\r\n                    articleData.shares.constructor === Object\r\n                      ? Object.keys(articleData.shares).length\r\n                      : 0}\r\n                  </h2>\r\n                  <p>dijeljenja</p>\r\n                </div>\r\n              </div>\r\n              <div id={s.shareArticle}>\r\n                <ul>\r\n                  <li>\r\n                    <i class=\"fab fa-facebook\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"fab fa-twitter\"></i>\r\n                  </li>\r\n                  <li>\r\n                    <i class=\"far fa-envelope\"></i>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id={s.commentBodyContent}>\r\n            <div id={s.commentBodyContentHeader}>\r\n              <h3>Komentar</h3>\r\n              <div id={s.povratakNaClanak}>\r\n                <Link to={articleData.linkPath}>\r\n                  <i class=\"far fa-arrow-alt-circle-left\"></i>&nbsp;Povratak na\r\n                  ƒçlanak\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            {commentData &&\r\n              commentData.map((com, i) => {\r\n                if (i === replyIndex) {\r\n                  if (!com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                        <CommentReply\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          setCommentData={setCommentData}\r\n                          setReplyIndex={setReplyIndex}\r\n                          path={com.path}\r\n                          ref={fullComLength}\r\n                        />\r\n                      </React.Fragment>\r\n                    );\r\n                  } else if (com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                        <CommentReply\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          setCommentData={setCommentData}\r\n                          setReplyIndex={setReplyIndex}\r\n                          path={com.path}\r\n                          ref={fullComLength}\r\n                        />\r\n                        {com.replies\r\n                          ? com.replies.map((comRep, ind) => {\r\n                              return (\r\n                                <React.Fragment>\r\n                                  {repliesToHide.length && ind < 2 ? (\r\n                                    <CommentItem\r\n                                      key={uuid()}\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {!repliesToHide.length ? (\r\n                                    <CommentItem\r\n                                      key={uuid()}\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {repliesToHide.length && ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() => removeShowMore()}\r\n                                      showReply={com.replies.length - 2}\r\n                                    />\r\n                                  ) : null}\r\n                                </React.Fragment>\r\n                              );\r\n                            })\r\n                          : null}\r\n                      </React.Fragment>\r\n                    );\r\n                  }\r\n                } else if (Array.isArray(replyIndex)) {\r\n                  return (\r\n                    <React.Fragment key={uuid()}>\r\n                      <CommentItem\r\n                        commentIndex={i}\r\n                        commentIndexDB={com.id}\r\n                        comment={com.comment}\r\n                        displayName={com.userName}\r\n                        commentLikes={com.commentLikes}\r\n                        commentDislikes={com.commentDislikes}\r\n                        avatarColor={com.avatarColor}\r\n                        date={timeDifference(com.date)}\r\n                        path={com.path}\r\n                        setCommentData={setCommentData}\r\n                        commentData={commentData}\r\n                        handleReply={handleReply}\r\n                        handleReport={handleReport}\r\n                      />\r\n                      {com.replies &&\r\n                        com.replies.map((comRep, ind) => {\r\n                          return (\r\n                            <React.Fragment key={uuid()}>\r\n                              {repliesToHide.length && ind < 2 ? (\r\n                                <>\r\n                                  <CommentItem\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    date={timeDifference(comRep.date)}\r\n                                    path={comRep.path}\r\n                                    setCommentData={setCommentData}\r\n                                    commentData={commentData}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                  {replyIndex[1] === ind &&\r\n                                  replyIndex[0] === i ? (\r\n                                    <CommentReply\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={[com.id, comRep.id]}\r\n                                      setCommentData={setCommentData}\r\n                                      setReplyIndex={setReplyIndex}\r\n                                      path={com.path}\r\n                                      ref={fullComLength}\r\n                                    />\r\n                                  ) : null}\r\n                                </>\r\n                              ) : null}\r\n                              {!repliesToHide.length ? (\r\n                                <>\r\n                                  <CommentItem\r\n                                    commentIndex={[i, ind]}\r\n                                    commentIndexDB={comRep.id}\r\n                                    comment={comRep.comment}\r\n                                    displayName={comRep.userName}\r\n                                    commentLikes={comRep.commentLikes}\r\n                                    commentDislikes={comRep.commentDislikes}\r\n                                    avatarColor={comRep.avatarColor}\r\n                                    date={timeDifference(comRep.date)}\r\n                                    path={comRep.path}\r\n                                    setCommentData={setCommentData}\r\n                                    commentData={commentData}\r\n                                    handleReply={handleReply}\r\n                                    handleReport={handleReport}\r\n                                  />\r\n                                  {replyIndex[1] === ind &&\r\n                                  replyIndex[0] === i ? (\r\n                                    <CommentReply\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={[com.id, comRep.id]}\r\n                                      setCommentData={setCommentData}\r\n                                      setReplyIndex={setReplyIndex}\r\n                                      path={com.path}\r\n                                      ref={fullComLength}\r\n                                    />\r\n                                  ) : null}\r\n                                </>\r\n                              ) : null}\r\n                              {repliesToHide.length && ind === 1 ? (\r\n                                <CommentShow\r\n                                  onClick={() => removeShowMore()}\r\n                                  showReply={com.replies.length - 2}\r\n                                />\r\n                              ) : null}\r\n                            </React.Fragment>\r\n                          );\r\n                        })}\r\n                    </React.Fragment>\r\n                  );\r\n                } else {\r\n                  if (!com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                      </React.Fragment>\r\n                    );\r\n                  } else if (com.replies) {\r\n                    return (\r\n                      <React.Fragment key={uuid()}>\r\n                        <CommentItem\r\n                          commentIndex={i}\r\n                          commentIndexDB={com.id}\r\n                          comment={com.comment}\r\n                          displayName={com.userName}\r\n                          commentLikes={com.commentLikes}\r\n                          commentDislikes={com.commentDislikes}\r\n                          avatarColor={com.avatarColor}\r\n                          date={timeDifference(com.date)}\r\n                          path={com.path}\r\n                          setCommentData={setCommentData}\r\n                          commentData={commentData}\r\n                          handleReply={handleReply}\r\n                          handleReport={handleReport}\r\n                        />\r\n                        {com.replies\r\n                          ? com.replies.map((comRep, ind) => {\r\n                              return (\r\n                                <React.Fragment key={uuid()}>\r\n                                  {repliesToHide.length && ind < 2 ? (\r\n                                    <CommentItem\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {!repliesToHide.length ? (\r\n                                    <CommentItem\r\n                                      commentIndex={[i, ind]}\r\n                                      commentIndexDB={comRep.id}\r\n                                      comment={comRep.comment}\r\n                                      displayName={comRep.userName}\r\n                                      commentLikes={comRep.commentLikes}\r\n                                      commentDislikes={comRep.commentDislikes}\r\n                                      avatarColor={comRep.avatarColor}\r\n                                      date={timeDifference(comRep.date)}\r\n                                      path={comRep.path}\r\n                                      setCommentData={setCommentData}\r\n                                      commentData={commentData}\r\n                                      handleReply={handleReply}\r\n                                      handleReport={handleReport}\r\n                                    />\r\n                                  ) : null}\r\n                                  {repliesToHide.length && ind === 1 ? (\r\n                                    <CommentShow\r\n                                      onClick={() => removeShowMore()}\r\n                                      showReply={com.replies.length - 2}\r\n                                    />\r\n                                  ) : null}\r\n                                </React.Fragment>\r\n                              );\r\n                            })\r\n                          : null}\r\n                      </React.Fragment>\r\n                    );\r\n                  }\r\n                }\r\n              })}\r\n            <Link\r\n              to={`${articleData.linkPath}/komentari`}\r\n              style={{ textDecoration: \"none\" }}\r\n            >\r\n              <CommentShow showAll={fullComLength.current} />\r\n            </Link>\r\n          </div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LinkToComment;\r\n","import React from \"react\";\r\nimport LinkToComment from \"../components/comment/LinkToComment\";\r\n\r\nconst CommentLink = () => {\r\n  return <LinkToComment />;\r\n};\r\n\r\nexport default CommentLink;\r\n","import React from \"react\";\r\nimport LoginP from \"../components/Login/Login\";\r\nimport Nav from \"../components/Nav/Nav\";\r\n\r\nconst ResetPass = (props) => {\r\n  return (\r\n    <>\r\n      <Nav />\r\n      <LoginP>{props.children}</LoginP>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPass;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport s from \"./ResetPassword.module.css\";\r\n\r\nconst ResetPassword = () => {\r\n  const emailRef = useRef(null);\r\n  const [errMsg, setErrMsg] = useState(null);\r\n  const reset = async () => {\r\n    if (emailRef.current.value.length < 3) {\r\n      return;\r\n    }\r\n    let userNameLoginEmail = undefined;\r\n    if (!emailRef.current.value.includes(\"@\")) {\r\n      const res = await fetch(\r\n        `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/userNames/${emailRef.current.value}.json`\r\n      );\r\n      userNameLoginEmail = await res.json();\r\n      console.log(userNameLoginEmail);\r\n      if (!userNameLoginEmail) {\r\n        setErrMsg(\"Korisnicko ime ne postoji.\");\r\n        return;\r\n      }\r\n    }\r\n    auth\r\n      .sendPasswordResetEmail(userNameLoginEmail || emailRef.current.value)\r\n      .then((data) => {\r\n        console.log(data);\r\n        console.log(\"pass email sent\");\r\n        setErrMsg(\"Lozinka je resetovana, provjerite vasu email adresu.\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.code.includes(\"user-not-found\")) {\r\n          setErrMsg(\"Email adresa nije odgovarajuƒáa.\");\r\n        }\r\n      });\r\n    // window.Email.send({\r\n    //   SecureToken: \"3cd1b780-5c5d-4846-9d91-2d6e018085ff\",\r\n    //   To: \"denis5396@gmail.com\",\r\n    //   From: \"mahmudxsd3@gmail.com\",\r\n    //   Subject: \"ememail\",\r\n    //   Body: \"And this is the body\",\r\n    // }).then((message) => alert(message));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 id={s.header}>Zaboravljena lozinka</h1>\r\n      <p id={s.parag}>\r\n        Da biste resetovali va≈°u lozinku molimo unesite email koji ste <br />\r\n        koristili prilikom registracije.\r\n      </p>\r\n      <form id={s.form} onSubmit={(e) => e.preventDefault()}>\r\n        {errMsg && <p id={s.errMsg}>{errMsg}</p>}\r\n        <div id={s.inputBundle}>\r\n          <label htmlFor=\"email\">Korisniƒçko ime ili e-mail adresa</label>\r\n          <input id=\"email\" ref={emailRef} />\r\n        </div>\r\n        {/* <div\r\n          class=\"g-recaptcha\"\r\n          data-sitekey=\"6LdCcWkeAAAAAJXA7ZrPRvz9iSTFq5CLLiCzrX2u\"\r\n        ></div> */}\r\n        <button onClick={reset}>Resetuj</button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n","import React, { useEffect } from \"react\";\r\nimport { getComLengthIfObject } from \"../comment/Comment\";\r\nimport s from \"./TagArticle.module.css\";\r\n\r\nconst TagArticle = ({ art }) => {\r\n  useEffect(() => {\r\n    console.log(art);\r\n  }, []);\r\n  return (\r\n    <div className={s.tagArticle}>\r\n      <div className={s.imageCnt}>\r\n        <img src={art.imageText[0][0]} />\r\n      </div>\r\n      <div className={s.articleBodyCnt}>\r\n        <div className={s.subTitle}>\r\n          <h3>{art.subTitle}</h3>\r\n        </div>\r\n        <div className={s.title}>\r\n          <h3>{art.title}</h3>\r\n        </div>\r\n        <div className={s.txt}>\r\n          <p>{art.articleText.slice(3)}</p>\r\n        </div>\r\n        <div className={s.footer}>\r\n          <span className={s.date}>{`${art.date\r\n            .split(\" \")[0]\r\n            .split(\"-\")\r\n            .reverse()\r\n            .join(\".\")\r\n            .concat(\".\")} u ${art.date\r\n            .split(\" \")[1]\r\n            .split(\":\")\r\n            .slice(0, 2)\r\n            .join(\":\")}`}</span>\r\n          <div className={s.bundle}>\r\n            <span>\r\n              <svg\r\n                class=\"inline h-3 w-3\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path d=\"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z\"></path>\r\n                <path d=\"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z\"></path>\r\n              </svg>\r\n              <span>\r\n                &nbsp;{art.comments ? getComLengthIfObject(art.comments) : 0}\r\n              </span>\r\n            </span>\r\n            <span>\r\n              <svg\r\n                class=\"ml-1 inline h-3 w-3\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\"></path>\r\n              </svg>\r\n              <span>\r\n                &nbsp;\r\n                {art.shares.constructor === Object\r\n                  ? Object.keys(art.shares).length\r\n                  : 0}\r\n              </span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TagArticle;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { db } from \"../../firebase\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport TagArticle from \"./TagArticle\";\r\nimport s from \"./Tags.module.css\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { articleColors } from \"../AdminPanel/EditArticle/EditArticle\";\r\nimport { getComLengthIfObject } from \"../comment/Comment\";\r\n\r\nconst Tags = () => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const [articles, setArticles] = useState({});\r\n  const [term, setTerm] = useState([]);\r\n  const [changeRoute, setChangeRoute] = useState(false);\r\n  const [searchData, setSearchData] = useState([]);\r\n  const [mostPopData, setMostPopData] = useState([]);\r\n  const [noMatch, setNoMatch] = useState(false);\r\n  const init = useRef(undefined);\r\n  const idToStartFrom = useRef(undefined);\r\n  const indexToStartFrom = useRef(undefined);\r\n  const indexToStartFrom2 = useRef(undefined);\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    const term = history.location.pathname.split(\"/\");\r\n    console.log(history.location.pathname.split(\"/\")[1]);\r\n    console.log(history.location.search);\r\n    console.log(term);\r\n    if (\r\n      !term[1].includes(\"pretraga\") &&\r\n      !term[1].includes(\"najnovije\") &&\r\n      !term[1].includes(\"najƒçitanije\") &&\r\n      !term[1].includes(\"popularno\")\r\n    ) {\r\n      if (term[1] === \"Magazin\" && term[2] === \"Film-TV\") {\r\n        setTerm([term[term.length - 2], \"Film/TV\"]);\r\n      } else {\r\n        setTerm([term[term.length - 2], term[term.length - 1]]);\r\n      }\r\n    } else {\r\n      if (term[1].includes(\"pretraga\")) {\r\n        setTerm([\"pretraga\", history.location.search.split(\"?q=\")[1].trim()]);\r\n      } else if (term[1].includes(\"najnovije\")) {\r\n        setTerm([\"najnovije\", null]);\r\n      } else if (term[1].includes(\"najƒçitanije\")) {\r\n        setTerm([\"najƒçitanije\", null]);\r\n      } else if (term[1].includes(\"popularno\")) {\r\n        setTerm([\"popularno\", null]);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(term);\r\n    if (term.length && !init.current) {\r\n      init.current = \"defined\";\r\n      getData();\r\n    }\r\n  }, [term]);\r\n\r\n  const getDataFromPath = (data) => {\r\n    return new Promise((resolve) => {\r\n      const promises = [];\r\n      data.forEach((item) => {\r\n        promises.push(\r\n          fetch(\r\n            `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${item.articlePath}.json`\r\n          ).then((res) => res.json())\r\n        );\r\n        console.log(\r\n          `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${item.articlePath}.json`\r\n        );\r\n      });\r\n      const promisedData = Promise.all(promises);\r\n      promisedData.then((data) => {\r\n        resolve(data);\r\n      });\r\n    });\r\n  };\r\n\r\n  const getData = () => {\r\n    if (\r\n      term[0] !== \"pretraga\" &&\r\n      term[0] !== \"najnovije\" &&\r\n      term[0] !== \"najƒçitanije\" &&\r\n      term[0] !== \"popularno\"\r\n    ) {\r\n      const dbRef = db.ref(\r\n        `${\r\n          history.location.pathname.split(\"/\")[1] !== \"tagovi\"\r\n            ? \"articles\"\r\n            : \"related\"\r\n        }/${term[0]}/${term[1]}`\r\n      );\r\n      console.log(\r\n        `${\r\n          history.location.pathname.split(\"/\")[1] !== \"tagovi\"\r\n            ? \"articles\"\r\n            : \"related\"\r\n        }/${term[0]}/${term[1]}`\r\n      );\r\n      if (idToStartFrom.current && !articles[articles.current + 1]) {\r\n        dbRef\r\n          .orderByKey()\r\n          .endBefore(`${idToStartFrom.current}`)\r\n          .limitToLast(2)\r\n          .once(\"value\", (snap) => {\r\n            if (snap.val()) {\r\n              console.log(snap.val());\r\n              const data = Object.values(snap.val());\r\n              if (history.location.pathname.split(\"/\")[1] !== \"tagovi\") {\r\n                setArticles((old) => {\r\n                  let cpy = { ...old };\r\n                  cpy.current = cpy.current + 1;\r\n                  cpy[cpy.current] = data;\r\n                  console.log(cpy);\r\n                  return cpy;\r\n                });\r\n                idToStartFrom.current = Object.keys(snap.val())[0];\r\n              } else {\r\n                getDataFromPath(data).then((data) => {\r\n                  setArticles((old) => {\r\n                    let cpy = { ...old };\r\n                    cpy.current = cpy.current + 1;\r\n                    cpy[cpy.current] = data;\r\n                    console.log(cpy);\r\n                    return cpy;\r\n                  });\r\n                  idToStartFrom.current = Object.keys(snap.val())[0];\r\n                });\r\n              }\r\n            } else {\r\n              setArticles((old) => {\r\n                let cpy = { ...old };\r\n                cpy.current = null;\r\n                return cpy;\r\n              });\r\n            }\r\n          });\r\n      } else if (idToStartFrom.current) {\r\n        setArticles((old) => ({ ...old, current: old.current + 1 }));\r\n      } else if (!idToStartFrom.current) {\r\n        dbRef\r\n          .orderByKey()\r\n          .limitToLast(2)\r\n          .once(\"value\", (snap) => {\r\n            if (snap.val()) {\r\n              const data = Object.values(snap.val());\r\n              console.log(data);\r\n              if (history.location.pathname.split(\"/\")[1] !== \"tagovi\") {\r\n                setArticles({ 0: data, current: 0 });\r\n                idToStartFrom.current = Object.keys(snap.val())[0];\r\n              } else {\r\n                getDataFromPath(data).then((data) => {\r\n                  console.log(data);\r\n                  setArticles({ 0: data, current: 0 });\r\n                  idToStartFrom.current = Object.keys(snap.val())[0];\r\n                });\r\n              }\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      if (\r\n        term[0] === \"najnovije\" ||\r\n        term[0] === \"najƒçitanije\" ||\r\n        term[0] === \"popularno\"\r\n      ) {\r\n        if (!mostPopData.length) {\r\n          const promises = [\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/dates/2022/3/7.json`\r\n            ).then((res) => res.json()),\r\n            fetch(\r\n              `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/dates/2022/3/8.json`\r\n            ).then((res) => res.json()),\r\n          ];\r\n          const promisedData = Promise.all(promises);\r\n          promisedData.then((data) => {\r\n            const dataCmb = Object.values(data[0]).concat(\r\n              Object.values(data[1])\r\n            );\r\n            const final = dataCmb.map((item) => ({\r\n              articlePath: `${item.path}/${item.id}`,\r\n            }));\r\n            console.log(dataCmb);\r\n            console.log(final);\r\n            getDataFromPath(final).then((data) => {\r\n              if (term[0] === \"najnovije\") {\r\n                data.sort((a, b) => {\r\n                  if (new Date(a.date) - new Date(b.date) > 0) {\r\n                    return -1;\r\n                  } else if (new Date(a.date) - new Date(b.date) < 0) {\r\n                    return 1;\r\n                  } else {\r\n                    return 0;\r\n                  }\r\n                });\r\n                console.log(data);\r\n              } else if (term[0] === \"najƒçitanije\") {\r\n                data.sort((a, b) => {\r\n                  if (\r\n                    (a.visited.constructor === Object\r\n                      ? Object.keys(a.visited).length\r\n                      : 0) -\r\n                      (b.visited.constructor === Object\r\n                        ? Object.keys(b.visited).length\r\n                        : 0) >\r\n                    0\r\n                  ) {\r\n                    return -1;\r\n                  } else if (\r\n                    (a.visited.constructor === Object\r\n                      ? Object.keys(a.visited).length\r\n                      : 0) -\r\n                      (b.visited.constructor === Object\r\n                        ? Object.keys(b.visited).length\r\n                        : 0) <\r\n                    0\r\n                  ) {\r\n                    return 1;\r\n                  } else {\r\n                    return 0;\r\n                  }\r\n                });\r\n              } else if (term[0] === \"popularno\") {\r\n                data.sort((a, b) => {\r\n                  if (\r\n                    (a.visited.constructor === Object\r\n                      ? Object.keys(a.visited).length\r\n                      : 0) +\r\n                      (a.shares.constructor === Object\r\n                        ? Object.keys(a.shares).length\r\n                        : 0) +\r\n                      (a.comments ? getComLengthIfObject(a.comments) : 0) -\r\n                      ((b.visited.constructor === Object\r\n                        ? Object.keys(b.visited).length\r\n                        : 0) +\r\n                        (b.shares.constructor === Object\r\n                          ? Object.keys(b.shares).length\r\n                          : 0) +\r\n                        (b.comments ? getComLengthIfObject(b.comments) : 0)) >\r\n                    0\r\n                  ) {\r\n                    return -1;\r\n                  } else if (\r\n                    (a.visited.constructor === Object\r\n                      ? Object.keys(a.visited).length\r\n                      : 0) +\r\n                      (a.shares.constructor === Object\r\n                        ? Object.keys(a.shares).length\r\n                        : 0) +\r\n                      (a.comments ? getComLengthIfObject(a.comments) : 0) -\r\n                      ((b.visited.constructor === Object\r\n                        ? Object.keys(b.visited).length\r\n                        : 0) +\r\n                        (b.shares.constructor === Object\r\n                          ? Object.keys(b.shares).length\r\n                          : 0) +\r\n                        (b.comments ? getComLengthIfObject(b.comments) : 0)) <\r\n                    0\r\n                  ) {\r\n                    return 1;\r\n                  } else {\r\n                    return 0;\r\n                  }\r\n                });\r\n              }\r\n              console.log(data);\r\n              setMostPopData(data);\r\n              setArticles({ 0: data.slice(0, 10), current: 0 });\r\n              indexToStartFrom2.current = 10;\r\n            });\r\n          });\r\n        } else {\r\n          if (!articles[articles.current + 1]) {\r\n            setArticles((old) => {\r\n              let cpy = { ...old };\r\n              cpy.current = cpy.current + 1;\r\n              cpy[cpy.current] = mostPopData.slice(\r\n                indexToStartFrom2.current,\r\n                indexToStartFrom2.current + 10\r\n              );\r\n              indexToStartFrom2.current += 10;\r\n              if (!cpy[cpy.current].length) {\r\n                delete cpy[cpy.current];\r\n                cpy.current = null;\r\n              }\r\n              return cpy;\r\n            });\r\n          } else {\r\n            setArticles((old) => ({ ...old, current: old.current + 1 }));\r\n          }\r\n          window.scrollTo(0, 0);\r\n        }\r\n      } else {\r\n        if (!searchData.length) {\r\n          const promises = [];\r\n          const cats = Object.keys(articleColors).map((item) =>\r\n            item[0].toUpperCase().concat(item.slice(1))\r\n          );\r\n          for (let i = 0; i < cats.length; i++) {\r\n            promises.push(\r\n              fetch(\r\n                `https://klix-74c29-default-rtdb.europe-west1.firebasedatabase.app/articles/${cats[i]}.json`\r\n              ).then((res) => res.json())\r\n            );\r\n          }\r\n          const promisedData = Promise.all(promises);\r\n          promisedData.then((data) => {\r\n            console.log(data);\r\n            const tempData = [];\r\n            data.forEach((item) => {\r\n              for (let key in item) {\r\n                console.log(key);\r\n                for (let key2 in item[key]) {\r\n                  // console.log(item[key][key2]);\r\n                  const { title } = item[key][key2];\r\n                  // console.log(title && title.toLowerCase());\r\n                  const { articleText } = item[key][key2];\r\n                  if (term[1].includes(\" \")) {\r\n                    const loopTerms = term[1].toLowerCase().split(\" \");\r\n                    console.log(loopTerms);\r\n                    for (let i = 0; i < loopTerms.length; i++) {\r\n                      if (\r\n                        (title &&\r\n                          containsWord(title.toLowerCase(), loopTerms[i])) ||\r\n                        (articleText &&\r\n                          containsWord(articleText.toLowerCase(), loopTerms[i]))\r\n                      ) {\r\n                        console.log(title);\r\n                        tempData.push(item[key][key2]);\r\n                      }\r\n                    }\r\n                  } else {\r\n                    if (\r\n                      (title &&\r\n                        containsWord(\r\n                          title.toLowerCase(),\r\n                          term[1].toLowerCase()\r\n                        )) ||\r\n                      (articleText &&\r\n                        containsWord(\r\n                          articleText.toLowerCase(),\r\n                          term[1].toLowerCase()\r\n                        ))\r\n                    ) {\r\n                      tempData.push(item[key][key2]);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            });\r\n            if (tempData.length) {\r\n              tempData.sort((a, b) => {\r\n                if (new Date(a.date) - new Date(b.date) > 0) {\r\n                  return -1;\r\n                } else if (new Date(a.date) - new Date(b.date) < 0) {\r\n                  return 1;\r\n                } else {\r\n                  return 0;\r\n                }\r\n              });\r\n              console.log(tempData);\r\n              setSearchData(tempData);\r\n              setArticles({ 0: tempData.slice(0, 2), current: 0 });\r\n              indexToStartFrom.current = 2;\r\n            } else {\r\n              setArticles({ data: [], current: null });\r\n              setNoMatch(true);\r\n            }\r\n          });\r\n        } else {\r\n          if (\r\n            !searchData.slice(\r\n              indexToStartFrom.current,\r\n              indexToStartFrom.current + 2\r\n            )[0] &&\r\n            !searchData.slice(\r\n              indexToStartFrom.current,\r\n              indexToStartFrom.current + 2\r\n            )[1]\r\n          ) {\r\n            // console.log(\r\n            //   searchData.slice(\r\n            //     indexToStartFrom.current,\r\n            //     indexToStartFrom.current + 2\r\n            //   )[0]\r\n            // );\r\n            // console.log(\r\n            //   searchData.slice(\r\n            //     indexToStartFrom.current,\r\n            //     indexToStartFrom.current + 2\r\n            //   )[1]\r\n            // );\r\n            setArticles((old) => {\r\n              let cpy = { ...old };\r\n              cpy.current = null;\r\n              return cpy;\r\n            });\r\n          } else {\r\n            setArticles((old) => {\r\n              let cpy = { ...old };\r\n              cpy.current = cpy.current + 1;\r\n              cpy[cpy.current] = searchData.slice(\r\n                indexToStartFrom.current,\r\n                indexToStartFrom.current + 2\r\n              );\r\n              indexToStartFrom.current += 2;\r\n              return cpy;\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePrev = () => {\r\n    if (searchData.length) {\r\n      if (articles.current !== null) {\r\n        indexToStartFrom.current -= 2;\r\n      }\r\n    } else if (mostPopData.length) {\r\n      window.scrollTo(0, 0);\r\n    }\r\n    setArticles((old) => ({\r\n      ...old,\r\n      current:\r\n        old.current === null ? Object.keys(old).length - 2 : old.current - 1,\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(articles);\r\n  }, [articles]);\r\n  useEffect(() => {\r\n    if (init.current !== undefined) {\r\n      idToStartFrom.current = undefined;\r\n      const term = history.location.pathname.split(\"/\");\r\n      if (\r\n        !term[1].includes(\"pretraga\") &&\r\n        !term[1].includes(\"najnovije\") &&\r\n        !term[1].includes(\"najƒçitanije\") &&\r\n        !term[1].includes(\"popularno\")\r\n      ) {\r\n        if (term[1] === \"Magazin\" && term[2] === \"Film-TV\") {\r\n          setTerm([term[term.length - 2], \"Film/TV\"]);\r\n        } else {\r\n          setTerm([term[term.length - 2], term[term.length - 1]]);\r\n        }\r\n      } else {\r\n        if (term[1].includes(\"pretraga\")) {\r\n          setTerm([\"pretraga\", history.location.search.split(\"?q=\")[1].trim()]);\r\n        } else if (term[1].includes(\"najnovije\")) {\r\n          setTerm([\"najnovije\", null]);\r\n        } else if (term[1].includes(\"najƒçitanije\")) {\r\n          setTerm([\"najƒçitanije\", null]);\r\n        } else if (term[1].includes(\"popularno\")) {\r\n          setTerm([\"popularno\", null]);\r\n        }\r\n      }\r\n      setChangeRoute(true);\r\n      setNoMatch(false);\r\n      if (searchData.length) {\r\n        setArticles({});\r\n        setSearchData([]);\r\n      } else if (mostPopData.length) {\r\n        setArticles({});\r\n        setMostPopData([]);\r\n      }\r\n    }\r\n  }, [location]);\r\n  useEffect(() => {\r\n    if (changeRoute && init.current !== undefined && !noMatch) {\r\n      window.scrollTo(0, 0);\r\n      getData();\r\n    }\r\n  }, [location, changeRoute, term, noMatch]);\r\n\r\n  function containsWord(str, word) {\r\n    return str.match(new RegExp(\"\\\\b\" + word + \"\\\\b\")) != null;\r\n  }\r\n\r\n  return (\r\n    <div id={s.tagsCnt}>\r\n      <div id={s.tagsLeft}>\r\n        <div id={s.tagsLeftHeader}>\r\n          <h3>\r\n            <Link to=\"/\">Poƒçetna</Link>{\" \"}\r\n            {history.location.pathname.split(\"/\")[1] !== \"tagovi\" &&\r\n            term[0] !== \"pretraga\" &&\r\n            term[1] !== null ? (\r\n              <>\r\n                <span>{term[0]}</span> <span>{term[1]}</span>\r\n              </>\r\n            ) : (\r\n              <span>\r\n                {term.length\r\n                  ? term[1]\r\n                    ? term[1]\r\n                    : term[0][0].toUpperCase().concat(term[0].slice(1))\r\n                  : null}\r\n              </span>\r\n            )}\r\n          </h3>\r\n        </div>\r\n        <div id={s.tagsLeftBody}>\r\n          {Object.keys(articles).length ? (\r\n            articles.current !== null ? (\r\n              articles[articles.current].map((art) => (\r\n                <TagArticle key={uuid()} art={art} />\r\n              ))\r\n            ) : (\r\n              <div id={s.nill}>Nema vijesti.</div>\r\n            )\r\n          ) : null}\r\n        </div>\r\n        {!articles.data ? (\r\n          <div id={s.tagsLeftFooter}>\r\n            {Object.keys(articles).length ? (\r\n              articles.current !== 0 ? (\r\n                <button onClick={handlePrev}>Prethodna</button>\r\n              ) : null\r\n            ) : null}\r\n            {Object.keys(articles).length ? (\r\n              articles.current !== null ? (\r\n                <button onClick={getData}>Sljedeƒáa</button>\r\n              ) : null\r\n            ) : null}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n      <div id={s.tagsRight}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import React from \"react\";\r\nimport Tags from \"../components/Tagovi/Tags\";\r\n\r\nconst TagsPage = () => {\r\n  return <Tags />;\r\n};\r\n\r\nexport default TagsPage;\r\n","import { Route, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport Nav from \"./components/Nav/Nav\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport Footer from \"./components/Footer/Footer\";\nimport Profile from \"./pages/Profile\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport LoginContext from \"./context\";\nimport { auth } from \"./firebase\";\nimport AdminPanel from \"./pages/AdminPanel\";\nimport LoginForm from \"./components/Login/LoginForm\";\nimport UserInfo from \"./components/UserInfo/UserInfo\";\nimport Overlay from \"./components/Overlay/Overlay\";\nimport Article from \"./pages/Article\";\nimport EditArticlesPage from \"./pages/EditArticles\";\nimport Comment from \"./components/comment/Comment\";\nimport Comments from \"./pages/Comments\";\nimport CommentRulesPage from \"./pages/CommentRulesPage\";\nimport CommentLink from \"./pages/CommentLink\";\nimport ResetPass from \"./pages/ResetPass\";\nimport ResetPassword from \"./components/Login/ResetPassword\";\nimport TagsPage from \"./pages/TagsPage\";\n\nfunction App() {\n  const ctx = useContext(LoginContext);\n\n  const clearStorage = () => {\n    const session = sessionStorage.getItem(\"ref\");\n    if (session == null) {\n      localStorage.removeItem(\"remove\");\n      localStorage.removeItem(\"userObj\");\n      ctx.logout();\n    }\n    sessionStorage.setItem(\"ref\", 1);\n  };\n  useEffect(() => {\n    // window.addEventListener('load', clearStorage);\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        // alert('userhere');\n      } else if (!user) {\n        if (localStorage.getItem(\"token\")) {\n        } else {\n          ctx.logout();\n        }\n      }\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Nav />\n      <Switch>\n        <Route path=\"/\" exact>\n          <Home route=\"Poƒçetna\" />\n        </Route>\n        <Route path=\"/Vijesti\" exact>\n          <Home route=\"Vijesti\" />\n        </Route>\n        <Route path=\"/Biznis\" exact>\n          <Home route=\"Biznis\" />\n        </Route>\n        <Route path=\"/Sport\" exact>\n          <Home route=\"Sport\" />\n        </Route>\n        <Route path=\"/Magazin\" exact>\n          <Home route=\"Magazin\" />\n        </Route>\n        <Route path=\"/Lifestyle\" exact>\n          <Home route=\"Lifestyle\" />\n        </Route>\n        <Route path=\"/Scitech\" exact>\n          <Home route=\"Scitech\" />\n        </Route>\n        <Route path=\"/Auto\" exact>\n          <Home route=\"Auto\" />\n        </Route>\n        <Route path=\"/profil/:user\" exact>\n          <Login>\n            <UserInfo />\n          </Login>\n        </Route>\n        <Route path=\"/pretraga\">\n          <TagsPage />\n        </Route>\n        <Route path=\"/najnovije\">\n          <TagsPage />\n        </Route>\n        <Route path=\"/najƒçitanije\">\n          <TagsPage />\n        </Route>\n        <Route path=\"/popularno\">\n          <TagsPage />\n        </Route>\n        <Route path=\"/tagovi/:category/:tagLabel\" exact>\n          <TagsPage />\n        </Route>\n        <Route path=\"/:category/:subcategory\" exact>\n          <TagsPage />\n        </Route>\n        <Route path=\"/login\">\n          <Login>\n            <LoginForm />\n          </Login>\n        </Route>\n        <Route path=\"/mojprofil\">\n          <Profile />\n        </Route>\n        <Route path=\"/adminpanel\">\n          <AdminPanel />\n        </Route>\n        <Route path=\"/editarticles\">\n          <EditArticlesPage />\n        </Route>\n        <Route path=\"/:category/:subCategory/:title/:articleId/komentari\">\n          <Comments />\n        </Route>\n        <Route path=\"/:category/:subCategory/:title/:articleId\">\n          <Article />\n        </Route>\n        <Route path=\"/komentar/:commentId\">\n          <CommentLink />\n        </Route>\n        <Route path=\"/komentari\">\n          <CommentRulesPage />\n        </Route>\n        <Route path=\"/resetpass\">\n          <ResetPass>\n            <ResetPassword />\n          </ResetPass>\n        </Route>\n      </Switch>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { LoginContextProvider } from \"./context\";\n\nReactDOM.render(\n  <LoginContextProvider>\n    <BrowserRouter basename=\"/klix\">\n      <App />\n    </BrowserRouter>\n  </LoginContextProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}